{"version":3,"sources":["../../../../src/parts/workflow-common/component-states/WorkflowCommonCardState.js"],"names":["types","sessionStore","uiEventBus","WorkflowCommonUIState","model","versionNumber","mainTabIndex","actions","self","setVersionNumber","v","setMainTabIndex","index","getUIState","idSuffix","id","entry","map","get","create","set","listenTo","listener","event","removeStartsWith"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAASA,KAAT,QAAsB,iBAAtB;AACA,SAASC,YAAT,EAAuBC,UAAvB,QAAyC,0CAAzC;AAEA,MAAMC,qBAAqB,GAAGH,KAAK,CAChCI,KAD2B,CACrB,uBADqB,EACI;AAC9BC,EAAAA,aAAa,EAAE,CAAC,CADc;AAE9BC,EAAAA,YAAY,EAAE;AAFgB,CADJ,EAK3BC,OAL2B,CAKnBC,IAAI,KAAK;AAChBC,EAAAA,gBAAgB,CAACC,CAAD,EAAI;AAClBF,IAAAA,IAAI,CAACH,aAAL,GAAqBK,CAArB;AACD,GAHe;;AAIhBC,EAAAA,eAAe,CAACC,KAAD,EAAQ;AACrBJ,IAAAA,IAAI,CAACF,YAAL,GAAoBM,KAApB;AACD;;AANe,CAAL,CALe,CAA9B;;AAcA,SAASC,UAAT,CAAoBC,QAApB,EAA8B;AAC5B,QAAMC,EAAE,GAAI,yBAAwBD,QAAS,EAA7C;AACA,QAAME,KAAK,GAAGf,YAAY,CAACgB,GAAb,CAAiBC,GAAjB,CAAqBH,EAArB,KAA4BZ,qBAAqB,CAACgB,MAAtB,EAA1C;AAEAlB,EAAAA,YAAY,CAACgB,GAAb,CAAiBG,GAAjB,CAAqBL,EAArB,EAAyBC,KAAzB;AACA,SAAOA,KAAP;AACD;;AAEDd,UAAU,CAACmB,QAAX,CAAoB,2BAApB,EAAiD;AAC/CN,EAAAA,EAAE,EAAE,uBAD2C;AAE/CO,EAAAA,QAAQ,EAAE,MAAMC,KAAN,IAAe;AACvBtB,IAAAA,YAAY,CAACuB,gBAAb,CAA+B,yBAAwBD,KAAK,CAACR,EAAG,EAAhE;AACD;AAJ8C,CAAjD;AAOAb,UAAU,CAACmB,QAAX,CAAoB,mBAApB,EAAyC;AACvCN,EAAAA,EAAE,EAAE,uBADmC;AAEvCO,EAAAA,QAAQ,EAAE,MAAMC,KAAN,IAAe;AACvBtB,IAAAA,YAAY,CAACuB,gBAAb,CAA+B,yBAAwBD,KAAK,CAACR,EAAG,EAAhE;AACD;AAJsC,CAAzC;AAOA,eAAeF,UAAf","sourcesContent":["/*\n *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\").\n *  You may not use this file except in compliance with the License.\n *  A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n *  or in the \"license\" file accompanying this file. This file is distributed\n *  on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *  express or implied. See the License for the specific language governing\n *  permissions and limitations under the License.\n */\n\nimport { types } from 'mobx-state-tree';\nimport { sessionStore, uiEventBus } from '@aws-ee/base-ui/dist/models/SessionStore';\n\nconst WorkflowCommonUIState = types\n  .model('WorkflowCommonUIState', {\n    versionNumber: -1,\n    mainTabIndex: 0,\n  })\n  .actions(self => ({\n    setVersionNumber(v) {\n      self.versionNumber = v;\n    },\n    setMainTabIndex(index) {\n      self.mainTabIndex = index;\n    },\n  }));\n\nfunction getUIState(idSuffix) {\n  const id = `WorkflowCommonUIState-${idSuffix}`;\n  const entry = sessionStore.map.get(id) || WorkflowCommonUIState.create();\n\n  sessionStore.map.set(id, entry);\n  return entry;\n}\n\nuiEventBus.listenTo('workflowTemplatePublished', {\n  id: 'WorkflowCommonUIState',\n  listener: async event => {\n    sessionStore.removeStartsWith(`WorkflowCommonUIState-${event.id}`);\n  },\n});\n\nuiEventBus.listenTo('workflowPublished', {\n  id: 'WorkflowCommonUIState',\n  listener: async event => {\n    sessionStore.removeStartsWith(`WorkflowCommonUIState-${event.id}`);\n  },\n});\n\nexport default getUIState;\n"],"file":"WorkflowCommonCardState.js"}