{"version":3,"sources":["../../../../../src/parts/workflow-common/drafts/edit/WorkflowCommonStepEditorCard.js"],"names":["_","React","observer","inject","decorate","action","computed","Segment","Icon","Accordion","WorkflowCommonStepEditorCard","Component","handleExpandContent","event","stopPropagation","preventDefault","editor","getStepEditor","setContentExpanded","contentExpanded","handleDelete","onDelete","props","noop","getStep","stepEditor","step","canDelete","undefined","canMove","render","className","renderContent","opened","derivedTitle","title","templateId","templateVer","children"],"mappings":"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","sourcesContent":["/*\n *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\").\n *  You may not use this file except in compliance with the License.\n *  A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n *  or in the \"license\" file accompanying this file. This file is distributed\n *  on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *  express or implied. See the License for the specific language governing\n *  permissions and limitations under the License.\n */\n\nimport _ from 'lodash';\nimport React from 'react';\nimport { observer, inject } from 'mobx-react';\nimport { decorate, action, computed } from 'mobx';\nimport { Segment, Icon, Accordion } from 'semantic-ui-react';\n\n// expected props\n// - stepEditor - a WorkflowStepEditor model or a WorkflowTemplateStepEditor model (via props)\n// - onDelete - called when the step is to be deleted, passed (step) (via props)\n// - canDelete (via props) defaults to true\n// - canMove (via props) defaults to true\n// - className (via props)\nclass WorkflowCommonStepEditorCard extends React.Component {\n  get contentExpanded() {\n    return this.getStepEditor().contentExpanded;\n  }\n\n  getStepEditor() {\n    return this.props.stepEditor;\n  }\n\n  getStep() {\n    return this.getStepEditor().step;\n  }\n\n  get canDelete() {\n    return this.props.canDelete === undefined ? true : this.props.canDelete;\n  }\n\n  get canMove() {\n    return this.props.canMove === undefined ? true : this.props.canMove;\n  }\n\n  handleExpandContent = event => {\n    event.stopPropagation();\n    event.preventDefault();\n\n    const editor = this.getStepEditor();\n    editor.setContentExpanded(!this.contentExpanded);\n  };\n\n  handleDelete = event => {\n    event.stopPropagation(); // this was needed, otherwise, the handleClick was called after\n    // which resulted in mobx state tree warning about instance being accessed after being deleted\n    const onDelete = this.props.onDelete || _.noop;\n\n    onDelete(this.getStep());\n  };\n\n  render() {\n    const className = this.props.className || 'p0 pl1';\n    const step = this.getStep();\n\n    return (\n      <Segment size=\"small\" className={className} clearing>\n        {this.renderContent(step)}\n      </Segment>\n    );\n  }\n\n  renderContent(step) {\n    const opened = this.contentExpanded;\n    const canDelete = this.canDelete;\n    const canMove = this.canMove;\n\n    return (\n      <Accordion className=\"overflow-hidden pr1\">\n        <Accordion.Title active={opened} index={0} onClick={this.handleExpandContent}>\n          <div className=\"flex\">\n            {canMove && (\n              <div className=\"ml1 mr1 mt1 cursor-grab\">\n                <Icon name=\"align justify\" color=\"grey\" />\n              </div>\n            )}\n            {!canMove && <div className=\"ml1 mr1 mt1\" />}\n            <Icon name=\"dropdown\" className=\"mt75\" />\n            <div className=\"ellipsis flex-auto mt1\">\n              <div className=\"ellipsis\">{step.derivedTitle || step.title}</div>\n              <div className=\"ellipsis pr1 breakout fs-9 color-grey\">\n                {step.templateId} v{step.templateVer}\n              </div>\n            </div>\n            {canDelete && (\n              <div className=\"pl1 pr1 pt1\" onClick={this.handleDelete}>\n                <Icon name=\"trash alternate outline\" className=\"cursor-pointer\" />\n              </div>\n            )}\n          </div>\n        </Accordion.Title>\n        <Accordion.Content active={opened} className=\"p2 pt3 mb1 cursor-default\">\n          {this.props.children}\n        </Accordion.Content>\n      </Accordion>\n    );\n  }\n}\n\n// see https://medium.com/@mweststrate/mobx-4-better-simpler-faster-smaller-c1fbc08008da\ndecorate(WorkflowCommonStepEditorCard, {\n  contentExpanded: computed,\n  canDelete: computed,\n  canMove: computed,\n  handleDelete: action,\n  handleExpandContent: action,\n});\n\nexport default inject()(observer(WorkflowCommonStepEditorCard));\n"],"file":"WorkflowCommonStepEditorCard.js"}