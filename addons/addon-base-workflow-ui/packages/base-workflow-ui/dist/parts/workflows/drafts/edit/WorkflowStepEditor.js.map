{"version":3,"sources":["../../../../../src/parts/workflows/drafts/edit/WorkflowStepEditor.js"],"names":["_","React","observer","inject","decorate","action","computed","WorkflowCommonStepEditorCard","WorkflowCommonStepDescEditor","WorkflowCommonStepPropsEditor","WorkflowCommonStepConfigEditor","WorkflowStepEditor","Component","handleDelete","step","onDelete","props","noop","handleSave","onSave","handleConfigSave","configs","stepEditorModel","getStepEditor","applyConfigs","stepEditor","getStep","canDelete","undefined","canMove","render","className","renderDescription","renderConfiguration","renderProps","editorModel"],"mappings":"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","sourcesContent":["/*\n *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\").\n *  You may not use this file except in compliance with the License.\n *  A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n *  or in the \"license\" file accompanying this file. This file is distributed\n *  on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *  express or implied. See the License for the specific language governing\n *  permissions and limitations under the License.\n */\n\nimport _ from 'lodash';\nimport React from 'react';\nimport { observer, inject } from 'mobx-react';\nimport { decorate, action, computed } from 'mobx';\n\nimport WorkflowCommonStepEditorCard from '../../../workflow-common/drafts/edit/WorkflowCommonStepEditorCard';\nimport WorkflowCommonStepDescEditor from '../../../workflow-common/drafts/edit/WorkflowCommonStepDescEditor';\nimport WorkflowCommonStepPropsEditor from '../../../workflow-common/drafts/edit/WorkflowCommonStepPropsEditor';\nimport WorkflowCommonStepConfigEditor from '../../../workflow-common/drafts/edit/WorkflowCommonStepConfigEditor';\n\n// expected props\n// - stepEditor - a WorkflowStepEditor model instance (via props)\n// - onSave - called when the configuration is saved (via props)\n// - onDelete - called when the step is to be deleted, passed (step) (via props)\n// - canDelete (via props) defaults to true\n// - canMove (via props) defaults to true\n// - className (via props)\n// - location (from react router)\nclass WorkflowStepEditor extends React.Component {\n  getStepEditor() {\n    return this.props.stepEditor;\n  }\n\n  getStep() {\n    return this.getStepEditor().step;\n  }\n\n  get canDelete() {\n    return this.props.canDelete === undefined ? true : this.props.canDelete;\n  }\n\n  get canMove() {\n    return this.props.canMove === undefined ? true : this.props.canMove;\n  }\n\n  handleDelete = step => {\n    const onDelete = this.props.onDelete || _.noop;\n    onDelete(step);\n  };\n\n  handleSave = async () => {\n    const onSave = this.props.onSave || _.noop;\n\n    return onSave();\n  };\n\n  handleConfigSave = async configs => {\n    const onSave = this.props.onSave || _.noop;\n    const stepEditorModel = this.getStepEditor();\n\n    stepEditorModel.applyConfigs(configs);\n\n    return onSave();\n  };\n\n  render() {\n    const className = this.props.className;\n    const stepEditor = this.getStepEditor();\n    const canDelete = this.canDelete;\n    const canMove = this.canMove;\n\n    return (\n      <WorkflowCommonStepEditorCard\n        stepEditor={stepEditor}\n        canDelete={canDelete}\n        canMove={canMove}\n        className={className}\n        onDelete={this.handleDelete}\n      >\n        <>\n          {this.renderDescription()}\n          {this.renderConfiguration()}\n          {this.renderProps()}\n        </>\n      </WorkflowCommonStepEditorCard>\n    );\n  }\n\n  renderDescription() {\n    const editorModel = this.getStepEditor();\n    return <WorkflowCommonStepDescEditor stepEditor={editorModel} onSave={this.handleSave} className=\"mb4\" />;\n  }\n\n  renderConfiguration() {\n    const editorModel = this.getStepEditor();\n\n    return <WorkflowCommonStepConfigEditor stepEditor={editorModel} onSave={this.handleConfigSave} className=\"mb4\" />;\n  }\n\n  renderProps() {\n    const editorModel = this.getStepEditor();\n    return <WorkflowCommonStepPropsEditor stepEditor={editorModel} onSave={this.handleSave} className=\"mb2\" />;\n  }\n}\n\n// see https://medium.com/@mweststrate/mobx-4-better-simpler-faster-smaller-c1fbc08008da\ndecorate(WorkflowStepEditor, {\n  canDelete: computed,\n  canMove: computed,\n  handleDelete: action,\n  handleSave: action,\n  handleConfigSave: action,\n});\n\nexport default inject()(observer(WorkflowStepEditor));\n"],"file":"WorkflowStepEditor.js"}