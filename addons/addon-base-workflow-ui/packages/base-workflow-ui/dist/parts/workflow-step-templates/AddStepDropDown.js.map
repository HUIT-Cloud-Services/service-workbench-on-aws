{"version":3,"sources":["../../../src/parts/workflow-step-templates/AddStepDropDown.js"],"names":["_","React","observer","inject","decorate","action","runInAction","observable","Dropdown","c","AddStepDropDown","Component","constructor","props","handleChange","_event","value","isEmpty","selectedStep","undefined","store","getStore","step","getTemplate","latest","handleClose","e","_d","onSelected","noop","stepTemplatesStore","getSelectedStep","getStepDropDownOptions","list","options","map","template","text","title","id","render","disabled","className"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,OAAOA,CAAP,MAAc,QAAd;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAmBC,MAAnB,QAAiC,YAAjC;AACA,SAASC,QAAT,EAAmBC,MAAnB,EAA2BC,WAA3B,EAAwCC,UAAxC,QAA0D,MAA1D;AACA,SAASC,QAAT,QAAyB,mBAAzB;AACA,OAAOC,CAAP,MAAc,YAAd,C,CAEA;AACA;AACA;AACA;AACA;;AACA,MAAMC,eAAN,SAA8BT,KAAK,CAACU,SAApC,CAA8C;AAC5CC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SA0BnBC,YA1BmB,GA0BJ,CAACC,MAAD,EAAS;AAAEC,MAAAA;AAAF,KAAT,KAAuB;AACpC,UAAIhB,CAAC,CAACiB,OAAF,CAAUD,KAAV,CAAJ,EAAsB;AACpB,aAAKE,YAAL,GAAoBC,SAApB;AACA;AACD;;AAED,YAAMC,KAAK,GAAG,KAAKC,QAAL,EAAd;AACA,YAAMC,IAAI,GAAGF,KAAK,CAACG,WAAN,CAAkBP,KAAlB,CAAb;;AACA,UAAIM,IAAI,KAAKH,SAAb,EAAwB;AACtB,aAAKD,YAAL,GAAoBC,SAApB;AACA;AACD;;AACD,WAAKD,YAAL,GAAoBI,IAAI,CAACE,MAAzB;AACD,KAvCkB;;AAAA,SAyCnBC,WAzCmB,GAyCL,CAACC,CAAD,EAAIC,EAAJ,KAAW;AACvB,YAAMC,UAAU,GAAG,KAAKf,KAAL,CAAWe,UAAX,IAAyB5B,CAAC,CAAC6B,IAA9C;AACA,YAAMP,IAAI,GAAG,KAAKJ,YAAlB;AAEA,WAAKA,YAAL,GAAoBC,SAApB;AACA,UAAIO,CAAC,KAAKP,SAAV,EAAqB,OALE,CAKM;;AAC7BS,MAAAA,UAAU,CAACN,IAAD,CAAV;AACD,KAhDkB;;AAEjBhB,IAAAA,WAAW,CAAC,MAAM;AAChB,WAAKY,YAAL,GAAoBC,SAApB;AACD,KAFU,CAAX;AAGD;;AAEDE,EAAAA,QAAQ,GAAG;AACT,WAAO,KAAKR,KAAL,CAAWiB,kBAAlB;AACD;;AAEDC,EAAAA,eAAe,GAAG;AAChB,WAAO,KAAKb,YAAZ;AACD;;AAEDc,EAAAA,sBAAsB,GAAG;AACvB,UAAMZ,KAAK,GAAG,KAAKC,QAAL,EAAd;AACA,UAAMY,IAAI,GAAGb,KAAK,CAACa,IAAnB;;AACA,UAAMC,OAAO,GAAGlC,CAAC,CAACmC,GAAF,CAAMF,IAAN,EAAYG,QAAQ,KAAK;AACvCC,MAAAA,IAAI,EAAED,QAAQ,CAACZ,MAAT,CAAgBc,KADiB;AAEvCtB,MAAAA,KAAK,EAAEoB,QAAQ,CAACG;AAFuB,KAAL,CAApB,CAAhB;;AAKA,WAAOL,OAAP;AACD;;AA0BDM,EAAAA,MAAM,GAAG;AACP,UAAMC,QAAQ,GAAG,KAAK5B,KAAL,CAAW4B,QAAX,IAAuB,KAAxC;AACA,UAAMC,SAAS,GAAG,KAAK7B,KAAL,CAAW6B,SAA7B;AACA,UAAMpB,IAAI,GAAG,KAAKS,eAAL,EAAb;AACA,UAAMG,OAAO,GAAG,KAAKF,sBAAL,EAAhB;;AACA,UAAMf,OAAO,GAAGjB,CAAC,CAACiB,OAAF,CAAUK,IAAV,CAAhB;;AACA,UAAMe,IAAI,GAAGpB,OAAO,GAAG,UAAH,GAAgBK,IAAI,CAACgB,KAAzC;AACA,UAAMtB,KAAK,GAAGC,OAAO,GAAG,EAAH,GAAQK,IAAI,CAACiB,EAAlC;AAEA,wBACE,oBAAC,QAAD;AACE,MAAA,MAAM,MADR;AAEE,MAAA,SAAS,EAAE9B,CAAC,CAAC,MAAD,EAASiC,SAAT,CAFd;AAGE,MAAA,KAAK,MAHP;AAIE,MAAA,OAAO,MAJT;AAKE,MAAA,IAAI,EAAC,MALP;AAME,MAAA,OAAO,EAAER,OANX;AAOE,MAAA,MAAM,MAPR;AAQE,MAAA,KAAK,EAAC,MARR;AASE,MAAA,IAAI,EAAEG,IATR;AAUE,MAAA,KAAK,EAAErB,KAVT;AAWE,MAAA,QAAQ,EAAE,KAAKF,YAXjB;AAYE,MAAA,OAAO,EAAE,KAAKW,WAZhB;AAaE,MAAA,QAAQ,EAAEgB;AAbZ,MADF;AAiBD;;AA7E2C,C,CAgF9C;;;AACArC,QAAQ,CAACM,eAAD,EAAkB;AACxBQ,EAAAA,YAAY,EAAEX,UADU;AAExBO,EAAAA,YAAY,EAAET,MAFU;AAGxBoB,EAAAA,WAAW,EAAEpB;AAHW,CAAlB,CAAR;AAMA,eAAeF,MAAM,CAAC,oBAAD,CAAN,CAA6BD,QAAQ,CAACQ,eAAD,CAArC,CAAf","sourcesContent":["/*\n *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\").\n *  You may not use this file except in compliance with the License.\n *  A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n *  or in the \"license\" file accompanying this file. This file is distributed\n *  on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *  express or implied. See the License for the specific language governing\n *  permissions and limitations under the License.\n */\n\nimport _ from 'lodash';\nimport React from 'react';\nimport { observer, inject } from 'mobx-react';\nimport { decorate, action, runInAction, observable } from 'mobx';\nimport { Dropdown } from 'semantic-ui-react';\nimport c from 'classnames';\n\n// expected props\n// - stepTemplatesStore (via props)\n// - onSelected (via props) (optional), a function that receives (step)\n// - disabled (via props) (optional), default to false\n// - className (via props)\nclass AddStepDropDown extends React.Component {\n  constructor(props) {\n    super(props);\n    runInAction(() => {\n      this.selectedStep = undefined;\n    });\n  }\n\n  getStore() {\n    return this.props.stepTemplatesStore;\n  }\n\n  getSelectedStep() {\n    return this.selectedStep;\n  }\n\n  getStepDropDownOptions() {\n    const store = this.getStore();\n    const list = store.list;\n    const options = _.map(list, template => ({\n      text: template.latest.title,\n      value: template.id,\n    }));\n\n    return options;\n  }\n\n  handleChange = (_event, { value }) => {\n    if (_.isEmpty(value)) {\n      this.selectedStep = undefined;\n      return;\n    }\n\n    const store = this.getStore();\n    const step = store.getTemplate(value);\n    if (step === undefined) {\n      this.selectedStep = undefined;\n      return;\n    }\n    this.selectedStep = step.latest;\n  };\n\n  handleClose = (e, _d) => {\n    const onSelected = this.props.onSelected || _.noop;\n    const step = this.selectedStep;\n\n    this.selectedStep = undefined;\n    if (e === undefined) return; // this means the escape key was clicked\n    onSelected(step);\n  };\n\n  render() {\n    const disabled = this.props.disabled || false;\n    const className = this.props.className;\n    const step = this.getSelectedStep();\n    const options = this.getStepDropDownOptions();\n    const isEmpty = _.isEmpty(step);\n    const text = isEmpty ? 'Add Step' : step.title;\n    const value = isEmpty ? '' : step.id;\n\n    return (\n      <Dropdown\n        button\n        className={c('icon', className)}\n        fluid\n        labeled\n        icon=\"plus\"\n        options={options}\n        search\n        color=\"blue\"\n        text={text}\n        value={value}\n        onChange={this.handleChange}\n        onClose={this.handleClose}\n        disabled={disabled}\n      />\n    );\n  }\n}\n\n// see https://medium.com/@mweststrate/mobx-4-better-simpler-faster-smaller-c1fbc08008da\ndecorate(AddStepDropDown, {\n  selectedStep: observable,\n  handleChange: action,\n  handleClose: action,\n});\n\nexport default inject('stepTemplatesStore')(observer(AddStepDropDown));\n"],"file":"AddStepDropDown.js"}