{"version":3,"sources":["../../../src/models/forms/WorkflowStepPropsForm.js"],"names":["createForm","workflowStepPropsFields","step","isTemplate","skippable","propsOverrideOption","allowed","warnMessage","canOverride","prop","includes","warnIfCanNotOverride","text","undefined","label","extra","explain","warn","value","rules","disabled","getWorkflowStepPropsForm","options","fields"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAASA,UAAT,QAA2B,mCAA3B;;AAEA,MAAMC,uBAAuB,GAAG,CAACC,IAAD,EAAO;AAAEC,EAAAA,UAAU,GAAG;AAAf,IAAwB,EAA/B,KAAsC;AACpE,QAAM;AAAEC,IAAAA;AAAF,MAAgBF,IAAtB;AACA,QAAMG,mBAAmB,GAAGH,IAAI,CAACG,mBAAL,IAA4B;AAAEC,IAAAA,OAAO,EAAE;AAAX,GAAxD;AACA,QAAMC,WAAW,GAAG,qFAApB;;AACA,QAAMC,WAAW,GAAGC,IAAI,IAAIN,UAAU,IAAIE,mBAAmB,CAACC,OAApB,CAA4BI,QAA5B,CAAqCD,IAArC,CAA1C;;AACA,QAAME,oBAAoB,GAAG,CAACF,IAAD,EAAOG,IAAI,GAAGL,WAAd,KAA+BC,WAAW,CAACC,IAAD,CAAX,GAAoBI,SAApB,GAAgCD,IAA5F;;AAEA,SAAO;AACLR,IAAAA,SAAS,EAAE;AACTU,MAAAA,KAAK,EAAE,0CADE;AAETC,MAAAA,KAAK,EAAE;AACLC,QAAAA,OAAO,EAAE,+EADJ;AAELC,QAAAA,IAAI,EAAEN,oBAAoB,CAAC,WAAD;AAFrB,OAFE;AAMTO,MAAAA,KAAK,EAAEd,SANE;AAOTe,MAAAA,KAAK,EAAE,kBAPE;AAQTC,MAAAA,QAAQ,EAAE,CAACZ,WAAW,CAAC,WAAD;AARb;AADN,GAAP;AAYD,CAnBD;;AAqBA,SAASa,wBAAT,CAAkCnB,IAAlC,EAAwCoB,OAAxC,EAAiD;AAC/C,QAAMC,MAAM,GAAGtB,uBAAuB,CAACC,IAAD,EAAOoB,OAAP,CAAtC;AAEA,SAAOtB,UAAU,CAACuB,MAAD,CAAjB;AACD;;AAED,eAAeF,wBAAf","sourcesContent":["/*\n *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\").\n *  You may not use this file except in compliance with the License.\n *  A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n *  or in the \"license\" file accompanying this file. This file is distributed\n *  on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *  express or implied. See the License for the specific language governing\n *  permissions and limitations under the License.\n */\n\nimport { createForm } from '@aws-ee/base-ui/dist/helpers/form';\n\nconst workflowStepPropsFields = (step, { isTemplate = true } = {}) => {\n  const { skippable } = step;\n  const propsOverrideOption = step.propsOverrideOption || { allowed: [] };\n  const warnMessage = 'The workflow template used by this workflow does not allow you to modify this field';\n  const canOverride = prop => isTemplate || propsOverrideOption.allowed.includes(prop);\n  const warnIfCanNotOverride = (prop, text = warnMessage) => (canOverride(prop) ? undefined : text);\n\n  return {\n    skippable: {\n      label: 'Skip this step if pervious steps failed?',\n      extra: {\n        explain: 'If a previous step failed, should this step still run by the workflow engine?',\n        warn: warnIfCanNotOverride('skippable'),\n      },\n      value: skippable,\n      rules: 'required|boolean',\n      disabled: !canOverride('skippable'),\n    },\n  };\n};\n\nfunction getWorkflowStepPropsForm(step, options) {\n  const fields = workflowStepPropsFields(step, options);\n\n  return createForm(fields);\n}\n\nexport default getWorkflowStepPropsForm;\n"],"file":"WorkflowStepPropsForm.js"}