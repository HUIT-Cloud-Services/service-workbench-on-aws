{"version":3,"sources":["../../../src/models/forms/WorkflowStepDescForm.js"],"names":["createForm","workflowStepDescFields","step","isTemplate","title","desc","derivedTitle","derivedDesc","propsOverrideOption","allowed","warnMessage","canOverride","prop","includes","warnIfCanNotOverride","text","undefined","stepTitle","label","placeholder","extra","explain","warn","value","rules","disabled","stepDesc","getWorkflowStepDescForm","options","fields"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAASA,UAAT,QAA2B,mCAA3B;;AAEA,MAAMC,sBAAsB,GAAG,CAACC,IAAD,EAAO;AAAEC,EAAAA,UAAU,GAAG;AAAf,IAAwB,EAA/B,KAAsC;AACnE,QAAM;AAAEC,IAAAA,KAAK,GAAG,EAAV;AAAcC,IAAAA,IAAI,GAAG,EAArB;AAAyBC,IAAAA,YAAY,GAAG,EAAxC;AAA4CC,IAAAA,WAAW,GAAG;AAA1D,MAAiEL,IAAvE;AACA,QAAMM,mBAAmB,GAAGN,IAAI,CAACM,mBAAL,IAA4B;AAAEC,IAAAA,OAAO,EAAE;AAAX,GAAxD;AACA,QAAMC,WAAW,GAAG,qFAApB;;AACA,QAAMC,WAAW,GAAGC,IAAI,IAAIT,UAAU,IAAIK,mBAAmB,CAACC,OAApB,CAA4BI,QAA5B,CAAqCD,IAArC,CAA1C;;AACA,QAAME,oBAAoB,GAAG,CAACF,IAAD,EAAOG,IAAI,GAAGL,WAAd,KAA+BC,WAAW,CAACC,IAAD,CAAX,GAAoBI,SAApB,GAAgCD,IAA5F;;AAEA,SAAO;AACLE,IAAAA,SAAS,EAAE;AACTC,MAAAA,KAAK,EAAE,OADE;AAETC,MAAAA,WAAW,EAAE,2BAFJ;AAGTC,MAAAA,KAAK,EAAE;AACLC,QAAAA,OAAO,EAAG;AAClB,qDAFa;AAGLC,QAAAA,IAAI,EAAER,oBAAoB,CAAC,OAAD;AAHrB,OAHE;AAQTS,MAAAA,KAAK,EAAEnB,KAAK,IAAIE,YARP;AASTkB,MAAAA,KAAK,EAAE,+BATE;AAUTC,MAAAA,QAAQ,EAAE,CAACd,WAAW,CAAC,OAAD;AAVb,KADN;AAcLe,IAAAA,QAAQ,EAAE;AACRR,MAAAA,KAAK,EAAE,aADC;AAERC,MAAAA,WAAW,EAAE,iCAFL;AAGRC,MAAAA,KAAK,EAAE;AACLC,QAAAA,OAAO,EAAG,uFADL;AAELC,QAAAA,IAAI,EAAER,oBAAoB,CAAC,MAAD;AAFrB,OAHC;AAORS,MAAAA,KAAK,EAAElB,IAAI,IAAIE,WAPP;AAQRiB,MAAAA,KAAK,EAAE,gCARC;AASRC,MAAAA,QAAQ,EAAE,CAACd,WAAW,CAAC,MAAD;AATd;AAdL,GAAP;AA0BD,CAjCD;;AAmCA,SAASgB,uBAAT,CAAiCzB,IAAjC,EAAuC0B,OAAvC,EAAgD;AAC9C,QAAMC,MAAM,GAAG5B,sBAAsB,CAACC,IAAD,EAAO0B,OAAP,CAArC;AACA,SAAO5B,UAAU,CAAC6B,MAAD,CAAjB;AACD;;AAED,eAAeF,uBAAf","sourcesContent":["/*\n *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\").\n *  You may not use this file except in compliance with the License.\n *  A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n *  or in the \"license\" file accompanying this file. This file is distributed\n *  on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *  express or implied. See the License for the specific language governing\n *  permissions and limitations under the License.\n */\n\nimport { createForm } from '@aws-ee/base-ui/dist/helpers/form';\n\nconst workflowStepDescFields = (step, { isTemplate = true } = {}) => {\n  const { title = '', desc = '', derivedTitle = '', derivedDesc = '' } = step;\n  const propsOverrideOption = step.propsOverrideOption || { allowed: [] };\n  const warnMessage = 'The workflow template used by this workflow does not allow you to modify this field';\n  const canOverride = prop => isTemplate || propsOverrideOption.allowed.includes(prop);\n  const warnIfCanNotOverride = (prop, text = warnMessage) => (canOverride(prop) ? undefined : text);\n\n  return {\n    stepTitle: {\n      label: 'Title',\n      placeholder: 'Type a title for the step',\n      extra: {\n        explain: `This is a required field and the number of characters must be between 3 and 255.\n        The title is shown in many places in the UI.`,\n        warn: warnIfCanNotOverride('title'),\n      },\n      value: title || derivedTitle,\n      rules: 'required|string|between:3,255',\n      disabled: !canOverride('title'),\n    },\n\n    stepDesc: {\n      label: 'Description',\n      placeholder: 'Type a description for the step',\n      extra: {\n        explain: `The description can be written in markdown but must be between 3 and 4000 characters.`,\n        warn: warnIfCanNotOverride('desc'),\n      },\n      value: desc || derivedDesc,\n      rules: 'required|string|between:3,4000',\n      disabled: !canOverride('desc'),\n    },\n  };\n};\n\nfunction getWorkflowStepDescForm(step, options) {\n  const fields = workflowStepDescFields(step, options);\n  return createForm(fields);\n}\n\nexport default getWorkflowStepDescForm;\n"],"file":"WorkflowStepDescForm.js"}