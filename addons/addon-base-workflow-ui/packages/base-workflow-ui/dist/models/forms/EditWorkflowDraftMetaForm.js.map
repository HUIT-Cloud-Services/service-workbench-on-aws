{"version":3,"sources":["../../../src/models/forms/EditWorkflowDraftMetaForm.js"],"names":["createForm","editWorkflowDraftMetaFields","version","title","desc","instanceTtl","runSpec","warnMessage","warnIfCanNotOverride","prop","text","canOverrideProp","undefined","canOverride","result","name","label","placeholder","extra","explain","warn","value","rules","disabled","options","size","target","getEditWorkflowDraftMetaForm","template","fields"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAASA,UAAT,QAA2B,mCAA3B;;AAEA,MAAMC,2BAA2B,GAAGC,OAAO,IAAI;AAC7C,QAAM;AAAEC,IAAAA,KAAK,GAAG,EAAV;AAAcC,IAAAA,IAAI,GAAG,EAArB;AAAyBC,IAAAA,WAAzB;AAAsCC,IAAAA,OAAO,GAAG;AAAhD,MAAuDJ,OAA7D;AACA,QAAMK,WAAW,GAAG,qFAApB;;AACA,QAAMC,oBAAoB,GAAG,CAACC,IAAD,EAAOC,IAAI,GAAGH,WAAd,KAA+BL,OAAO,CAACS,eAAR,CAAwBF,IAAxB,IAAgCG,SAAhC,GAA4CF,IAAxG;;AACA,QAAMG,WAAW,GAAGJ,IAAI,IAAIP,OAAO,CAACS,eAAR,CAAwBF,IAAxB,CAA5B;;AAEA,QAAMK,MAAM,GAAG,CACb;AACEC,IAAAA,IAAI,EAAE,OADR;AAEEC,IAAAA,KAAK,EAAE,gBAFT;AAGEC,IAAAA,WAAW,EAAE,+BAHf;AAIEC,IAAAA,KAAK,EAAE;AACLC,MAAAA,OAAO,EAAG;AAClB,mDAFa;AAGLC,MAAAA,IAAI,EAAEZ,oBAAoB,CAAC,OAAD;AAHrB,KAJT;AASEa,IAAAA,KAAK,EAAElB,KATT;AAUEmB,IAAAA,KAAK,EAAE,+BAVT;AAWEC,IAAAA,QAAQ,EAAE,CAACV,WAAW,CAAC,OAAD;AAXxB,GADa,EAeb;AACEE,IAAAA,IAAI,EAAE,MADR;AAEEC,IAAAA,KAAK,EAAE,sBAFT;AAGEC,IAAAA,WAAW,EAAE,qCAHf;AAIEC,IAAAA,KAAK,EAAE;AACLC,MAAAA,OAAO,EAAG,uFADL;AAELC,MAAAA,IAAI,EAAEZ,oBAAoB,CAAC,MAAD;AAFrB,KAJT;AAQEa,IAAAA,KAAK,EAAEjB,IART;AASEkB,IAAAA,KAAK,EAAE,gCATT;AAUEC,IAAAA,QAAQ,EAAE,CAACV,WAAW,CAAC,MAAD;AAVxB,GAfa,EA4Bb;AACEE,IAAAA,IAAI,EAAE,aADR;AAEEC,IAAAA,KAAK,EAAE,kDAFT;AAGEC,IAAAA,WAAW,EAAE,yBAHf;AAIEC,IAAAA,KAAK,EAAE;AACLC,MAAAA,OAAO,EAAG;AAClB,sFAFa;AAGLC,MAAAA,IAAI,EAAEZ,oBAAoB,CAAC,aAAD;AAHrB,KAJT;AASEa,IAAAA,KAAK,EAAEhB,WATT;AAUEiB,IAAAA,KAAK,EAAE,SAVT;AAWEC,IAAAA,QAAQ,EAAE,CAACV,WAAW,CAAC,aAAD;AAXxB,GA5Ba,EA0Cb;AACEE,IAAAA,IAAI,EAAE,aADR;AAEEC,IAAAA,KAAK,EAAE,qBAFT;AAGEE,IAAAA,KAAK,EAAE;AACLE,MAAAA,IAAI,EAAEZ,oBAAoB,CAAC,aAAD,CADrB;AAELgB,MAAAA,OAAO,EAAE,CACP;AACEH,QAAAA,KAAK,EAAE,OADT;AAEEX,QAAAA,IAAI,EAAE;AAFR,OADO,EAKP;AACEW,QAAAA,KAAK,EAAE,QADT;AAEEX,QAAAA,IAAI,EAAE;AAFR,OALO,EASP;AACEW,QAAAA,KAAK,EAAE,OADT;AAEEX,QAAAA,IAAI,EAAE;AAFR,OATO;AAFJ,KAHT;AAoBEW,IAAAA,KAAK,EAAEf,OAAO,CAACmB,IAAR,IAAgB,OApBzB;AAqBEH,IAAAA,KAAK,EAAE,gCArBT;AAsBEC,IAAAA,QAAQ,EAAE,CAACV,WAAW,CAAC,aAAD;AAtBxB,GA1Ca,EAmEb;AACEE,IAAAA,IAAI,EAAE,eADR;AAEEC,IAAAA,KAAK,EAAE,gBAFT;AAGEE,IAAAA,KAAK,EAAE;AACLE,MAAAA,IAAI,EAAEZ,oBAAoB,CAAC,eAAD,CADrB;AAELgB,MAAAA,OAAO,EAAE,CACP;AACEH,QAAAA,KAAK,EAAE,eADT;AAEEX,QAAAA,IAAI,EAAE;AAFR,OADO,EAKP;AACEW,QAAAA,KAAK,EAAE,cADT;AAEEX,QAAAA,IAAI,EAAE;AAFR,OALO,EASP;AACEW,QAAAA,KAAK,EAAE,SADT;AAEEX,QAAAA,IAAI,EAAE;AAFR,OATO;AAFJ,KAHT;AAoBEW,IAAAA,KAAK,EAAEf,OAAO,CAACoB,MAAR,IAAkB,eApB3B;AAqBEJ,IAAAA,KAAK,EAAE,gDArBT;AAsBEC,IAAAA,QAAQ,EAAE,CAACV,WAAW,CAAC,eAAD;AAtBxB,GAnEa,CAAf;AA6FA,SAAO,CAAC,GAAGC,MAAJ,CAAP;AACD,CApGD;;AAsGA,SAASa,4BAAT,CAAsCC,QAAtC,EAAgD;AAC9C,QAAMC,MAAM,GAAG5B,2BAA2B,CAAC2B,QAAD,CAA1C;AAEA,SAAO5B,UAAU,CAAC6B,MAAD,CAAjB;AACD;;AAED,eAAeF,4BAAf","sourcesContent":["/*\n *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\").\n *  You may not use this file except in compliance with the License.\n *  A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n *  or in the \"license\" file accompanying this file. This file is distributed\n *  on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *  express or implied. See the License for the specific language governing\n *  permissions and limitations under the License.\n */\n\nimport { createForm } from '@aws-ee/base-ui/dist/helpers/form';\n\nconst editWorkflowDraftMetaFields = version => {\n  const { title = '', desc = '', instanceTtl, runSpec = {} } = version;\n  const warnMessage = 'The workflow template used by this workflow does not allow you to modify this field';\n  const warnIfCanNotOverride = (prop, text = warnMessage) => (version.canOverrideProp(prop) ? undefined : text);\n  const canOverride = prop => version.canOverrideProp(prop);\n\n  const result = [\n    {\n      name: 'title',\n      label: 'Workflow Title',\n      placeholder: 'Type a title for the workflow',\n      extra: {\n        explain: `This is a required field and the number of characters must be between 3 and 255.\n      The title is shown in many places in the UI.`,\n        warn: warnIfCanNotOverride('title'),\n      },\n      value: title,\n      rules: 'required|string|between:3,255',\n      disabled: !canOverride('title'),\n    },\n\n    {\n      name: 'desc',\n      label: 'Workflow Description',\n      placeholder: 'Type a description for the workflow',\n      extra: {\n        explain: `The description can be written in markdown but must be between 3 and 4000 characters.`,\n        warn: warnIfCanNotOverride('desc'),\n      },\n      value: desc,\n      rules: 'required|string|between:3,4000',\n      disabled: !canOverride('desc'),\n    },\n\n    {\n      name: 'instanceTtl',\n      label: 'Time to Live (TTL) for instances of the workflow',\n      placeholder: 'Type the number of days',\n      extra: {\n        explain: `The number of days for which a record of a workflow instance is kept in the database.\n      Leave it empty or type -1 if you don't want to have a time limit on the record.`,\n        warn: warnIfCanNotOverride('instanceTtl'),\n      },\n      value: instanceTtl,\n      rules: 'integer',\n      disabled: !canOverride('instanceTtl'),\n    },\n\n    {\n      name: 'runSpecSize',\n      label: 'Runtime lambda size',\n      extra: {\n        warn: warnIfCanNotOverride('runSpecSize'),\n        options: [\n          {\n            value: 'small',\n            text: 'Small',\n          },\n          {\n            value: 'medium',\n            text: 'Medium',\n          },\n          {\n            value: 'large',\n            text: 'Large',\n          },\n        ],\n      },\n      value: runSpec.size || 'small',\n      rules: 'required|in:small,medium,large',\n      disabled: !canOverride('runSpecSize'),\n    },\n\n    {\n      name: 'runSpecTarget',\n      label: 'Runtime target',\n      extra: {\n        warn: warnIfCanNotOverride('runSpecTarget'),\n        options: [\n          {\n            value: 'stepFunctions',\n            text: 'Step Functions',\n          },\n          {\n            value: 'workerLambda',\n            text: 'Worker Lambda',\n          },\n          {\n            value: 'inPlace',\n            text: 'In Place',\n          },\n        ],\n      },\n      value: runSpec.target || 'stepFunctions',\n      rules: 'required|in:stepFunctions,workerLambda,inPlace',\n      disabled: !canOverride('runSpecTarget'),\n    },\n  ];\n\n  return [...result];\n};\n\nfunction getEditWorkflowDraftMetaForm(template) {\n  const fields = editWorkflowDraftMetaFields(template);\n\n  return createForm(fields);\n}\n\nexport default getEditWorkflowDraftMetaForm;\n"],"file":"EditWorkflowDraftMetaForm.js"}