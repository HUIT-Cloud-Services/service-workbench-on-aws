{"version":3,"sources":["../../../../src/parts/studies/__tests__/StudiesPage.test.js"],"names":["global","window","scrollTo","jest","fn","match","params","studiesStoresMap","filesSelectionEmpty","empty","count","filesSelectionFull","describe","component","wrapper","it","userStore","user","capabilities","instance","renderWarningWithButton","x","renderSelection","res","expect","content","toHaveProperty","stringContaining","toHaveBeenCalled","hasProjects","renderWarning","toHaveBeenCalledWith","objectContaining","header","props","className","toBe","not"],"mappings":"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","sourcesContent":["/*\n *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\").\n *  You may not use this file except in compliance with the License.\n *  A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n *  or in the \"license\" file accompanying this file. This file is distributed\n *  on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *  express or implied. See the License for the specific language governing\n *  permissions and limitations under the License.\n */\n\nimport React from 'react';\nimport { shallow } from 'enzyme';\nimport StudiesPage from '../StudiesPage';\n\nglobal.window = {\n  scrollTo: jest.fn(),\n};\n\nconst match = {\n  params: {},\n};\n\nconst studiesStoresMap = {};\n\nconst filesSelectionEmpty = {\n  empty: true,\n  count: 10,\n};\n\nconst filesSelectionFull = {\n  empty: false,\n  count: 10,\n};\n\ndescribe('StudiesPage', () => {\n  let component = null;\n  let wrapper = null;\n\n  it('should allow the user to select a study', async () => {\n    // Render component\n    const userStore = {\n      user: {\n        capabilities: null,\n      },\n    };\n\n    wrapper = shallow(\n      <StudiesPage.WrappedComponent\n        userStore={userStore}\n        studiesStoresMap={studiesStoresMap}\n        filesSelection={filesSelectionEmpty}\n        match={match}\n      />,\n    );\n\n    // Get instance of the component\n    component = wrapper.instance();\n\n    // mock functions\n    component.renderWarningWithButton = jest.fn(x => x);\n\n    // OPERATE\n    const res = await component.renderSelection();\n\n    // CHECK\n    expect(res.content).toHaveProperty(\n      ['props', 'children', 0],\n      expect.stringContaining('Select one or more studies to proceed'),\n    );\n    expect(component.renderWarningWithButton).toHaveBeenCalled();\n  });\n\n  it('should warn the user they do not have projects', async () => {\n    // Render component\n    const userStore = {\n      user: {\n        capabilities: null,\n        hasProjects: false,\n      },\n    };\n\n    wrapper = shallow(\n      <StudiesPage.WrappedComponent\n        userStore={userStore}\n        studiesStoresMap={studiesStoresMap}\n        filesSelection={filesSelectionEmpty}\n        match={match}\n      />,\n    );\n\n    // Get instance of the component\n    component = wrapper.instance();\n\n    // mock functions\n    component.renderWarning = jest.fn(x => x);\n    component.renderWarningWithButton = jest.fn(x => x);\n\n    // OPERATE\n    await component.renderSelection();\n\n    // CHECK\n    expect(component.renderWarning).toHaveBeenCalledWith(\n      expect.objectContaining({\n        header: 'Missing association with one or more projects!',\n      }),\n    );\n  });\n\n  it('should display the studies to the user without warnings', async () => {\n    // Render component\n    const userStore = {\n      user: {\n        capabilities: null,\n      },\n    };\n\n    wrapper = shallow(\n      <StudiesPage.WrappedComponent\n        userStore={userStore}\n        studiesStoresMap={studiesStoresMap}\n        filesSelection={filesSelectionFull}\n        match={match}\n      />,\n    );\n\n    // Get instance of the component\n    component = wrapper.instance();\n\n    // mock functions\n    component.renderWarning = jest.fn(x => x);\n    component.renderWarningWithButton = jest.fn(x => x);\n\n    // OPERATE\n    const res = await component.renderSelection();\n\n    // CHECK\n    expect(res.props.className).toBe('clearfix');\n    expect(component.renderWarning).not.toHaveBeenCalled();\n    expect(component.renderWarningWithButton).not.toHaveBeenCalled();\n  });\n});\n"],"file":"StudiesPage.test.js"}