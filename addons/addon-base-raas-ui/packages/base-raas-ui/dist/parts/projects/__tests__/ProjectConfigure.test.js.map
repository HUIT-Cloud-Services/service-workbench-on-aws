{"version":3,"sources":["../../../../src/parts/projects/__tests__/ProjectConfigure.test.js"],"names":["jest","mock","notificationMock","require","usersStore","userStore","awsAccountsStore","projectsStore","project","rev","id","description","indexId","projectAdmins","describe","component","beforeEach","ProjectConfigure","displayError","fn","x","displaySuccess","it","store","updateProject","getStore","handleClickSubmitButton","expect","toHaveBeenCalledWith","newProject","error","message","deleteProject","load","handleClickDeleteButton","not","toHaveBeenCalled"],"mappings":";;AAeA;;;;;;;;AAEAA,IAAI,CAACC,IAAL,CAAU,2CAAV;;AACA,IAAMC,gBAAgB,GAAGC,OAAO,CAAC,2CAAD,CAAhC;;AAEA,IAAMC,UAAU,GAAG,EAAnB;AACA,IAAMC,SAAS,GAAG,EAAlB;AACA,IAAMC,gBAAgB,GAAG,EAAzB;AACA,IAAMC,aAAa,GAAG,EAAtB;AACA,IAAMC,OAAO,GAAG;AACdC,EAAAA,GAAG,EAAE,CADS;AAEdC,EAAAA,EAAE,EAAE,IAFU;AAGdC,EAAAA,WAAW,EAAE,MAHC;AAIdC,EAAAA,OAAO,EAAE,OAJK;AAKdC,EAAAA,aAAa,EAAE,CAAC,QAAD,EAAW,QAAX;AALD,CAAhB;AAOAC,QAAQ,CAAC,kBAAD,EAAqB,YAAM;AACjC,MAAIC,SAAS,GAAG,IAAhB;AAEAC,EAAAA,UAAU,CAAC,YAAM;AACf;AACAD,IAAAA,SAAS,GAAG,IAAIE,4BAAJ,CAAqB;AAAEb,MAAAA,UAAU,EAAVA,UAAF;AAAcC,MAAAA,SAAS,EAATA,SAAd;AAAyBC,MAAAA,gBAAgB,EAAhBA,gBAAzB;AAA2CC,MAAAA,aAAa,EAAbA,aAA3C;AAA0DC,MAAAA,OAAO,EAAPA;AAA1D,KAArB,CAAZ,CAFe,CAGf;;AACAN,IAAAA,gBAAgB,CAACgB,YAAjB,GAAgClB,IAAI,CAACmB,EAAL,CAAQ,UAAAC,CAAC;AAAA,aAAIA,CAAJ;AAAA,KAAT,CAAhC;AACAlB,IAAAA,gBAAgB,CAACmB,cAAjB,GAAkCrB,IAAI,CAACmB,EAAL,CAAQ,UAAAC,CAAC;AAAA,aAAIA,CAAJ;AAAA,KAAT,CAAlC;AACD,GANS,CAAV;AAQAE,EAAAA,EAAE,CAAC,2BAAD,uEAA8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAC9B;AACMC,YAAAA,KAFwB,GAEhB;AACZC,cAAAA,aAAa,EAAExB,IAAI,CAACmB,EAAL;AADH,aAFgB;AAK9BJ,YAAAA,SAAS,CAACU,QAAV,GAAqBzB,IAAI,CAACmB,EAAL,CAAQ,YAAM;AACjC,qBAAOI,KAAP;AACD,aAFoB,CAArB,CAL8B,CAS9B;;AAT8B;AAAA,mBAUxBR,SAAS,CAACW,uBAAV,EAVwB;;AAAA;AAY9B;AACAC,YAAAA,MAAM,CAACJ,KAAK,CAACC,aAAP,CAAN,CAA4BI,oBAA5B,CAAiDpB,OAAjD;AACAmB,YAAAA,MAAM,CAACzB,gBAAgB,CAACmB,cAAlB,CAAN,CAAwCO,oBAAxC,CAA6D,8BAA7D;;AAd8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA9B,GAAF;AAiBAN,EAAAA,EAAE,CAAC,mCAAD,uEAAsC;AAAA;AAAA;AAAA;AAAA;AAAA;AACtC;AACMO,YAAAA,UAFgC,GAEnB;AACjBnB,cAAAA,EAAE,EAAE;AADa,aAFmB;AAKhCoB,YAAAA,KALgC,GAKxB;AACZC,cAAAA,OAAO,EAAE;AADG,aALwB;AAQhCR,YAAAA,KARgC,GAQxB;AACZC,cAAAA,aAAa,EAAExB,IAAI,CAACmB,EAAL,CAAQ,YAAM;AAC3B,sBAAMW,KAAN;AACD,eAFc;AADH,aARwB;AAatCf,YAAAA,SAAS,CAACU,QAAV,GAAqBzB,IAAI,CAACmB,EAAL,CAAQ,YAAM;AACjC,qBAAOI,KAAP;AACD,aAFoB,CAArB;AAIAR,YAAAA,SAAS,CAACS,aAAV,GAA0BK,UAA1B,CAjBsC,CAmBtC;;AAnBsC;AAAA,mBAoBhCd,SAAS,CAACW,uBAAV,EApBgC;;AAAA;AAsBtC;AACAC,YAAAA,MAAM,CAACJ,KAAK,CAACC,aAAP,CAAN,CAA4BI,oBAA5B,CAAiDC,UAAjD;AACAF,YAAAA,MAAM,CAACzB,gBAAgB,CAACgB,YAAlB,CAAN,CAAsCU,oBAAtC,CAA2DE,KAA3D;;AAxBsC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAtC,GAAF;AA2BAR,EAAAA,EAAE,CAAC,2BAAD,uEAA8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAC9B;AACMC,YAAAA,KAFwB,GAEhB;AACZS,cAAAA,aAAa,EAAEhC,IAAI,CAACmB,EAAL,EADH;AAEZc,cAAAA,IAAI,EAAEjC,IAAI,CAACmB,EAAL;AAFM,aAFgB;AAM9BJ,YAAAA,SAAS,CAACU,QAAV,GAAqBzB,IAAI,CAACmB,EAAL,CAAQ,YAAM;AACjC,qBAAOI,KAAP;AACD,aAFoB,CAArB,CAN8B,CAU9B;;AAV8B;AAAA,mBAWxBR,SAAS,CAACmB,uBAAV,EAXwB;;AAAA;AAa9B;AACAP,YAAAA,MAAM,CAACJ,KAAK,CAACS,aAAP,CAAN,CAA4BJ,oBAA5B,CAAiDpB,OAAO,CAACE,EAAzD;AACAiB,YAAAA,MAAM,CAACzB,gBAAgB,CAACgB,YAAlB,CAAN,CAAsCiB,GAAtC,CAA0CC,gBAA1C;;AAf8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA9B,GAAF;AAkBAd,EAAAA,EAAE,CAAC,mCAAD,uEAAsC;AAAA;AAAA;AAAA;AAAA;AAAA;AACtC;AACMQ,YAAAA,KAFgC,GAExB;AACZC,cAAAA,OAAO,EAAE;AADG,aAFwB;AAKhCR,YAAAA,KALgC,GAKxB;AACZS,cAAAA,aAAa,EAAEhC,IAAI,CAACmB,EAAL,CAAQ,YAAM;AAC3B,sBAAMW,KAAN;AACD,eAFc,CADH;AAIZG,cAAAA,IAAI,EAAEjC,IAAI,CAACmB,EAAL;AAJM,aALwB;AAWtCJ,YAAAA,SAAS,CAACU,QAAV,GAAqBzB,IAAI,CAACmB,EAAL,CAAQ,YAAM;AACjC,qBAAOI,KAAP;AACD,aAFoB,CAArB,CAXsC,CAetC;;AAfsC;AAAA,mBAgBhCR,SAAS,CAACmB,uBAAV,EAhBgC;;AAAA;AAkBtC;AACAP,YAAAA,MAAM,CAACJ,KAAK,CAACS,aAAP,CAAN,CAA4BJ,oBAA5B,CAAiDpB,OAAO,CAACE,EAAzD;AACAiB,YAAAA,MAAM,CAACzB,gBAAgB,CAACgB,YAAlB,CAAN,CAAsCU,oBAAtC,CAA2DE,KAA3D;;AApBsC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAtC,GAAF;AAsBD,CA/FO,CAAR","sourcesContent":["/*\n *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\").\n *  You may not use this file except in compliance with the License.\n *  A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n *  or in the \"license\" file accompanying this file. This file is distributed\n *  on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *  express or implied. See the License for the specific language governing\n *  permissions and limitations under the License.\n */\n\nimport ProjectConfigure from '../ProjectConfigure';\n\njest.mock('@aws-ee/base-ui/dist/helpers/notification');\nconst notificationMock = require('@aws-ee/base-ui/dist/helpers/notification');\n\nconst usersStore = {};\nconst userStore = {};\nconst awsAccountsStore = {};\nconst projectsStore = {};\nconst project = {\n  rev: 2,\n  id: 'id',\n  description: 'desc',\n  indexId: 'idxid',\n  projectAdmins: ['admin1', 'admin2'],\n};\ndescribe('ProjectConfigure', () => {\n  let component = null;\n\n  beforeEach(() => {\n    // Can't use enzyme, ProjectConfigure doesn't implement wrappedComponent or WrappedComponent\n    component = new ProjectConfigure({ usersStore, userStore, awsAccountsStore, projectsStore, project });\n    // Mock notifications\n    notificationMock.displayError = jest.fn(x => x);\n    notificationMock.displaySuccess = jest.fn(x => x);\n  });\n\n  it('should update the project', async () => {\n    // BUILD\n    const store = {\n      updateProject: jest.fn(),\n    };\n    component.getStore = jest.fn(() => {\n      return store;\n    });\n\n    // OPERATE\n    await component.handleClickSubmitButton();\n\n    // CHECK\n    expect(store.updateProject).toHaveBeenCalledWith(project);\n    expect(notificationMock.displaySuccess).toHaveBeenCalledWith('Updated project successfully');\n  });\n\n  it('should fail to update the project', async () => {\n    // BUILD\n    const newProject = {\n      id: 'a-new-project',\n    };\n    const error = {\n      message: 'failed to update',\n    };\n    const store = {\n      updateProject: jest.fn(() => {\n        throw error;\n      }),\n    };\n    component.getStore = jest.fn(() => {\n      return store;\n    });\n\n    component.updateProject = newProject;\n\n    // OPERATE\n    await component.handleClickSubmitButton();\n\n    // CHECK\n    expect(store.updateProject).toHaveBeenCalledWith(newProject);\n    expect(notificationMock.displayError).toHaveBeenCalledWith(error);\n  });\n\n  it('should delete the project', async () => {\n    // BUILD\n    const store = {\n      deleteProject: jest.fn(),\n      load: jest.fn(),\n    };\n    component.getStore = jest.fn(() => {\n      return store;\n    });\n\n    // OPERATE\n    await component.handleClickDeleteButton();\n\n    // CHECK\n    expect(store.deleteProject).toHaveBeenCalledWith(project.id);\n    expect(notificationMock.displayError).not.toHaveBeenCalled();\n  });\n\n  it('should fail to delete the project', async () => {\n    // BUILD\n    const error = {\n      message: 'failed to update',\n    };\n    const store = {\n      deleteProject: jest.fn(() => {\n        throw error;\n      }),\n      load: jest.fn(),\n    };\n    component.getStore = jest.fn(() => {\n      return store;\n    });\n\n    // OPERATE\n    await component.handleClickDeleteButton();\n\n    // CHECK\n    expect(store.deleteProject).toHaveBeenCalledWith(project.id);\n    expect(notificationMock.displayError).toHaveBeenCalledWith(error);\n  });\n});\n"],"file":"ProjectConfigure.test.js"}