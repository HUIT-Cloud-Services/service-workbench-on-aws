{"version":3,"sources":["../../../src/parts/projects/ProjectsList.js"],"names":["ProjectsList","props","handleAddProject","state","stores","Stores","projectsStore","store","load","getProjectsStore","list","projectsData","getProjects","pageSize","length","pagination","filter","row","columnValue","String","id","toLowerCase","filterValue","value","indexOf","Header","accessor","style","whiteSpace","Cell","project","original","projectAdminUsers","_","map","u","username","join","filterable","cell","textAlign","verticalAlign","userStore","usersStore","awsAccountsStore","pathname","location","link","history","push","renderTotal","content","error","renderMain","renderHeader","React","Component"],"mappings":"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","sourcesContent":["/*\n *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\").\n *  You may not use this file except in compliance with the License.\n *  A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n *  or in the \"license\" file accompanying this file. This file is distributed\n *  on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *  express or implied. See the License for the specific language governing\n *  permissions and limitations under the License.\n */\n\nimport React from 'react';\nimport { Button, Container, Header, Icon, Label, Popup } from 'semantic-ui-react';\nimport { withRouter } from 'react-router-dom';\nimport { runInAction } from 'mobx';\nimport { inject, observer } from 'mobx-react';\nimport ReactTable from 'react-table';\nimport _ from 'lodash';\n\nimport { isStoreError, isStoreLoading } from '@aws-ee/base-ui/dist/models/BaseStore';\nimport ErrorBox from '@aws-ee/base-ui/dist/parts/helpers/ErrorBox';\nimport { createLink } from '@aws-ee/base-ui/dist/helpers/routing';\nimport BasicProgressPlaceholder from '@aws-ee/base-ui/dist/parts/helpers/BasicProgressPlaceholder';\nimport Stores from '@aws-ee/base-ui/dist/models/Stores';\n\nimport ProjectConfigure from './ProjectConfigure';\n\nclass ProjectsList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    runInAction(() => {\n      this.stores = new Stores([this.props.projectsStore]);\n    });\n  }\n\n  getProjectsStore() {\n    const store = this.props.projectsStore;\n    store.load();\n    return store;\n  }\n\n  getProjects() {\n    const store = this.getProjectsStore();\n    return store.list;\n  }\n\n  renderMain() {\n    const projectsData = this.getProjects();\n    const pageSize = projectsData.length;\n    const pagination = projectsData.length > pageSize;\n    return (\n      <div>\n        <ReactTable\n          data={projectsData}\n          showPagination={pagination}\n          defaultPageSize={pageSize}\n          className=\"-striped -highlight\"\n          filterable\n          defaultFilterMethod={(filter, row) => {\n            const columnValue = String(row[filter.id]).toLowerCase();\n            const filterValue = filter.value.toLowerCase();\n            return columnValue.indexOf(filterValue) >= 0;\n          }}\n          columns={[\n            {\n              Header: 'Project Name',\n              accessor: 'id',\n            },\n            {\n              Header: 'Index Id',\n              accessor: 'indexId',\n            },\n            {\n              Header: 'Description',\n              accessor: 'description',\n            },\n            {\n              Header: 'Project Admins',\n              accessor: 'projectAdmins',\n              style: { whiteSpace: 'unset' },\n              Cell: observer(row => {\n                const project = row.original;\n                const projectAdminUsers = project.projectAdminUsers;\n                return _.map(projectAdminUsers, u => u.username).join(', ') || '<<none>>';\n              }),\n            },\n            {\n              Header: '',\n              accessor: 'viewDetail',\n              filterable: false,\n              Cell: observer(cell => {\n                const project = { ...cell.original };\n                return (\n                  <div style={{ textAlign: 'center', verticalAlign: 'middle' }}>\n                    <span>\n                      <Popup\n                        content=\"View Project Detail\"\n                        trigger={\n                          <ProjectConfigure\n                            project={project}\n                            userStore={this.props.userStore}\n                            usersStore={this.props.usersStore}\n                            projectsStore={this.props.projectsStore}\n                            awsAccountsStore={this.props.awsAccountsStore}\n                          />\n                        }\n                      />\n                    </span>\n                  </div>\n                );\n              }),\n            },\n          ]}\n        />\n        <br />\n      </div>\n    );\n  }\n\n  goto(pathname) {\n    const location = this.props.location;\n    const link = createLink({ location, pathname });\n    this.props.history.push(link);\n  }\n\n  handleAddProject = () => {\n    this.goto('/projects/add');\n  };\n\n  renderHeader() {\n    return (\n      <div className=\"mb3 flex\">\n        <Header as=\"h3\" className=\"color-grey mt1 mb0 flex-auto\">\n          <Icon name=\"briefcase\" className=\"align-top\" />\n          <Header.Content className=\"left-align\">\n            Projects\n            {this.renderTotal()}\n          </Header.Content>\n        </Header>\n        <Button color=\"blue\" size=\"medium\" basic onClick={this.handleAddProject}>\n          Add Project\n        </Button>\n      </div>\n    );\n  }\n\n  renderTotal() {\n    return <Label circular>{this.getProjects().length}</Label>;\n  }\n\n  render() {\n    const store = this.getProjectsStore();\n    let content;\n    if (isStoreError(store)) {\n      content = <ErrorBox error={store.error} />;\n    } else if (isStoreLoading(store)) {\n      content = <BasicProgressPlaceholder segmentCount={3} />;\n    } else {\n      content = this.renderMain();\n    }\n    return (\n      <Container className=\"mt3 animated fadeIn\">\n        {this.renderHeader()}\n        {content}\n      </Container>\n    );\n  }\n}\n\nexport default inject(\n  'awsAccountsStore',\n  'projectsStore',\n  'userStore',\n  'usersStore',\n)(withRouter(observer(ProjectsList)));\n"],"file":"ProjectsList.js"}