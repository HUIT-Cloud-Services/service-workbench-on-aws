{"version":3,"sources":["../../../src/parts/users/RolesList.js"],"names":["RolesList","props","handleAddUserRole","state","mapOfUsersBeingEdited","formProcessing","store","userRolesStore","getUserRolesStore","list","userRolesData","getUserRoles","pageSize","length","showPagination","filter","row","columnValue","String","id","toLowerCase","filterValue","value","indexOf","Header","accessor","pathname","location","link","history","push","renderTotal","content","error","renderMain","renderHeader","React","Component","observable"],"mappings":"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","sourcesContent":["/*\n *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\").\n *  You may not use this file except in compliance with the License.\n *  A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n *  or in the \"license\" file accompanying this file. This file is distributed\n *  on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *  express or implied. See the License for the specific language governing\n *  permissions and limitations under the License.\n */\n\nimport React from 'react';\nimport { Container, Header, Icon, Label } from 'semantic-ui-react';\nimport { withRouter } from 'react-router-dom';\nimport { decorate, observable, runInAction } from 'mobx';\nimport { inject, observer } from 'mobx-react';\nimport ReactTable from 'react-table';\n\nimport { isStoreError, isStoreLoading } from '@aws-ee/base-ui/dist/models/BaseStore';\nimport ErrorBox from '@aws-ee/base-ui/dist/parts/helpers/ErrorBox';\nimport { createLink } from '@aws-ee/base-ui/dist/helpers/routing';\nimport BasicProgressPlaceholder from '@aws-ee/base-ui/dist/parts/helpers/BasicProgressPlaceholder';\n\nclass RolesList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    runInAction(() => {\n      // An object that keeps track of which user is being edited\n      // Each key in the object below has key as user's unique id (<ns>/<username>)\n      // and value as flag indicating whether to show the editor for the user\n      this.mapOfUsersBeingEdited = {};\n      this.formProcessing = false;\n    });\n  }\n\n  getUserRolesStore() {\n    const store = this.props.userRolesStore;\n    return store;\n  }\n\n  getUserRoles() {\n    const store = this.getUserRolesStore();\n    return store.list;\n  }\n\n  renderMain() {\n    const userRolesData = this.getUserRoles();\n    const pageSize = userRolesData.length;\n    const showPagination = userRolesData.length > pageSize;\n    return (\n      <div>\n        <ReactTable\n          data={userRolesData}\n          showPagination={showPagination}\n          defaultPageSize={pageSize}\n          className=\"-striped -highlight\"\n          filterable\n          defaultFilterMethod={(filter, row) => {\n            const columnValue = String(row[filter.id]).toLowerCase();\n            const filterValue = filter.value.toLowerCase();\n            return columnValue.indexOf(filterValue) >= 0;\n          }}\n          columns={[\n            {\n              Header: 'User Role Name',\n              accessor: 'id',\n            },\n            {\n              Header: 'Description',\n              accessor: 'description',\n            },\n            {\n              Header: 'User Type',\n              accessor: 'userType',\n            },\n          ]}\n        />\n        <br />\n      </div>\n    );\n  }\n\n  goto(pathname) {\n    const location = this.props.location;\n    const link = createLink({ location, pathname });\n    this.props.history.push(link);\n  }\n\n  handleAddUserRole = () => {\n    this.goto('/user-roles/add');\n  };\n\n  renderHeader() {\n    return (\n      <div className=\"mb3 flex\">\n        <Header as=\"h3\" className=\"color-grey mt1 mb0 flex-auto\">\n          <Icon name=\"id badge\" className=\"align-top\" />\n          <Header.Content className=\"left-align\">\n            User Roles\n            {this.renderTotal()}\n          </Header.Content>\n        </Header>\n      </div>\n    );\n  }\n\n  renderTotal() {\n    return <Label circular>{this.getUserRoles().length}</Label>;\n  }\n\n  render() {\n    const store = this.getUserRolesStore();\n    let content;\n    if (isStoreError(store)) {\n      content = <ErrorBox error={store.error} />;\n    } else if (isStoreLoading(store)) {\n      content = <BasicProgressPlaceholder segmentCount={3} />;\n    } else {\n      content = this.renderMain();\n    }\n    return (\n      <Container className=\"mt3 animated fadeIn\">\n        {this.renderHeader()}\n        {content}\n      </Container>\n    );\n  }\n}\n\n// see https://medium.com/@mweststrate/mobx-4-better-simpler-faster-smaller-c1fbc08008da\ndecorate(RolesList, {\n  mapOfUsersBeingEdited: observable,\n  formProcessing: observable,\n});\n\nexport default inject('userRolesStore')(withRouter(observer(RolesList)));\n"],"file":"RolesList.js"}