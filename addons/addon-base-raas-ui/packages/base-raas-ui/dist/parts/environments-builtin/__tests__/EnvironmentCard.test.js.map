{"version":3,"sources":["../../../../src/parts/environments-builtin/__tests__/EnvironmentCard.test.js"],"names":["jest","mock","displayErrorMock","require","environment","name","description","createdAt","createdBy","fetchingUrl","status","instanceInfo","type","sharedWithUsers","projectId","setFetchingUrl","fn","isExternal","environmentsStore","startEnvironment","stopEnvironment","userDisplayName","getLongDisplayName","event","preventDefault","stopPropagation","describe","component","wrapper","beforeEach","instance","displayError","x","it","handleStartEnvironment","expect","toHaveBeenCalled","toHaveBeenCalledWith","handleStopEnvironment","error","message","mockImplementationOnce"],"mappings":";;AAeA;;AACA;;AACA;;;;;;;;AAEAA,IAAI,CAACC,IAAL,CAAU,2CAAV;;AACA,IAAMC,gBAAgB,GAAGC,OAAO,CAAC,2CAAD,CAAhC;;AAEAH,IAAI,CAACC,IAAL,CAAU,4DAAV;AAEA,IAAMG,WAAW,GAAG;AAClBC,EAAAA,IAAI,EAAE,MADY;AAElBC,EAAAA,WAAW,EAAE,mBAFK;AAGlBC,EAAAA,SAAS,EAAE,YAHO;AAIlBC,EAAAA,SAAS,EAAE,WAJO;AAKlBC,EAAAA,WAAW,EAAE,aALK;AAMlBC,EAAAA,MAAM,EAAE,QANU;AAOlBC,EAAAA,YAAY,EAAE;AACZC,IAAAA,IAAI,EAAE;AADM,GAPI;AAUlBC,EAAAA,eAAe,EAAE,EAVC;AAWlBC,EAAAA,SAAS,EAAE,QAXO;AAYlBC,EAAAA,cAAc,EAAEf,IAAI,CAACgB,EAAL,EAZE;AAalBC,EAAAA,UAAU,EAAE;AAbM,CAApB;AAeA,IAAMC,iBAAiB,GAAG;AACxBC,EAAAA,gBAAgB,EAAEnB,IAAI,CAACgB,EAAL,EADM;AAExBI,EAAAA,eAAe,EAAEpB,IAAI,CAACgB,EAAL;AAFO,CAA1B;AAIA,IAAMK,eAAe,GAAG;AACtBC,EAAAA,kBAAkB,EAAEtB,IAAI,CAACgB,EAAL,CAAQ;AAAA,WAAM,iBAAN;AAAA,GAAR;AADE,CAAxB;AAGA,IAAMO,KAAK,GAAG;AACZC,EAAAA,cAAc,EAAExB,IAAI,CAACgB,EAAL,EADJ;AAEZS,EAAAA,eAAe,EAAEzB,IAAI,CAACgB,EAAL;AAFL,CAAd;AAKAU,QAAQ,CAAC,iBAAD,EAAoB,YAAM;AAChC,MAAIC,SAAS,GAAG,IAAhB;AACA,MAAIC,OAAO,GAAG,IAAd;AACAC,EAAAA,UAAU,CAAC,YAAM;AACf;AACAD,IAAAA,OAAO,GAAG,mCACR,gCAAC,2BAAD,CAAiB,gBAAjB;AACE,MAAA,iBAAiB,EAAEV,iBADrB;AAEE,MAAA,WAAW,EAAEd,WAFf;AAGE,MAAA,eAAe,EAAEiB;AAHnB,MADQ,CAAV,CAFe,CAUf;;AACAM,IAAAA,SAAS,GAAGC,OAAO,CAACE,QAAR,EAAZ,CAXe,CAaf;;AACA5B,IAAAA,gBAAgB,CAAC6B,YAAjB,GAAgC/B,IAAI,CAACgB,EAAL,CAAQ,UAAAgB,CAAC;AAAA,aAAIA,CAAJ;AAAA,KAAT,CAAhC;AACD,GAfS,CAAV;AAiBAC,EAAAA,EAAE,CAAC,8BAAD,uEAAiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAI3BN,SAAS,CAACO,sBAAV,CAAiCX,KAAjC,CAJ2B;;AAAA;AAMjC;AACAY,YAAAA,MAAM,CAACZ,KAAK,CAACC,cAAP,CAAN,CAA6BY,gBAA7B;AACAD,YAAAA,MAAM,CAACZ,KAAK,CAACE,eAAP,CAAN,CAA8BW,gBAA9B;AACAD,YAAAA,MAAM,CAACjB,iBAAiB,CAACC,gBAAnB,CAAN,CAA2CkB,oBAA3C,CAAgEjC,WAAhE;;AATiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAjC,GAAF;AAYA6B,EAAAA,EAAE,CAAC,6BAAD,uEAAgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAI1BN,SAAS,CAACW,qBAAV,CAAgCf,KAAhC,CAJ0B;;AAAA;AAMhC;AACAY,YAAAA,MAAM,CAACZ,KAAK,CAACC,cAAP,CAAN,CAA6BY,gBAA7B;AACAD,YAAAA,MAAM,CAACZ,KAAK,CAACE,eAAP,CAAN,CAA8BW,gBAA9B;AACAD,YAAAA,MAAM,CAACjB,iBAAiB,CAACE,eAAnB,CAAN,CAA0CiB,oBAA1C,CAA+DjC,WAA/D;;AATgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAhC,GAAF;AAYA6B,EAAAA,EAAE,CAAC,+CAAD,uEAAkD;AAAA;AAAA;AAAA;AAAA;AAAA;AAClD;AACMM,YAAAA,KAF4C,GAEpC;AAAEC,cAAAA,OAAO,EAAE;AAAX,aAFoC;AAGlDtB,YAAAA,iBAAiB,CAACE,eAAlB,CAAkCqB,sBAAlC,CAAyD,YAAM;AAC7D,oBAAMF,KAAN;AACD,aAFD,EAHkD,CAMlD;;AANkD;AAAA,mBAO5CZ,SAAS,CAACW,qBAAV,CAAgCf,KAAhC,CAP4C;;AAAA;AASlD;AACAY,YAAAA,MAAM,CAACZ,KAAK,CAACC,cAAP,CAAN,CAA6BY,gBAA7B;AACAD,YAAAA,MAAM,CAACZ,KAAK,CAACE,eAAP,CAAN,CAA8BW,gBAA9B;AACAD,YAAAA,MAAM,CAACjB,iBAAiB,CAACE,eAAnB,CAAN,CAA0CiB,oBAA1C,CAA+DjC,WAA/D;AACA+B,YAAAA,MAAM,CAACjC,gBAAgB,CAAC6B,YAAlB,CAAN,CAAsCM,oBAAtC,CAA2DE,KAA3D;;AAbkD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAlD,GAAF;AAgBAN,EAAAA,EAAE,CAAC,gDAAD,uEAAmD;AAAA;AAAA;AAAA;AAAA;AAAA;AACnD;AACMM,YAAAA,KAF6C,GAErC;AAAEC,cAAAA,OAAO,EAAE;AAAX,aAFqC;AAGnDtB,YAAAA,iBAAiB,CAACC,gBAAlB,CAAmCsB,sBAAnC,CAA0D,YAAM;AAC9D,oBAAMF,KAAN;AACD,aAFD,EAHmD,CAMnD;;AANmD;AAAA,mBAO7CZ,SAAS,CAACO,sBAAV,CAAiCX,KAAjC,CAP6C;;AAAA;AASnD;AACAY,YAAAA,MAAM,CAACZ,KAAK,CAACC,cAAP,CAAN,CAA6BY,gBAA7B;AACAD,YAAAA,MAAM,CAACZ,KAAK,CAACE,eAAP,CAAN,CAA8BW,gBAA9B;AACAD,YAAAA,MAAM,CAACjB,iBAAiB,CAACC,gBAAnB,CAAN,CAA2CkB,oBAA3C,CAAgEjC,WAAhE;AACA+B,YAAAA,MAAM,CAACjC,gBAAgB,CAAC6B,YAAlB,CAAN,CAAsCM,oBAAtC,CAA2DE,KAA3D;;AAbmD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAnD,GAAF;AAeD,CA3EO,CAAR","sourcesContent":["/*\n *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\").\n *  You may not use this file except in compliance with the License.\n *  A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n *  or in the \"license\" file accompanying this file. This file is distributed\n *  on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *  express or implied. See the License for the specific language governing\n *  permissions and limitations under the License.\n */\n\nimport React from 'react';\nimport { shallow } from 'enzyme';\nimport EnvironmentCard from '../EnvironmentCard';\n\njest.mock('@aws-ee/base-ui/dist/helpers/notification');\nconst displayErrorMock = require('@aws-ee/base-ui/dist/helpers/notification');\n\njest.mock('../../../../images/marketplace/sagemaker-notebook-icon.svg');\n\nconst environment = {\n  name: 'name',\n  description: 'descrip goes here',\n  createdAt: '01-01-1900',\n  createdBy: 'anonymous',\n  fetchingUrl: 'example.com',\n  status: 'active',\n  instanceInfo: {\n    type: 'sagemaker',\n  },\n  sharedWithUsers: {},\n  projectId: 'projId',\n  setFetchingUrl: jest.fn(),\n  isExternal: false,\n};\nconst environmentsStore = {\n  startEnvironment: jest.fn(),\n  stopEnvironment: jest.fn(),\n};\nconst userDisplayName = {\n  getLongDisplayName: jest.fn(() => 'longDisplayName'),\n};\nconst event = {\n  preventDefault: jest.fn(),\n  stopPropagation: jest.fn(),\n};\n\ndescribe('EnvironmentCard', () => {\n  let component = null;\n  let wrapper = null;\n  beforeEach(() => {\n    // render component\n    wrapper = shallow(\n      <EnvironmentCard.WrappedComponent\n        environmentsStore={environmentsStore}\n        environment={environment}\n        userDisplayName={userDisplayName}\n      />,\n    );\n\n    // get instance of component\n    component = wrapper.instance();\n\n    // mock error function because it doesn't function properly in enzyme\n    displayErrorMock.displayError = jest.fn(x => x);\n  });\n\n  it('should start the environment', async () => {\n    // BUILD\n\n    // OPERATE\n    await component.handleStartEnvironment(event);\n\n    // CHECK\n    expect(event.preventDefault).toHaveBeenCalled();\n    expect(event.stopPropagation).toHaveBeenCalled();\n    expect(environmentsStore.startEnvironment).toHaveBeenCalledWith(environment);\n  });\n\n  it('should stop the environment', async () => {\n    // BUILD\n\n    // OPERATE\n    await component.handleStopEnvironment(event);\n\n    // CHECK\n    expect(event.preventDefault).toHaveBeenCalled();\n    expect(event.stopPropagation).toHaveBeenCalled();\n    expect(environmentsStore.stopEnvironment).toHaveBeenCalledWith(environment);\n  });\n\n  it('should throw an error during stop environment', async () => {\n    // BUILD\n    const error = { message: 'failed to stop environment' };\n    environmentsStore.stopEnvironment.mockImplementationOnce(() => {\n      throw error;\n    });\n    // OPERATE\n    await component.handleStopEnvironment(event);\n\n    // CHECK\n    expect(event.preventDefault).toHaveBeenCalled();\n    expect(event.stopPropagation).toHaveBeenCalled();\n    expect(environmentsStore.stopEnvironment).toHaveBeenCalledWith(environment);\n    expect(displayErrorMock.displayError).toHaveBeenCalledWith(error);\n  });\n\n  it('should throw an error during start environment', async () => {\n    // BUILD\n    const error = { message: 'failed to start environment' };\n    environmentsStore.startEnvironment.mockImplementationOnce(() => {\n      throw error;\n    });\n    // OPERATE\n    await component.handleStartEnvironment(event);\n\n    // CHECK\n    expect(event.preventDefault).toHaveBeenCalled();\n    expect(event.stopPropagation).toHaveBeenCalled();\n    expect(environmentsStore.startEnvironment).toHaveBeenCalledWith(environment);\n    expect(displayErrorMock.displayError).toHaveBeenCalledWith(error);\n  });\n});\n"],"file":"EnvironmentCard.test.js"}