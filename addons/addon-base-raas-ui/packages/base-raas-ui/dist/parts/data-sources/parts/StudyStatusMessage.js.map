{"version":3,"sources":["../../../../src/parts/data-sources/parts/StudyStatusMessage.js"],"names":["StudyStatusMessage","props","handleExpand","expanded","handleCancel","_","isFunction","onCancel","renderAvailable","renderPending","renderError","study","reachableState","expandText","msg","statusMessageInfo","message","pendingState","isEmpty","errorState","React","Component","computed","observable","action"],"mappings":"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","sourcesContent":["/*\n *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\").\n *  You may not use this file except in compliance with the License.\n *  A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n *  or in the \"license\" file accompanying this file. This file is distributed\n *  on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *  express or implied. See the License for the specific language governing\n *  permissions and limitations under the License.\n */\n\nimport _ from 'lodash';\nimport React from 'react';\nimport { decorate, computed, runInAction, observable, action } from 'mobx';\nimport { observer, inject } from 'mobx-react';\nimport { withRouter } from 'react-router-dom';\nimport { Message } from 'semantic-ui-react';\n\n// expected props\n// - study (via props)\n// - onCancel (via props) a call back function when the user clicks on Done\nclass StudyStatusMessage extends React.Component {\n  constructor(props) {\n    super(props);\n    runInAction(() => {\n      this.expanded = false;\n    });\n  }\n\n  get study() {\n    return this.props.study;\n  }\n\n  handleExpand = () => {\n    this.expanded = !this.expanded;\n  };\n\n  handleCancel = () => {\n    if (!_.isFunction(this.props.onCancel)) return;\n    this.props.onCancel();\n  };\n\n  render() {\n    return (\n      <div className=\"mt2 mb2 animated fadeIn\">\n        {this.renderAvailable()}\n        {this.renderPending()}\n        {this.renderError()}\n      </div>\n    );\n  }\n\n  renderAvailable() {\n    const study = this.study;\n\n    if (!study.reachableState) return null;\n\n    return (\n      <Message positive onDismiss={this.handleCancel}>\n        <Message.Header>Available</Message.Header>\n        <p>The study is reachable and available for use.</p>\n      </Message>\n    );\n  }\n\n  renderPending() {\n    const study = this.study;\n    const expanded = this.expanded;\n    const expandText = expanded ? 'less' : 'more';\n    const msg = study.statusMessageInfo.message;\n\n    if (!study.pendingState) return null;\n\n    return (\n      <Message warning>\n        <Message.Header>Not available yet</Message.Header>\n        <p>\n          The study is in the process of being connected with the application. It is unreachable until the\n          CloudFormation stack is successfully deploy.\n          <span className=\"underline ml1 cursor-pointer\" onClick={this.handleExpand}>\n            {expandText}\n          </span>\n        </p>\n        {expanded && (\n          <div className=\"mt2 animated fadeIn\">\n            <Message.Header>CloudFormation stack already deployed?</Message.Header>\n            <Message.List>\n              <Message.Item>Check if the CloudFormation stack is deployed in the correct AWS account</Message.Item>\n              <Message.Item>Check if the CloudFormation stack is deployed in the correct AWS region</Message.Item>\n              <Message.Item>Try the connection check test again</Message.Item>\n            </Message.List>\n          </div>\n        )}\n        {expanded && !_.isEmpty(msg) && (\n          <div className=\"mt2\">\n            <Message.Header>Message received from the server</Message.Header>\n            <p>{msg}</p>\n          </div>\n        )}\n      </Message>\n    );\n  }\n\n  renderError() {\n    const study = this.study;\n    const expanded = this.expanded;\n    const expandText = expanded ? 'less' : 'more';\n    const msg = study.statusMessageInfo.message;\n\n    if (!study.errorState) return null;\n\n    return (\n      <Message negative>\n        <Message.Header>Not available</Message.Header>\n        <p>\n          The study is unreachable. This is usually an indication of a problem during the CloudFormation stack\n          deployment.\n          <span className=\"underline ml1 cursor-pointer\" onClick={this.handleExpand}>\n            {expandText}\n          </span>\n        </p>\n        {expanded && (\n          <Message.List>\n            <Message.Item>Check if the CloudFormation stack is deployed in the correct AWS account</Message.Item>\n            <Message.Item>Check if the CloudFormation stack is deployed in the correct AWS region</Message.Item>\n            <Message.Item>Try the connection check test again</Message.Item>\n          </Message.List>\n        )}\n        {expanded && !_.isEmpty(msg) && (\n          <div className=\"mt2\">\n            <Message.Header>Message received from the server</Message.Header>\n            <p>{msg}</p>\n          </div>\n        )}\n      </Message>\n    );\n  }\n}\n\n// see https://medium.com/@mweststrate/mobx-4-better-simpler-faster-smaller-c1fbc08008da\ndecorate(StudyStatusMessage, {\n  study: computed,\n  expanded: observable,\n  handleExpand: action,\n  handleCancel: action,\n});\n\nexport default inject()(withRouter(observer(StudyStatusMessage)));\n"],"file":"StudyStatusMessage.js"}