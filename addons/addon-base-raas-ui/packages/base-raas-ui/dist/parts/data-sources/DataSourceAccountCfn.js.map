{"version":3,"sources":["../../../src/parts/data-sources/DataSourceAccountCfn.js"],"names":["DataSourceAccountCfn","store","getStackInfoStore","load","startHeartbeat","accountsStore","account","accountStore","getAccountStore","id","content","error","renderMain","props","dataSourceAccountsStore","React","Component","computed"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AACA;;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;IACMA,oB;;;;;;;;;;;;;wCACgB;AAClB,UAAMC,KAAK,GAAG,KAAKC,iBAAL,EAAd;;AACA,UAAI,CAAC,6BAAaD,KAAb,CAAL,EAA0B;AACxB,iCAAaA,KAAK,CAACE,IAAN,EAAb;AACD;;AACDF,MAAAA,KAAK,CAACG,cAAN;AACD;;;2CAEsB;AACrB,UAAMH,KAAK,GAAG,KAAKC,iBAAL,EAAd;AACA,oCAAcD,KAAd;AACD;;;wCAUmB;AAClB,UAAMI,aAAa,GAAG,KAAKA,aAA3B;AACA,UAAMC,OAAO,GAAG,KAAKA,OAAL,IAAgB,EAAhC;AACA,UAAMC,YAAY,GAAGF,aAAa,CAACG,eAAd,CAA8BF,OAAO,CAACG,EAAtC,CAArB;AAEA,aAAOF,YAAY,CAACL,iBAAb,EAAP;AACD;;;6BAEQ;AACP,UAAMD,KAAK,GAAG,KAAKC,iBAAL,EAAd;AACA,UAAIQ,OAAO,GAAG,IAAd;;AAEA,UAAI,6BAAaT,KAAb,CAAJ,EAAyB;AACvBS,QAAAA,OAAO,gBAAG,gCAAC,oBAAD;AAAU,UAAA,KAAK,EAAET,KAAK,CAACU,KAAvB;AAA8B,UAAA,SAAS,EAAC;AAAxC,UAAV;AACD,OAFD,MAEO,IAAI,+BAAeV,KAAf,CAAJ,EAA2B;AAChCS,QAAAA,OAAO,gBAAG,gCAAC,oCAAD;AAAqB,UAAA,YAAY,EAAE;AAAnC,UAAV;AACD,OAFM,MAEA,IAAI,6BAAaT,KAAb,CAAJ,EAAyB;AAC9BS,QAAAA,OAAO,GAAG,KAAKE,UAAL,EAAV;AACD,OAFM,MAEA;AACLF,QAAAA,OAAO,GAAG,IAAV;AACD;;AAED,aAAOA,OAAP;AACD;;;iCAEY;AACX,UAAMJ,OAAO,GAAG,KAAKA,OAArB;AAEA,0BACE;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE,gCAAC,2BAAD;AAAiB,QAAA,OAAO,EAAEA;AAA1B,QADF,CADF;AAKD;;;wBAzCa;AACZ,aAAO,KAAKO,KAAL,CAAWP,OAAlB;AACD;;;wBAEmB;AAClB,aAAO,KAAKO,KAAL,CAAWC,uBAAlB;AACD;;;;EApBgCC,kBAAMC,S,GA0DzC;;;AACA,oBAAShB,oBAAT,EAA+B;AAC7BK,EAAAA,aAAa,EAAEY,cADc;AAE7BX,EAAAA,OAAO,EAAEW;AAFoB,CAA/B;;eAKe,uBAAO,yBAAP,EAAkC,gCAAW,yBAASjB,oBAAT,CAAX,CAAlC,C","sourcesContent":["import React from 'react';\nimport { decorate, computed } from 'mobx';\nimport { observer, inject } from 'mobx-react';\nimport { withRouter } from 'react-router-dom';\n\nimport { swallowError } from '@aws-ee/base-ui/dist/helpers/utils';\nimport { isStoreReady, isStoreLoading, isStoreError, stopHeartbeat } from '@aws-ee/base-ui/dist/models/BaseStore';\nimport ErrorBox from '@aws-ee/base-ui/dist/parts/helpers/ErrorBox';\nimport ProgressPlaceHolder from '@aws-ee/base-ui/dist/parts/helpers/BasicProgressPlaceholder';\n\nimport AccountCfnPanel from './parts/AccountCfnPanel';\n\n// expected props\n// - account (via prop)\n// - dataSourceAccountsStore (via injection)\nclass DataSourceAccountCfn extends React.Component {\n  componentDidMount() {\n    const store = this.getStackInfoStore();\n    if (!isStoreReady(store)) {\n      swallowError(store.load());\n    }\n    store.startHeartbeat();\n  }\n\n  componentWillUnmount() {\n    const store = this.getStackInfoStore();\n    stopHeartbeat(store);\n  }\n\n  get account() {\n    return this.props.account;\n  }\n\n  get accountsStore() {\n    return this.props.dataSourceAccountsStore;\n  }\n\n  getStackInfoStore() {\n    const accountsStore = this.accountsStore;\n    const account = this.account || {};\n    const accountStore = accountsStore.getAccountStore(account.id);\n\n    return accountStore.getStackInfoStore();\n  }\n\n  render() {\n    const store = this.getStackInfoStore();\n    let content = null;\n\n    if (isStoreError(store)) {\n      content = <ErrorBox error={store.error} className=\"p0\" />;\n    } else if (isStoreLoading(store)) {\n      content = <ProgressPlaceHolder segmentCount={1} />;\n    } else if (isStoreReady(store)) {\n      content = this.renderMain();\n    } else {\n      content = null;\n    }\n\n    return content;\n  }\n\n  renderMain() {\n    const account = this.account;\n\n    return (\n      <div className=\"animated fadeIn mb3\">\n        <AccountCfnPanel account={account} />\n      </div>\n    );\n  }\n}\n\n// see https://medium.com/@mweststrate/mobx-4-better-simpler-faster-smaller-c1fbc08008da\ndecorate(DataSourceAccountCfn, {\n  accountsStore: computed,\n  account: computed,\n});\n\nexport default inject('dataSourceAccountsStore')(withRouter(observer(DataSourceAccountCfn)));\n"],"file":"DataSourceAccountCfn.js"}