{"version":3,"sources":["../../../src/parts/accounts/IndexesList.js"],"names":["IndexesList","props","handleAddIndex","state","store","indexesStore","load","getIndexesStore","list","indexesData","getIndexes","pageSize","length","pagination","filter","row","columnValue","String","id","toLowerCase","filterValue","value","indexOf","Header","accessor","awsAccountsStore","getNameForAccountId","awsAccountId","pathname","location","link","history","push","renderTotal","content","error","renderMain","renderHeader","React","Component"],"mappings":"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","sourcesContent":["/*\n *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\").\n *  You may not use this file except in compliance with the License.\n *  A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n *  or in the \"license\" file accompanying this file. This file is distributed\n *  on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *  express or implied. See the License for the specific language governing\n *  permissions and limitations under the License.\n */\n\nimport React from 'react';\nimport { Button, Container, Header, Icon, Label } from 'semantic-ui-react';\nimport { withRouter } from 'react-router-dom';\nimport { inject, observer } from 'mobx-react';\nimport ReactTable from 'react-table';\n\nimport { isStoreError, isStoreLoading } from '@aws-ee/base-ui/dist/models/BaseStore';\nimport ErrorBox from '@aws-ee/base-ui/dist/parts/helpers/ErrorBox';\nimport { createLink } from '@aws-ee/base-ui/dist/helpers/routing';\nimport BasicProgressPlaceholder from '@aws-ee/base-ui/dist/parts/helpers/BasicProgressPlaceholder';\n\nclass IndexesList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  getIndexesStore() {\n    const store = this.props.indexesStore;\n    store.load();\n    return store;\n  }\n\n  getIndexes() {\n    const store = this.getIndexesStore();\n    return store.list;\n  }\n\n  renderMain() {\n    const indexesData = this.getIndexes();\n    const pageSize = indexesData.length;\n    const pagination = indexesData.length > pageSize;\n    return (\n      <div>\n        <ReactTable\n          data={indexesData}\n          showPagination={pagination}\n          defaultPageSize={pageSize}\n          className=\"-striped -highlight\"\n          filterable\n          defaultFilterMethod={(filter, row) => {\n            const columnValue = String(row[filter.id]).toLowerCase();\n            const filterValue = filter.value.toLowerCase();\n            return columnValue.indexOf(filterValue) >= 0;\n          }}\n          columns={[\n            {\n              Header: 'Index Name',\n              accessor: 'id',\n            },\n            {\n              Header: 'AWS Account',\n              id: 'awsAccountId',\n              accessor: row => this.props.awsAccountsStore.getNameForAccountId(row.awsAccountId),\n            },\n            {\n              Header: 'Description',\n              accessor: 'description',\n            },\n          ]}\n        />\n        <br />\n      </div>\n    );\n  }\n\n  goto(pathname) {\n    const location = this.props.location;\n    const link = createLink({ location, pathname });\n    this.props.history.push(link);\n  }\n\n  handleAddIndex = () => {\n    this.goto('/indexes/add');\n  };\n\n  renderHeader() {\n    return (\n      <div className=\"mb3 flex\">\n        <Header as=\"h3\" className=\"color-grey mt1 mb0 flex-auto\">\n          <Icon name=\"briefcase\" className=\"align-top\" />\n          <Header.Content className=\"left-align\">\n            Indexes\n            {this.renderTotal()}\n          </Header.Content>\n        </Header>\n        <Button color=\"blue\" size=\"medium\" basic onClick={this.handleAddIndex}>\n          Add Index\n        </Button>\n      </div>\n    );\n  }\n\n  renderTotal() {\n    return <Label circular>{this.getIndexes().length}</Label>;\n  }\n\n  render() {\n    const store = this.getIndexesStore();\n    let content;\n    if (isStoreError(store)) {\n      content = <ErrorBox error={store.error} />;\n    } else if (isStoreLoading(store)) {\n      content = <BasicProgressPlaceholder segmentCount={3} />;\n    } else {\n      content = this.renderMain();\n    }\n    return (\n      <Container className=\"mt3 animated fadeIn\">\n        {this.renderHeader()}\n        {content}\n      </Container>\n    );\n  }\n}\n\nexport default inject('awsAccountsStore', 'indexesStore')(withRouter(observer(IndexesList)));\n"],"file":"IndexesList.js"}