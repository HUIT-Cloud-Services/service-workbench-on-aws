{"version":3,"sources":["../../src/plugins/routes-plugin.js"],"names":["registerRoutes","routesMap","location","appContext","routes","Map","AddSingleLocalUser","AddUser","User","AddIndex","AddAwsAccount","CreateAwsAccount","UpdateBudget","Accounts","Dashboard","StudyEnvironmentSetup","StudiesPage","EnvironmentSetup","EnvironmentDetailPage","EnvironmentsList","AddProject","getDefaultRouteLocation","userStore","defaultRoute","isRootUser","_","get","isExternalResearcher","isInternalGuest","isExternalGuest","defaultLocation","pathname","search","hash","state","plugin"],"mappings":"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","sourcesContent":["/*\n *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\").\n *  You may not use this file except in compliance with the License.\n *  A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n *  or in the \"license\" file accompanying this file. This file is distributed\n *  on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *  express or implied. See the License for the specific language governing\n *  permissions and limitations under the License.\n */\n\nimport _ from 'lodash';\nimport withAuth from '@aws-ee/base-ui/dist/withAuth';\n\nimport User from '../parts/users/User';\nimport Accounts from '../parts/accounts/Accounts';\nimport AddUser from '../parts/users/AddUser';\nimport AddIndex from '../parts/accounts/AddIndex';\nimport Dashboard from '../parts/dashboard/Dashboard';\nimport StudiesPage from '../parts/studies/StudiesPage';\nimport StudyEnvironmentSetup from '../parts/studies/StudyEnvironmentSetup';\nimport EnvironmentsList from '../parts/environments/EnvironmentsList';\nimport EnvironmentDetailPage from '../parts/environments/EnvironmentDetailPage';\nimport AddAwsAccount from '../parts/accounts/AddAwsAccount';\nimport CreateAwsAccount from '../parts/accounts/CreateAwsAccount';\nimport UpdateBudget from '../parts/accounts/UpdateBudget';\nimport EnvironmentSetup from '../parts/environments/EnvironmentSetup';\nimport AddProject from '../parts/projects/AddProject';\nimport AddSingleLocalUser from '../parts/users/AddSingleLocalUser';\n\n/**\n * Adds routes to the given routesMap.\n * @param routesMap A Map containing routes. This object is a Map that has route paths as\n * keys and React Component as value.\n *\n * @returns {Promise<*>} Returns a Map with the mapping of base routes vs React Component\n */\n// eslint-disable-next-line no-unused-vars\nfunction registerRoutes(routesMap, { location, appContext }) {\n  // Temporary solution for the routes ordering issue\n  routesMap.delete('/users/add');\n  routesMap.delete('/users');\n\n  const routes = new Map([\n    ...routesMap,\n    ['/users/add/local', withAuth(AddSingleLocalUser)],\n    ['/users/add', withAuth(AddUser)],\n    ['/users', withAuth(User)],\n    ['/indexes/add', withAuth(AddIndex)],\n    ['/aws-accounts/add', withAuth(AddAwsAccount)],\n    ['/aws-accounts/create', withAuth(CreateAwsAccount)],\n    ['/aws-accounts/budget/:id', withAuth(UpdateBudget)],\n    ['/accounts', withAuth(Accounts)],\n    ['/dashboard', withAuth(Dashboard)],\n    ['/studies/setup-workspace/type/:envTypeId', withAuth(StudyEnvironmentSetup)],\n    ['/studies/setup-workspace', withAuth(StudyEnvironmentSetup)],\n    ['/studies/workspace-type/:envTypeId', withAuth(StudiesPage)],\n    ['/studies', withAuth(StudiesPage)],\n    ['/workspaces/create/type/:envTypeId', withAuth(EnvironmentSetup)],\n    ['/workspaces/create', withAuth(EnvironmentSetup)],\n    ['/workspaces/id/:instanceId', withAuth(EnvironmentDetailPage)],\n    ['/workspaces', withAuth(EnvironmentsList)],\n    ['/projects/add', withAuth(AddProject)],\n  ]);\n\n  return routes;\n}\n\nfunction getDefaultRouteLocation({ location, appContext }) {\n  const userStore = appContext.userStore;\n  let defaultRoute = '/dashboard';\n  const isRootUser = _.get(userStore, 'user.isRootUser');\n  const isExternalResearcher = _.get(userStore, 'user.isExternalResearcher');\n  const isInternalGuest = _.get(userStore, 'user.isInternalGuest');\n  const isExternalGuest = _.get(userStore, 'user.isExternalGuest');\n\n  if (isRootUser) {\n    defaultRoute = '/users';\n  } else if (isExternalResearcher) {\n    defaultRoute = '/workspaces';\n  } else if (isInternalGuest || isExternalGuest) {\n    defaultRoute = '/studies';\n  }\n\n  // See https://reacttraining.com/react-router/web/api/withRouter\n  const defaultLocation = {\n    pathname: defaultRoute,\n    search: location.search, // we want to keep any query parameters\n    hash: location.hash,\n    state: location.state,\n  };\n\n  return defaultLocation;\n}\n\nconst plugin = {\n  registerRoutes,\n  getDefaultRouteLocation,\n};\n\nexport default plugin;\n"],"file":"routes-plugin.js"}