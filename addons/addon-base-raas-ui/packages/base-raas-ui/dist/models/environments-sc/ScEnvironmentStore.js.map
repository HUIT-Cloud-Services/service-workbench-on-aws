{"version":3,"sources":["../../../src/models/environments-sc/ScEnvironmentStore.js"],"names":["ScEnvironmentStore","BaseStore","named","props","envId","tickPeriod","actions","self","superCleanup","cleanup","doLoad","parent","rawEnv","addScEnvironment","views","scEnvironment","w","getScEnvironment"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;;;;;;AAEA;AACA;AACA;AACA,IAAMA,kBAAkB,GAAGC,qBAAUC,KAAV,CAAgB,oBAAhB,EACxBC,KADwB,CAClB;AACLC,EAAAA,KAAK,EAAE,EADF;AAELC,EAAAA,UAAU,EAAE,KAAK,IAFZ,CAEkB;;AAFlB,CADkB,EAMxBC,OANwB,CAMhB,UAAAC,IAAI,EAAI;AACf;AACA,MAAMC,YAAY,GAAGD,IAAI,CAACE,OAA1B;AAEA,SAAO;AACCC,IAAAA,MADD,oBACU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACPC,gBAAAA,MADO,GACE,8BAAUJ,IAAV,EAAgB,CAAhB,CADF;AAAA;AAAA,uBAEQ,2BAAiBA,IAAI,CAACH,KAAtB,CAFR;;AAAA;AAEPQ,gBAAAA,MAFO;AAGbD,gBAAAA,MAAM,CAACE,gBAAP,CAAwBD,MAAxB;;AAHa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAId,KALI;AAOLH,IAAAA,OAAO,EAAE,mBAAM;AACbD,MAAAA,YAAY;AACb;AATI,GAAP;AAWD,CArBwB,EAuBxBM,KAvBwB,CAuBlB,UAAAP,IAAI;AAAA,SAAK;AACd,QAAIQ,aAAJ,GAAoB;AAClB,UAAMJ,MAAM,GAAG,8BAAUJ,IAAV,EAAgB,CAAhB,CAAf;AACA,UAAMS,CAAC,GAAGL,MAAM,CAACM,gBAAP,CAAwBV,IAAI,CAACH,KAA7B,CAAV;AACA,aAAOY,CAAP;AACD;;AALa,GAAL;AAAA,CAvBc,CAA3B,C,CA+BA;AACA;AACA","sourcesContent":["import { getParent } from 'mobx-state-tree';\nimport { BaseStore } from '@aws-ee/base-ui/dist/models/BaseStore';\n\nimport { getScEnvironment } from '../../helpers/api';\n\n// ==================================================================\n// ScEnvironmentStore\n// ==================================================================\nconst ScEnvironmentStore = BaseStore.named('ScEnvironmentStore')\n  .props({\n    envId: '',\n    tickPeriod: 30 * 1000, // 30 seconds\n  })\n\n  .actions(self => {\n    // save the base implementation of cleanup\n    const superCleanup = self.cleanup;\n\n    return {\n      async doLoad() {\n        const parent = getParent(self, 2);\n        const rawEnv = await getScEnvironment(self.envId);\n        parent.addScEnvironment(rawEnv);\n      },\n\n      cleanup: () => {\n        superCleanup();\n      },\n    };\n  })\n\n  .views(self => ({\n    get scEnvironment() {\n      const parent = getParent(self, 2);\n      const w = parent.getScEnvironment(self.envId);\n      return w;\n    },\n  }));\n\n// Note: Do NOT register this in the global context, if you want to gain access to an instance\n//       use scEnvironmentsStore.getScEnvironmentStore()\n// eslint-disable-next-line import/prefer-default-export\nexport { ScEnvironmentStore };\n"],"file":"ScEnvironmentStore.js"}