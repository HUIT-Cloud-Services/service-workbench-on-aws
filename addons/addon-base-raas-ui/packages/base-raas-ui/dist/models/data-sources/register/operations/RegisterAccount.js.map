{"version":3,"sources":["../../../../../src/models/data-sources/register/operations/RegisterAccount.js"],"names":["RegisterAccountOperation","account","accountsStore","id","name","setMessage","registerAccount","markSkipped","Operation","doRun","action"],"mappings":";;;;;;;;;AAeA;;AAEA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAEMA,wB;;;;;AACJ,0CAA6C;AAAA;;AAAA,4BAA/BC,OAA+B;AAAA,QAA/BA,OAA+B,6BAArB,EAAqB;AAAA,QAAjBC,aAAiB,QAAjBA,aAAiB;;AAAA;;AAC3C;AAD2C,QAEnCC,EAFmC,GAE5BF,OAF4B,CAEnCE,EAFmC;AAG3C,UAAKF,OAAL,GAAeA,OAAf;AACA,UAAKG,IAAL,kCAAoCD,EAApC;AACA,UAAKD,aAAL,GAAqBA,aAArB;AAL2C;AAM5C;;;;;;;;;;;AAGSC,gBAAAA,E,GAAO,KAAKF,O,CAAZE,E;AACR,qBAAKE,UAAL,oCAA4CF,EAA5C;;;uBAEQ,KAAKD,aAAL,CAAmBI,eAAnB,CAAmC,KAAKL,OAAxC,C;;;AACN,qBAAKI,UAAL,4CAAoDF,EAApD;;;;;;;;oBAGK,yC;;;;;;;;AAEL,qBAAKI,WAAL;AACA,qBAAKF,UAAL;;;;;;;;;;;;;;;;;;;EApBiCG,sB,GAyBvC;;;AACA,oBAASR,wBAAT,EAAmC;AACjCS,EAAAA,KAAK,EAAEC;AAD0B,CAAnC;eAIeV,wB","sourcesContent":["/*\n *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\").\n *  You may not use this file except in compliance with the License.\n *  A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n *  or in the \"license\" file accompanying this file. This file is distributed\n *  on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *  express or implied. See the License for the specific language governing\n *  permissions and limitations under the License.\n */\n\nimport { decorate, action } from 'mobx';\n\nimport { isAlreadyExists } from '../../../../helpers/errors';\nimport Operation from '../../../operations/Operation';\n\nclass RegisterAccountOperation extends Operation {\n  constructor({ account = {}, accountsStore }) {\n    super();\n    const { id } = account;\n    this.account = account;\n    this.name = `Registering account #${id}`;\n    this.accountsStore = accountsStore;\n  }\n\n  async doRun() {\n    const { id } = this.account;\n    this.setMessage(`Registering AWS account #${id}`);\n    try {\n      await this.accountsStore.registerAccount(this.account);\n      this.setMessage(`Successfully registered account #${id}`);\n    } catch (error) {\n      // Check if the error is about existing account, if so, then skip it\n      if (!isAlreadyExists(error)) throw error;\n\n      this.markSkipped();\n      this.setMessage(`Skipping account registration, the account is already registered`);\n    }\n  }\n}\n\n// see https://medium.com/@mweststrate/mobx-4-better-simpler-faster-smaller-c1fbc08008da\ndecorate(RegisterAccountOperation, {\n  doRun: action,\n});\n\nexport default RegisterAccountOperation;\n"],"file":"RegisterAccount.js"}