{"version":3,"sources":["../../../../../src/parts/environment-types/env-type-config/env-type-config-steps/AccessControlStep.js"],"names":["AccessControlStep","form","processing","allowRoleIdsField","$","denyRoleIdsField","userRoleOptions","_","filter","userRolesStore","dropdownOptions","r","includes","toLower","value","props","BaseEnvTypeConfigStep","computed"],"mappings":";;;;;;;;;AAeA;;AACA;;AACA;;AACA;;AAEA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;IAEMA,iB;;;;;;;;;;;;;2CACmC;AAAA,UAApBC,IAAoB,QAApBA,IAAoB;AAAA,UAAdC,UAAc,QAAdA,UAAc;AACrC,UAAMC,iBAAiB,GAAGF,IAAI,CAACG,CAAL,CAAO,cAAP,KAA0B,EAApD;AACA,UAAMC,gBAAgB,GAAGJ,IAAI,CAACG,CAAL,CAAO,aAAP,KAAyB,EAAlD;;AAEA,UAAME,eAAe,GAAGC,mBAAEC,MAAF,CACtB,KAAKC,cAAL,CAAoBC,eADE,EAEtB;AACA;AACA,gBAAAC,CAAC;AAAA,eAAI,CAACJ,mBAAEK,QAAF,CAAW,CAAC,qBAAD,EAAwB,OAAxB,CAAX,EAA6CL,mBAAEM,OAAF,CAAUF,CAAC,CAACG,KAAZ,CAA7C,CAAL;AAAA,OAJqB,CAAxB;;AAMA,0BACE,+EACE,gCAAC,oBAAD;AAAU,QAAA,KAAK,EAAEX,iBAAjB;AAAoC,QAAA,OAAO,EAAEG,eAA7C;AAA8D,QAAA,SAAS,MAAvE;AAAwE,QAAA,QAAQ,MAAhF;AAAiF,QAAA,KAAK,MAAtF;AAAuF,QAAA,QAAQ,EAAEJ;AAAjG,QADF,eAEE,gCAAC,oBAAD;AAAU,QAAA,KAAK,EAAEG,gBAAjB;AAAmC,QAAA,OAAO,EAAEC,eAA5C;AAA6D,QAAA,SAAS,MAAtE;AAAuE,QAAA,QAAQ,MAA/E;AAAgF,QAAA,KAAK,MAArF;AAAsF,QAAA,QAAQ,EAAEJ;AAAhG,QAFF,CADF;AAMD;;;wBAEoB;AACnB,aAAO,KAAKa,KAAL,CAAWN,cAAlB;AACD;;;;EArB6BO,iC;;AAwBhC,oBAAShB,iBAAT,EAA4B;AAC1BS,EAAAA,cAAc,EAAEQ;AADU,CAA5B;;eAGe,uBAAO,gBAAP,EAAyB,yBAASjB,iBAAT,CAAzB,C","sourcesContent":["/*\n *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\").\n *  You may not use this file except in compliance with the License.\n *  A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n *  or in the \"license\" file accompanying this file. This file is distributed\n *  on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *  express or implied. See the License for the specific language governing\n *  permissions and limitations under the License.\n */\n\nimport _ from 'lodash';\nimport React from 'react';\nimport { inject, observer } from 'mobx-react';\nimport { computed, decorate } from 'mobx';\n\nimport DropDown from '@aws-ee/base-ui/dist/parts/helpers/fields/DropDown';\nimport BaseEnvTypeConfigStep from './BaseEnvTypeConfigStep';\n\nclass AccessControlStep extends BaseEnvTypeConfigStep {\n  renderFormFields({ form, processing }) {\n    const allowRoleIdsField = form.$('allowRoleIds') || [];\n    const denyRoleIdsField = form.$('denyRoleIds') || [];\n\n    const userRoleOptions = _.filter(\n      this.userRolesStore.dropdownOptions,\n      // Also currently not supporting external roles i.e., guest and external-researcher so exclude them from\n      // \"allow\" or \"deny\" list\n      r => !_.includes(['external-researcher', 'guest'], _.toLower(r.value)),\n    );\n    return (\n      <>\n        <DropDown field={allowRoleIdsField} options={userRoleOptions} selection multiple fluid disabled={processing} />\n        <DropDown field={denyRoleIdsField} options={userRoleOptions} selection multiple fluid disabled={processing} />\n      </>\n    );\n  }\n\n  get userRolesStore() {\n    return this.props.userRolesStore;\n  }\n}\n\ndecorate(AccessControlStep, {\n  userRolesStore: computed,\n});\nexport default inject('userRolesStore')(observer(AccessControlStep));\n"],"file":"AccessControlStep.js"}