{"version":3,"sources":["../../../../src/parts/environment-types/env-type-config/EnvTypeConfigCard.js"],"names":["EnvTypeConfigCard","props","showDeleteDialog","shouldShowDeleteDialog","processing","hideDeleteDialog","showCloneDialog","cloning","showEditorDialog","shouldShowEditorDialog","hideEditorDialog","handleDeleteClick","id","store","envTypeConfigsStore","deleteEnvTypeConfig","envTypeConfig","name","_","get","__html","descHtml","renderDeleteConfirmation","renderEditorPopup","mode","envTypeConfigForEditor","envType","Component","observable","computed","action"],"mappings":"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","sourcesContent":["/*\n *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\").\n *  You may not use this file except in compliance with the License.\n *  A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n *  or in the \"license\" file accompanying this file. This file is distributed\n *  on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *  express or implied. See the License for the specific language governing\n *  permissions and limitations under the License.\n */\n\nimport _ from 'lodash';\nimport React, { Component } from 'react';\nimport { observer } from 'mobx-react';\nimport { withRouter } from 'react-router-dom';\nimport { Button, Card, Divider, Header, Icon, Modal } from 'semantic-ui-react';\nimport { action, computed, decorate, observable, runInAction } from 'mobx';\n\nimport { displayError } from '@aws-ee/base-ui/dist/helpers/notification';\nimport EnvTypeConfigEditor from './EnvTypeConfigEditor';\n\nclass EnvTypeConfigCard extends Component {\n  constructor(props) {\n    super(props);\n    runInAction(() => {\n      this.processing = false;\n      this.shouldShowDeleteDialog = false;\n      this.shouldShowEditorDialog = false;\n      this.cloning = false;\n    });\n  }\n\n  render() {\n    const envTypeConfig = this.props.envTypeConfig;\n    return (\n      <Card key={`etConfig-${envTypeConfig.id}`} raised className=\"mb3\">\n        <Card.Content>\n          <Header as=\"h4\">{envTypeConfig.name}</Header>\n          <Card.Meta className=\"flex\">\n            <span className=\"flex-auto\">{_.get(envTypeConfig, 'id')}</span>\n            <Button\n              basic\n              color=\"grey\"\n              onClick={() => this.showCloneDialog()}\n              floated=\"right\"\n              size=\"mini\"\n              disabled={this.processing}\n            >\n              Clone\n            </Button>\n          </Card.Meta>\n          <Divider />\n          <Card.Description>\n            <div className=\"mb3 pr1 pl1 pb1\">\n              {/* Yes, we are doing dangerouslySetInnerHTML, the content was already sanitized by showdownjs */}\n              {/* eslint-disable-next-line react/no-danger */}\n              <div dangerouslySetInnerHTML={{ __html: envTypeConfig.descHtml }} />\n            </div>\n          </Card.Description>\n        </Card.Content>\n        <Card.Content extra>\n          <Button\n            basic\n            color=\"blue\"\n            onClick={() => this.showEditorDialog()}\n            floated=\"right\"\n            size=\"mini\"\n            disabled={this.processing}\n          >\n            Edit\n          </Button>\n          <Button\n            basic\n            color=\"red\"\n            onClick={() => this.showDeleteDialog()}\n            floated=\"right\"\n            size=\"mini\"\n            disabled={this.processing}\n          >\n            Delete\n          </Button>\n          {this.renderDeleteConfirmation(envTypeConfig)}\n          {this.renderEditorPopup(envTypeConfig)}\n        </Card.Content>\n      </Card>\n    );\n  }\n\n  renderEditorPopup(envTypeConfig) {\n    const shouldShowEditorDialog = this.shouldShowEditorDialog;\n    const mode = this.cloning ? 'clone' : 'edit';\n    const envTypeConfigForEditor = this.cloning\n      ? { ...envTypeConfig, id: `${envTypeConfig.id}-copy`, name: `${envTypeConfig.name}-copy` }\n      : envTypeConfig;\n    return (\n      <Modal\n        closeIcon\n        open={shouldShowEditorDialog}\n        onClose={this.hideEditorDialog}\n        closeOnDimmerClick={false}\n        closeOnEscape={false}\n        size=\"large\"\n      >\n        <EnvTypeConfigEditor\n          onCancel={this.hideEditorDialog}\n          envTypeConfig={envTypeConfigForEditor}\n          envType={this.props.envType}\n          envTypeConfigsStore={this.envTypeConfigsStore}\n          onEnvTypeConfigSaveComplete={this.hideEditorDialog}\n          action={mode}\n        />\n      </Modal>\n    );\n  }\n\n  renderDeleteConfirmation(envTypeConfig) {\n    const shouldShowDeleteDialog = this.shouldShowDeleteDialog;\n    const processing = this.processing;\n    return (\n      <Modal open={shouldShowDeleteDialog} onClose={this.hideDeleteDialog} closeOnDimmerClick={!processing}>\n        <Modal.Header>\n          Delete Configuration: <strong>{envTypeConfig.name}</strong>\n        </Modal.Header>\n        <Modal.Content>\n          <p>\n            Are you sure you want to delete <strong>{envTypeConfig.name}</strong> configuration?\n          </p>\n          <p>\n            Once you delete environment type configuration, users will not be able launch workspaces using that\n            configuration. You will need to re-create the configuration.\n          </p>\n          <p>Is it okay to delete?</p>\n        </Modal.Content>\n        <Modal.Actions>\n          <Button\n            basic\n            icon\n            color=\"grey\"\n            labelPosition=\"right\"\n            size=\"mini\"\n            disabled={this.processing}\n            onClick={this.hideDeleteDialog}\n          >\n            <Icon name=\"close\" />\n            Cancel\n          </Button>\n          <Button\n            basic\n            icon\n            color=\"red\"\n            labelPosition=\"right\"\n            size=\"mini\"\n            disabled={this.processing}\n            onClick={() => this.handleDeleteClick(envTypeConfig.id)}\n          >\n            <Icon name=\"trash\" /> Delete\n          </Button>\n        </Modal.Actions>\n      </Modal>\n    );\n  }\n\n  showDeleteDialog = () => {\n    this.shouldShowDeleteDialog = true;\n    this.processing = false;\n  };\n\n  hideDeleteDialog = () => {\n    if (this.processing) return;\n    this.shouldShowDeleteDialog = false;\n  };\n\n  showCloneDialog = () => {\n    this.cloning = true;\n    this.showEditorDialog();\n  };\n\n  showEditorDialog = () => {\n    this.shouldShowEditorDialog = true;\n    this.processing = false;\n  };\n\n  hideEditorDialog = () => {\n    if (this.processing) return;\n    this.shouldShowEditorDialog = false;\n    this.cloning = false;\n  };\n\n  handleDeleteClick = async id => {\n    this.processing = true;\n    const store = this.envTypeConfigsStore;\n    try {\n      await store.deleteEnvTypeConfig(id);\n    } catch (error) {\n      displayError(error);\n    }\n    runInAction(() => {\n      this.processing = false;\n      this.hideDeleteDialog();\n    });\n  };\n\n  get envTypeConfigsStore() {\n    return this.props.envTypeConfigsStore;\n  }\n}\n\ndecorate(EnvTypeConfigCard, {\n  processing: observable,\n  envTypeConfigsStore: computed,\n\n  shouldShowDeleteDialog: observable,\n  shouldShowEditorDialog: observable,\n  cloning: observable,\n\n  handleDeleteClick: action,\n\n  showDeleteDialog: action,\n  hideDeleteDialog: action,\n\n  showCloneDialog: action,\n\n  showEditorDialog: action,\n  hideEditorDialog: action,\n});\nexport default withRouter(observer(EnvTypeConfigCard));\n"],"file":"EnvTypeConfigCard.js"}