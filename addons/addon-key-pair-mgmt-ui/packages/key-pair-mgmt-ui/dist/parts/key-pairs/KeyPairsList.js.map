{"version":3,"sources":["../../../src/parts/key-pairs/KeyPairsList.js"],"names":["React","_","decorate","computed","action","observer","inject","withRouter","Container","Segment","Header","Icon","Button","Label","gotoFn","swallowError","isStoreLoading","isStoreEmpty","isStoreNotEmpty","isStoreError","ErrorBox","ProgressPlaceHolder","KeyPairCard","KeyPairsList","Component","handleCreateKeyPair","event","preventDefault","stopPropagation","goto","componentDidMount","window","scrollTo","store","keyPairsStore","load","props","render","content","error","renderEmpty","renderMain","renderTitle","list","map","item","id","renderTotal","total"],"mappings":"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","sourcesContent":["import React from 'react';\nimport _ from 'lodash';\nimport { decorate, computed, action } from 'mobx';\nimport { observer, inject } from 'mobx-react';\nimport { withRouter } from 'react-router-dom';\nimport { Container, Segment, Header, Icon, Button, Label } from 'semantic-ui-react';\n\nimport { gotoFn } from '@aws-ee/base-ui/dist/helpers/routing';\nimport { swallowError } from '@aws-ee/base-ui/dist/helpers/utils';\nimport { isStoreLoading, isStoreEmpty, isStoreNotEmpty, isStoreError } from '@aws-ee/base-ui/dist/models/BaseStore';\nimport ErrorBox from '@aws-ee/base-ui/dist/parts/helpers/ErrorBox';\nimport ProgressPlaceHolder from '@aws-ee/base-ui/dist/parts/helpers/BasicProgressPlaceholder';\n\nimport KeyPairCard from './KeyPairCard';\n\n// expected props\n// keyPairsStore (via injection)\nclass KeyPairsList extends React.Component {\n  componentDidMount() {\n    window.scrollTo(0, 0);\n    const store = this.keyPairsStore;\n    swallowError(store.load());\n  }\n\n  get keyPairsStore() {\n    return this.props.keyPairsStore;\n  }\n\n  handleCreateKeyPair = event => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    const goto = gotoFn(this);\n    goto(`/key-pair-management/create`);\n  };\n\n  render() {\n    const store = this.keyPairsStore;\n    let content = null;\n\n    if (isStoreError(store)) {\n      content = <ErrorBox error={store.error} className=\"p0\" />;\n    } else if (isStoreLoading(store)) {\n      content = <ProgressPlaceHolder segmentCount={1} />;\n    } else if (isStoreEmpty(store)) {\n      content = this.renderEmpty();\n    } else if (isStoreNotEmpty(store)) {\n      content = this.renderMain();\n    } else {\n      content = null;\n    }\n\n    return (\n      <Container className=\"mt3 animated fadeIn\">\n        {this.renderTitle()}\n        {content}\n      </Container>\n    );\n  }\n\n  renderMain() {\n    const store = this.keyPairsStore;\n    const list = store.list;\n\n    return (\n      <div>\n        {_.map(list, item => (\n          <Segment className=\"p3 mb4\" clearing key={item.id}>\n            <KeyPairCard keyPair={item} />\n          </Segment>\n        ))}\n      </div>\n    );\n  }\n\n  renderEmpty() {\n    return (\n      <Segment placeholder>\n        <Header icon className=\"color-grey\">\n          <Icon name=\"terminal\" />\n          No SSH Keys\n          <Header.Subheader>To create an SSH key, click Create Key.</Header.Subheader>\n        </Header>\n      </Segment>\n    );\n  }\n\n  renderTitle() {\n    return (\n      <div className=\"mb3 flex\">\n        <Header as=\"h3\" className=\"color-grey mt1 mb0 flex-auto\">\n          <Icon name=\"key\" className=\"align-top\" />\n          <Header.Content className=\"left-align\">SSH Keys {this.renderTotal()}</Header.Content>\n        </Header>\n        <div>\n          <Button color=\"blue\" size=\"medium\" basic onClick={this.handleCreateKeyPair}>\n            Create Key\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  renderTotal() {\n    const store = this.keyPairsStore;\n    if (isStoreError(store) || isStoreLoading(store)) return null;\n\n    return <Label circular>{store.total}</Label>;\n  }\n}\n\n// see https://medium.com/@mweststrate/mobx-4-better-simpler-faster-smaller-c1fbc08008da\ndecorate(KeyPairsList, {\n  keyPairsStore: computed,\n  handleCreateKeyPair: action,\n});\n\nexport default inject('keyPairsStore')(withRouter(observer(KeyPairsList)));\n"],"file":"KeyPairsList.js"}