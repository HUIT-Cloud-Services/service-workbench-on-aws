{"version":3,"sources":["../src/AppContainer.js"],"names":["AppContainer","document","title","branding","page","querySelector","href","props","assets","images","faviconIcon","faviconImage","location","pluginRegistry","app","plugins","_","reverse","getPluginsWithMethod","App","renderError","forEach","plugin","result","getAppComponent","appContext","isUndefined","AutoLogout","getAutoLogoutComponent","Component"],"mappings":";;;;;;;;;AAeA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;IACMA,Y;;;;;;;;;;;;;wCACgB;AAClBC,MAAAA,QAAQ,CAACC,KAAT,GAAiBC,mBAASC,IAAT,CAAcF,KAA/B;AACAD,MAAAA,QAAQ,CAACI,aAAT,CAAuB,2BAAvB,EAAoDC,IAApD,GAA2D,KAAKC,KAAL,CAAWC,MAAX,CAAkBC,MAAlB,CAAyBC,WAApF;AACAT,MAAAA,QAAQ,CAACI,aAAT,CAAuB,kBAAvB,EAA2CC,IAA3C,GAAkD,KAAKC,KAAL,CAAWC,MAAX,CAAkBC,MAAlB,CAAyBE,YAA3E;AACD;;;6BAEQ;AAAA,wBACmC,KAAKJ,KADxC;AAAA,UACCK,QADD,eACCA,QADD;AAAA,UACWC,cADX,eACWA,cADX;AAAA,UAC2BC,GAD3B,eAC2BA,GAD3B;;AAEP,UAAIC,OAAO,GAAGC,mBAAEC,OAAF,CAAUJ,cAAc,CAACK,oBAAf,CAAoC,eAApC,EAAqD,iBAArD,KAA2E,EAArF,CAAd;;AACA,UAAIC,GAAG,GAAG,KAAKC,WAAL,EAAV,CAHO,CAKP;;AACAJ,yBAAEK,OAAF,CAAUN,OAAV,EAAmB,UAAAO,MAAM,EAAI;AAC3B,YAAMC,MAAM,GAAGD,MAAM,CAACE,eAAP,CAAuB;AAAEZ,UAAAA,QAAQ,EAARA,QAAF;AAAYa,UAAAA,UAAU,EAAE,2BAAOX,GAAP;AAAxB,SAAvB,CAAf;AACA,YAAIE,mBAAEU,WAAF,CAAcH,MAAd,CAAJ,EAA2B;AAC3BJ,QAAAA,GAAG,GAAGI,MAAN,CAH2B,CAI3B;;AACA,eAAO,KAAP,CAL2B,CAKb;AACf,OAND;;AAQAR,MAAAA,OAAO,GAAGC,mBAAEC,OAAF,CAAUJ,cAAc,CAACK,oBAAf,CAAoC,eAApC,EAAqD,wBAArD,KAAkF,EAA5F,CAAV;;AACA,UAAIS,UAAU,GAAG;AAAA,4BAAM,iEAAN;AAAA,OAAjB,CAfO,CAgBP;;;AACAX,yBAAEK,OAAF,CAAUN,OAAV,EAAmB,UAAAO,MAAM,EAAI;AAC3B,YAAMC,MAAM,GAAGD,MAAM,CAACM,sBAAP,CAA8B;AAAEhB,UAAAA,QAAQ,EAARA,QAAF;AAAYa,UAAAA,UAAU,EAAE,2BAAOX,GAAP;AAAxB,SAA9B,CAAf;AACA,YAAIE,mBAAEU,WAAF,CAAcH,MAAd,CAAJ,EAA2B;AAC3BI,QAAAA,UAAU,GAAGJ,MAAb,CAH2B,CAI3B;;AACA,eAAO,KAAP,CAL2B,CAKb;AACf,OAND;;AAQA,0BACE,+EACE,gCAAC,UAAD,OADF,eAEE,gCAAC,GAAD,OAFF,CADF;AAMD;;;kCAEa;AACZ,0BACE,gCAAC,0BAAD,qBACE,gCAAC,wBAAD;AAAS,QAAA,QAAQ,MAAjB;AAAkB,QAAA,SAAS,EAAC;AAA5B,sBACE,gCAAC,wBAAD,CAAS,MAAT,oCADF,eAEE,0FAFF,CADF,CADF;AAQD;;;;EAjDwBM,gB;;eAoDZ,uBAAO,gBAAP,EAAyB,KAAzB,EAAgC,QAAhC,EAA0C,gCAAW,yBAAS7B,YAAT,CAAX,CAA1C,C","sourcesContent":["/*\n *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\").\n *  You may not use this file except in compliance with the License.\n *  A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n *  or in the \"license\" file accompanying this file. This file is distributed\n *  on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *  express or implied. See the License for the specific language governing\n *  permissions and limitations under the License.\n */\n\nimport React, { Component } from 'react';\nimport _ from 'lodash';\nimport { withRouter } from 'react-router-dom';\nimport { inject, observer } from 'mobx-react';\nimport { getEnv } from 'mobx-state-tree';\nimport { Message, Container } from 'semantic-ui-react';\n\nimport { branding } from './helpers/settings';\n\n// expected props\n// - pluginRegistry (via injection)\n// - app (via injection)\n// - location (from react router)\nclass AppContainer extends Component {\n  componentDidMount() {\n    document.title = branding.page.title;\n    document.querySelector(\"link[rel='shortcut icon']\").href = this.props.assets.images.faviconIcon;\n    document.querySelector(\"link[rel='icon']\").href = this.props.assets.images.faviconImage;\n  }\n\n  render() {\n    const { location, pluginRegistry, app } = this.props;\n    let plugins = _.reverse(pluginRegistry.getPluginsWithMethod('app-component', 'getAppComponent') || []);\n    let App = this.renderError();\n\n    // We ask each plugin in reverse order if they have the App component\n    _.forEach(plugins, plugin => {\n      const result = plugin.getAppComponent({ location, appContext: getEnv(app) });\n      if (_.isUndefined(result)) return;\n      App = result;\n      // eslint-disable-next-line consistent-return\n      return false; // This will stop lodash from continuing the forEach loop\n    });\n\n    plugins = _.reverse(pluginRegistry.getPluginsWithMethod('app-component', 'getAutoLogoutComponent') || []);\n    let AutoLogout = () => <></>;\n    // We ask each plugin in reverse order if they have the AutoLogout component\n    _.forEach(plugins, plugin => {\n      const result = plugin.getAutoLogoutComponent({ location, appContext: getEnv(app) });\n      if (_.isUndefined(result)) return;\n      AutoLogout = result;\n      // eslint-disable-next-line consistent-return\n      return false; // This will stop lodash from continuing the forEach loop\n    });\n\n    return (\n      <>\n        <AutoLogout />\n        <App />\n      </>\n    );\n  }\n\n  renderError() {\n    return (\n      <Container>\n        <Message negative className=\"clearfix mt4\">\n          <Message.Header>A problem was encountered</Message.Header>\n          <p>No plugins provided the App react component!</p>\n        </Message>\n      </Container>\n    );\n  }\n}\n\nexport default inject('pluginRegistry', 'app', 'assets')(withRouter(observer(AppContainer)));\n"],"file":"AppContainer.js"}