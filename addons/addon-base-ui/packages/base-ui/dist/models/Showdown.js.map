{"version":3,"sources":["../../src/models/Showdown.js"],"names":["classMap","h1","h2","ul","li","p","img","bindings","Object","keys","map","key","type","regex","RegExp","replace","Showdown","appContext","converter","showdown","Converter","extensions","setFlavor","setOption","markdown","assets","extended","_","forEach","url","name","makeHtml","registerContextItems"],"mappings":";;;;;;;;AAeA;;AACA;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,QAAQ,GAAG;AACfC,EAAAA,EAAE,EAAE,0BADW;AAEfC,EAAAA,EAAE,EAAE,2BAFW;AAGfC,EAAAA,EAAE,EAAE,0BAHW;AAIfC,EAAAA,EAAE,EAAE,0BAJW;AAKfC,EAAAA,CAAC,EAAE,8BALY;AAMf;AACAC,EAAAA,GAAG,EAAE;AAPU,CAAjB;AAUA,IAAMC,QAAQ,GAAGC,MAAM,CAACC,IAAP,CAAYT,QAAZ,EAAsBU,GAAtB,CAA0B,UAAAC,GAAG;AAAA,SAAK;AACjDC,IAAAA,IAAI,EAAE,QAD2C;AAEjDC,IAAAA,KAAK,EAAE,IAAIC,MAAJ,YAAeH,GAAf,YAA2B,GAA3B,CAF0C;AAGjDI,IAAAA,OAAO,aAAMJ,GAAN,sBAAoBX,QAAQ,CAACW,GAAD,CAA5B;AAH0C,GAAL;AAAA,CAA7B,CAAjB,C,CAMA;;IACMK,Q;AACJ,oBAAYC,UAAZ,EAAwB;AAAA;;AACtB,SAAKA,UAAL,GAAkBA,UAAlB,CADsB,CAEtB;;AACA,SAAKC,SAAL,GAAiB,IAAIC,qBAASC,SAAb,CAAuB;AACtCC,MAAAA,UAAU,qBAAMd,QAAN;AAD4B,KAAvB,CAAjB,CAHsB,CAMtB;;AACA,SAAKW,SAAL,CAAeI,SAAf,CAAyB,SAAzB,EAPsB,CAStB;;AACA,SAAKJ,SAAL,CAAeK,SAAf,CAAyB,oBAAzB,EAA+C,IAA/C;AACD;;;;4BAEOC,Q,EAAuB;AAAA,UAAbC,MAAa,uEAAJ,EAAI;AAC7B;AACA;AACA;AACA,UAAIC,QAAQ,aAAMF,QAAN,SAAZ;;AACAG,yBAAEC,OAAF,CAAUH,MAAV,EAAkB,UAACI,GAAD,EAAMC,IAAN,EAAe;AAC/BJ,QAAAA,QAAQ,aAAMA,QAAN,cAAkBI,IAAlB,gBAA4BD,GAA5B,OAAR;AACD,OAFD;;AAIA,aAAO,KAAKX,SAAL,CAAea,QAAf,CAAwBL,QAAxB,CAAP;AACD;;;;;;;;AAGH,SAASM,oBAAT,CAA8Bf,UAA9B,EAA0C;AACxCA,EAAAA,UAAU,CAACE,QAAX,GAAsB,IAAIH,QAAJ,CAAaC,UAAb,CAAtB;AACD","sourcesContent":["/*\n *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\").\n *  You may not use this file except in compliance with the License.\n *  A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n *  or in the \"license\" file accompanying this file. This file is distributed\n *  on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *  express or implied. See the License for the specific language governing\n *  permissions and limitations under the License.\n */\n\nimport _ from 'lodash';\nimport showdown from 'showdown';\n\nconst classMap = {\n  h1: 'ui large header clearfix',\n  h2: 'ui medium header clearfix',\n  ul: 'ui list undo-line-height',\n  li: 'ui item undo-line-height',\n  p: 'ui undo-line-height clearfix',\n  // img: 'ui fluid image'\n  img: 'ui left floated image clearfix mb2 mr2',\n};\n\nconst bindings = Object.keys(classMap).map(key => ({\n  type: 'output',\n  regex: new RegExp(`<${key}(.*)>`, 'g'),\n  replace: `<${key} class=\"${classMap[key]}\" $1>`,\n}));\n\n// A wrapper around the showdown.js library https://github.com/showdownjs/showdown\nclass Showdown {\n  constructor(appContext) {\n    this.appContext = appContext;\n    // see https://github.com/showdownjs/showdown/wiki/Add-default-classes-for-each-HTML-element\n    this.converter = new showdown.Converter({\n      extensions: [...bindings],\n    });\n    // this.converter.setFlavor('github');\n    this.converter.setFlavor('vanilla');\n\n    // options are available here https://github.com/showdownjs/showdown/wiki/Showdown-options\n    this.converter.setOption('parseImgDimensions', true);\n  }\n\n  convert(markdown, assets = {}) {\n    // example of markdown http://demo.showdownjs.com/\n    // we will append all the assets as image references (this is not efficient at all), when we\n    // have time we can the correct image src mapping in an extension\n    let extended = `${markdown}\\n\\n`;\n    _.forEach(assets, (url, name) => {\n      extended = `${extended}[${name}]: ${url}\\n`;\n    });\n\n    return this.converter.makeHtml(extended);\n  }\n}\n\nfunction registerContextItems(appContext) {\n  appContext.showdown = new Showdown(appContext);\n}\n\nexport { Showdown, registerContextItems };\n"],"file":"Showdown.js"}