{"version":3,"sources":["../../src/models/Stores.js"],"names":["Stores","stores","result","_","forEach","store","isEmpty","isNil","push","forceLoad","load","answer","undefined","error","observable","ready","computed","loading","hasError"],"mappings":";;;;;;;AAeA;;AACA;;AAEA;;AACA;;;;;;;;;;;;;;AAEA;IACMA,M;AACJ,oBAAyB;AAAA,QAAbC,MAAa,uEAAJ,EAAI;;AAAA;;AACvB,QAAMC,MAAM,GAAG,EAAf;;AACAC,uBAAEC,OAAF,CAAUH,MAAV,EAAkB,UAAAI,KAAK,EAAI;AACzB,UAAIF,mBAAEG,OAAF,CAAUD,KAAV,KAAoBF,mBAAEI,KAAF,CAAQF,KAAR,CAAxB,EAAwC;AACxCH,MAAAA,MAAM,CAACM,IAAP,CAAYH,KAAZ;AACD,KAHD;;AAKA,SAAKJ,MAAL,GAAcC,MAAd;AACD,G,CAED;;;;;;;;;;;;;;;;+EACmC,E,wBAAtBO,S,EAAAA,S,+BAAY,K;;AACvBN,mCAAEC,OAAF,CAAU,KAAKH,MAAf,EAAuB,UAAAI,KAAK,EAAI;AAC9B,sBAAI,CAACI,SAAD,IAAc,6BAAaJ,KAAb,CAAlB,EAAuC;AACvC,2CAAaA,KAAK,CAACK,IAAN,EAAb;AACD,iBAHD;;;;;;;;;;;;;;;;;;wBAMU;AACV,UAAIC,MAAM,GAAG,IAAb;;AACAR,yBAAEC,OAAF,CAAU,KAAKH,MAAf,EAAuB,UAAAI,KAAK,EAAI;AAC9BM,QAAAA,MAAM,GAAGA,MAAM,IAAI,6BAAaN,KAAb,CAAnB;AACD,OAFD;;AAGA,aAAOM,MAAP;AACD;;;wBAEa;AACZ,UAAIA,MAAM,GAAG,KAAb;;AACAR,yBAAEC,OAAF,CAAU,KAAKH,MAAf,EAAuB,UAAAI,KAAK,EAAI;AAC9B,YAAI,+BAAeA,KAAf,CAAJ,EAA2B;AACzBM,UAAAA,MAAM,GAAG,IAAT;AACA,iBAAO,KAAP,CAFyB,CAEX;AACf;;AACD,eAAOC,SAAP;AACD,OAND;;AAQA,aAAOD,MAAP;AACD;;;wBAEc;AACb,aAAO,CAAC,CAAC,KAAKE,KAAd;AACD;;;wBAEW;AACV,UAAIA,KAAJ;;AACAV,yBAAEC,OAAF,CAAU,KAAKH,MAAf,EAAuB,UAAAI,KAAK,EAAI;AAC9B,YAAI,6BAAaA,KAAb,CAAJ,EAAyB;AACvBQ,UAAAA,KAAK,GAAGR,KAAK,CAACQ,KAAd;AACA,iBAAO,KAAP,CAFuB,CAET;AACf;;AACD,eAAOD,SAAP;AACD,OAND;;AAQA,aAAOC,KAAP;AACD;;;;KAGH;;;AACA,oBAASb,MAAT,EAAiB;AACfC,EAAAA,MAAM,EAAEa,gBADO;AAEfC,EAAAA,KAAK,EAAEC,cAFQ;AAGfC,EAAAA,OAAO,EAAED,cAHM;AAIfE,EAAAA,QAAQ,EAAEF,cAJK;AAKfH,EAAAA,KAAK,EAAEG;AALQ,CAAjB;eAQehB,M","sourcesContent":["/*\n *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\").\n *  You may not use this file except in compliance with the License.\n *  A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n *  or in the \"license\" file accompanying this file. This file is distributed\n *  on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *  express or implied. See the License for the specific language governing\n *  permissions and limitations under the License.\n */\n\nimport _ from 'lodash';\nimport { decorate, observable, computed } from 'mobx';\n\nimport { isStoreLoading, isStoreReady, isStoreError } from './BaseStore';\nimport { swallowError } from '../helpers/utils';\n\n// A way to load multiple stores and get the errors, etc.\nclass Stores {\n  constructor(stores = []) {\n    const result = [];\n    _.forEach(stores, store => {\n      if (_.isEmpty(store) || _.isNil(store)) return;\n      result.push(store);\n    });\n\n    this.stores = result;\n  }\n\n  // only if they are not loaded already, you can force loading if you want\n  async load({ forceLoad = false } = {}) {\n    _.forEach(this.stores, store => {\n      if (!forceLoad && isStoreReady(store)) return;\n      swallowError(store.load());\n    });\n  }\n\n  get ready() {\n    let answer = true;\n    _.forEach(this.stores, store => {\n      answer = answer && isStoreReady(store);\n    });\n    return answer;\n  }\n\n  get loading() {\n    let answer = false;\n    _.forEach(this.stores, store => {\n      if (isStoreLoading(store)) {\n        answer = true;\n        return false; // to stop the loop\n      }\n      return undefined;\n    });\n\n    return answer;\n  }\n\n  get hasError() {\n    return !!this.error;\n  }\n\n  get error() {\n    let error;\n    _.forEach(this.stores, store => {\n      if (isStoreError(store)) {\n        error = store.error;\n        return false; // to stop the loop\n      }\n      return undefined;\n    });\n\n    return error;\n  }\n}\n\n// see https://medium.com/@mweststrate/mobx-4-better-simpler-faster-smaller-c1fbc08008da\ndecorate(Stores, {\n  stores: observable,\n  ready: computed,\n  loading: computed,\n  hasError: computed,\n  error: computed,\n});\n\nexport default Stores;\n"],"file":"Stores.js"}