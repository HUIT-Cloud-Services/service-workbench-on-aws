{"version":3,"sources":["../../../../src/parts/helpers/fields/DropDown.js"],"names":["DEFAULT_SELECTION","DEFAULT_FLUID","DEFAULT_DISABLED","DEFAULT_CLEARABLE","DEFAULT_MULTIPLE","DEFAULT_SEARCH","DEFAULT_ALLOW_ADDITIONS","DEFAULT_CLASS_NAME","DEFAULT_ADDITION_LABEL","color","DropDown","props","onAddItem","e","data","optionsInState","_","concat","text","value","field","selection","fluid","disabled","clearable","multiple","search","allowAdditions","additionLabel","className","options","onChange","dataTestId","id","sync","placeholder","error","hasError","isEmpty","extra","mergeOptions","uniq","isDisabled","disabledClass","errorClass","getValue","attribName","attribValue","defaultAttribValue","fromExtra","toUse","isNil","attrs","validate","showErrors","React","Component","observable","action"],"mappings":"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","sourcesContent":["/*\n *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\").\n *  You may not use this file except in compliance with the License.\n *  A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n *  or in the \"license\" file accompanying this file. This file is distributed\n *  on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *  express or implied. See the License for the specific language governing\n *  permissions and limitations under the License.\n */\n\nimport _ from 'lodash';\nimport React from 'react';\nimport { action, decorate, observable, runInAction } from 'mobx';\nimport { observer } from 'mobx-react';\nimport { Dropdown } from 'semantic-ui-react';\nimport c from 'classnames';\n\nimport Header from './Header';\nimport Description from './Description';\nimport ErrorPointer from './ErrorPointer';\n\n// expected props\n// - field (via props), this is the mobx form field object\n// - options (via props), an array of [ {text, value}, {text, value}, ...]\n// - onChange (via props), (optional) if provided, it will be given (value, field)\n// - className (via props)\n//\n// The following props are to support existing React Semantic UI props:\n// - selection (via props), default to false\n// - fluid (via props), default to false\n// - disabled (via props), default to false\n// - clearable (via props), default to false\n// - multiple (via props), default to false\n// - search (via props), default to false\n// - allowAdditions (via props), default to false\n// - className (via props), default to 'mb4'\n// - additionLabel (via props), default to 'Custom Value:'\nconst DEFAULT_SELECTION = false;\nconst DEFAULT_FLUID = false;\nconst DEFAULT_DISABLED = false;\nconst DEFAULT_CLEARABLE = false;\nconst DEFAULT_MULTIPLE = false;\nconst DEFAULT_SEARCH = false;\nconst DEFAULT_ALLOW_ADDITIONS = false;\nconst DEFAULT_CLASS_NAME = 'mb4';\nconst DEFAULT_ADDITION_LABEL = <i style={{ color: 'red' }}>Custom Value: </i>;\n\nclass DropDown extends React.Component {\n  constructor(props) {\n    super(props);\n    runInAction(() => {\n      this.optionsInState = [];\n    });\n  }\n\n  onAddItem = (e, data = {}) => {\n    // Append the item to options that just got added\n    this.optionsInState = _.concat({ text: data.value, value: data.value }, this.optionsInState);\n  };\n\n  render() {\n    const {\n      field,\n      selection,\n      fluid,\n      disabled,\n      clearable,\n      multiple,\n      search,\n      allowAdditions,\n      additionLabel,\n      className,\n      options = [],\n      onChange,\n      dataTestId,\n    } = this.props;\n\n    const { id, value, sync, placeholder, error = '' } = field;\n    const hasError = !_.isEmpty(error); // IMPORTANT do NOT use field.hasError\n\n    const extra = field.extra || {};\n    extra.options = extra.options || [];\n\n    const mergeOptions = _.uniq([...this.optionsInState, ...extra.options, ...options]);\n\n    const isDisabled = field.disabled || disabled;\n    const disabledClass = isDisabled ? 'disabled' : '';\n    const errorClass = hasError ? 'error' : '';\n\n    /**\n     * A utility function to see if the given component attribute is passed as an argument when rendering this component\n     * or specified in the \"extra\" object.\n     * The function returns the attribute value in the following order of precedence\n     * 1. attribute value directly specified at the time of rendering the component (i.e., passed to the component), if the attribute was not passed then\n     * 2. attribute value specified in the \"extra\" object of the given field, if it was not passed in the extra object as well then\n     * 3. default attribute value\n     *\n     * @param attribName The name of the attribute\n     * @param attribValue The attribute value that was passed when rendering the component\n     * @param defaultAttribValue The default attribute value to use\n     * @returns {*}\n     */\n    const getValue = (attribName, attribValue, defaultAttribValue) => {\n      const fromExtra = extra && extra[attribName];\n      // use specified attribValue if it is passed. If not, then try to use attrib value from the \"extra\" object\n      let toUse = _.isNil(attribValue) ? fromExtra : attribValue;\n\n      // if the attrib is neither passed nor in extra then use default value\n      if (_.isNil(toUse)) {\n        toUse = defaultAttribValue;\n      }\n      return toUse;\n    };\n\n    const attrs = {\n      id,\n      value,\n\n      // applicable only when allowAdditions = true\n      onAddItem: this.onAddItem,\n      onChange: (e, data = {}) => {\n        sync(data.value);\n        field.validate({ showErrors: true });\n        if (onChange) onChange(data.value, field);\n      },\n      placeholder,\n      selection: getValue('selection', selection, DEFAULT_SELECTION),\n      clearable: getValue('clearable', clearable, DEFAULT_CLEARABLE),\n      multiple: getValue('multiple', multiple, DEFAULT_MULTIPLE),\n      search: getValue('search', search, DEFAULT_SEARCH),\n      fluid: getValue('fluid', fluid, DEFAULT_FLUID),\n      allowAdditions: getValue('allowAdditions', allowAdditions, DEFAULT_ALLOW_ADDITIONS),\n      disabled: getValue('disabled', disabled, DEFAULT_DISABLED),\n      additionLabel: getValue('additionLabel', additionLabel, DEFAULT_ADDITION_LABEL),\n      error: hasError,\n    };\n\n    return (\n      <div className={c(getValue('className', className, DEFAULT_CLASS_NAME), errorClass, disabledClass)}>\n        <Header field={field} />\n        <Description field={field} />\n        <Dropdown data-testid={dataTestId} className=\"field\" options={mergeOptions} {...attrs} />\n        <ErrorPointer field={field} />\n      </div>\n    );\n  }\n}\n\n// see https://medium.com/@mweststrate/mobx-4-better-simpler-faster-smaller-c1fbc08008da\ndecorate(DropDown, {\n  optionsInState: observable,\n  onAddItem: action,\n});\n\nexport default observer(DropDown);\n"],"file":"DropDown.js"}