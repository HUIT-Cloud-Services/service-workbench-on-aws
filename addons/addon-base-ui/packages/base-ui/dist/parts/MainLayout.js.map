{"version":3,"sources":["../../src/parts/MainLayout.js"],"names":["MainLayout","pathname","location","props","link","history","push","handleLogout","event","preventDefault","stopPropagation","authentication","logout","menuItems","currentUser","userStore","user","displayName","_","get","is","value","startsWith","itemsArr","getMenuItems","overflowY","height","map","item","index","show","isFunction","shouldShow","body","url","undefined","icon","title","verticalAlign","assets","images","logoImage","width","paddingLeft","branding","main","paddingTop","paddingBottom","children","React","Component","action"],"mappings":";;;;;;;;;AAeA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;IACMA,U;;;;;;;;;;;;;;;;oBACG,UAAAC,QAAQ;AAAA,aAAI,YAAM;AACvB,YAAMC,QAAQ,GAAG,MAAKC,KAAL,CAAWD,QAA5B;AACA,YAAME,IAAI,GAAG,yBAAW;AACtBF,UAAAA,QAAQ,EAARA,QADsB;AAEtBD,UAAAA,QAAQ,EAARA;AAFsB,SAAX,CAAb;;AAKA,cAAKE,KAAL,CAAWE,OAAX,CAAmBC,IAAnB,CAAwBF,IAAxB;AACD,OARc;AAAA,K;;UAUfG,Y;yEAAe,iBAAMC,KAAN;AAAA;AAAA;AAAA;AAAA;AACbA,gBAAAA,KAAK,CAACC,cAAN;AACAD,gBAAAA,KAAK,CAACE,eAAN;AAFa;AAAA;AAAA,uBAKL,MAAKP,KAAL,CAAWQ,cAAX,CAA0BC,MAA1B,EALK;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAOX;;AAPW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;;;mCAWA;AACb,aAAO,KAAKT,KAAL,CAAWU,SAAX,IAAwB,EAA/B;AACD;;;6BAEQ;AAAA;;AACP,UAAMC,WAAW,GAAG,KAAKX,KAAL,CAAWY,SAAX,CAAqBC,IAAzC;AACA,UAAMC,WAAW,GAAGH,WAAW,GAAGA,WAAW,CAACG,WAAf,GAA6B,eAA5D;;AACA,UAAMhB,QAAQ,GAAGiB,mBAAEC,GAAF,CAAM,KAAKhB,KAAL,CAAWD,QAAjB,EAA2B,UAA3B,EAAuC,EAAvC,CAAjB;;AACA,UAAMkB,EAAE,GAAG,SAALA,EAAK,CAAAC,KAAK;AAAA,eAAIH,mBAAEI,UAAF,CAAarB,QAAb,EAAuBoB,KAAvB,CAAJ;AAAA,OAAhB;;AAEA,UAAME,QAAQ,GAAG,KAAKC,YAAL,EAAjB;AACA,aAAO,cACL,gCAAC,qBAAD;AAAM,QAAA,QAAQ,MAAd;AAAe,QAAA,QAAQ,MAAvB;AAAwB,QAAA,KAAK,EAAC,MAA9B;AAAqC,QAAA,IAAI,EAAC,SAA1C;AAAoD,QAAA,GAAG,EAAC,KAAxD;AAA8D,QAAA,KAAK,EAAE;AAAEC,UAAAA,SAAS,EAAE;AAAb;AAArE,sBACE,gCAAC,qBAAD,CAAM,IAAN;AAAW,QAAA,IAAI,EAAC,GAAhB;AAAoB,QAAA,KAAK,EAAE;AAAEC,UAAAA,MAAM,EAAE;AAAV;AAA3B,QADF,EAEGR,mBAAES,GAAF,CAAMJ,QAAN,EAAgB,UAACK,IAAD,EAAOC,KAAP,EAAiB;AAChC,YAAMC,IAAI,GAAIZ,mBAAEa,UAAF,CAAaH,IAAI,CAACI,UAAlB,KAAiCJ,IAAI,CAACI,UAAL,EAAlC,IAAwDJ,IAAI,CAACI,UAA1E;AACA,eACEF,IAAI,KACHF,IAAI,CAACK,IAAL,GACCL,IAAI,CAACK,IADN,gBAGC,gCAAC,qBAAD,CAAM,IAAN;AAAW,UAAA,GAAG,EAAEJ,KAAhB;AAAuB,UAAA,MAAM,EAAET,EAAE,CAACQ,IAAI,CAACM,GAAN,CAAjC;AAA6C,UAAA,OAAO,EAAEd,EAAE,CAACQ,IAAI,CAACM,GAAN,CAAF,GAAeC,SAAf,GAA2B,MAAI,QAAJ,CAAUP,IAAI,CAACM,GAAf;AAAjF,wBACE,gCAAC,qBAAD;AAAM,UAAA,IAAI,EAAEN,IAAI,CAACQ,IAAjB;AAAuB,UAAA,IAAI,EAAC;AAA5B,UADF,eAEE;AAAM,UAAA,SAAS,EAAC;AAAhB,WAAwBR,IAAI,CAACS,KAA7B,CAFF,CAJE,CADN;AAWD,OAbA,CAFH,CADK,eAmBL,gCAAC,qBAAD;AAAM,QAAA,QAAQ,MAAd;AAAe,QAAA,KAAK,EAAC,OAArB;AAA6B,QAAA,KAAK,EAAC,KAAnC;AAAyC,QAAA,SAAS,EAAC,wBAAnD;AAA4E,QAAA,GAAG,EAAC;AAAhF,sBACE,gCAAC,qBAAD,CAAM,IAAN;AAAW,QAAA,KAAK,EAAE;AAAEX,UAAAA,MAAM,EAAE,MAAV;AAAkBY,UAAAA,aAAa,EAAE;AAAjC;AAAlB,sBACE,gCAAC,sBAAD;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,GAAG,EAAE,KAAKnC,KAAL,CAAWoC,MAAX,CAAkBC,MAAlB,CAAyBC,SAFhC;AAGE,QAAA,SAAS,EAAC,KAHZ;AAIE,QAAA,KAAK,EAAE;AAAEf,UAAAA,MAAM,EAAE,MAAV;AAAkBgB,UAAAA,KAAK,EAAE;AAAzB;AAJT,QADF,eAOE;AAAM,QAAA,KAAK,EAAE;AAAEC,UAAAA,WAAW,EAAE;AAAf;AAAb,SAAsCC,mBAASC,IAAT,CAAcR,KAApD,CAPF,CADF,eAUE,gCAAC,qBAAD,CAAM,IAAN;AAAW,QAAA,QAAQ,EAAC;AAApB,sBACE,gCAAC,qBAAD,CAAM,IAAN,qBACE,gCAAC,qBAAD;AAAM,QAAA,IAAI,EAAC;AAAX,QADF,OACwBpB,WADxB,CADF,eAIE,gCAAC,qBAAD,CAAM,IAAN;AAAW,QAAA,IAAI,EAAC,QAAhB;AAAyB,QAAA,OAAO,EAAE,KAAKV;AAAvC,QAJF,CAVF,CAnBK,eAoCL;AACE,QAAA,SAAS,EAAC,qBADZ;AAEE,QAAA,KAAK,EAAE;AACLuC,UAAAA,UAAU,EAAE,MADP;AAELH,UAAAA,WAAW,EAAE,MAFR;AAGLI,UAAAA,aAAa,EAAE;AAHV,SAFT;AAOE,QAAA,GAAG,EAAC;AAPN,SASG,KAAK5C,KAAL,CAAW6C,QATd,CApCK,CAAP;AAgDD;;;;EAjFsBC,kBAAMC,S,GAoF/B;;;AACA,oBAASlD,UAAT,EAAqB;AACnBO,EAAAA,YAAY,EAAE4C;AADK,CAArB;;eAIe,uBAAO,gBAAP,EAAyB,WAAzB,EAAsC,QAAtC,EAAgD,gCAAW,yBAASnD,UAAT,CAAX,CAAhD,C","sourcesContent":["/*\n *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\").\n *  You may not use this file except in compliance with the License.\n *  A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n *  or in the \"license\" file accompanying this file. This file is distributed\n *  on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *  express or implied. See the License for the specific language governing\n *  permissions and limitations under the License.\n */\n\nimport _ from 'lodash';\nimport React from 'react';\nimport { decorate, action } from 'mobx';\nimport { inject, observer } from 'mobx-react';\nimport { withRouter } from 'react-router-dom';\nimport { Menu, Icon, Image } from 'semantic-ui-react';\n\nimport { createLink } from '../helpers/routing';\nimport { displayError } from '../helpers/notification';\nimport { branding } from '../helpers/settings';\n\n// expected props\n// - userStore (via injection)\nclass MainLayout extends React.Component {\n  goto = pathname => () => {\n    const location = this.props.location;\n    const link = createLink({\n      location,\n      pathname,\n    });\n\n    this.props.history.push(link);\n  };\n\n  handleLogout = async event => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    try {\n      await this.props.authentication.logout();\n    } catch (error) {\n      displayError(error);\n    }\n  };\n\n  getMenuItems() {\n    return this.props.menuItems || [];\n  }\n\n  render() {\n    const currentUser = this.props.userStore.user;\n    const displayName = currentUser ? currentUser.displayName : 'Not Logged In';\n    const pathname = _.get(this.props.location, 'pathname', '');\n    const is = value => _.startsWith(pathname, value);\n\n    const itemsArr = this.getMenuItems();\n    return [\n      <Menu vertical inverted fixed=\"left\" icon=\"labeled\" key=\"ml1\" style={{ overflowY: 'auto' }}>\n        <Menu.Item name=\" \" style={{ height: '40px' }} />\n        {_.map(itemsArr, (item, index) => {\n          const show = (_.isFunction(item.shouldShow) && item.shouldShow()) || item.shouldShow;\n          return (\n            show &&\n            (item.body ? (\n              item.body\n            ) : (\n              <Menu.Item key={index} active={is(item.url)} onClick={is(item.url) ? undefined : this.goto(item.url)}>\n                <Icon name={item.icon} size=\"mini\" />\n                <span className=\"fs-7\">{item.title}</span>\n              </Menu.Item>\n            ))\n          );\n        })}\n      </Menu>,\n\n      <Menu inverted color=\"black\" fixed=\"top\" className=\"box-shadow zindex-1500\" key=\"ml2\">\n        <Menu.Item style={{ height: '50px', verticalAlign: 'middle' }}>\n          <Image\n            size=\"mini\"\n            src={this.props.assets.images.logoImage}\n            className=\"mr1\"\n            style={{ height: '40px', width: 'auto' }}\n          />\n          <span style={{ paddingLeft: '5px' }}>{branding.main.title}</span>\n        </Menu.Item>\n        <Menu.Menu position=\"right\">\n          <Menu.Item>\n            <Icon name=\"user\" /> {displayName}\n          </Menu.Item>\n          <Menu.Item name=\"logout\" onClick={this.handleLogout} />\n        </Menu.Menu>\n      </Menu>,\n      <div\n        className=\"fit animated fadeIn\"\n        style={{\n          paddingTop: '40px',\n          paddingLeft: '84px',\n          paddingBottom: '100px',\n        }}\n        key=\"ml3\"\n      >\n        {this.props.children}\n      </div>,\n    ];\n  }\n}\n\n// see https://medium.com/@mweststrate/mobx-4-better-simpler-faster-smaller-c1fbc08008da\ndecorate(MainLayout, {\n  handleLogout: action,\n});\n\nexport default inject('authentication', 'userStore', 'assets')(withRouter(observer(MainLayout)));\n"],"file":"MainLayout.js"}