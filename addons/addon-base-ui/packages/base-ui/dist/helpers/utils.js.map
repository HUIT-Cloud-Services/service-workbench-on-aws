{"version":3,"sources":["../../src/helpers/utils.js"],"names":["mapToArray","map","result","forEach","value","push","parseError","err","message","_","get","code","status","requestId","error","Error","root","swallowError","promise","fn","Promise","resolve","then","storage","clear","localStorage","window","console","log","sessionStorage","getItem","key","setItem","removeItem","delay","seconds","niceNumber","isNil","isString","isEmpty","format","nicePrice","plural","singleStr","pluralStr","count","getQueryParam","location","queryParams","URL","searchParams","addQueryParams","params","url","keys","append","newUrl","origin","pathname","toString","hash","removeQueryParams","getFragmentParam","fragmentParams","hashKeyValues","substring","split","param","keyValueArr","currentKey","removeFragmentParams","keyNamesToRemove","hashStr","indexOf","protocol","host","search","isAbsoluteUrl","test","removeNulls","obj","Object","isPlainObject","chopRight","str","end","endsWith","length","isFloat","n","childrenArrayToMap","arr","item","idGeneratorCount","generateId","prefix","Date","now","random","consolidateToMap","itemsArray","mergeExistingFn","idFieldName","unprocessedKeys","_value","id","hasExisting","has","exiting","set","flattenObject","filterFn","keyPrefix","accum","toFlattenedKey","idx","flattenedKey","isNumber","transform","isArray","element","isObject","unFlattenObject","keyValuePairs","toUTCDate","getOptionsFromRules","formRules","options","rule","option","text","validRegions","sort","formatBytes","bytes","decimals","k","dm","sizes","i","Math","floor","parseFloat","toFixed","processInBatches","items","batchSize","processorFn","itemBatches","chunk","results","itemsInThisBatch","all","resultsFromThisBatch","concat","processSequentially"],"mappings":"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","sourcesContent":["/*\n *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\").\n *  You may not use this file except in compliance with the License.\n *  A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n *  or in the \"license\" file accompanying this file. This file is distributed\n *  on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *  express or implied. See the License for the specific language governing\n *  permissions and limitations under the License.\n */\n\nimport _ from 'lodash';\nimport numeral from 'numeral';\nimport { observable } from 'mobx';\n\n/**\n * Converts the given Map object to an array of values from the map\n */\nfunction mapToArray(map) {\n  const result = [];\n  // converting map to result array\n  map.forEach(value => result.push(value));\n  return result;\n}\n\nfunction parseError(err) {\n  const message = _.get(err, 'message', 'Something went wrong');\n  const code = _.get(err, 'code');\n  const status = _.get(err, 'status');\n  const requestId = _.get(err, 'requestId');\n  const error = new Error(message);\n\n  error.code = code;\n  error.requestId = requestId;\n  error.root = err;\n  error.status = status;\n\n  return error;\n}\n\nfunction swallowError(promise, fn = () => ({})) {\n  try {\n    return Promise.resolve()\n      .then(() => promise)\n      .catch(err => fn(err));\n  } catch (err) {\n    return fn(err);\n  }\n}\n\nconst storage = observable({\n  clear() {\n    try {\n      if (localStorage) return localStorage.clear();\n      return window.localStorage.clear();\n    } catch (err) {\n      console.log(err);\n      try {\n        if (sessionStorage) return sessionStorage.clear();\n        return window.sessionStorage.clear();\n      } catch (error) {\n        // if we get here, it means no support for localStorage nor sessionStorage, which is a problem\n        return console.log(error);\n      }\n    }\n  },\n\n  getItem(key) {\n    try {\n      if (localStorage) return localStorage.getItem(key);\n      return window.localStorage.getItem(key);\n    } catch (err) {\n      console.log(err);\n      try {\n        if (sessionStorage) return sessionStorage.getItem(key);\n        return window.sessionStorage.getItem(key);\n      } catch (error) {\n        // if we get here, it means no support for localStorage nor sessionStorage, which is a problem\n        return console.log(error);\n      }\n    }\n  },\n\n  setItem(key, value) {\n    try {\n      if (localStorage) return localStorage.setItem(key, value);\n      return window.localStorage.setItem(key, value);\n    } catch (err) {\n      console.log(err);\n      try {\n        if (sessionStorage) return sessionStorage.setItem(key, value);\n        return window.sessionStorage.setItem(key, value);\n      } catch (error) {\n        // if we get here, it means no support for localStorage nor sessionStorage, which is a problem\n        return console.log(error);\n      }\n    }\n  },\n\n  removeItem(key) {\n    try {\n      if (localStorage) return localStorage.removeItem(key);\n      return window.localStorage.removeItem(key);\n    } catch (err) {\n      console.log(err);\n      try {\n        if (sessionStorage) return sessionStorage.removeItem(key);\n        return window.sessionStorage.removeItem(key);\n      } catch (error) {\n        // if we get here, it means no support for localStorage nor sessionStorage, which is a problem\n        return console.log(error);\n      }\n    }\n  },\n});\n\n// a promise friendly delay function\nfunction delay(seconds) {\n  return new Promise(resolve => {\n    _.delay(resolve, seconds * 1000);\n  });\n}\n\nfunction niceNumber(value) {\n  if (_.isNil(value)) return 'N/A';\n  if (_.isString(value) && _.isEmpty(value)) return 'N/A';\n  return numeral(value).format('0,0');\n}\n\nfunction nicePrice(value) {\n  if (_.isNil(value)) return 'N/A';\n  if (_.isString(value) && _.isEmpty(value)) return 'N/A';\n  return numeral(value).format('0,0.00');\n}\n\n// super basic plural logic, laughable\nfunction plural(singleStr, pluralStr, count) {\n  if (count === 1) return singleStr;\n  return pluralStr;\n}\n\nfunction getQueryParam(location, key) {\n  const queryParams = new URL(location).searchParams;\n  return queryParams.get(key);\n}\n\nfunction addQueryParams(location, params) {\n  const url = new URL(location);\n  const queryParams = url.searchParams;\n\n  const keys = _.keys(params);\n  keys.forEach(key => {\n    queryParams.append(key, params[key]);\n  });\n\n  let newUrl = url.origin + url.pathname;\n\n  if (queryParams.toString()) {\n    newUrl += `?${queryParams.toString()}`;\n  }\n\n  newUrl += url.hash;\n  return newUrl;\n}\n\nfunction removeQueryParams(location, keys) {\n  const url = new URL(location);\n  const queryParams = url.searchParams;\n\n  keys.forEach(key => {\n    queryParams.delete(key);\n  });\n\n  let newUrl = url.origin + url.pathname;\n\n  if (queryParams.toString()) {\n    newUrl += `?${queryParams.toString()}`;\n  }\n\n  newUrl += url.hash;\n  return newUrl;\n}\n\nfunction getFragmentParam(location, key) {\n  const fragmentParams = _.get(location, 'hash') || new URL(location).hash;\n  const hashKeyValues = {};\n  const params = fragmentParams.substring(1).split('&');\n  if (params) {\n    params.forEach(param => {\n      const keyValueArr = param.split('=');\n      const currentKey = keyValueArr[0];\n      const value = keyValueArr[1];\n      if (value) {\n        hashKeyValues[currentKey] = value;\n      }\n    });\n  }\n  return hashKeyValues[key];\n}\n\nfunction removeFragmentParams(location, keyNamesToRemove) {\n  const url = new URL(location);\n  const fragmentParams = url.hash;\n  let hashStr = '#';\n  const params = fragmentParams.substring(1).split('&');\n  if (params) {\n    params.forEach(param => {\n      const keyValueArr = param.split('=');\n      const currentKey = keyValueArr[0];\n      const value = keyValueArr[1];\n      // Do not include the currentKey if it is the one specified in the array of keyNamesToRemove\n      if (value && _.indexOf(keyNamesToRemove, currentKey) < 0) {\n        hashStr = `${hashStr}${currentKey}=${value}`;\n      }\n    });\n  }\n  return `${url.protocol}//${url.host}${url.search}${hashStr === '#' ? '' : hashStr}`;\n}\n\nfunction isAbsoluteUrl(url) {\n  // return /^[a-z][a-z\\d+.-]*:/.test(url);\n  return /^https?:/.test(url);\n}\n\nfunction removeNulls(obj = {}) {\n  if (!obj) {\n    return obj;\n  }\n  Object.keys(obj).forEach(key => {\n    if (obj[key] === null) delete obj[key];\n    if (_.isPlainObject(obj[key])) {\n      removeNulls(obj[key]);\n    }\n  });\n\n  return obj;\n}\n\n// remove the \"end\" string from \"str\" if it exists\nfunction chopRight(str = '', end = '') {\n  if (!_.endsWith(str, end)) return str;\n  return str.substring(0, str.length - end.length);\n}\n\nconst isFloat = n => {\n  return n % 1 !== 0;\n};\n\n// input [ { <name>: { label, desc, ..} }, { <name2>: { label, desc } } ]\n// output { <name>: { label, desc, ..}, <name2>: { label, desc } }\nfunction childrenArrayToMap(arr) {\n  const result = {};\n  arr.forEach(item => {\n    const key = _.keys(item)[0];\n    result[key] = item[key];\n  });\n  return result;\n}\n\nlet idGeneratorCount = 0;\n\nfunction generateId(prefix = '') {\n  idGeneratorCount += 1;\n  return `${prefix}_${idGeneratorCount}_${Date.now()}_${_.random(0, 1000)}`;\n}\n\n// Given a Map and an array of items (each item MUST have an \"id\" prop), consolidate\n// the array in the following manner:\n// - if an existing item in the map is no longer in the array of items, remove the item from the map\n// - if an item in the array is not in the map, then add it to the map using the its \"id\" prop\n// - if an item in the array is also in the map, then call 'mergeExistingFn' with the existing item\n//   and the new item. It is expected that this 'mergeExistingFn', will know how to merge the\n//   properties of the new item into the existing item.\nfunction consolidateToMap(map, itemsArray, mergeExistingFn, idFieldName = 'id') {\n  const unprocessedKeys = {};\n\n  map.forEach((_value, key) => {\n    unprocessedKeys[key] = true;\n  });\n\n  itemsArray.forEach(item => {\n    const id = item[idFieldName];\n    const hasExisting = map.has(id);\n    const exiting = map.get(id);\n\n    if (!exiting) {\n      map.set(item[idFieldName], item);\n    } else {\n      mergeExistingFn(exiting, item);\n    }\n\n    if (hasExisting) {\n      delete unprocessedKeys[id];\n    }\n  });\n\n  _.forEach(unprocessedKeys, (_value, key) => {\n    map.delete(key);\n  });\n}\n\n/**\n * Converts an object graph into flat object with key/value pairs.\n * The rules of object graph to flat key value transformation are as follows.\n * 1. An already flat attribute with primitive will not be transformed.\n *    For example,\n *      input = { someKey: 'someValue' } => output = { someKey: 'someValue' }\n * 2. A nested object attribute will be flattened by adding full attribute path '<attributeName>.' (the paths are as per lodash's get and set functions)\n *    For example,\n *      input = { someKey: { someNestedKey: 'someValue' } } => output = { 'someKey.someNestedKey': 'someValue' }\n * 3. An array attribute will be flattened by adding correct path '<attributeName>[<elementIndex>]' prefix. (the paths are as per lodash's get and set functions)\n *    For example,\n *      input = { someKey: [ 'someValue1', 'someValue2' ] } => output = { 'someKey[0]': 'someValue1', 'someKey[1]': 'someValue2' }\n *      input = { someKey: [ 'someValue1', ['someValue2','someValue3'], 'someValue4' ] } => output = { 'someKey[0]': 'someValue1', 'someKey[1][0]': 'someValue2', 'someKey[1][1]': 'someValue3', 'someKey[2]': 'someValue4' }\n *      input = { someKey: [{ someNestedKey: 'someValue' }] } => output = { 'someKey[0].someNestedKey': 'someValue' }\n *\n * @param obj An object to flatten\n * @param filterFn An optional filter function that allows filtering out certain attributes from being included in the flattened result object. The filterFn is called with 3 arguments (result, value, key) and is expected to return true to include\n *   the key in the result or false to exclude the key from the result.\n * @param keyPrefix A optional key prefix to include in all keys in the resultant flattened object.\n * @param accum An optional accumulator to use when performing the transformation\n * @returns {*}\n */\nfunction flattenObject(obj, filterFn = () => true, keyPrefix = '', accum = {}) {\n  function toFlattenedKey(key, idx) {\n    let flattenedKey;\n    if (_.isNil(idx)) {\n      if (_.isNumber(key)) {\n        flattenedKey = keyPrefix ? `${keyPrefix}[${key}]` : `[${key}]`;\n      } else {\n        flattenedKey = keyPrefix ? `${keyPrefix}.${key}` : key;\n      }\n    } else {\n      flattenedKey = keyPrefix ? `${keyPrefix}.${key}[${idx}]` : `${key}[${idx}]`;\n    }\n    return flattenedKey;\n  }\n\n  return _.transform(\n    obj,\n    (result, value, key) => {\n      if (filterFn(result, value, key)) {\n        if (_.isArray(value)) {\n          let idx = 0;\n          _.forEach(value, element => {\n            const flattenedKey = toFlattenedKey(key, idx);\n            if (_.isObject(element)) {\n              flattenObject(element, filterFn, flattenedKey, result);\n            } else {\n              result[flattenedKey] = element;\n            }\n            ++idx;\n          });\n        } else {\n          const flattenedKey = toFlattenedKey(key);\n          if (_.isObject(value)) {\n            flattenObject(value, filterFn, flattenedKey, result);\n          } else {\n            result[flattenedKey] = value;\n          }\n        }\n      }\n      return result;\n    },\n    accum,\n  );\n}\n\n/**\n * Converts an object with key/value pairs into object graph. This function is inverse of flattenObject.\n * i.e., unFlattenObject(flattenObject(obj)) = obj\n *\n * The rules of key/value pairs to object graph transformation are as follows.\n * 1. Key that does not contain delimiter will not be transformed.\n *    For example,\n *      input = { someKey: 'someValue' } => output = { someKey: 'someValue' }\n * 2. Key/Value containing delimiter will be transformed into object path\n *    For example,\n *      input = { someKey_someNestedKey: 'someValue' } => output = { someKey: { someNestedKey: 'someValue' } }\n * 3. Key/Value containing delimiter and integer index will be transformed into object containing array.\n *    For example,\n *      input = { someKey_0: 'someValue1', someKey_1: 'someValue2' } => output = { someKey: [ 'someValue1', 'someValue2' ] }\n *      input = { \"someKey_0\": \"someValue1\", \"someKey_1_0\": \"someValue2\", \"someKey_1_1\": \"someValue3\", \"someKey_2\": \"someValue4\" } => output = { someKey: [ 'someValue1', ['someValue2','someValue3'], 'someValue4' ] }\n *      input = { someKey_0_someNestedKey: 'someValue' } => output = { someKey: [{ someNestedKey: 'someValue' }] }\n *\n * @param obj An object to flatten\n * @param filterFn An optional filter function that allows filtering out certain attributes from being included in the flattened result object. The filterFn is called with 3 arguments (result, value, key) and is expected to return true to include\n *   the key in the result or false to exclude the key from the result.\n * @param keyPrefix A optional key prefix to include in all keys in the resultant flattened object.\n * @returns {*}\n */\nfunction unFlattenObject(keyValuePairs, filterFn = () => true) {\n  return _.transform(\n    keyValuePairs,\n    (result, value, key) => {\n      if (filterFn(result, value, key)) {\n        _.set(result, key, value);\n      }\n      return result;\n    },\n    {},\n  );\n}\n\nfunction toUTCDate(str) {\n  if (_.isEmpty(str)) return str;\n  if (!_.isString(str)) return str;\n  if (_.endsWith(str, 'Z')) return str;\n\n  return `${str}Z`;\n}\n\n/**\n * Given a list of validatorjs rules for a form element, returns valid options\n * by returning elements defined by the \"in\" rule as valid Semantic UI options objects.\n *\n * @param {Array} formRules Rules for the validatorjs library\n * @returns {Array<Object>} Options formatted for a Semantic UI Dropdown\n */\nfunction getOptionsFromRules(formRules) {\n  let options = [];\n  formRules.forEach(rule => {\n    if (typeof rule === 'object' && 'in' in rule) {\n      options = rule.in.map(option => ({ key: option, text: option, value: option }));\n    }\n  });\n  return options;\n}\n\nfunction validRegions() {\n  return [\n    'us-east-2',\n    'us-east-1',\n    'us-west-1',\n    'us-west-2',\n    'ap-east-1',\n    'ap-south-1',\n    'ap-northeast-3',\n    'ap-northeast-2',\n    'ap-southeast-1',\n    'ap-southeast-2',\n    'ap-northeast-1',\n    'ca-central-1',\n    'cn-north-1',\n    'cn-northwest-1',\n    'eu-central-1',\n    'eu-west-1',\n    'eu-west-2',\n    'eu-west-3',\n    'eu-north-1',\n    'me-south-1',\n    'sa-east-1',\n    'us-gov-east-1',\n    'us-gov-west-1',\n  ].sort();\n}\n\n/**\n * Converts bytes to a human-friendly string by representing them as KB, MB, GB,\n * etc., depending on how large the size is.\n * Adapted from https://stackoverflow.com/a/18650828\n *\n * @param {number} bytes The number of bytes to be converted\n * @param {number} decimals How many decimal places should be maintained\n * @returns {string} The human-friendly string form of the passed bytes\n */\nfunction formatBytes(bytes, decimals = 2) {\n  if (bytes === 0) return '0 Bytes';\n\n  const k = 1024;\n  const dm = decimals < 0 ? 0 : decimals;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  return `${parseFloat((bytes / k ** i).toFixed(dm))} ${sizes[i]}`;\n}\n\n/**\n * A utility function to process given items in sequence of batches. Items in one batch are processed in-parallel but\n * all batches are processed sequentially i..e, processing of the next batch is not started until the previous batch is\n * complete.\n *\n * @param items Array of items to process\n * @param batchSize Number of items in a batch\n * @param processorFn A function to process the batch. The function is called with the item argument.\n * The function is expected to return a Promise with some result of processing the item.\n *\n * @returns {Promise<Array>}\n */\nasync function processInBatches(items, batchSize, processorFn) {\n  const itemBatches = _.chunk(items, batchSize);\n\n  let results = [];\n\n  // Process all items in one batch in parallel and wait for the batch to\n  // complete before moving on to the next batch\n  for (let i = 0; i <= itemBatches.length; i += 1) {\n    const itemsInThisBatch = itemBatches[i];\n    // We need to await for each batch in loop to make sure they are awaited in sequence instead of\n    // firing them in parallel disabling eslint for \"no-await-in-loop\" due to this\n    // eslint-disable-next-line no-await-in-loop\n    const resultsFromThisBatch = await Promise.all(\n      //  Fire promise for each item in this batch and let it be processed in parallel\n      _.map(itemsInThisBatch, processorFn),\n    );\n\n    // push all results from this batch into the main results array\n    results = _.concat(results, resultsFromThisBatch);\n  }\n  return results;\n}\n\n/**\n * A utility function that processes items sequentially. The function uses the specified processorFn to process\n * items in the given order i.e., it does not process next item in the given array until the promise returned for\n * the processing of the previous item is resolved. If the processorFn throws error (or returns a promise rejection)\n * this functions stops processing next item and the error is bubbled up to the caller (via a promise rejection).\n *\n * @param items Array of items to process\n * @param processorFn A function to process the item. The function is called with the item argument.\n * The function is expected to return a Promise with some result of processing the item.\n *\n * @returns {Promise<Array>}\n */\nasync function processSequentially(items, processorFn) {\n  return processInBatches(items, 1, processorFn);\n}\n\nexport {\n  mapToArray,\n  parseError,\n  swallowError,\n  storage,\n  delay,\n  niceNumber,\n  plural,\n  getQueryParam,\n  removeQueryParams,\n  addQueryParams,\n  getFragmentParam,\n  removeFragmentParams,\n  nicePrice,\n  isFloat,\n  removeNulls,\n  chopRight,\n  childrenArrayToMap,\n  isAbsoluteUrl,\n  generateId,\n  consolidateToMap,\n  flattenObject,\n  unFlattenObject,\n  toUTCDate,\n  getOptionsFromRules,\n  validRegions,\n  formatBytes,\n  processInBatches,\n  processSequentially,\n};\n"],"file":"utils.js"}