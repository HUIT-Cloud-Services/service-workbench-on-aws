(this["webpackJsonp@aws-ee/ui"]=this["webpackJsonp@aws-ee/ui"]||[]).push([[0],{1021:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=n(8),a=(r=n(531))&&r.__esModule?r:{default:r};var i=o.types.model("AuthenticationProviderPublicConfig",{id:o.types.identifier,configEditor:o.types.optional(a.default,{})}).actions((function(e){return{setConfigEditor:function(t){e.configEditor=t}}})).views((function(e){return{}}));t.default=i},1022:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.authenticationProviderPublicConfigsStore=f.create({},e)},t.AuthenticationProviderPublicConfigsStore=void 0;var o=n(8),a=s(n(5)),i=n(15),u=n(43),c=s(n(1023));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}var f=i.BaseStore.named("AuthenticationProviderPublicConfigsStore").props({authenticationProviderPublicConfigs:o.types.optional(o.types.array(c.default),[])}).actions((function(e){return{doLoad:function(){return(t=r.mark((function t(){var n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.getAuthenticationProviderPublicConfigs)();case 2:n=t.sent,e.runInAction((function(){e.authenticationProviderPublicConfigs=n;var t=(0,o.getEnv)(e).authentication,r=a.default.get(n,"[0].id","");t.setSelectedAuthenticationProviderId(r)}));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){l(a,r,o,i,u,"next",e)}function u(e){l(a,r,o,i,u,"throw",e)}i(void 0)}))})();var t}}})).views((function(e){return{get authenticationProviderOptions(){if(1===a.default.size(e.authenticationProviderPublicConfigs)){var t=e.authenticationProviderPublicConfigs[0];return[{key:t.id,text:t.title,value:t.id}]}var n=[];return a.default.forEach(e.authenticationProviderPublicConfigs,(function(e){("cognito_user_pool"!==e.type||e.enableNativeUserPoolUsers)&&n.push({key:e.id,text:e.title,value:e.id})})),n},toAuthenticationProviderFromId:function(t){return a.default.find(e.authenticationProviderPublicConfigs,{id:t})}}}));t.AuthenticationProviderPublicConfigsStore=f},1023:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=(o=n(5))&&o.__esModule?o:{default:o},i=n(8),u=n(43),c=n(27),s=n(529),l=n(135);function f(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){f(a,r,o,i,u,"next",e)}function u(e){f(a,r,o,i,u,"throw",e)}i(void 0)}))}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){return(0,c.isAbsoluteUrl)(e)?e:"".concat(u.config.apiPath,"/").concat(e)}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"login",n="redirect_uri",r=!0;"logout"===t&&(n="logout_uri",r=!1);var o=(0,c.getQueryParam)(e,[n]),a=e;return o!==l.websiteUrl&&(a=(0,c.removeQueryParams)(e,[n]),a=(0,c.addQueryParams)(a,p({},n,r?window.location:window.location.origin))),a}var y=i.types.model("AuthenticationProviderPublicConfig",{id:"",title:i.types.identifier,type:"",credentialHandlingType:"",signInUri:"",signOutUri:"",enableNativeUserPoolUsers:i.types.maybeNull(i.types.boolean)}).actions((function(e){return{cleanup:function(){},login:function(){var t=d(r.mark((function t(){var n,o,c,l,f,d,p,m=arguments;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=m.length>0&&void 0!==m[0]?m[0]:{},o=n.username,c=n.password,l=(0,i.getEnv)(e).pluginRegistry,f=function(e){var t=a.default.get(e,"code"),n=a.default.get(e,"isBoom");if("badRequest"===t)throw s.boom.badRequest(e,e.message);if(n)throw e;throw s.boom.apiError(e,"Something went wrong while trying to contact the server.")},t.prev=3,t.next=6,l.runPlugins("authentication","loginInitiated");case 6:if("submit"!==e.credentialHandlingType){t.next=14;break}return d=e.id,t.next=10,(0,u.authenticate)(e.absoluteSignInUrl,o,c,d);case 10:return p=t.sent,t.next=13,l.runPlugins("authentication","loginDetected",{explicitLogin:!0});case 13:return t.abrupt("return",p);case 14:"redirect"===e.credentialHandlingType&&(window.location=e.absoluteSignInUrl),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(3),f(t.t0);case 20:return t.abrupt("return",void 0);case 21:case"end":return t.stop()}}),t,null,[[3,17]])})));return function(){return t.apply(this,arguments)}}(),logout:function(){var t=d(r.mark((function t(){var n,o,a,u,c,s=arguments;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>0&&void 0!==s[0]?s[0]:{},o=n.autoLogout,a=void 0!==o&&o,u=(0,i.getEnv)(e).pluginRegistry,t.next=4,u.runPlugins("authentication","logoutInitiated",{autoLogout:a});case 4:if(!e.signOutUri){t.next=8;break}window.location=e.absoluteSignOutUrl,t.next=14;break;case 8:return c=(0,i.getEnv)(e).cleaner,t.next=11,c.cleanup();case 11:return window.history.pushState("","","/"),t.next=14,u.runPlugins("authentication","logoutDetected",{explicitLogout:!0,autoLogout:a});case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}})).views((function(e){return{get absoluteSignInUrl(){return v(m(e.signInUri))},get absoluteSignOutUrl(){return v(m(e.signOutUri),"logout")}}}));t.default=y},1024:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.userDisplayName=i.create({},e)},t.UserDisplayName=void 0;var r,o=(r=n(5))&&r.__esModule?r:{default:r},a=n(8);var i=a.types.model("UserDisplayName",{}).views((function(e){return{getDisplayName:function(t){var n,r=t.uid;if(o.default.isUndefined(r))return(n=(0,a.getEnv)(e).userStore).user?n.displayName:"Unknown";if("_system_"===r)return"System";var i=(0,a.getEnv)(e).usersStore.asUserObject({uid:r});return o.default.isUndefined(i)?"unknown":i.displayName||"unknown"},getLongDisplayName:function(t){var n;if(o.default.isUndefined(t))return(n=(0,a.getEnv)(e).userStore).user?n.longDisplayName:"Unknown";if("_system_"===t)return"System";var r=(0,a.getEnv)(e).usersStore.asUserObject(t);return o.default.isUndefined(r)?"unknown":r.longDisplayName||"unknown"},isSystem:function(t){var n;if(o.default.isUndefined(t))return!!(n=(0,a.getEnv)(e).userStore).user&&n.user.isSystem;if("_system_"===t)return!0;var r=(0,a.getEnv)(e).usersStore.asUserObject(t);return!o.default.isUndefined(r)&&r.isSystem}}}));t.UserDisplayName=i},1025:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.toUserIds=function(e){return a.default.map(e,(function(e){return e.id}))},t.toLongNames=function(e){return a.default.map(e,(function(e){return e.longDisplayName}))},t.toLongName=function(e){if(e)return e.longDisplayName;return"Unknown"},t.registerContextItems=function(e){e.usersStore=f.create({},e)},t.UsersStore=void 0;var o,a=(o=n(5))&&o.__esModule?o:{default:o},i=n(8),u=n(43),c=n(590);function s(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){s(a,r,o,i,u,"next",e)}function u(e){s(a,r,o,i,u,"throw",e)}i(void 0)}))}}var f=n(15).BaseStore.named("UsersStore").props({users:i.types.optional(i.types.map(c.User),{})}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return l(r.mark((function t(){var n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.getUsers)();case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=[];case 5:n=t.t0,e.runInAction((function(){var t={};n.forEach((function(e){var n=e.uid;t[n]=e})),e.users.replace(t)}));case 7:case"end":return t.stop()}}),t)})))()},cleanup:function(){e.users.clear(),t()},addUser:function(){var t=l(r.mark((function t(n){var o;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.addUser)(n);case 2:o=t.sent,e.runInAction((function(){var t=c.User.create(o);e.users.set(t.id,t)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),updateUser:function(){var t=l(r.mark((function t(n){var o,a,s;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.updateUser)(n);case 2:o=t.sent,a=c.User.create(o),s=e.users.get(a.id),(0,i.applySnapshot)(s,o);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})).views((function(e){return{get empty(){return 0===e.users.size},get hasNonRootAdmins(){var t=a.default.filter(e.list,(function(e){return e.isAdmin&&!e.isRootUser}));return!a.default.isEmpty(t)},get hasNonRootUsers(){return!a.default.isEmpty(e.nonRootUsers)},get nonRootUsers(){return a.default.filter(e.list,(function(e){return!e.isRootUser}))},get list(){var t=[];return e.users.forEach((function(e){return t.push(e)})),t},asSelectOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.nonClearables,r=void 0===n?[]:n,o=[];return e.users.forEach((function(e){return o.push({value:e.id,label:e.longDisplayName,clearableValue:!r.includes(e.id)})})),o},asDropDownOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.status,r=void 0===n?"active":n,o=[];return e.users.forEach((function(e){e.status===r&&o.push({key:e.id,value:e.id,text:e.longDisplayName})})),o},asUserObject:function(t){if(t){var n=t.uid,r=t.username,o=t.ns;return e.users.get(n)||c.User.create({username:r,ns:o})}},asUserObjects:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return t.forEach((function(t){if(t){var r=e.users.get(t.uid);r?n.push(r):n.push(c.User.create((0,i.getSnapshot)(t)))}})),n}}}));t.UsersStore=f},1026:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.userStore=f.create({},e)},t.UserStore=void 0;var o,a=(o=n(5))&&o.__esModule?o:{default:o},i=n(8),u=n(43),c=n(15),s=n(590);function l(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}var f=c.BaseStore.named("UserStore").props({user:i.types.maybe(s.User)}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return(t=r.mark((function t(){var n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.getUser)();case 2:n=t.sent,e.runInAction((function(){e.user=s.User.create(n)}));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){l(a,r,o,i,u,"next",e)}function u(e){l(a,r,o,i,u,"throw",e)}i(void 0)}))})();var t},cleanup:function(){e.user=void 0,t()}}})).views((function(e){return{get empty(){return a.default.isEmpty(e.user)}}}));t.UserStore=f},1027:function(e,t,n){e.exports=n.p+"static/media/favicon.435897c0.ico"},1028:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgEAYAAAAj6qa3AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dE////////CVj33AAAAAlwSFlzAAAASAAAAEgARslrPgAAERFJREFUaN7tmPtXVOe5x7/v3ntm9txnGIbboIJiLChgvEVNVBAwXtHEJiaoNWliqBe8JDaKtVGaYEzrpTFaNTZRU2/B4Ik3EBETTRSkoCERISDIcB9hLszMHua29+4PXe1ZK+dk9aTp6TprHT9/wLve72c973re5wEe8pCH/H+G/NgDpmuna6drIZGKUlEqIkKVo8pR5WCFarFqsWoxuas2qU1qE1XF5DF5TB5pdGY6M52Z/AjHe473HO+JthOnTpw6cQrm//MC0t5Pez/tfRByhIzFJ4iVDJfFkRIcYTeznYp8ujf0uZCLYfGSieEl4a9EzFCt0u7Rvqfdo35bc1dzV3M3tIleSa+kV8rCrQ6r02pttrSHto9rv9s74/6i+1zTk/6U/uf6D/pOo6xsU9mmsk0Q/+0C0o6mx0ztBaGu0pfFjTAyhbKNogP50oHyXpIieVkeq36NOq2O0OYYDZKLESPVa7QutiNqjbxftlw9MK5N+RNqmmndgAsxz0VOTPx0SJlxvcEaPjwiW8tpC7QbwtZSz1H5lFQ6pc3WMfJ+V/WM+/Ed92q5K0pLTK+qPXDZ3LOk+7Qz2DHUGtI5y/NTbzV/PxhD/Lh0VndWc9aA4P+agOkJMz9In4DRSGCO+zeSz5hGuRhcoGyRTlU8Jb4aWa6dEd5ETR7/tNZgbJZYE++FfBhWofhp4puajzWlqmdNRlWRslabZxwtiRZX6Vco6tXLqJcHFMr2KEMla4ztzA55oexZ9ZtUFNlPW8UEZPhixFm2CN+y4Hii7bvx4APHFoeyb8m10rZHm27aT5ToLZeaioXoi1dxTRhIn7HP6Arp0ncZ+GW2bFu2LRtfF2cVZxVn/esqhCy1ZU9/6fPQfH4odcz54biX+68ryhsWzUuS54RE+l4Zy4WoI9+QvjukQH1Gs00ekN9Sx6ltagu9UdEuP6D6iFxXviaXaP0Yz6ZKb6qUYOQHmE+1AiA10VmqmYDsMv2R6kNAIkhKJWpAVsu2S2oh0vOYA1QlGrwa97NiCf9N36DOk9KDfTdkMYFB0dtKQ91drsXcvZI9HYc7DnccvhK01FhqLDXdO82fmD8xf+Kzuja4Nrg2ILego6CjoAP9/6wAypCn3xaqf7Jw4I3o6XFrfj1Pl6xXq1dnfUCvVE/hcpMKhGZ6tGeverD/iPBG/2pmvfdUYKlnKCFek7+Cu4AnvEY/uPFgfO8FOjg34H9b+JZTA7yBZHtuAxAYo28qQIYzR/lwQDgvPs5XgXjjPaqgC8MCy5x/Ut+nMwduDBuTOCFk4Ii7w3+WWJi5IWlu0tykuZv8yXeS7yTfyX09oTqhOqF6OomxxlhjrIahmgZNg6aB6skYmzE2Yywk/6wAOiU7ZXzqqE0NYbeNn0T2p7mFGWIm38Au6WMC21umkqHCLErVb0OoOAtycT0o8jzyQAHiG/gYHwDkjyglZgB1KBQXAcgmXeQsAB4Z4haAnCIaUg3gP8ivyAQg2ORNp7SAd7r1tvowEPWZev3IP4E2HNf9JELAePYi+yHbKYFKqpKqpPoZxpvGSmPlyM1hT4bNDJs1JTr8XnhLeNvQFQOaB9wf0MKei1wVmRO50nZyVPWoqlFVvuKYWTGzYmbxP4u7Fnct7hpq6vLr8uvywX+vgLG/G/vbsTtWPCovYxn5vthhwSIh6KsnMdYkX1ZjCRCUUeudRwDyBMlCD0CmkEXUZgALiRODAcpNmckyAGNINQhA3SDF5EWAtJAWkgFQX1I7KA1ATuCPGAsEHud+JS0CFCn86zF9gPGMno+OAigf9S31KIBlWI4VIOIusVj8M8L5C0KdsJZaSj6m/LRDc579WpGrbPjJZkWqYpvqtbFfKHIVE+TG8FLFFwqv4iv+fUWMfKc83zaOncBOYCf4Hw9bEbYibIV4rf7L+i/rv4TnuwIYl9wld8m9p2V2WVD2lWjzDaMT7ElkcmCneMtTC/AP+pP7vwTEp8QdYg+Ap9FORgDiSnGheBigLpMTZC4gDhCTxbcAEo86sgMQH0WO+DuAxBMDOQAI48VZwgaAnPY9IrUCyjGIwG4gaAp6gx6AXCW3yTkguC84Kvgm8CC175ZbB5iT+o4E0sB4U1DH1GM7cdEUPZflpRy1mFow+Jf6CdqJ4Uey6xJd4XsjZ87tjRs4RDlkcNni7tTu1O7UksLw0+Gnw09/1hp7KfZS7CVbTdvGto1tG4Mb3JPck9yT8AWd4ExwJdiG5YhGHBCujxjhO0o1m3MVrP+3stzmhTAGysVp3kZA+I3wc5QB1E7qHHEA2Ecm4+cANZ2aTqkBrCO/RQZA/ZH8kjIBZDiZSg4AFKEqqFEAnsSTOAeI8cF7kmmAJCy4OzQZ0ExWnDWmAiSfBMkfAN8z/iOBp4Bm/sGnjjagp4ws1EQAglyRoJsH4AR7W90OKhhkstgnER/4yF/ja6PjTb/SW5XvawIxdwboTHeHPqFv1H+rr380mTWzZtasHyOLkkXJogLdfuInfmJNEjiBE7jAUjouMe7Q4OvmeP8y8YIjX36GbtXPqY8bcUqyULXbmiX9SjgqmoU6zA7mBDeSM4BYFOyRbgLILmEBUwagBMewGBDDUSBOBEglaUIFIGZAIn4BYCRWYRGAQ2BEARBzhCPUXIBq9x7SvwHo8uSjo94EsBjpeAegj1HHqTZAOoiKRgDgv+pf7n4bIK2+ke4FALPdv9w9DVAG+RpuBzBou9YmTYAiaolhsu4SiZaMl4hMtHQ4raE1tMb4gHmBeYF54bE20SpaRWt6tJAupAvppjfZBDaBTehsoIdseeRy9LPcBur3rMTKOCj5NIPR8ovEx6VfK856N0XUiHt5tfQJ+nnJCe/vByhA9MNJV7Ia0HxFXR0sBRg9/7JmKCC+y/dQUQC6ya/5FABfkFWiEaBuUUfJhwA+wWBMBLA3MJMdCbDhwRkmC6CzK7uirADpIbUkBKBeoVKpREDxG/aw7DBgmKPayiYARqNitqQBMNYpXqVXAGFFymvSSwC7hNZiEuA09zkcDsAiWLwWDuTBlQdXHlxBaF9WX1ZfFj2RslAWyqJRKrYotii2RJ/gO/gOvqPpChMk/FrvNP/vAmv9C/hxVTk+g7NNuWZ3ATNSOiow6/X50l3uOYMWjzEoK/nEx67BFnFZkzVkLaA+rY5WbwVkb7LzJPkA/0B82ZsHcOm+BRY54MsLML1bgeCe/maXEfB9IJlF84A8gxkUswRQ1etCIl8DglXBJ4JXAfE58WkxHgisCawK5ADCduFV4VUgeD34afA6EAwLFgUpILAk8ELgM4CneYp/CcDLWI/1ANGRHqIDvOFelfcJwD3fPd89H/CGekO9oQiPKooqiioiGZr5mvma+SE32BnsDHZGXBp972RDUSuH1ph9g3qHlPE0tY1eL4x8sJV/xs/KEhlXcKajMyZl4uvMN6LHkC/9lhlKb5OsxkAadBLDAGyDzK6oA+QRMov6FKC5wL4dlg5oDdLXok2AZje9fuBWQLOamTb4OmDIUtTEfg3IdkoEVTfgv+oL97MARzjCEcDldrldbsCT5knzpAE8+L/2sH3Yh30ARmM0RgOB3EBuIBewLrIusi4COiZ0TOiYALTUt9S31AMdxzuOdxwH7EF70B4EVINUg1SDAC2rZbUsyXFccFxwXLivp//WDpryG2+37sIdU2F43vB1niZvgeOWPrRuG2/0HVdMNO7gq4MiPzLurPCYME54TB4hZoqZYiZ05Cg5So4CJJkkkHEAXUjPZaYD1C6yhHkHkGjoI/KjANNLxrESQEjmFRgABCoDQwJKgJwkJ8lJQJIpyZRkArI5sjmyOQBpIk2kCXAddh12HQY6azprOmuAhqqGqoYqoHFl48rGlUDrW61vtb4FWHutvdZewJ/sT/YnA8x+Zj+zH4gsjyyPLIcQWRFZEVmBTplX5pV5xX57vD3eHt+59nunwYzWjNaMVjJGYpfYJfYJL0knSydLJ+e+rSxVlipLpxdon9I+pX2KGWSwGqwGKyLUxepidTGg2aDZoNkAKHVKnVIHKFIVqYpUgJ3MTmYnA4o6RZ2iDmBqmVqmFuBf4l/iXwI8Mo/MIwN6MnsyezIB+277bvtuwNHj6HH0AN753vne+QAv8AIvANQd6g51B2Db2Da2DVDvV+9X7wcMhYZCQyG8IcNChoUMwxXdGN0Y3RjhOWoSNYma1F/nPuo+6j7a1mYuMZeYS051Mt8nQKAESqDEW3whX8gXVuf7rvqu+q7+vltsF9vF9qg4vpFv5BuTykUiEpEwswLLA8sDy0Gi90bvjd4LxDwT80zMM0DwRvBG8AbgzHXmOnOBzoudFzsvAi7aRbtowFZiK7GVANwqbhW3CgiUBcoCZQDRER3RAfI98j3yPUBoamhqaCqgt+vtejsETZmmTFOGDp1ZZ9aZxWPSCGmENCIo8mv4Nfwa5zrfON8437jurd2x3bHdsVVL+hL7EvsSbz+w+W1+m7/8M4fBYXAY7p38XgFl0WXRZdEQMs5nnM8473NhKZZiaeXzgZuBm4GbxwfgNm7jtiGWXk+vp9cP6qBltIyWIZttZ9vZdkBySXJJcglojWiNaI0A7s29N/feXIAbzY3mRgNCs9AsNAO0jtbROoBtZpvZZiDyUOShyEOA7rzuvO48oO/Wd+u7YZGnydPkaRhN76J30bv8B/m1/Fp+rftVj9lj9pjvUza9TW/T1510l7vL3eU3L3CdXCfXWd/oGOUY5Rj17SOuG64brhv2F23P2563Pe/Z5Un3pHvSBcv3CvgbpbNLZ5fOxk/Tw9LD0sNcaTiLszh77D1IIYVUpeRucbe4W6/OkLASVsJqNsEGG2x4i8wkM8lMgNSSWlL7n6Wqm6KbopsCqIvUReoiwJBkSDIkoUcJJZTAO9JkabI0OThaeFF4UXixP8db6a30Vna+40x0JjoTm//gCHGEOEKqfuHSuXQu3TerrYyVsTJfz+nN7s3uzbZc7tzeub1zu+uix+QxeUz81Iu2i7aLNhz6e6AKVKACU/8+C/xPp6bY47HHY4+jhbxCXiGveJbBCSec3bMRilCEJhZL3pW8K3k3+liCJkGToGFe0EXqInWRoBSNikZFIxCmD9OH6SGYGk2NpkZ8bGwxthhbxGxZmaxMVuadFEgJpARSeqtt223bbdsrzD3JPck9yed3dlZ2VnZWHtnZldSV1JX08bju8u7y7vJLU7s3d2/u3vzNi5YoS5Qlqmdrn6RP0ifx3nCdcZ1xnRFLSxpKGkoaUPOPcv3gnWD6wvSF6QvBkI1kI9lIbWE0jIbRTE03TjVONU7NrXi6/en2p9undJuuma6ZrpF8IUVIEVICk/3F/mJ/MZfFNXKNXGPrMC6Py+Py7p3pfaT3kd5HrrN22GFHzQH7Jvsm+6Y7F/vZfrafdXa5FrgWuBb4bztHOEc4R4gVjkJHoaMQV8rYMraMhfBD7/9d/uET+C6Xj10+dvkYgulV6VXpVcIuMoQMIUMqp8kVcoVc8VGPN8Ib4Y0wunureqt6q4Q/cxlcBpdxdzo3m5vNza7Nsg+wD7APqLjnWOpY6ljaAst1y3XL9a5W7iB3kDvo/Zlvt2+3b7ewyhPuCfeE45tz5nPmc2b4YIYZZgAsWLA/NvaPqIDvMu/MvDPzzuCq6YrpiumKxm5abVptWj3cS52gTlAnvAfs6+zr7Ova+//68XAe7D3Ze7L3pG+IJ84T54nD0OKtxVuLt6LjXxfph/GDK+C/GDQSIzFimqfaU+2pdt7qGto1tGto5WD+MH+YPyyO7CvoK+grEG5z97n73H3M4j7nPuc+R1tpQWlBacG/b/v7kIc85CH/HX8BYnC2lemgb5wAAAAASUVORK5CYII="},1029:function(e,t,n){e.exports=n.p+"static/media/login-image.94b53ea6.gif"},1030:function(e,t,n){e.exports=n.p+"static/media/logo-image.0c978c0a.png"},1034:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=d(n(0)),a=n(3),i=n(12),u=n(8),c=n(31),s=d(n(85)),l=n(1036),f=d(n(1037));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(i,e);var t,n,r,a=y(i);function i(){return p(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"getRoutes",value:function(){var e=this.props.location,t=this.appContext;return(0,l.getRoutes)({location:e,appContext:t})}},{key:"getMenuItems",value:function(){var e=this.props.location,t=this.appContext;return(0,l.getMenuItems)({location:e,appContext:t})}},{key:"getDefaultRouteLocation",value:function(){var e=this.props.location,t=this.appContext;return(0,l.getDefaultRouteLocation)({location:e,appContext:t})}},{key:"renderApp",value:function(){var e=this.getDefaultRouteLocation();return o.default.createElement(f.default,{menuItems:this.getMenuItems()},o.default.createElement(c.Switch,null,o.default.createElement(c.Redirect,{exact:!0,from:"/",to:e}),this.getRoutes()))}},{key:"render",value:function(){return this.renderApp()}},{key:"appContext",get:function(){return(0,u.getEnv)(this.props.app)||{}}}])&&m(t.prototype,n),r&&m(t,r),i}(o.default.Component);(0,a.decorate)(b,{appContext:a.computed});var E=(0,s.default)((0,i.inject)("app","userStore")((0,c.withRouter)((0,i.observer)(b))));t.default=E},1035:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=d(n(5)),a=d(n(0)),i=n(31),u=n(3),c=n(12),s=n(16),l=n(33),f=n(135);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(c,e);var t,n,r,i=v(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).handleChange=function(e){return(0,u.action)((function(n){t[e]=n.target.value,"username"===e&&(t.usernameError=""),"password"===e&&(t.passwordError="")}))},t.handleAuthenticationProviderChange=(0,u.action)((function(e,n){var r=n.value;t.props.authentication.setSelectedAuthenticationProviderId(r)})),t.handleLogin=(0,u.action)((function(e){e.preventDefault(),e.stopPropagation(),t.authenticationProviderError="",t.usernameError="",t.passwordError="";var n=o.default.trim(t.username)||"",r=t.password||"",a=t.props.authentication.selectedAuthenticationProviderId||"",i=!1;if(o.default.isEmpty(a)&&(t.authenticationProviderError="please select authentication provider",i=!0),t.props.authentication.shouldCollectUserNamePassword&&(o.default.isEmpty(n)&&(t.usernameError="username is required",i=!0),!o.default.isEmpty(n)&&n.length<3&&(t.usernameError="username must be at least 3 characters long",i=!0),o.default.isEmpty(r)&&(t.passwordError="password is required",i=!0),!o.default.isEmpty(r)&&r.length<4&&(t.passwordError="password must be at least 4 characters long",i=!0)),!i){var c=t.props.authentication;t.loading=!0,Promise.resolve().then((function(){return c.login({username:n,password:r})})).catch((function(e){return(0,l.displayError)(e)})).finally((0,u.action)((function(){t.loading=!1})))}})),(0,u.runInAction)((function(){t.username="",t.password="",t.loading=!1,t.authenticationProviderError="",t.usernameError="",t.passwordError="",t.props.authentication.setSelectedAuthenticationProviderId(o.default.get(t.authProviderOptions,"[0].key",""))})),t}return t=c,(n=[{key:"getStore",value:function(){return this.props.authenticationProviderPublicConfigsStore}},{key:"render",value:function(){var e=this,t=!!(this.usernameError||this.passwordError||this.authenticationProviderError),n=this.authProviderOptions,r=this.props.authentication.selectedAuthenticationProviderId,o=this.props.authentication.shouldCollectUserNamePassword,i=a.default.createElement(s.Image,{centered:!0,src:this.props.assets.images.loginImage});return a.default.createElement("div",{className:"login-form animated fadeIn"},a.default.createElement("style",null,"\n        body > div#root,\n        body > div#root > div,\n        body > div#root > div > div.login-form {\n          height: 100%;\n        }\n      "),a.default.createElement(s.Grid,{textAlign:"center",style:{height:"100%"},verticalAlign:"middle"},a.default.createElement(s.Grid.Column,{style:{maxWidth:450}},a.default.createElement(s.Form,{error:t,size:"large",loading:this.loading,onSubmit:function(e){e.preventDefault(),e.stopPropagation()}},a.default.createElement(s.Segment,{stacked:!0},i,a.default.createElement(s.Header,{as:"h3",textAlign:"center"},f.branding.login.title,a.default.createElement(s.Header.Subheader,null,f.branding.login.subtitle)),n&&n.length>1?a.default.createElement(s.Form.Field,{error:!!e.usernameError,required:!0},a.default.createElement(s.Select,{placeholder:"Select Authentication Provider",options:n,defaultValue:r,onChange:e.handleAuthenticationProviderChange}),e.authenticationProviderError&&a.default.createElement(s.Label,{basic:!0,color:"red",pointing:!0,className:"float-left mb2"},e.authenticationProviderError)):"",o&&a.default.createElement(s.Form.Field,{error:!!this.usernameError,required:!0},a.default.createElement(s.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"Username","data-testid":"username",value:this.username,onChange:this.handleChange("username")}),this.usernameError&&a.default.createElement(s.Label,{basic:!0,color:"red",pointing:!0,className:"float-left mb2"},this.usernameError)),o&&a.default.createElement(s.Form.Field,{error:!!this.passwordError,required:!0},a.default.createElement(s.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password","data-testid":"password",value:this.password,type:"password",onChange:this.handleChange("password")}),this.passwordError&&a.default.createElement(s.Label,{basic:!0,color:"red",pointing:!0,className:"float-left mb2"},this.passwordError)),a.default.createElement(s.Button,{"data-testid":"login",type:"submit",color:"blue",fluid:!0,basic:!0,size:"large",className:"mb2",onClick:this.handleLogin},"Login"))))))}},{key:"authProviderOptions",get:function(){var e=new URL(document.location).searchParams,t=o.default.isString(e.get("internal")),n=this.getStore(),r=n.authenticationProviderOptions;return o.default.size(r)<=1?r:o.default.filter(n.authenticationProviderOptions,(function(e){return!("internal"!==e.key||!t)||"internal"!==e.key}))}}])&&p(t.prototype,n),r&&p(t,r),c}(a.default.Component);(0,u.decorate)(g,{username:u.observable,password:u.observable,loading:u.observable,authenticationProviderError:u.observable,usernameError:u.observable,passwordError:u.observable,authProviderOptions:u.computed});var b=(0,c.inject)("authentication","authenticationProviderPublicConfigsStore","assets")((0,i.withRouter)((0,c.observer)(g)));t.default=b},1036:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRoutes=function(e){e.location;var t=e.appContext,n=t.pluginRegistry.getPluginsWithMethod("routes","registerRoutes"),i=new Map,u=o.default.reduce(n,(function(e,n){return n.registerRoutes(e,t)}),i),c=Array.from(u||new Map),l=0;return r.default.createElement(a.Switch,null,o.default.map(c,(function(e){var t=s(e,2),n=t[0],o=t[1];return l+=1,r.default.createElement(a.Route,{key:l,path:n,component:o})})))},t.getMenuItems=function(e){var t=e.location,n=e.appContext,r=n.pluginRegistry.getPluginsWithMethod("menu-items","registerMenuItems"),a=new Map,i=o.default.reduce(r,(function(e,r){return r.registerMenuItems(e,{location:t,appContext:n})}),a),l=Array.from(i||new Map);return o.default.map(l,(function(e){var t=s(e,2);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({url:t[0]},t[1])}))},t.getDefaultRouteLocation=function(e){var t,n=e.location,r=e.appContext,a=o.default.reverse(r.pluginRegistry.getPluginsWithMethod("routes","getDefaultRouteLocation")||[]);return o.default.forEach(a,(function(e){var a=e.getDefaultRouteLocation({location:n,appContext:r});if(!o.default.isUndefined(a))return t=a,!1})),t};var r=i(n(0)),o=i(n(5)),a=n(31);function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){o=!0,a=c}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},1037:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=m(n(5)),i=m(n(0)),u=n(3),c=n(12),s=n(31),l=n(16),f=n(38),d=n(33),p=n(135);function m(e){return e&&e.__esModule?e:{default:e}}function v(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){v(a,r,o,i,u,"next",e)}function u(e){v(a,r,o,i,u,"throw",e)}i(void 0)}))}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(c,e);var t,n,o,u=E(c);function c(){var e;h(this,c);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=u.call.apply(u,[this].concat(n))).goto=function(t){return function(){var n=e.props.location,r=(0,f.createLink)({location:n,pathname:t});e.props.history.push(r)}},e.handleLogout=function(){var t=y(r.mark((function t(n){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),n.stopPropagation(),t.prev=2,t.next=5,e.props.authentication.logout();case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),(0,d.displayError)(t.t0);case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}(),e}return t=c,(n=[{key:"getMenuItems",value:function(){return this.props.menuItems||[]}},{key:"render",value:function(){var e=this,t=this.props.userStore.user,n=t?t.displayName:"Not Logged In",r=a.default.get(this.props.location,"pathname",""),o=function(e){return a.default.startsWith(r,e)},u=this.getMenuItems();return[i.default.createElement(l.Menu,{vertical:!0,inverted:!0,fixed:"left",icon:"labeled",key:"ml1",style:{overflowY:"auto"}},i.default.createElement(l.Menu.Item,{name:" ",style:{height:"40px"}}),a.default.map(u,(function(t,n){return(a.default.isFunction(t.shouldShow)&&t.shouldShow()||t.shouldShow)&&(t.body?t.body:i.default.createElement(l.Menu.Item,{key:n,active:o(t.url),onClick:o(t.url)?void 0:e.goto(t.url)},i.default.createElement(l.Icon,{name:t.icon,size:"mini"}),i.default.createElement("span",{className:"fs-7"},t.title)))}))),i.default.createElement(l.Menu,{inverted:!0,color:"black",fixed:"top",className:"box-shadow zindex-1500",key:"ml2"},i.default.createElement(l.Menu.Item,{style:{height:"50px",verticalAlign:"middle"}},i.default.createElement(l.Image,{size:"mini",src:this.props.assets.images.logoImage,className:"mr1",style:{height:"40px",width:"auto"}}),i.default.createElement("span",{style:{paddingLeft:"5px"}},p.branding.main.title)),i.default.createElement(l.Menu.Menu,{position:"right"},i.default.createElement(l.Menu.Item,null,i.default.createElement(l.Icon,{name:"user"})," ",n),i.default.createElement(l.Menu.Item,{name:"logout",onClick:this.handleLogout}))),i.default.createElement("div",{className:"fit animated fadeIn",style:{paddingTop:"40px",paddingLeft:"84px",paddingBottom:"100px"},key:"ml3"},this.props.children)]}}])&&g(t.prototype,n),o&&g(t,o),c}(i.default.Component);(0,u.decorate)(k,{handleLogout:u.action});var O=(0,c.inject)("authentication","userStore","assets")((0,s.withRouter)((0,c.observer)(k)));t.default=O},1038:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=d(n(5)),i=d(n(0)),u=n(3),c=n(12),s=n(16),l=d(n(1039)),f=n(135);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){p(a,r,o,i,u,"next",e)}function u(e){p(a,r,o,i,u,"throw",e)}i(void 0)}))}}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(d,e);var t,n,o,c=h(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=c.call(this,e)).startDialogCountDown=function(){a.default.isUndefined(t.intervalId)&&(t.dialogCountDown=60,t.intervalId=setInterval(m(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,u.runInAction)((function(){if(t.dialogCountDown<=0)return t.doLogout();t.dialogCountDown-=1}));case 1:case"end":return e.stop()}}),e)}))),1e3))},t.cancelDialogCountDown=function(){t.clearInterval()},t.doLogout=m(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.clearInterval(),e.abrupt("return",t.authentication.logout({autoLogout:!0}));case 2:case"end":return e.stop()}}),e)}))),t.handleLogout=function(){var e=m(r.mark((function e(n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),n.stopPropagation(),e.abrupt("return",t.doLogout());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(0,u.runInAction)((function(){t.dialogCountDown=void 0,t.intervalId=void 0})),t}return t=d,(n=[{key:"componentDidMount",value:function(){}},{key:"clearInterval",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){a.default.isUndefined(this.intervalId)||(clearInterval(this.intervalId),this.intervalId=void 0),this.dialogCountDown=void 0}))},{key:"render",value:function(){return this.app.userAuthenticated?i.default.createElement(i.default.Fragment,null,i.default.createElement(l.default,{timeout:6e4*f.autoLogoutTimeoutInMinutes,onIdle:this.startDialogCountDown}),i.default.createElement(s.Modal,{open:this.modalOpen,closeOnEscape:!1,closeOnDimmerClick:!1,centered:!1},i.default.createElement(s.Modal.Header,null,"Are you still there?"),i.default.createElement(s.Modal.Content,{className:"center"},i.default.createElement("div",null,"For security purposes, you will be logged out in"),i.default.createElement(s.Header,{as:"h1"},this.dialogCountDown),i.default.createElement("div",null,"seconds")),i.default.createElement(s.Modal.Actions,{className:"clearfix"},i.default.createElement(s.Button,{floated:"right",primary:!0,content:"Keep Me Logged In",onClick:this.cancelDialogCountDown}),i.default.createElement(s.Button,{floated:"right",content:"Log Out",onClick:this.handleLogout})))):null}},{key:"app",get:function(){return this.props.app}},{key:"authentication",get:function(){return this.props.authentication}},{key:"modalOpen",get:function(){return this.dialogCountDown>=0}}])&&v(t.prototype,n),o&&v(t,o),d}(i.default.Component);(0,u.decorate)(E,{app:u.computed,authentication:u.computed,modalOpen:u.computed,intervalId:u.observable,dialogCountDown:u.observable,startDialogCountDown:u.action,doLogout:u.action,handleLogout:u.action,cancelDialogCountDown:u.action,clearInterval:u.action});var w=(0,c.inject)("authentication","app")((0,c.observer)(E));t.default=w},1040:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=d(n(0)),a=n(3),i=n(12),u=n(31),c=d(n(6)),s=n(16),l=n(591),f=d(n(1041));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(i,e);var t,n,r,a=y(i);function i(){return p(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){return o.default.createElement(s.Container,{className:"mt3 mb4"},this.renderTitle(),this.renderContent())}},{key:"renderTitle",value:function(){return o.default.createElement("div",{className:"mb3 flex"},o.default.createElement(s.Header,{as:"h3",className:"color-grey mt1 mb0 flex-auto"},o.default.createElement(s.Icon,{name:"dashboard",className:"align-top"}),o.default.createElement(s.Header.Content,{className:"left-align"},"Dashboard")))}},{key:"stat",value:function(e,t,n,r,a){return o.default.createElement("div",{className:(0,c.default)("center",a)},o.default.createElement("div",{className:"fs-9"},e),o.default.createElement("div",{className:r,style:{fontSize:"4rem",lineHeight:"1em"}},n),o.default.createElement("div",{className:"bold",style:{fontSize:"1rem",lineHeight:"1em"}},t))}},{key:"renderContent",value:function(){return o.default.createElement("div",null,o.default.createElement(s.Segment,{color:"blue",padded:!0},o.default.createElement("div",{className:"flex flex-wrap"},this.stat("You have to complete","TASKS","550","color-blue","mr4"),this.renderTaskCountGraph(),this.renderTaskDueGraph()),o.default.createElement(s.Divider,null),"There are"," ",o.default.createElement(s.Label,{circular:!0,color:"orange",className:"mt2"},"100")," ","tasks due today. \xa0\xa0You have been assigned an additional ",o.default.createElement("b",null,"300")," tasks since last month. There are a total of",o.default.createElement("b",null,"10,000"),"tasks to complete."))}},{key:"renderTaskCountGraph",value:function(){var e={labels:["Eat","Run","Walk","Sleep","Work"],datasets:(0,l.blueDatasets)("Tasks",[1,8,5,6,3])};return o.default.createElement(f.default,{className:"mr4",data:e,title:"Tasks"})}},{key:"renderTaskDueGraph",value:function(){var e={labels:["Today","Tomorrow","Yesterday","Last Year","No"],datasets:(0,l.blueDatasets)("Due Date",[1,8,5,6,3])};return o.default.createElement(f.default,{className:"mr4",data:e,title:"Due Date"})}}])&&m(t.prototype,n),r&&m(t,r),i}(o.default.Component);(0,a.decorate)(b,{});var E=(0,i.inject)()((0,u.withRouter)((0,i.observer)(b)));t.default=E},1041:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(0))&&r.__esModule?r:{default:r},a=n(396),i=n(591);var u=function(e){var t=e.className,n=e.data,r=e.title,u=e.width,c=void 0===u?250:u,s=e.height,l=void 0===s?120:s;return o.default.createElement("div",{className:t},o.default.createElement("div",{className:"fs-9 center mt1 mb1"},r),o.default.createElement("div",null,o.default.createElement(a.HorizontalBar,{className:t,data:n,width:c,height:l,options:i.barOptions})))};t.default=u},1043:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(12);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(s,e);var t,n,r,o=c(s);function s(){return a(this,s),o.apply(this,arguments)}return t=s,(n=[{key:"render",value:function(){return"TODO: IMPLEMENT"}}])&&i(t.prototype,n),r&&i(t,r),s}(n(0).Component),d=(0,o.inject)("authenticationProviderConfigsStore")((0,o.observer)(f));t.default=d},1044:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(12),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!==typeof e)return{default:e};var t=g();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),u=n(16),c=n(33),s=n(38),l=n(27),f=n(530),d=n(15),p=h(n(439)),m=h(n(440)),v=h(n(44)),y=h(n(39));function h(e){return e&&e.__esModule?e:{default:e}}function g(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return g=function(){return e},e}function b(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){b(a,r,o,i,u,"next",e)}function u(e){b(a,r,o,i,u,"throw",e)}i(void 0)}))}}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var o=A(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(h,e);var t,n,o,a=O(h);function h(){var e;w(this,h);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleCancel=function(){(0,s.gotoFn)(P(e))("/authentication-providers")},e.handleSave=function(){var t=E(r.mark((function t(n){var o,a,i,u;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=(0,f.fromConfiguration)(n),a=e.getAuthenticationProviderConfig(),i=a.config.type,u=i.type,t.next=7,e.getStore().updateAuthenticationProvider({providerTypeId:u,providerConfig:o});case 7:(0,s.gotoFn)(P(e))("/authentication-providers"),(0,c.displaySuccess)("The authentication provider is updated successfully"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),(0,c.displayError)(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),e}return t=h,(n=[{key:"componentDidMount",value:function(){var e=this.getStore();(0,l.swallowError)(e.load())}},{key:"render",value:function(){var e=this.getStore(),t=null;return t=(0,d.isStoreError)(e)?i.default.createElement(y.default,{error:e.error}):(0,d.isStoreLoading)(e)?i.default.createElement(v.default,{segmentCount:3}):(0,d.isStoreReady)(e)?this.renderMain():null,i.default.createElement(u.Container,{className:"mt3"},i.default.createElement("div",{className:"mb4"},t))}},{key:"renderMain",value:function(){var e=this.getAuthenticationProviderConfigId(),t=this.getAuthenticationProviderConfig();if(!t)return i.default.createElement(y.default,{error:'The Authentication Provider "'.concat(e,'" does not exist')});var n=(0,s.gotoFn)(this);return i.default.createElement("div",null,i.default.createElement(u.Breadcrumb,null,i.default.createElement(u.Breadcrumb.Section,{link:!0,onClick:function(){return n("/authentication-providers")}},"Authentication Providers"),i.default.createElement(u.Breadcrumb.Divider,{icon:"right angle"}),i.default.createElement(u.Breadcrumb.Section,null,"Authentication Provider"),i.default.createElement(u.Breadcrumb.Divider,{icon:"right angle"}),i.default.createElement(u.Breadcrumb.Section,{active:!0},t.id)),i.default.createElement(u.Segment,null,i.default.createElement("div",{className:"ml2"},this.renderTitle(t),this.renderDetails(t.id))))}},{key:"renderTitle",value:function(e){return i.default.createElement(u.Header,{as:"h1",color:"grey",className:"ml2 mt3"},e.config.title)}},{key:"renderDetails",value:function(e){var t=this.getStore().getUpdateAuthenticationProviderConfigEditor(e).configEditor;return t.review?i.default.createElement(m.default,{model:t,onCancel:this.handleCancel,onSave:this.handleSave}):i.default.createElement(p.default,{model:t,onCancel:this.handleCancel})}},{key:"getStore",value:function(){return this.props.authenticationProviderConfigsStore}},{key:"getAuthenticationProviderConfigId",value:function(){return decodeURIComponent((this.props.match.params||{}).authenticationProviderConfigId)}},{key:"getAuthenticationProviderConfig",value:function(){var e=this.getAuthenticationProviderConfigId();return this.getStore().getAuthenticationProviderConfig(e)}}])&&S(t.prototype,n),o&&S(t,o),h}(i.Component),I=(0,a.inject)("authenticationProviderConfigsStore")((0,a.observer)(j));t.default=I},1045:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n(5)),a=s(n(0)),i=n(3),u=n(12),c=s(n(1046));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(u,e);var t,n,r,i=p(u);function u(){return l(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"getForm",value:function(){return this.props.form}},{key:"getInputEntries",value:function(){return this.props.inputEntries}},{key:"render",value:function(){var e=this.props.processing||!1,t=this.getForm(),n=this.getInputEntries();return a.default.createElement(a.default.Fragment,null,o.default.map(n,(function(n){return a.default.createElement(c.default,{key:n.name,form:t,inputEntry:n,processing:e})})))}}])&&f(t.prototype,n),r&&f(t,r),u}(a.default.Component);(0,i.decorate)(y,{});var h=(0,u.inject)()((0,u.observer)(y));t.default=h},1046:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=p(n(5)),a=p(n(0)),i=n(3),u=n(12),c=n(16),s=p(n(52)),l=p(n(228)),f=p(n(61)),d=p(n(74));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(u,e);var t,n,r,i=h(u);function u(){return m(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"getForm",value:function(){return this.props.form}},{key:"getInputEntry",value:function(){return this.props.inputEntry}},{key:"getProcessing",value:function(){return this.props.processing||!1}},{key:"render",value:function(){var e=this.getInputEntry(),t=this.getField();return a.default.createElement(a.default.Fragment,null,this.renderDivider(e),t)}},{key:"renderDivider",value:function(e){if(void 0===e.divider)return null;var t=e.divider,n=!!t.icon;return o.default.isBoolean(e.divider)?a.default.createElement(c.Divider,{className:"mb3 mt0"}):a.default.createElement(c.Divider,{horizontal:!0,className:"mb3 mt0"},a.default.createElement(c.Header,{as:"h4",color:"grey"},n&&a.default.createElement(c.Icon,{name:t.icon,color:"grey"}),t.title))}},{key:"getField",value:function(){var e=this.getProcessing(),t=this.getForm(),n=this.getInputEntry(),r=t.$(n.name);switch(n.type){case"stringInput":return a.default.createElement(s.default,{field:r,disabled:e});case"yesNoInput":return a.default.createElement(l.default,{field:r,disabled:e});case"dropDownInput":return a.default.createElement(f.default,{field:r,fluid:!0,selection:!0,disabled:e});case"textAreaInput":return a.default.createElement(d.default,{field:r,disabled:e});default:return a.default.createElement(a.default.Fragment,null)}}}])&&v(t.prototype,n),r&&v(t,r),u}(a.default.Component);(0,i.decorate)(E,{});var w=(0,u.inject)()((0,u.observer)(E));t.default=w},1047:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=y(n(5)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=v();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=n(12),u=n(31),c=n(16),s=n(38),l=n(27),f=n(15),d=y(n(44)),p=y(n(39)),m=y(n(1048));function v(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return v=function(){return e},e}function y(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(u,e);var t,n,r,i=E(u);function u(){var e;h(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).handleAddAuthenticationProviderClick=function(t){(0,s.gotoFn)(S(e))("/authentication-providers/add")},e}return t=u,(n=[{key:"componentDidMount",value:function(){var e=this.getStore();(0,l.swallowError)(e.load()),e.startHeartbeat()}},{key:"componentWillUnmount",value:function(){this.getStore().stopHeartbeat()}},{key:"getStore",value:function(){return this.props.authenticationProviderConfigsStore}},{key:"render",value:function(){var e=this.getStore(),t=null;return t=(0,f.isStoreError)(e)?a.default.createElement(p.default,{error:e.error}):(0,f.isStoreLoading)(e)?a.default.createElement(d.default,{segmentCount:3}):(0,f.isStoreReady)(e)?this.renderMain():null,a.default.createElement(c.Container,{className:"mt3"},a.default.createElement("div",{className:"mb4"},this.renderTitle(),t))}},{key:"renderTitle",value:function(){var e=this;return a.default.createElement("div",{className:"mb3 flex"},a.default.createElement(c.Header,{as:"h3",className:"color-grey mt1 mb0 flex-auto"},a.default.createElement(c.Icon,{name:"user secret",className:"align-top"}),a.default.createElement(c.Header.Content,{className:"left-align"},"Authentication Providers",function(){var t=e.getStore(),n=(0,f.isStoreReady)(t)&&(0,f.isStoreNotEmpty)(t),r=t.list;return n&&a.default.createElement(c.Label,{circular:!0,size:"medium"},r.length)}())))}},{key:"renderMain",value:function(){var e=this.getStore().list;return a.default.createElement("div",null,o.default.map(e,(function(e,t){return a.default.createElement(c.Segment,{clearing:!0,key:e.id,className:"mb2"},a.default.createElement(m.default,{authenticationProviderConfig:e,pos:t+1}))})))}}])&&g(t.prototype,n),r&&g(t,r),u}(a.Component),C=(0,i.inject)("authenticationProviderConfigsStore")((0,u.withRouter)((0,i.observer)(O)));t.default=C},1048:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=(o=n(5))&&o.__esModule?o:{default:o},i=n(12),u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),c=n(31),s=n(16),l=n(38);function f(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(i,e);var t,n,r,o=v(i);function i(){var e;d(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).handleEditModeClick=function(t){t.preventDefault(),t.stopPropagation();var n=e.getAuthenticationProviderConfig().id;(0,l.gotoFn)(h(e))("/authentication-providers/".concat(encodeURIComponent(n),"/edit"))},e}return t=i,(n=[{key:"render",value:function(){var e=this.getAuthenticationProviderConfig();return u.default.createElement("div",{className:"flex"},u.default.createElement("div",{className:"flex-auto"},u.default.createElement("div",{className:"flex"},this.renderIndexLabel(),u.default.createElement(s.Header,{as:"h2",color:"grey",className:"mt0"},e.config.title," ",u.default.createElement("span",{className:"pl2 fs-9 breakout"},e.id),u.default.createElement("div",null,this.renderStatus(e))),u.default.createElement("div",{className:"ml-auto"},this.renderActionButtons())),u.default.createElement("div",{className:"ml3 mb2 mt2 breakout"},e.config.type.description)))}},{key:"getAuthenticationProviderConfig",value:function(){return this.props.authenticationProviderConfig}},{key:"renderStatus",value:function(e){var t="active"===a.default.toLower(e.status);return u.default.createElement(s.Label,{color:t?"green":"red"},e.status)}},{key:"renderIndexLabel",value:function(){var e=this.props.pos;return u.default.createElement(s.Label,{size:"mini",ribbon:!0,color:"blue",className:"line-height-20-px"},e)}},{key:"renderActionButtons",value:function(){return u.default.createElement(s.Button.Group,{basic:!0,size:"mini"},u.default.createElement(s.Button,{icon:"edit",onClick:this.handleEditModeClick}))}}])&&p(t.prototype,n),r&&p(t,r),i}(u.Component),E=(0,c.withRouter)((0,i.observer)(b));t.default=E},1049:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=v(n(0)),i=n(12),u=n(31),c=n(3),s=n(16),l=v(n(5)),f=n(1050),d=n(33),p=n(38),m=v(n(229));function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){y(a,r,o,i,u,"next",e)}function u(e){y(a,r,o,i,u,"throw",e)}i(void 0)}))}}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(u,e);var t,n,o,i=E(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).handleCancel=(0,c.action)((function(e){e.preventDefault(),e.stopPropagation(),t.formProcessing=!1,t.goto("/users")})),t.handleSubmit=(0,c.action)(h(r.mark((function e(){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.formProcessing=!0,e.prev=1,e.next=4,(0,m.default)(t.user,t.addUserFormFields);case 4:if(!(n=e.sent).fails()){e.next=9;break}(0,c.runInAction)((function(){t.validationErrors=n.errors,t.formProcessing=!1})),e.next=13;break;case 9:return e.next=11,t.getStore().addUser(t.user);case 11:(0,c.runInAction)((function(){t.formProcessing=!1})),t.goto("/users");case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),(0,c.runInAction)((function(){t.formProcessing=!1})),(0,d.displayError)(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})))),(0,c.runInAction)((function(){t.formProcessing=!1,t.validationErrors=new Map,t.user={}})),t.form=(0,f.getAddUserForm)(),t.addUserFormFields=(0,f.getAddUserFormFields)(),t}return t=u,(n=[{key:"render",value:function(){return a.default.createElement("div",{className:"mt2 animated fadeIn"},a.default.createElement(s.Header,{as:"h2",icon:!0,textAlign:"center",className:"mt3",color:"grey"},"Add User"),a.default.createElement("div",{className:"mt3 ml3 mr3 animated fadeIn"},this.renderAddUserForm()))}},{key:"renderAddUserForm",value:function(){var e=this,t=this.formProcessing,n=this.addUserFormFields,r=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",o=(0,c.action)((function(n){n.preventDefault(),e.user[t]=n.target.value}));return a.default.createElement("div",{className:"ui focus input"},a.default.createElement("input",{type:r,defaultValue:e.user[t],placeholder:n[t].placeholder||"",onChange:o}))},o=function(t){var n=t.attributeName,r=t.radioOptions,o=t.defaultSelected,i=t.isBooleanInput,u=void 0===i||i,f=t.trueValue,d=void 0===f?"yes":f,p=0;return a.default.createElement("span",null,l.default.map(r,(function(t){return a.default.createElement(s.Radio,{key:++p,className:"ml1",name:n,checked:o===t.value,value:t.value,label:t.label,onChange:(0,c.action)((function(t,r){var o=r.value;e.user[n]=u?o===d:o,t.stopPropagation()}))})})))};return a.default.createElement(s.Segment,{basic:!0,className:"ui fluid form"},a.default.createElement(s.Dimmer,{active:t,inverted:!0},a.default.createElement(s.Loader,{inverted:!0},"Checking")),this.renderField("username",r("username")),a.default.createElement("div",{className:"mb4"}),this.renderField("password",r("password","password")),a.default.createElement("div",{className:"mb4"}),this.renderField("email",r("email","email")),a.default.createElement("div",{className:"mb4"}),this.renderField("firstName",r("firstName")),a.default.createElement("div",{className:"mb4"}),this.renderField("lastName",r("lastName")),a.default.createElement("div",{className:"mb4"}),this.renderField("isAdmin",o({attributeName:"isAdmin",defaultSelected:this.user.isAdmin?"yes":"no",isBooleanInput:!0,radioOptions:[{value:"yes",label:"Yes"},{value:"no",label:"No"}]})),a.default.createElement("div",{className:"mb4"}),this.renderField("status",o({attributeName:"status",defaultSelected:this.user.status||"active",isBooleanInput:!1,radioOptions:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}]})),a.default.createElement("div",{className:"mb4"}),this.renderButtons())}},{key:"renderButtons",value:function(){var e=this.formProcessing;return a.default.createElement("div",{className:"mt3"},a.default.createElement(s.Button,{floated:"right",color:"blue",icon:!0,disabled:e,className:"ml2",onClick:this.handleSubmit},"Add User"),a.default.createElement(s.Button,{floated:"right",disabled:e,onClick:this.handleCancel},"Cancel"))}},{key:"renderField",value:function(e,t){var n=this.addUserFormFields,r=n[e].explain,o=n[e].label,i=!l.default.isEmpty(r),u=this.validationErrors.get(e),c=!l.default.isEmpty(u);return a.default.createElement("div",null,a.default.createElement(s.Header,{className:"mr3 mt0",as:"h2",color:"grey"},o),i&&a.default.createElement("div",{className:"mb2"},r),a.default.createElement("div",{className:"ui big field input block m0 ".concat(c?"error":"")},t),c&&a.default.createElement("div",{className:"ui pointing red basic label"},a.default.createElement(s.List,null,l.default.map(u,(function(t){return a.default.createElement(s.List.Item,{key:e},a.default.createElement(s.List.Content,null,t))})))))}},{key:"goto",value:function(e){var t=this.props.location,n=(0,p.createLink)({location:t,pathname:e});this.props.history.push(n)}},{key:"getStore",value:function(){return this.props.usersStore}}])&&g(t.prototype,n),o&&g(t,o),u}(a.default.Component);(0,c.decorate)(k,{formProcessing:c.observable,user:c.observable,validationErrors:c.observable});var O=(0,i.inject)("userStore","usersStore")((0,u.withRouter)((0,i.observer)(k)));t.default=O},1050:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAddUserFormFields=function(){return u},t.getAddUserForm=function(){var e={dvr:(0,r.default)(o.default)};return new a.default({fields:u},{plugins:e})};var r=i(n(391)),o=i(n(296)),a=i(n(393));function i(e){return e&&e.__esModule?e:{default:e}}var u={username:{label:"User Name",placeholder:"Type a unique username for the user",explain:"The username must be between 3 and 300 characters long. Once the user is created, you can not change the username and can not delete the user. You will be able to de-activate/activate the user.",rules:"required|string|between:3,300"},password:{label:"Password",placeholder:"Type default password for the user",explain:"The password must be between 4 and 2048 characters long.",rules:"required|string|between:4,2048"},email:{label:"Email",placeholder:"Type email address for the user",rules:"required|email|string"},firstName:{label:"First Name",placeholder:"Type first name of the user",rules:"required|string|between:1,500"},lastName:{label:"Last Name",placeholder:"Type last name of the user",rules:"required|string|between:4,500"},isAdmin:{label:"Admin",explain:"Select if the user should be admin user"},status:{label:"Status",explain:"Select if the user should be active user"}}},1051:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=b(n(5)),i=b(n(0)),u=n(16),c=n(31),s=n(3),l=n(8),f=n(12),d=b(n(164)),p=n(15),m=b(n(39)),v=n(38),y=n(33),h=b(n(44)),g=n(27);function b(e){return e&&e.__esModule?e:{default:e}}function E(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(f,e);var t,n,o,c=k(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=c.call(this,e)).handleEditorOn=function(e){return(0,s.action)((function(n){n.preventDefault(),n.stopPropagation(),t.mapOfUsersBeingEdited[e.id]=a.default.assign({id:e.id},(0,l.getSnapshot)(e)),t.mapOfUsersBeingEdited=a.default.clone(t.mapOfUsersBeingEdited)}))},t.handleSave=function(e){return(0,s.action)(function(){var n,o=(n=r.mark((function n(o){return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o.preventDefault(),o.stopPropagation(),t.formProcessing=!0,n.prev=3,n.next=6,t.getStore().updateUser(e);case 6:(0,s.runInAction)((function(){t.mapOfUsersBeingEdited[e.id]=void 0,t.formProcessing=!1})),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(3),(0,s.runInAction)((function(){t.formProcessing=!1})),(0,y.displayError)(n.t0);case 13:case"end":return n.stop()}}),n,null,[[3,9]])})),function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(e){E(a,r,o,i,u,"next",e)}function u(e){E(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return o.apply(this,arguments)}}())},t.handleCancel=function(e){return(0,s.action)((function(n){n.preventDefault(),n.stopPropagation(),t.mapOfUsersBeingEdited[e.id]=void 0,t.mapOfUsersBeingEdited=a.default.clone(t.mapOfUsersBeingEdited)}))},t.handleAddUser=function(){t.goto("/users/add")},t.handleAddAuthenticationProvider=function(){t.goto("/authentication-providers")},(0,s.runInAction)((function(){t.mapOfUsersBeingEdited={},t.formProcessing=!1})),t}return t=f,(n=[{key:"getStore",value:function(){return this.props.usersStore}},{key:"componentDidMount",value:function(){var e=this.getStore();(0,g.swallowError)(e.load())}},{key:"goto",value:function(e){var t=this.props,n=t.location,r=t.history,o=(0,v.createLink)({location:n,pathname:e});r.push(o)}},{key:"renderNoNonRootAdmins",value:function(){return i.default.createElement(u.Segment,{placeholder:!0},i.default.createElement(u.Header,{icon:!0,className:"color-grey"},i.default.createElement(u.Icon,{name:"users"}),"Brand new data lake",i.default.createElement(u.Header.Subheader,{className:"mt2"},"No admin users in the Data Lake. Please add users in the Data Lake or Configure Authentication Provider then login as a regular non-root User.")),i.default.createElement(u.Segment.Inline,null,i.default.createElement(u.Button,{color:"blue",onClick:this.handleAddUser},"Add Users"),i.default.createElement(u.Button,{color:"teal",onClick:this.handleAddAuthenticationProvider},"Configure Auth Provider")))}},{key:"renderHeader",value:function(){return i.default.createElement("div",{className:"mb3 flex"},i.default.createElement(u.Header,{as:"h3",className:"color-grey mt1 mb0 flex-auto"},i.default.createElement(u.Icon,{name:"users",className:"align-top"}),i.default.createElement(u.Header.Content,{className:"left-align"},"Users",this.renderTotal())),i.default.createElement(u.Button,{color:"blue",size:"medium",basic:!0,onClick:this.handleAddUser},"Add User"))}},{key:"renderTotal",value:function(){var e=this.getStore();if((0,p.isStoreError)(e)||(0,p.isStoreLoading)(e))return null;var t=e.nonRootUsers.length;return i.default.createElement(u.Label,{circular:!0},t)}},{key:"renderMain",value:function(){return this.renderUsers()}},{key:"renderUsers",value:function(){var e=this,t=this.mapOfUsersBeingEdited,n=this.getStore(),r=n.nonRootUsers,o=Math.min(r.length,50),c=r.length>o,l=function(e){return function(n){var r=n.original,o=t[r.id],a=(0,s.action)((function(t){t.preventDefault(),o[e]=t.target.value}));return o?i.default.createElement("div",{className:"ui focus input"},i.default.createElement("input",{type:"text",defaultValue:n.value,onChange:a})):r[e]}},f=function(t,n){return(0,s.action)((function(r,o){var i=o.checked;t[n]=i,e.mapOfUsersBeingEdited=a.default.clone(e.mapOfUsersBeingEdited),r.stopPropagation()}))},p=function(t,n){return(0,s.action)((function(r,o){var i=o.value;t[n]=i,e.mapOfUsersBeingEdited=a.default.clone(e.mapOfUsersBeingEdited),r.stopPropagation()}))},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"yes",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"no";return function(n,r){var o=r[n.id],a=o?e:t,i=n.value.toLowerCase();return 0===a.indexOf(i)||0===String(o).toLowerCase().indexOf(i)}},v=this.formProcessing;return n.hasNonRootUsers?i.default.createElement(u.Segment,{basic:!0,className:"p0"},i.default.createElement(u.Dimmer,{active:v,inverted:!0},i.default.createElement(u.Loader,{inverted:!0},"Updating")),i.default.createElement(d.default,{data:r,defaultSorted:[{id:"lastName",desc:!0}],showPagination:c,defaultPageSize:o,className:"-striped -highlight",filterable:!0,defaultFilterMethod:function(e,t){var n=String(t[e.id]).toLowerCase(),r=e.value.toLowerCase();return n.indexOf(r)>=0},columns:[{Header:"User Name",accessor:"username"},{Header:"Email",accessor:"email",Cell:l("email")},{Header:"First Name",accessor:"firstName",Cell:l("firstName")},{Header:"Last Name",accessor:"lastName",Cell:l("lastName")},{Header:"Admin",accessor:"isAdmin",filterMethod:m(),Cell:function(e){var n=e.original,r=t[n.id];return r?i.default.createElement("span",null,i.default.createElement(u.Checkbox,{checked:r.isAdmin,label:r.isAdmin?"Yes":"No",onChange:f(r,"isAdmin")})):n.isAdmin?i.default.createElement("span",null,i.default.createElement("i",{className:"check circle outline icon green"}),"Yes"):i.default.createElement("span",null,"No")}},{Header:"Status",accessor:"isActive",filterMethod:m("active","inactive"),minWidth:125,Cell:function(e){var n=e.original,r=t[n.id],o=r?"active"===r.status.toLowerCase():e.value;return r?i.default.createElement("span",null,i.default.createElement(u.Radio,{name:"status-".concat(n.id),checked:o,value:"active",label:"Active",onChange:p(r,"status")}),i.default.createElement(u.Radio,{className:"ml1",name:"status-".concat(n.id),checked:!o,value:"inactive",label:"Inactive",onChange:p(r,"status")})):n.isActive?i.default.createElement("span",null,i.default.createElement(u.Label,{color:"green"},i.default.createElement("i",{className:"check circle outline icon"}),"Active")):i.default.createElement("span",null,i.default.createElement(u.Label,{color:"red"},"Inactive"))}},{Header:"",filterable:!1,Cell:function(n){var r=n.original,o=t[r.id];return o?i.default.createElement("span",null,i.default.createElement(u.Icon,{name:"checkmark",className:"ml1 cursor-pointer",color:"green",onClick:e.handleSave(o)}),i.default.createElement(u.Icon,{name:"close",className:"ml1 cursor-pointer",color:"red",onClick:e.handleCancel(o)})):i.default.createElement(u.Icon,{name:"pencil",className:"ml1 cursor-pointer",color:"blue",onClick:e.handleEditorOn(r)})}}]})):null}},{key:"render",value:function(){var e,t=this.getStore();return e=(0,p.isStoreError)(t)?i.default.createElement(m.default,{error:t.error}):(0,p.isStoreLoading)(t)?i.default.createElement(h.default,{segmentCount:3}):(0,p.isStoreReady)(t)&&!t.hasNonRootAdmins?this.renderNoNonRootAdmins():(0,p.isStoreReady)(t)&&t.hasNonRootAdmins?this.renderMain():null,i.default.createElement(u.Container,{className:"mt3 animated fadeIn"},this.renderHeader(),e)}}])&&w(t.prototype,n),o&&w(t,o),f}(i.default.Component);(0,s.decorate)(P,{mapOfUsersBeingEdited:s.observable,formProcessing:s.observable});var A=(0,f.inject)("userStore","usersStore")((0,c.withRouter)((0,f.observer)(P)));t.default=A},1089:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){var t=function(e){return(0,i.getType)(e.app).named("RaasApp").props({userRegistered:!1}).actions((function(e){var t=e.init,n=e.cleanup;return{init:function(){var n,o=(n=r.mark((function n(o){return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(o);case 2:e.runInAction((function(){var t=(0,i.getEnv)(e).userStore;"active"===a.default.get(t,"user.status")&&e.setUserRegistered(!0)}));case 3:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(e){u(a,r,o,i,c,"next",e)}function c(e){u(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return o.apply(this,arguments)}}(),setUserRegistered:function(t){e.userRegistered=t},cleanup:function(){e.setUserRegistered(!1),n()}}}))}(e);e.app=t.create({},e)};var o,a=(o=n(5))&&o.__esModule?o:{default:o},i=n(8);function u(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}},1090:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.userStore=f.create({},e)},t.UserStore=void 0;var o,a=(o=n(5))&&o.__esModule?o:{default:o},i=n(8),u=n(43),c=n(15),s=n(602);function l(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}var f=c.BaseStore.named("UserStore").props({user:i.types.maybe(s.User)}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return(t=r.mark((function t(){var n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.getUser)();case 2:n=t.sent,e.runInAction((function(){e.user=s.User.create(n)}));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){l(a,r,o,i,u,"next",e)}function u(e){l(a,r,o,i,u,"throw",e)}i(void 0)}))})();var t},cleanup:function(){e.user=void 0,t()}}})).views((function(e){return{get empty(){return a.default.isEmpty(e.user)},get projectIdDropdown(){return a.default.map(e.user.projectId,(function(e){return{key:e,value:e,text:e}}))},get cloneUser(){var t=e.user,n=t.username,r=t.authenticationProviderId,o=t.identityProviderName,a=t.firstName,i=t.lastName,u=t.email,c=t.isAdmin,s=t.status,l=t.userRole;return{username:n,authenticationProviderId:r,identityProviderName:o,firstName:a,lastName:i,email:u,isAdmin:c,status:s,rev:t.rev,userRole:l,projectId:t.projectId}}}}));t.UserStore=f},1091:function(e,t,n){"use strict";var r=n(10);function o(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function u(e){o(i,r,a,u,c,"next",e)}function c(e){o(i,r,a,u,c,"throw",e)}u(void 0)}))}}function i(){return(i=a(r.mark((function e(t,n){var o,a,i,u,c,s,l,f,d,p,m;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(new TextEncoder).encode(n),e.next=3,crypto.subtle.digest("SHA-256",o);case 3:return a=e.sent,i=crypto.getRandomValues(new Uint8Array(12)),u={name:"AES-GCM",iv:i},e.next=8,crypto.subtle.importKey("raw",a,u,!1,["encrypt"]);case 8:return c=e.sent,s=(new TextEncoder).encode(t),e.next=12,crypto.subtle.encrypt(u,c,s);case 12:return l=e.sent,f=Array.from(new Uint8Array(l)),d=f.map((function(e){return String.fromCharCode(e)})).join(""),p=btoa(d),m=Array.from(i).map((function(e){return"00".concat(e.toString(16)).slice(-2)})).join(""),e.abrupt("return",m+p);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=a(r.mark((function e(t,n){var o,a,i,u,c,s,l,f,d;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(new TextEncoder).encode(n),e.next=3,crypto.subtle.digest("SHA-256",o);case 3:return a=e.sent,i=t.slice(0,24).match(/.{2}/g).map((function(e){return parseInt(e,16)})),u={name:"AES-GCM",iv:new Uint8Array(i)},e.next=8,crypto.subtle.importKey("raw",a,u,!1,["decrypt"]);case 8:return c=e.sent,s=atob(t.slice(24)),l=new Uint8Array(s.match(/[\s\S]/g).map((function(e){return e.charCodeAt(0)}))),e.next=13,crypto.subtle.decrypt(u,c,l);case 13:return f=e.sent,d=(new TextDecoder).decode(f),e.abrupt("return",d);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.aesGcmEncrypt=function(e,t){return i.apply(this,arguments)},t.aesGcmDecrypt=function(e,t){return u.apply(this,arguments)}},1092:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.usersStore=y.create({},e)},t.UsersStore=void 0;var o,a=(o=n(5))&&o.__esModule?o:{default:o},i=n(8),u=n(43),c=n(15),s=n(55),l=n(602);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){m(a,r,o,i,u,"next",e)}function u(e){m(a,r,o,i,u,"throw",e)}i(void 0)}))}}var y=c.BaseStore.named("UsersStore").props({users:i.types.optional(i.types.map(l.User),{}),tickPeriod:6e4}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return v(r.mark((function t(){var n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.getUsers)();case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=[];case 5:n=t.t0,e.runInAction((function(){n.forEach((function(t){var n=l.User.create(t),r=e.users.get(n.id);r?(0,i.applySnapshot)(r,t):e.users.set(n.id,n)}))}));case 7:case"end":return t.stop()}}),t)})))()},cleanup:function(){e.users.clear(),t()},addUser:function(){var t=v(r.mark((function t(n){var o,a;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.username||n.email,t.next=3,(0,u.addUser)(d({},n,{username:o}));case 3:a=t.sent,e.runInAction((function(){var t=l.User.create(a);e.users.set(t.id,t)}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),addUsers:function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.addUsers)(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateUser:function(){var t=v(r.mark((function t(n){var o,a,c;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.updateUser)(n);case 2:o=t.sent,a=l.User.create(o),c=e.users.get(a.id),(0,i.applySnapshot)(c,o);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),updateUserApplication:function(){var e=v(r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.updateUserApplication)(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteUser:function(){var t=v(r.mark((function t(n){var o,a;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n&&n.id?n.id:l.User.create(n).id,t.next=3,(0,s.deleteUser)(n);case 3:a=e.users.get(o),e.runInAction((function(){(0,i.detach)(a)}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})).views((function(e){return{get empty(){return 0===e.users.size},get hasNonRootAdmins(){var t=a.default.filter(e.list,(function(e){return e.isAdmin&&!e.isRootUser}));return!a.default.isEmpty(t)},get hasNonRootUsers(){return!a.default.isEmpty(e.nonRootUsers)},get nonRootUsers(){return a.default.filter(e.list,(function(e){return!e.isRootUser}))},get list(){var t=[];return e.users.forEach((function(e){return t.push(e)})),t},asSelectOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.nonClearables,r=void 0===n?[]:n,o=[];return e.users.forEach((function(e){return o.push({value:e.id,label:e.longDisplayName,clearableValue:!r.includes(e.id)})})),o},asDropDownOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.status,r=void 0===n?"active":n,o=[];return e.users.forEach((function(e){e.status===r&&o.push({key:e.id,value:e.id,text:e.longDisplayName})})),o},asUserObject:function(t){if(t)return e.users.get(t.uid)||l.User.create({username:t.username,ns:t.ns})},asUserObjects:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return t.forEach((function(t){if(t){var r=e.users.get(t.uid);r?n.push(r):n.push(l.User.create((0,i.getSnapshot)(t)))}})),n}}}));t.UsersStore=y},1093:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.accountsStore=m.create({},e)},t.AccountsStore=void 0;var o,a=(o=n(5))&&o.__esModule?o:{default:o},i=n(8),u=n(15),c=n(27),s=n(55),l=n(1094),f=n(1095);function d(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){d(a,r,o,i,u,"next",e)}function u(e){d(a,r,o,i,u,"throw",e)}i(void 0)}))}}var m=u.BaseStore.named("AccountsStore").props({accounts:i.types.optional(i.types.map(l.Account),{}),accountStores:i.types.optional(i.types.map(f.AccountStore),{}),tickPeriod:5e3}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return p(r.mark((function t(){var n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.getAccounts)();case 2:return n=t.sent,e.runInAction((function(){(0,c.consolidateToMap)(e.accounts,n,(function(e,t){e.setAccount(t)}))})),t.abrupt("return",void 0);case 5:case"end":return t.stop()}}),t)})))()},addAccount:function(t){var n=t.id,r=e.accounts.get(n);r?r.setAccount(t):e.accounts.put(t)},removeItem:function(t){return p(r.mark((function n(){var o;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.accounts.get(t),e.accounts.delete(o),n.next=4,(0,s.removeAccountInfo)(t);case 4:case"end":return n.stop()}}),n)})))()},getAccountStore:function(t){var n=e.accountStores.get(t);return n||(e.accountStores.set(t,f.AccountStore.create({accountId:t})),n=e.accountStores.get(t)),n},cleanup:function(){e.accounts.clear(),t()}}})).views((function(e){return{get listCreatingAccount(){var t=[];return e.accounts.forEach((function(e){"PENDING"===e.status&&t.push(e)})),a.default.reverse(a.default.sortBy(t,["createdAt","name"]))},get listErrorAccount(){var t=[];return e.accounts.forEach((function(e){"FAILED"===e.status&&t.push(e)})),a.default.reverse(a.default.sortBy(t,["createdAt","name"]))},get empty(){return 0===e.accounts.size},get total(){return e.accounts.size},get list(){var t=[];return e.accounts.forEach((function(e){return t.push(e)})),a.default.reverse(a.default.sortBy(t,["createdAt","name"]))},hasAccount:function(t){return e.accounts.has(t)},getAccount:function(t){return e.accounts.get(t)}}}));t.AccountsStore=m},1094:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Account=void 0;var r=n(8),o=r.types.model({crossAccountExecutionRoleArn:"",crossAccountEnvMgmtRoleArn:"",subnetId:"",vpcId:"",stackId:""}),a=r.types.model("Account",{id:r.types.identifier,accountName:"",status:"",accountArn:"",email:"",cfnInfo:r.types.optional(o,{}),rev:r.types.maybe(r.types.number),name:"",createdAt:"",createdBy:"",updatedAt:"",updatedBy:""}).actions((function(e){return{setAccount:function(t){(0,r.applySnapshot)(e,t)}}})).views((function(e){return{}}));t.Account=a},1095:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.AccountStore=void 0;var o=n(8),a=n(15),i=n(55);function u(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}var c=a.BaseStore.named("AccountStore").props({accountId:"",tickPeriod:3e5}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return(t=r.mark((function t(){var n,a;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,o.getParent)(e,2),t.next=3,(0,i.getAccount)(e.accountId);case 3:return a=t.sent,n.addAccount(a),t.abrupt("return",void 0);case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){u(a,r,o,i,c,"next",e)}function c(e){u(a,r,o,i,c,"throw",e)}i(void 0)}))})();var t},cleanup:function(){t()}}})).views((function(e){return{get account(){return(0,o.getParent)(e,2).getAccount(e.accountId)}}}));t.AccountStore=c},1096:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.awsAccountsStore=p.create({},e)},t.AwsAccountsStore=void 0;var o,a=n(8),i=n(15),u=n(55),c=n(1097),s=n(1098),l=(o=n(603))&&o.__esModule?o:{default:o};function f(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){f(a,r,o,i,u,"next",e)}function u(e){f(a,r,o,i,u,"throw",e)}i(void 0)}))}}var p=i.BaseStore.named("AwsAccountsStore").props({awsAccounts:a.types.optional(a.types.map(c.AwsAccount),{}),budgetStores:a.types.optional(a.types.map(s.BudgetStore),{}),tickPeriod:1e4}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return d(r.mark((function t(){var n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.getAwsAccounts)();case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=[];case 5:return n=t.t0,e.runInAction((function(){n.forEach((function(t){var n=c.AwsAccount.create(t),r=e.awsAccounts.get(n.id);r?r.setAwsAccounts(t):e.awsAccounts.set(n.id,n)}))})),t.abrupt("return",void 0);case 8:case"end":return t.stop()}}),t)})))()},cleanup:function(){t()},addAwsAccount:function(){var t=d(r.mark((function t(n){var o;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.addAwsAccount)(n);case 2:o=t.sent,e.runInAction((function(){var t=c.AwsAccount.create(o);e.awsAccounts.set(t.id,t)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),createAwsAccount:function(){var e=d(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.createAwsAccount)(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getBudgetStore:function(t){var n=e.budgetStores.get(t);return n||(e.budgetStores.set(t,s.BudgetStore.create({awsAccountUUID:t})),n=e.budgetStores.get(t)),n},addBudget:function(t,n){e.awsAccounts.get(t).budget=l.default.create(n)}}})).views((function(e){return{get list(){var t=[];return e.awsAccounts.forEach((function(e){var n={};n.name=e.name,n.id=e.id,n.accountId=e.accountId,n.roleArn=e.roleArn,n.description=e.description,n.externalId=e.externalId,n.vpcId=e.vpcId,n.subnetId=e.subnetId,n.encryptionKeyArn=e.encryptionKeyArn,t.push(n)})),t},get dropdownOptions(){var t=[];return e.awsAccounts.forEach((function(e){var n={};n.key=e.id,n.value=e.id,n.text="".concat(e.description," (").concat(e.name||e.id,")"),t.push(n)})),t},getNameForAccountId:function(t){var n=e.awsAccounts.get(t);return n&&n.name?"".concat(n.name," (").concat(n.accountId,")"):t},getAwsAccount:function(t){return e.awsAccounts.get(t)}}}));t.AwsAccountsStore=p},1097:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AwsAccount=void 0;var r,o=n(8),a=(r=n(603))&&r.__esModule?r:{default:r};var i=o.types.model("AwsAccounts",{id:o.types.identifier,rev:o.types.maybe(o.types.number),name:"",description:"",accountId:"",externalId:"",roleArn:"",vpcId:"",subnetId:"",encryptionKeyArn:"",createdAt:"",createdBy:"",updatedAt:"",updatedBy:"",budget:o.types.optional(a.default,{})}).actions((function(e){return{setAwsAccounts:function(t){e.id=t.id,e.rev=t.rev||e.rev||0,e.name=t.name||e.name||"",e.description=t.description||e.description,e.accountId=t.accountId||t.accountId,e.externalId=t.externalId||e.externalId,e.roleArn=t.roleArn||e.roleArn,e.vpcId=t.vpcId||e.vpcId,e.subnetId=t.subnetId||e.subnetId,e.encryptionKeyArn=t.encryptionKeyArn||e.encryptionKeyArn,e.createdAt=t.createdAt||e.createdAt,e.updatedAt=t.updatedAt||e.updatedAt,e.createdBy=t.createdBy||e.createdBy,e.updatedBy=t.updatedBy||e.updatedBy}}})).views((function(e){return{}}));t.AwsAccount=i},1098:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.BudgetStore=void 0;var o,a=n(8),i=n(15),u=(o=n(5))&&o.__esModule?o:{default:o},c=n(55);function s(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){s(a,r,o,i,u,"next",e)}function u(e){s(a,r,o,i,u,"throw",e)}i(void 0)}))}}var f=i.BaseStore.named("BudgetStore").props({awsAccountUUID:""}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return l(r.mark((function t(){var n,o;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,a.getParent)(e,2),t.next=3,(0,c.getAwsAccountBudget)(e.awsAccountUUID);case 3:o=t.sent,n.addBudget(e.awsAccountUUID,o);case 5:case"end":return t.stop()}}),t)})))()},createOrUpdateBudget:function(t){return l(r.mark((function n(){var o,i,s;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=(0,a.getParent)(e,2),i=o.getAwsAccount(e.awsAccountUUID).budget,!u.default.isEmpty(t.thresholds)||u.default.isEmpty(t.notificationEmail)){n.next=4;break}throw new Error("Notification depends on thresholds. Please input thresholds or remove notification.");case 4:if(u.default.isEmpty(t.thresholds)||!u.default.isEmpty(t.notificationEmail)){n.next=6;break}throw new Error("Thresholds depends on notification. Please input notification or remove thresholds");case 6:if(t=u.default.omitBy(t,(function(e){return u.default.isEmpty(e)&&!u.default.isNumber(e)})),s={id:e.awsAccountUUID,budgetConfiguration:t},!u.default.isEmpty(i.budgetLimit)){n.next=13;break}return n.next=11,(0,c.createAwsAccountBudget)(s);case 11:n.next=15;break;case 13:return n.next=15,(0,c.updateAwsAccountBudget)(s);case 15:case"end":return n.stop()}}),n)})))()},cleanup:function(){var n=(0,a.getParent)(e,2);t(),n.addBudget(e.awsAccountUUID,{})}}})).views((function(e){return{get budget(){return(0,a.getParent)(e,2).getAwsAccount(e.awsAccountUUID).budget},get thresholdsOptions(){return[{id:"50",value:50,text:"50%"},{id:"70",value:70,text:"70%"},{id:"80",value:80,text:"80%"},{id:"90",value:90,text:"90%"},{id:"100",value:100,text:"100%"}]}}}));t.BudgetStore=f},1099:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.clientInformationStore=s.create({},e)},t.ClientInformationStore=void 0;var o=n(8),a=n(15),i=n(55),u=n(1100);function c(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}var s=a.BaseStore.named("ClientInformationStore").props({clientInformation:o.types.optional(u.ClientInformation,{})}).actions((function(e){return{doLoad:function(){return(t=r.mark((function t(){var n,o,a;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.getClientIpAddress)();case 2:if(n=t.sent,"127.0.0.1"!==(o=n.ipAddress)){t.next=10;break}return t.next=7,fetch("http://httpbin.org/get").then((function(e){return e.json()}));case 7:return a=t.sent,e.runInAction((function(){e.clientInformation=u.ClientInformation.create({ipAddress:a&&a.origin})})),t.abrupt("return");case 10:e.runInAction((function(){e.clientInformation=u.ClientInformation.create({ipAddress:o})}));case 11:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){c(a,r,o,i,u,"next",e)}function u(e){c(a,r,o,i,u,"throw",e)}i(void 0)}))})();var t}}})).views((function(e){return{get ipAddress(){return e.clientInformation.ipAddress}}}));t.ClientInformationStore=s},1100:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientInformation=void 0;var r=n(8).types.model("ClientInformation",{ipAddress:""});t.ClientInformation=r},1101:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceInfo=void 0;var r=n(8),o=r.types.model("InstanceInfo",{Ec2WorkspaceDnsName:"",type:"",size:"",JupyterUrl:"",NotebookInstanceName:"",s3Mounts:"",iamPolicyDocument:"",environmentInstanceFiles:""}).views((function(e){return{get id(){return e.identifierStr},get identifier(){return e},get identifierStr(){return JSON.stringify((0,r.getSnapshot)(e))}}}));t.InstanceInfo=o},1102:function(e,t,n){"use strict";var r=n(10);function o(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(1103),c=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"us-east-1";a(this,e),this.sm=new u(t?{accessKeyId:t,secretAccessKey:n,region:r,sslEnabled:!0}:{sslEnabled:!0})}var t,n,c;return t=e,(n=[{key:"getPresignedNotebookInstanceUrl",value:function(){var e,t=(e=r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={NotebookInstanceName:t},e.abrupt("return",this.sm.createPresignedNotebookInstanceUrl(n).promise());case 2:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function u(e){o(i,r,a,u,c,"next",e)}function c(e){o(i,r,a,u,c,"throw",e)}u(void 0)}))});return function(e){return t.apply(this,arguments)}}()}])&&i(t.prototype,n),c&&i(t,c),e}();t.default=c},1170:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentConfiguration=void 0;var o=n(8),a=n(55);function i(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}var u=o.types.model("SpotPriceHistoryItem",{availabilityZone:"",spotPrice:o.types.number}),c=o.types.model("EnvironmentConfiguration",{id:o.types.identifier,type:"",size:"",label:"",price:o.types.number,description:"",defaultCidr:"",properties:o.types.frozen(),spotBidMultiplier:o.types.optional(o.types.number,0),spotPriceHistory:o.types.optional(o.types.array(u),[]),emrConfiguration:o.types.frozen()}).actions((function(e){return{setEnvironmentConfiguration:function(t){var n=e.fetchingSpotPriceHistory;(0,o.applySnapshot)(e,t),e.fetchingSpotPriceHistory=n},getSpotPriceHistory:function(){return(t=r.mark((function t(){var n,o;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.isEmrCluster?e.emrConfiguration.workerInstanceSize:e.size,t.next=3,(0,a.getEnvironmentSpotPriceHistory)(n);case 3:o=t.sent,e.setSpotPriceHistory(o);case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function u(e){i(a,r,o,u,c,"next",e)}function c(e){i(a,r,o,u,c,"throw",e)}u(void 0)}))})();var t},setSpotPriceHistory:function(t){e.spotPriceHistory=t}}})).views((function(e){return{get isOnDemandPricing(){return!e.spotBidMultiplier},get isEmrCluster(){return!!e.emrConfiguration},get hasSpotPriceHistory(){return e.spotPriceHistory.length>0},get averageSpotPriceHistory(){return e.hasSpotPriceHistory?e.spotPriceHistory.reduce((function(t,n){return t+n.spotPrice/e.spotPriceHistory.length}),0):(e.getSpotPriceHistory(),0)},get spotBidPrice(){return e.averageSpotPriceHistory*e.spotBidMultiplier},get isLoadingPrice(){return!this.isOnDemandPricing&&0===e.averageSpotPriceHistory},get totalPrice(){if(e.isOnDemandPricing&&!e.isEmrCluster)return 24*e.price;if(e.isOnDemandPricing&&e.isEmrCluster){var t=e.emrConfiguration,n=t.workerInstanceOnDemandPrice,r=t.workerInstanceCount;return 24*(e.price+n*r)}if(e.isEmrCluster){var o=e.emrConfiguration.workerInstanceCount;return 24*(e.price+e.spotBidPrice*o)}return 24*e.spotBidPrice}}}));t.EnvironmentConfiguration=c},1171:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.environmentsStore=C.create({},e)},t.EnvironmentsStore=void 0;var o=b(n(5)),a=n(8),i=n(33),u=n(27),c=n(15),s=n(1172),l=n(676),f=b(n(230)),d=n(55),p=n(604),m=n(1259),v=b(n(677)),y=b(n(1588)),h=b(n(1589)),g=b(n(1590));function b(e){return e&&e.__esModule?e:{default:e}}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){k(a,r,o,i,u,"next",e)}function u(e){k(a,r,o,i,u,"throw",e)}i(void 0)}))}}var C=c.BaseStore.named("EnvironmentsStore").props({environments:a.types.optional(a.types.map(p.Environment),{}),environmentStores:a.types.optional(a.types.map(m.EnvironmentStore),{}),tickPeriod:3e4}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return O(r.mark((function t(){var n,o,a,c;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,d.getEnvironments)();case 2:return n=t.sent,t.prev=3,o=n.map((function(e){return e.isExternal?(0,l.getEstimatedCost)(e,1):(0,d.getEnvironmentCost)(e.id,1)})),t.next=7,Promise.all(o);case 7:for(a=t.sent,c=0;c<n.length;c++)n[c].costs=a[c];t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),(0,i.displayWarning)("Error encountered retrieving cost data",t.t0);case 14:e.runInAction((function(){(0,u.consolidateToMap)(e.environments,n,(function(e,t){e.setEnvironment(t)}))}));case 15:case"end":return t.stop()}}),t,null,[[3,11]])})))()},addEnvironment:function(t){var n=t.id,r=e.environments.get(n);r?r.setEnvironment(t):e.environments.put(t)},getEnvironmentStore:function(t){var n=e.environmentStores.get(t);return n||(e.environmentStores.set(t,m.EnvironmentStore.create({environmentId:t})),n=e.environmentStores.get(t)),n},stopEnvironment:function(t){return O(r.mark((function n(){var o;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=(0,a.getEnv)(e).uiEventBus,n.next=3,o.fireEvent("environmentStopping",t);case 3:return n.next=5,(0,d.stopEnvironment)(t.id);case 5:case"end":return n.stop()}}),n)})))()},startEnvironment:function(t){return O(r.mark((function n(){var o;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=(0,a.getEnv)(e).uiEventBus,n.next=3,o.fireEvent("environmentStarting",t);case 3:return n.next=5,(0,d.startEnvironment)(t.id);case 5:case"end":return n.stop()}}),n)})))()},markAsTerminating:function(t){var n=e.environments.get(t);n&&n.markAsTerminating()},updateExternalEnvironment:function(e,t,n){var a=this;return O(r.mark((function i(){var c,s,l,p;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.isExternal&&t.isExternalUser&&!o.default.isEmpty(u.storage.getItem(f.default.pinToken))){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,t.unencryptedCreds(n);case 4:return c=r.sent,s=new v.default(c.accessKeyId,c.secretAccessKey,c.region),l={id:e.id},r.prev=7,r.next=10,s.describeStack(e.stackId);case 10:p=r.sent,o.default.assign(l,a.convertCfnResponse(p,e.instanceInfo)),r.next=17;break;case 14:r.prev=14,r.t0=r.catch(7),o.default.assign(l,{status:"FAILED",error:r.t0.message});case 17:return r.prev=17,e.status!==l.status&&(0,d.updateEnvironment)(l),r.finish(17);case 20:case"end":return r.stop()}}),i,null,[[7,14,17,20]])})))()},convertCfnResponse:function(e,t){return e.isDone?(e.outputs.forEach((function(e){o.default.assign(t,S({},e.key,e.value))})),t=o.default.omitBy(t,o.default.isEmpty),e.isFailed?{status:"FAILED",error:e.statusReason,instanceInfo:t}:"DELETE_COMPLETE"===e.status?{status:"TERMINATED",instanceInfo:t}:{status:"COMPLETED",instanceInfo:t}):{status:"PENDING"}},deleteEnvironment:function(t,n,o){var i=this;return O(r.mark((function u(){var c;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.isExternal){r.next=8;break}return r.t0=i,r.next=4,n.unencryptedCreds(o);case 4:return r.t1=r.sent,r.t2=t,r.next=8,r.t0.deleteExternalEnvironment.call(r.t0,r.t1,r.t2);case 8:return c=(0,a.getEnv)(e).uiEventBus,r.next=11,(0,d.deleteEnvironment)(t.id);case 11:return r.next=13,c.fireEvent("environmentDeleted",t);case 13:case"end":return r.stop()}}),u)})))()},deleteExternalEnvironment:function(e,t){return O(r.mark((function n(){var o,a;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=new v.default(e.accessKeyId,e.secretAccessKey,e.region),n.next=3,o.deleteStack(t.stackId);case 3:if("sagemaker"===t.instanceInfo.type){n.next=7;break}return a=new y.default(e),n.next=7,a.delete(t.id);case 7:case"end":return n.stop()}}),n)})))()},createEnvironment:function(t){var n=this;return O(r.mark((function a(){var i,u;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(i=e.user).isExternalResearcher){r.next=13;break}return r.t1=n,r.next=5,i.unencryptedCreds(t.pin);case 5:return r.t2=r.sent,r.t3=i.username,r.t4=o.default.omit(t,["pin"]),r.next=10,r.t1.createExternalEnvironment.call(r.t1,r.t2,r.t3,r.t4);case 10:r.t0=r.sent,r.next=16;break;case 13:return r.next=15,(0,d.createEnvironment)(t);case 15:r.t0=r.sent;case 16:return u=r.t0,e.addEnvironment(u),r.abrupt("return",e.getEnvironment(u.id));case 19:case"end":return r.stop()}}),a)})))()},createExternalEnvironment:function(t,n,o){var a=this;return O(r.mark((function i(){var u,c,l,f,p,m,y,h,b,E,S,k,O,C;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u=o.platformId,c=o.configurationId,l=e.getComputeConfiguration(u,c),f=l.type,p=l.title,m=l.getParam("size"),r.next=6,(0,g.default)(t);case 6:return y=r.sent,h=y.Account,r.next=10,(0,d.createEnvironment)(w({},o,{accountId:h}));case 10:return b=r.sent,E=new v.default(t.accessKeyId,t.secretAccessKey,t.region),S="analysis-".concat((new Date).getTime(),"-").concat((0,s.randomString)(10)),r.next=15,a.getExternalParams({environment:b,name:S,creds:t});case 15:return k=r.sent,r.next=18,(0,d.getExternalTemplate)("".concat(f,".cfn.yml"));case 18:return O=r.sent,r.next=21,E.createStack(S,k,O,n,"Created By ".concat(n," - ").concat(p," - ").concat(f," - ").concat(m));case 21:return C=r.sent,r.abrupt("return",(0,d.updateEnvironment)({id:b.id,stackId:C.StackId}));case 23:case"end":return r.stop()}}),i)})))()},getExternalParams:function(e){return O(r.mark((function t(){var n,o,a,i,u,c,s,l,f,d,p,m,v,g,b,E,w,S,k,O,C,P,A;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.environment,o=n.id,a=n.instanceInfo,i=a.type,u=a.size,c=a.config,s=a.cidr,l=a.s3Mounts,f=a.iamPolicyDocument,d=a.environmentInstanceFiles,p=n.amiImage,m=e.name,v=e.creds,g=[],(b=function(e,t){return g.push({ParameterKey:e,ParameterValue:"".concat(t)})})("Namespace",m),b("S3Mounts",l),b("IamPolicyDocument",f),b("EnvironmentInstanceFiles",d),E=new h.default(v),t.next=10,E.defaultVPCInfo();case 10:if(w=t.sent,S=w.vpcId,k=w.subnetId,b("VPC",S),b("Subnet",k),"sagemaker"===i&&b("InstanceType",u),"emr"!==i){t.next=32;break}return b("DiskSizeGB",c.diskSizeGb.toString()),b("MasterInstanceType",u),b("WorkerInstanceType",c.workerInstanceSize),b("CoreNodeCount",c.workerInstanceCount.toString()),O=!c.spotBidPrice,C=O?"0":c.spotBidPrice.toFixed(3),b("Market",O?"ON_DEMAND":"SPOT"),b("WorkerBidPrice",C),P=new y.default(v),t.next=28,P.create(o);case 28:A=t.sent,b("AmiId",p),b("AccessFromCIDRBlock",s),b("KeyName",A);case 32:return t.abrupt("return",g);case 33:case"end":return t.stop()}}),t)})))()},updateEnvironment:function(e){return O(r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,d.updateEnvironment)(e);case 2:case"end":return t.stop()}}),t)})))()},cleanup:function(){u.storage.removeItem(f.default.pinToken),e.environments.clear(),t()}}})).views((function(e){return{get empty(){return 0===e.environments.size},get total(){return e.environments.size},get list(){var t=[];return e.environments.forEach((function(e){return t.push(e)})),o.default.reverse(o.default.sortBy(t,["createdAt","name"]))},getEnvironment:function(t){return e.environments.get(t)},get user(){return(0,a.getEnv)(e).userStore.user},getComputeConfiguration:function(t,n){var r=(0,a.getEnv)(e).computePlatformsStore.getComputePlatform(t);if(r)return r.getConfiguration(n)}}}));t.EnvironmentsStore=C},1172:function(e,t,n){var r=n(10),o=n(1173),a=n(1178),i=n(5),u=n(2143).nanoid,c=n(1179).nanoid,s=n(629);function l(){return(l=a(r.mark((function e(t,n){var o,a,i=arguments;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.length>2&&void 0!==i[2]?i[2]:"ConditionalCheckFailedException",e.prev=1,e.next=4,t();case 4:return a=e.sent,e.abrupt("return",a);case 8:if(e.prev=8,e.t0=e.catch(1),!e.t0||e.t0.code!==o){e.next=12;break}return e.abrupt("return",n(e.t0));case 12:throw e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return t*Math.pow(2,e)}function d(){return(d=a(r.mark((function e(t){var n,o,a,i,u,c=arguments;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=c.length>1&&void 0!==c[1]?c[1]:3,o=c.length>2&&void 0!==c[2]?c[2]:f,i=0;case 3:if(!(i<n)){e.next=19;break}return e.prev=4,e.next=7,t();case 7:return u=e.sent,e.abrupt("return",u);case 11:return e.prev=11,e.t0=e.catch(4),a=e.t0,e.next=16,E(o(i+1));case 16:i+=1,e.next=3;break;case 19:throw a;case 20:case"end":return e.stop()}}),e,null,[[4,11]])})))).apply(this,arguments)}function p(e,t,n){return m.apply(this,arguments)}function m(){return(m=a(r.mark((function e(t,n,o){var a,u,c,s,l;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=i.chunk(t,n),u=[],c=0;case 3:if(!(c<=a.length)){e.next=12;break}return s=a[c],e.next=7,Promise.all(i.map(s,o));case 7:l=e.sent,u=i.concat(u,l);case 9:c+=1,e.next=3;break;case 12:return e.abrupt("return",u);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=a(r.mark((function e(t,n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p(t,1,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t){return h.apply(this,arguments)}function h(){return(h=a(r.mark((function e(t,n){var a,i,u,c;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n);case 2:if(a=e.sent,i=a.list,u=a.nextPageToken,c=i||[],!u){e.next=15;break}return e.t0=[],e.t1=o(c),e.t2=o,e.next=12,y(t,u);case 12:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),c=e.t0.concat.call(e.t0,e.t1,e.t4);case 15:return e.abrupt("return",c);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t,n){return b.apply(this,arguments)}function b(){return(b=a(r.mark((function e(t,n,o){var a,u,c,s;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(o);case 2:if(a=e.sent,u=a.list,c=a.nextPageToken,s=i.find(u,n),!i.isUndefined(s)||!c){e.next=10;break}return e.next=9,g(t,n,c);case 9:s=e.sent;case 10:return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return new Promise((function(t){return setTimeout(t,e)}))}function w(){return(w=a(r.mark((function e(){var t,n,o=arguments;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"",e.next=3,c();case 3:return n=e.sent,e.abrupt("return","".concat(t).concat(n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.exports={toVersionString:function(e){return"v".concat(i.padStart(e,4,"0"),"_")},parseVersionString:function(e){return parseInt(e.substring(1),10)},runAndCatch:function(e,t){return l.apply(this,arguments)},exponentialInterval:f,linearInterval:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return t*e},retry:function(e){return d.apply(this,arguments)},processInBatches:p,processSequentially:function(e,t){return v.apply(this,arguments)},sleep:E,fuzz:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3;return Math.round(e+e*t*(1-2*Math.random()))},randomString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return o(Array(e)).map((function(){return Math.round(36*Math.random()).toString(36)})).join("")},paginatedList:y,paginatedFind:g,generateId:function(){return w.apply(this,arguments)},generateIdSync:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=u();return"".concat(e).concat(t)},createHash:function(e){var t=s.createHash("sha256");return t.update("".concat(e)),t.digest("hex")}}},1180:function(e,t){},1182:function(e,t){},1192:function(e,t){},1194:function(e,t){},1219:function(e,t){},1220:function(e,t){},1225:function(e,t){},1259:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentStore=void 0;var o=n(8),a=n(15),i=n(33),u=n(55),c=n(676);function s(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}var l=a.BaseStore.named("EnvironmentStore").props({environmentId:"",tickPeriod:3e5}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return(t=r.mark((function t(){var n,a,s,l,f,d,p,m;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,o.getParent)(e,2),t.next=3,(0,u.getEnvironment)(e.environmentId);case 3:if(a=t.sent,s=new Date(a.createdAt),l=new Date,f=Math.abs(l-s),d=Math.ceil(f/864e5),t.prev=8,p=Math.min(30,d),!a.isExternal){t.next=16;break}return t.next=13,(0,c.getEstimatedCost)(a,p);case 13:t.t0=t.sent,t.next=19;break;case 16:return t.next=18,(0,u.getEnvironmentCost)(e.environmentId,p);case 18:t.t0=t.sent;case 19:m=t.t0,a.costs=m,t.next=26;break;case 23:t.prev=23,t.t1=t.catch(8),(0,i.displayWarning)("Error encountered retrieving cost data",t.t1);case 26:n.addEnvironment(a);case 27:case"end":return t.stop()}}),t,null,[[8,23]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){s(a,r,o,i,u,"next",e)}function u(e){s(a,r,o,i,u,"throw",e)}i(void 0)}))})();var t},cleanup:function(){t()}}})).views((function(e){return{get environment(){return(0,o.getParent)(e,2).getEnvironment(e.environmentId)}}}));t.EnvironmentStore=l},135:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autoLogoutTimeoutInMinutes=t.branding=t.region=t.stage=t.websiteUrl=t.isLocalDev=t.apiPath=t.awsRegion=void 0;t.isLocalDev=!1;t.awsRegion="us-east-1";t.apiPath="https://6pnv22hyv5.execute-api.us-east-1.amazonaws.com/e2etest";t.websiteUrl="https://d1nzolgo88wuwt.cloudfront.net";t.stage="e2etest";t.region="us-east-1";t.autoLogoutTimeoutInMinutes="30";t.branding={login:{title:"Service Workbench",subtitle:"Service Workbench on AWS (e2etest/us-east-1)"},main:{title:"Service Workbench on AWS (e2etest/us-east-1)"},page:{title:"Service Workbench"}}},15:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.isStoreError=t.isStoreNew=t.isStoreReloading=t.isStoreLoading=t.isStoreNotEmpty=t.isStoreEmpty=t.isStoreReady=t.BaseStore=void 0;var o=n(8),a=n(979);function i(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){i(a,r,o,u,c,"next",e)}function c(e){i(a,r,o,u,c,"throw",e)}u(void 0)}))}}var c=o.types.model("BaseStore",{state:"initial",error:o.types.maybe(a.Err),tickPeriod:7e3,heartbeatInterval:0}).actions((function(){return{runInAction:function(e){return e()}}})).actions((function(e){var t;return{load:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t||("ready"===e.state?e.state="reloading":e.state="loading",t=new Promise((function(n,o){try{e.doLoad.apply(e,r).then((function(){e.runInAction((function(){e.state="ready",e.error=void 0})),t=void 0,n()})).catch((function(n){e.runInAction((function(){e.state="loading"===e.state?"initial":"ready",e.error=(0,a.toErr)(n)})),t=void 0,o(n)}))}catch(i){e.runInAction((function(){e.state="loading"===e.state?"initial":"ready",e.error=(0,a.toErr)(i)})),t=void 0,o(i)}})))},startHeartbeat:function(){if(0===e.heartbeatInterval&&e.shouldHeartbeat()){var t=setInterval(u(r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.shouldHeartbeat()){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.load();case 5:t.next=9;break;case 7:t.prev=7,t.t0=t.catch(2);case 9:case"end":return t.stop()}}),t,null,[[2,7]])}))),e.tickPeriod);e.heartbeatInterval=t}},shouldHeartbeat:function(){return!0},stopHeartbeat:function(){var t=e.heartbeatInterval;0!==t&&(clearInterval(t),e.heartbeatInterval=void 0)},changeTickPeriod:function(t){var n=e.heartBeating;e.tickPeriod=t,n&&(e.stopHeartbeat(),e.startHeartbeat())},cleanup:function(){e.stopHeartbeat(),e.state="initial",e.error=void 0}}})).views((function(e){return{get heartBeating(){return e.heartbeatInterval>0},get initial(){return"initial"===e.state},get ready(){return"ready"===e.state},get loading(){return"loading"===e.state},get reloading(){return"reloading"===e.state},get errorMessage(){return e.error?e.error.message||"unknown error":""}}}));t.BaseStore=c;t.isStoreReady=function(e){return e.ready||e.reloading};t.isStoreEmpty=function(e){return(e.ready||e.reloading)&&e.empty};t.isStoreNotEmpty=function(e){return(e.ready||e.reloading)&&!e.empty};t.isStoreLoading=function(e){return e.loading};t.isStoreReloading=function(e){return e.reloading};t.isStoreNew=function(e){return e.initial};t.isStoreError=function(e){return!!e.error}},1588:function(e,t,n){"use strict";var r=n(10);function o(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function u(e){o(i,r,a,u,c,"next",e)}function c(e){o(i,r,a,u,c,"throw",e)}u(void 0)}))}}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(425),c=n(680),s=function(){function e(t){var n=t.accessKeyId,r=t.secretAccessKey,o=t.region,a=void 0===o?"us-east-1":o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n?(this.ec2=new u({accessKeyId:n,secretAccessKey:r,region:a,sslEnabled:!0}),this.ssm=new c({accessKeyId:n,secretAccessKey:r,region:a,sslEnabled:!0})):(this.ec2=new u({sslEnabled:!0}),this.ssm=new c({sslEnabled:!0}))}var t,n,o;return t=e,(n=[{key:"create",value:function(){var e=a(r.mark((function e(t){var n,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ec2.createKeyPair({KeyName:t}).promise();case 2:return n=e.sent,o="/".concat("raas","/environments/").concat(t),e.next=6,this.ssm.putParameter({Name:o,Type:"SecureString",Value:n.KeyMaterial,Description:"ssh key for environment ".concat(t),Overwrite:!0}).promise();case 6:return e.abrupt("return",n.KeyName);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mustFind",value:function(){var e=a(r.mark((function e(t){var n,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/".concat("raas","/environments/").concat(t),e.next=3,this.ssm.getParameter({Name:n,WithDecryption:!0}).promise();case 3:return o=e.sent,e.abrupt("return",{privateKey:o.Parameter.Value});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=a(r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/".concat("raas","/environments/").concat(t),e.next=3,this.ec2.deleteKeyPair({KeyName:t}).promise();case 3:return e.next=5,this.ssm.deleteParameter({Name:n}).promise();case 5:return e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}])&&i(t.prototype,n),o&&i(t,o),e}();t.default=s},1589:function(e,t,n){"use strict";var r=n(10);function o(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(425),u=function(){function e(t){var n=t.accessKeyId,r=t.secretAccessKey,o=t.region,a=void 0===o?"us-east-1":o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ec2=new i(n?{accessKeyId:n,secretAccessKey:r,region:a,sslEnabled:!0}:{sslEnabled:!0})}var t,n,u;return t=e,(n=[{key:"defaultVPCInfo",value:function(){var e,t=(e=r.mark((function e(){var t,n,o,a,i,u,c,s,l;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ec2.describeVpcs({Filters:[{Name:"isDefault",Values:["true"]}]}).promise();case 2:return t=e.sent,n=t.Vpcs,o=n.find((function(e){return e.IsDefault})),a=o.VpcId,e.next=7,this.ec2.describeSubnets({Filters:[{Name:"vpc-id",Values:[a]}]}).promise();case 7:return i=e.sent,u=i.Subnets,c=u.filter((function(e){return e.MapPublicIpOnLaunch})),s=c.reduce((function(e,t){return t.AvailableIpAddressCount>e.AvailableIpAddressCount?t:e})),l=s.SubnetId,e.abrupt("return",{vpcId:a,subnetId:l});case 12:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function u(e){o(i,r,a,u,c,"next",e)}function c(e){o(i,r,a,u,c,"throw",e)}u(void 0)}))});return function(){return t.apply(this,arguments)}}()}])&&a(t.prototype,n),u&&a(t,u),e}();t.default=u},159:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(0)),o=n(12),a=n(16),i=u(n(6));function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,o.observer)((function(e){var t=e.field,n=e.className,o=void 0===n?"mt0 mb1":n,u=t.id,c=t.label;return r.default.createElement(a.Header,{className:(0,i.default)("field",o),as:"h3"},r.default.createElement("label",{className:"color-grey",htmlFor:u},c))}));t.default=c},1590:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.accessKeyId,n=e.secretAccessKey,o=e.region,a=void 0===o?"us-east-1":o;return new r(t?{accessKeyId:t,secretAccessKey:n,region:a,sslEnabled:!0}:{sslEnabled:!0}).getCallerIdentity().promise()};var r=n(162)},1591:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.fileUploadsStore=i.create({},e)},t.FileUploadsStore=void 0;var r,o=n(8),a=(r=n(1592))&&r.__esModule?r:{default:r};var i=o.types.model("FileUploadsStore",{fileUploadGroups:o.types.map(a.default)}).actions((function(e){return{getFileUploadGroup:function(t){var n=e.fileUploadGroups.get(t);return n||(n=a.default.create({resourceId:t,state:"PENDING"}),e.fileUploadGroups.put(n)),n},resetFileUploadGroup:function(t){var n=a.default.create({resourceId:t,state:"PENDING"});e.fileUploadGroups.put(n)}}}));t.FileUploadsStore=i},1592:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=n(8),i=(o=n(681))&&o.__esModule?o:{default:o};function u(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){u(a,r,o,i,c,"next",e)}function c(e){u(a,r,o,i,c,"throw",e)}i(void 0)}))}}var s=a.types.model("FileUpload",{id:a.types.identifier,status:a.types.union(a.types.literal("PENDING"),a.types.literal("UPLOADING"),a.types.literal("COMPLETE"),a.types.literal("FAILED")),uploaded:a.types.maybeNull(a.types.number),error:a.types.maybeNull(a.types.string)}).volatile((function(){return{file:void 0,cancel:void 0}})).views((function(e){return{get size(){return e.file?e.file.size:0},get name(){return e.file?e.file.name:""},getFile:function(){return e.file}}})).actions((function(e){return{updateProgress:function(t){e.uploaded=t},updateStatusToUploading:function(){e.status="UPLOADING"},updateStatusToComplete:function(){e.status="COMPLETE"},updateStatusToFailed:function(t){e.status="FAILED",e.error=t},setFile:function(t){e.file=t},setCancel:function(t){e.cancel=t},doCancel:function(){e.cancel&&(e.cancel(),e.cancel=void 0)}}})),l=a.types.model("FileUploadGroup",{resourceId:a.types.identifier,fileUploads:a.types.map(s),state:a.types.union(a.types.literal("PENDING"),a.types.literal("UPLOADING"),a.types.literal("COMPLETE"))}).views((function(e){return{get fileUploadObjects(){return Array.from(e.fileUploads.values())},getFileUpload:function(t){return e.fileUploads.get(t)}}})).actions((function(e){return{start:function(t){return c(r.mark((function n(){var o;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("PENDING"===e.state){n.next=2;break}throw new Error("Cannot transition state from ".concat(e.state," -> UPLOADING"));case 2:return e.setStateToUploading(),o=Array.from(e.fileUploads.values()).filter((function(e){return"PENDING"===e.status})),n.next=6,Promise.all(o.map(function(){var e=c(r.mark((function e(n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.updateStatusToUploading(),e.prev=1,e.next=4,t(n);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),n.updateStatusToFailed(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 6:e.setStateToComplete();case 7:case"end":return n.stop()}}),n)})))()},cancel:function(){e.fileUploads.forEach((function(e){e.doCancel()}))},remove:function(t){e.fileUploads.delete(t)},add:function(t){var n=t.file,r=s.create({id:(0,i.default)(),status:"PENDING"});r.setFile(n),e.fileUploads.put(r)},setStateToComplete:function(){e.state="COMPLETE"},setStateToUploading:function(){e.state="UPLOADING"}}}));t.default=l},1595:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.indexesStore=p.create({},e)},t.IndexesStore=void 0;var o,a=(o=n(5))&&o.__esModule?o:{default:o},i=n(8),u=n(15),c=n(27),s=n(55),l=n(1596);function f(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){f(a,r,o,i,u,"next",e)}function u(e){f(a,r,o,i,u,"throw",e)}i(void 0)}))}}var p=u.BaseStore.named("IndexesStore").props({indexes:i.types.optional(i.types.map(l.Index),{}),tickPeriod:9e5}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return d(r.mark((function t(){var n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.getIndexes)();case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=[];case 5:n=t.t0,e.runInAction((function(){(0,c.consolidateToMap)(e.indexes,n,(function(e,t){e.setIndex(t)}))}));case 7:case"end":return t.stop()}}),t)})))()},addIndex:function(){var t=d(r.mark((function t(n){var o;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.addIndex)(n);case 2:o=t.sent,e.runInAction((function(){var t=l.Index.create(o);e.indexes.set(t.id,t)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getIndexesStore:function(t){var n=e.indexesStores.get(t);return n||(e.indexesStores.set(t,p.create({indexesId:t})),n=e.indexesStores.get(t)),n},getIndex:function(t){var n={};return e.indexes.forEach((function(e){e.id===t&&(n=a.default.clone(e))})),n},cleanup:function(){e.indexes.clear(),t()}}})).views((function(e){return{get dropdownOptions(){var t=[];return e.indexes.forEach((function(e){var n={};n.key=e.id,n.value=e.id,n.text=e.id,t.push(n)})),t},get empty(){return 0===e.indexes.size},get total(){return e.indexes.size},get list(){var t=[];return e.indexes.forEach((function(e){return t.push(e)})),a.default.reverse(a.default.sortBy(t,["createdAt","name"]))},hasIndexes:function(t){return e.indexes.has(t)},getIndexes:function(t){return e.indexes.get(t)}}}));t.IndexesStore=p},1596:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Index=void 0;var r=n(8),o=r.types.model("Index",{id:r.types.identifier,rev:r.types.maybe(r.types.number),awsAccountId:"",description:"",createdAt:"",createdBy:"",updatedAt:"",updatedBy:""}).actions((function(e){return{setIndex:function(t){(0,r.applySnapshot)(e,t)}}})).views((function(e){return{}}));t.Index=o},1597:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.projectsStore=m.create({},e)},t.ProjectsStore=void 0;var o,a=(o=n(5))&&o.__esModule?o:{default:o},i=n(8),u=n(15),c=n(27),s=n(55),l=n(1598),f=n(1599);function d(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){d(a,r,o,i,u,"next",e)}function u(e){d(a,r,o,i,u,"throw",e)}i(void 0)}))}}var m=u.BaseStore.named("ProjectsStore").props({projects:i.types.optional(i.types.map(l.Project),{}),projectStores:i.types.optional(i.types.map(f.ProjectStore),{}),tickPeriod:9e5}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return p(r.mark((function t(){var n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.getProjects)();case 2:n=t.sent,e.runInAction((function(){(0,c.consolidateToMap)(e.projects,n,(function(e,t){e.setProject(t)}))}));case 4:case"end":return t.stop()}}),t)})))()},addProject:function(t){return p(r.mark((function n(){var o,a;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.id,a=e.projects.get(o)){n.next=8;break}return e.projects.put(t),n.next=6,(0,s.addProject)(t);case 6:n.next=9;break;case 8:a.setProject(t);case 9:case"end":return n.stop()}}),n)})))()},getProjectStore:function(t){var n=e.projectStores.get(t);return n||(e.projectStores.set(t,f.ProjectStore.create({projectId:t})),n=e.projectStores.get(t)),n},deleteProject:function(){var e=p(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.deleteProject)(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateProject:function(){var t=p(r.mark((function t(n){var o;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.updateProject)(n);case 2:o=t.sent,e.addProject(o);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),cleanup:function(){e.projects.clear(),t()}}})).views((function(e){return{get empty(){return 0===e.projects.size},get total(){return e.projects.size},get list(){var t=[];return e.projects.forEach((function(e){return t.push(e)})),a.default.reverse(a.default.sortBy(t,["createdAt","id"]))},get dropdownOptions(){var t=[];return e.projects.forEach((function(e){var n={};n.key=e.id,n.value=e.id,n.text=e.id,t.push(n)})),t},hasProject:function(t){return e.projects.has(t)},getProject:function(t){return e.projects.get(t)}}}));t.ProjectsStore=m},1598:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Project=void 0;var r,o=(r=n(5))&&r.__esModule?r:{default:r},a=n(8);var i=a.types.model("Project",{id:a.types.identifier,rev:a.types.maybe(a.types.number),description:"",indexId:"",createdAt:"",createdBy:"",updatedAt:"",updatedBy:"",projectAdmins:a.types.optional(a.types.array(a.types.string),[])}).actions((function(e){return{setProject:function(t){(0,a.applySnapshot)(e,t)}}})).views((function(e){return{get projectAdminUsers(){var t=(0,a.getEnv)(e).usersStore;return o.default.map(e.projectAdmins,(function(e){return t.asUserObject({uid:e})}))}}}));t.Project=i},1599:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectStore=void 0;var o=n(8),a=n(15),i=n(55);function u(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}var c=a.BaseStore.named("ProjectStore").props({projectId:"",tickPeriod:3e5}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return(t=r.mark((function t(){var n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,o.getParent)(e,2),t.next=3,(0,i.getProject)(e.projectId);case 3:t.sent.map((function(e){return n.addProject(e)}));case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){u(a,r,o,i,c,"next",e)}function c(e){u(a,r,o,i,c,"throw",e)}i(void 0)}))})();var t},cleanup:function(){t()}}})).views((function(e){return{get project(){return(0,o.getParent)(e,2).getProject(e.projectId)}}}));t.ProjectStore=c},160:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(0)),o=n(12),a=u(n(6)),i=n(16);function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,o.observer)((function(e){var t=e.field.extra,n=void 0===t?{}:t,o=(n||{}).explain,u=(n||{}).warn,c=!!o,s=!!u;return r.default.createElement(r.default.Fragment,null,c&&r.default.createElement("div",{className:(0,a.default)("field","mb2"),dangerouslySetInnerHTML:{__html:o}}),s&&r.default.createElement(i.Message,{className:"field",color:"brown"},r.default.createElement("b",{className:"mr1"},"Warning"),u))}));t.default=c},1600:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.filesSelection=u.create({},e)},t.FilesSelection=void 0;var r,o=(r=n(5))&&r.__esModule?r:{default:r},a=n(8);var i=a.types.model("File",{id:a.types.identifier,name:"",description:a.types.maybeNull(a.types.string),accessStatus:""}),u=a.types.model("FilesSelection",{files:a.types.optional(a.types.map(i),{})}).actions((function(e){return{setFile:function(t){e.files.set(t.id,t)},deleteFile:function(t){e.files.delete(t)},cleanup:function(){e.files.clear()},setFiles:function(t){(0,a.applySnapshot)(e.files,t)}}})).views((function(e){return{hasFile:function(t){return e.files.has(t)},get empty(){return 0===e.files.size},get count(){return e.files.size},get studiesCount(){var t={};return e.files.forEach((function(e){t[e.studyId]=!0})),o.default.size(t)},studiesCountByStatus:function(t){var n={};return e.files.forEach((function(e){e.accessStatus===t&&(n[e.studyId]=!0)})),o.default.size(n)},studiesCountByNotStatus:function(t){var n={};return e.files.forEach((function(e){e.accessStatus!==t&&(n[e.studyId]=!0)})),o.default.size(n)},get fileNames(){var t=[];return e.files.forEach((function(e){t.push(e.id)})),t},groupByStudy:function(){var t={};return e.files.forEach((function(e){var n=t[e.studyId];o.default.isArray(n)?n.push(e):t[e.studyId]=[e]})),t},groupNotApprovedByStudy:function(){var t={};return e.files.forEach((function(e){if("approved"!==e.accessStatus){var n=t[e.studyId];o.default.isArray(n)?n.push(e):t[e.studyId]=[e]}})),t},countByStatus:function(t){var n=0;return e.files.forEach((function(e){e.accessStatus===t&&(n+=1)})),n}}}));t.FilesSelection=u},1601:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){var t;e.studiesStoresMap=(v(t={},l.categories.myStudies.id,g.create({category:l.categories.myStudies.name})),v(t,l.categories.organization.id,g.create({category:l.categories.organization.name})),v(t,l.categories.openData.id,g.create({category:l.categories.openData.name})),t)};var o,a=(o=n(5))&&o.__esModule?o:{default:o},i=n(8),u=n(15),c=n(27),s=n(55),l=n(187),f=n(1602),d=n(1606);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){y(a,r,o,i,u,"next",e)}function u(e){y(a,r,o,i,u,"throw",e)}i(void 0)}))}}var g=u.BaseStore.named("StudiesStore").props({category:"",studies:i.types.optional(i.types.map(f.Study),{}),studyStores:i.types.optional(i.types.map(d.StudyStore),{}),tickPeriod:3e5}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return h(r.mark((function t(){var n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.getStudies)(e.category);case 2:n=t.sent,e.runInAction((function(){(0,c.consolidateToMap)(e.studies,n,(function(e,t){e.setStudy(t)}))}));case 4:case"end":return t.stop()}}),t)})))()},addStudy:function(t){var n=t.id,r=e.studies.get(n);r?r.setStudy(t):e.studies.put(t)},getStudyStore:function(t){var n=e.studyStores.get(t);return n||(e.studyStores.set(t,d.StudyStore.create({studyId:t})),n=e.studyStores.get(t)),n},createStudy:function(t){return h(r.mark((function n(){var o,a;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,s.createStudy)(m({},t,{uploadLocationEnabled:!0}));case 2:return o=n.sent,e.runInAction((function(){e.addStudy(o)})),a=e.getStudy(o.id),n.abrupt("return",a);case 6:case"end":return n.stop()}}),n)})))()},cleanup:function(){e.studies.clear(),t()}}})).views((function(e){return{get empty(){return 0===e.studies.size},get total(){return e.studies.size},get list(){var t=[];return e.studies.forEach((function(e){return t.push(e)})),a.default.reverse(a.default.sortBy(t,["createdAt","name"]))},hasStudy:function(t){return e.studies.has(t)},getStudy:function(t){return e.studies.get(t)}}}))},1602:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Study=void 0;var r=n(8),o=n(1603),a=n(1604),i=n(187),u=r.types.model("Study",{id:r.types.identifier,rev:r.types.maybe(r.types.number),name:"",category:"",projectId:"",access:r.types.optional(r.types.array(r.types.string),[]),resources:r.types.optional(r.types.array(r.types.model({arn:r.types.string})),[]),description:r.types.maybeNull(r.types.string),uploadLocationEnabled:!1,createdAt:"",createdBy:"",updatedAt:"",updatedBy:"",filesStore:r.types.maybe(o.StudyFilesStore),permissionsStore:r.types.maybe(a.StudyPermissionsStore)}).actions((function(e){return{setStudy:function(t){(0,r.applySnapshot)(e,t)},getFilesStore:function(){return e.filesStore||(e.filesStore=o.StudyFilesStore.create({studyId:e.id})),e.filesStore},getPermissionsStore:function(){return e.permissionsStore||(e.permissionsStore=a.StudyPermissionsStore.create({studyId:e.id})),e.permissionsStore}}})).views((function(e){return{get isOpenDataStudy(){return e.category===i.categories.openData.name},get isOrganizationStudy(){return e.category===i.categories.organization.name},get canUpload(){return e.access.includes("admin")||e.access.includes("readwrite")}}}));t.Study=u},1603:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.StudyFilesStore=void 0;var o,a=(o=n(5))&&o.__esModule?o:{default:o},i=n(8),u=n(15),c=n(55);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}var p=i.types.model("StudyFile",{filename:i.types.string,size:i.types.integer,lastModified:i.types.Date}),m=u.BaseStore.named("StudyFilesStore").props({studyId:"",files:i.types.array(p),tickPeriod:5e3}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return(t=r.mark((function t(){var n,o,i,u;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.listStudyFiles)(e.studyId);case 2:n=t.sent,o=function(e,t){return e.filename===t.filename},i=a.default.differenceWith(e.files,n,o),u=a.default.differenceWith(n,e.files,o),0===i.length&&0===u.length||(n=n.sort((function(e,t){return e.filename.localeCompare(t.filename)})).map((function(e){return l({},e,{lastModified:new Date(e.lastModified)})})),e.runInAction((function(){e.files.replace(n)})));case 7:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){d(a,r,o,i,u,"next",e)}function u(e){d(a,r,o,i,u,"throw",e)}i(void 0)}))})();var t},cleanup:function(){e.files.clear(),t()}}})).views((function(e){return{get empty(){return 0===e.files.length}}}));t.StudyFilesStore=m},1604:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.StudyPermissionsStore=void 0;var o,a=(o=n(5))&&o.__esModule?o:{default:o},i=n(8),u=n(15),c=n(55),s=n(1605);function l(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){d(a,r,o,i,u,"next",e)}function u(e){d(a,r,o,i,u,"throw",e)}i(void 0)}))}}var m=u.BaseStore.named("StudyPermissionsStore").props({studyId:i.types.identifier,studyPermissions:i.types.maybe(s.StudyPermissions),tickPeriod:3e5}).actions((function(e){var t=e.cleanup;return{doLoad:function(){var t=p(r.mark((function t(){var n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.getStudyPermissions)(e.studyId);case 2:n=t.sent,e.studyPermissions&&a.default.isEqual(e.studyPermissions,n)||e.runInAction((function(){e.studyPermissions=n}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),cleanup:function(){t()},update:function(){var t=p(r.mark((function t(n){var o;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={usersToAdd:[],usersToRemove:[]},e.studyPermissions.userTypes.forEach((function(t){var r,i,u=function(e){return{uid:e,permissionLevel:t}};(r=o.usersToAdd).push.apply(r,l(a.default.map(n[t],u))),(i=o.usersToRemove).push.apply(i,l(a.default.differenceWith(e.studyPermissions["".concat(t,"Users")],n[t],a.default.isEqual).map(u)))})),t.next=4,(0,c.updateStudyPermissions)(e.studyId,o);case 4:return t.next=6,e.load();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}));t.StudyPermissionsStore=m},1605:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StudyPermissions=void 0;var r=n(8),o=r.types.model("StudyPermissions",{id:r.types.identifier,adminUsers:r.types.optional(r.types.array(r.types.string),[]),readonlyUsers:r.types.optional(r.types.array(r.types.string),[]),readwriteUsers:r.types.optional(r.types.array(r.types.string),[]),createdAt:"",createdBy:"",updatedAt:"",updatedBy:""}).views((function(e){return{get userTypes(){return["admin","readwrite","readonly"]}}}));t.StudyPermissions=o},1606:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.StudyStore=void 0;var o=n(8),a=n(15),i=n(55);function u(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}var c=a.BaseStore.named("StudyStore").props({studyId:"",tickPeriod:3e5}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return(t=r.mark((function t(){var n,a;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,o.getParent)(e,2),t.next=3,(0,i.getStudy)(e.studyId);case 3:a=t.sent,n.addStudy(a);case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){u(a,r,o,i,c,"next",e)}function c(e){u(a,r,o,i,c,"throw",e)}i(void 0)}))})();var t},cleanup:function(){t()}}})).views((function(e){return{get study(){return(0,o.getParent)(e,2).getStudy(e.studyId)}}}));t.StudyStore=c},1607:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.userRolesStore=d.create({},e)},t.UserRolesStore=void 0;var o,a=(o=n(5))&&o.__esModule?o:{default:o},i=n(8),u=n(15),c=n(27),s=n(55),l=n(1608);function f(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}var d=u.BaseStore.named("UserRolesStore").props({userRoles:i.types.optional(i.types.map(l.UserRole),{})}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return(t=r.mark((function t(){var n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.getUserRoles)();case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=[];case 5:n=t.t0,e.runInAction((function(){(0,c.consolidateToMap)(e.userRoles,n,(function(e,t){e.setUserRole(t)}))}));case 7:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){f(a,r,o,i,u,"next",e)}function u(e){f(a,r,o,i,u,"throw",e)}i(void 0)}))})();var t},cleanup:function(){t()}}})).views((function(e){return{get list(){var t=[];return e.userRoles.forEach((function(e){return t.push(e)})),t},get dropdownOptions(){var t=[];return e.userRoles.forEach((function(e){var n={};n.key=e.id,n.value=e.id,n.text=e.id,t.push(n)})),t},isInternalUser:function(t){return"internal"===a.default.toLower(e.getUserType(t))},isInternalGuest:function(e){return"internal-guest"===a.default.toLower(e)},getUserType:function(t){var n=e.userRoles.get(t);return n?n.userType:""}}}));t.UserRolesStore=d},1608:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserRole=void 0;var r=n(8),o=r.types.model("UserRole",{id:r.types.identifier,rev:r.types.maybe(r.types.number),description:"",userType:"",createdAt:"",createdBy:"",updatedAt:"",updatedBy:""}).actions((function(e){return{setUserRole:function(t){(0,r.applySnapshot)(e,t)}}})).views((function(e){return{}}));t.UserRole=o},1609:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.computePlatformsStore=m.create({},e)},t.ComputePlatformsStore=void 0;var o,a=(o=n(5))&&o.__esModule?o:{default:o},i=n(3),u=n(8),c=n(15),s=n(27),l=n(55),f=n(1610),d=n(1612);function p(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}var m=c.BaseStore.named("ComputePlatformsStore").props({platforms:u.types.map(f.ComputePlatform),platformsStores:u.types.map(d.ComputePlatformStore)}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return(t=r.mark((function t(){var n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.getComputePlatforms)();case 2:n=t.sent,e.runInAction((function(){(0,s.consolidateToMap)(e.platforms,n,(function(e,t){e.setComputePlatform(t)}))}));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){p(a,r,o,i,u,"next",e)}function u(e){p(a,r,o,i,u,"throw",e)}i(void 0)}))})();var t},getComputePlatformStore:function(t){var n=e.platformsStores.get(t);return n||(e.platformsStores.set(t,d.ComputePlatformStore.create({platformId:t})),n=e.platformsStores.get(t)),n},cleanup:function(){e.platforms.clear(),e.platformsStores.clear(),t()}}})).views((function(e){return{get empty(){return 0===e.platforms.size},get total(){return e.platforms.size},get list(){return a.default.sortBy((0,i.values)(e.platforms),"displayOrder")},getComputePlatform:function(t){return e.platforms.get(t)}}}));t.ComputePlatformsStore=m},161:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(5)),o=u(n(0)),a=n(12),i=u(n(6));function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,a.observer)((function(e){var t=e.field,n=e.className,a=t.error,u=void 0===a?"":a;return!r.default.isEmpty(u)?o.default.createElement("div",{className:(0,i.default)("ui pointing basic label",n)},u):null}));t.default=c},1610:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComputePlatform=void 0;var r,o=(r=n(5))&&r.__esModule?r:{default:r},a=n(3),i=n(8),u=n(27),c=n(1611);var s=i.types.model("ComputePlatform",{id:i.types.identifier,type:"",title:"",desc:"",displayOrder:i.types.maybe(i.types.number),configurations:i.types.map(c.ComputeConfiguration)}).actions((function(e){return{setComputePlatform:function(t){var n=e.configurations||{};(0,i.applySnapshot)(e,t),e.configurations=n},setConfigurations:function(t){(0,u.consolidateToMap)(e.configurations,t,(function(e,t){e.setComputeConfiguration(t)}))}}})).views((function(e){return{get descHtml(){return(0,i.getEnv)(e).showdown.convert(e.desc)},get configurationsList(){return o.default.sortBy((0,a.values)(e.configurations),"displayOrder")},getConfiguration:function(t){return e.configurations.get(t)}}}));t.ComputePlatform=s},1611:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComputeConfiguration=void 0;var r,o=(r=n(5))&&r.__esModule?r:{default:r},a=n(8);var i=a.types.model("ComputeConfiguration",{id:a.types.identifier,type:"",title:"",displayOrder:a.types.maybe(a.types.number),priceInfo:a.types.frozen(),desc:"",displayProps:a.types.frozen(),params:a.types.frozen()}).actions((function(e){return{setComputeConfiguration:function(t){(0,a.applySnapshot)(e,t)}}})).views((function(e){return{get descHtml(){return(0,a.getEnv)(e).showdown.convert(e.desc)},isMutable:function(t){return o.default.has(e.params,["mutable",t])},get mutableParams(){return o.default.get(e.params,"mutable",{})},get defaultCidr(){if(e.isMutable("cidr"))return o.default.get(e.mutableParams,"cidr","")},get pricePerDay(){var t=e.priceInfo||{};return"hour"===t.timeUnit?24*t.value:"day"===t.timeUnit?t.value:void 0},getParam:function(t){var n=o.default.get(e.params,["immutable",t]);return o.default.isUndefined(n)?o.default.get(e.mutableParams,t):n}}}));t.ComputeConfiguration=i},1612:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.ComputePlatformStore=void 0;var o=n(8),a=n(15),i=n(55);function u(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}var c=a.BaseStore.named("ComputePlatformStore").props({platformId:"",tickPeriod:3e5}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return(t=r.mark((function t(){var n,o;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.getComputeConfigurations)(e.platformId);case 2:if(n=t.sent,o=e.computePlatform){t.next=6;break}return t.abrupt("return");case 6:o.setConfigurations(n);case 7:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){u(a,r,o,i,c,"next",e)}function c(e){u(a,r,o,i,c,"throw",e)}i(void 0)}))})();var t},cleanup:function(){e.platformId="",t()}}})).views((function(e){return{get computePlatform(){return(0,o.getParent)(e,2).getComputePlatform(e.platformId)}}}));t.ComputePlatformStore=c},1613:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScEnvironment=void 0;var r,o=(r=n(5))&&r.__esModule?r:{default:r},a=n(8);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=[{key:"COMPLETED",display:"AVAILABLE",color:"green",tip:"The workspace is ready to be used.",spinner:!1,canTerminate:!0,canConnect:!0,canStop:!0,canStart:!1},{key:"PENDING",display:"PENDING",color:"orange",tip:"The workspace is being prepared, this could take sometime.",spinner:!0,canTerminate:!1,canConnect:!1,canStop:!1,canStart:!1},{key:"STOPPED",display:"STOPPED",color:"orange",tip:"The workspace is stopped.",spinner:!1,canTerminate:!0,canConnect:!1,canStop:!1,canStart:!0},{key:"STOPPING",display:"STOPPING",color:"orange",tip:"The workspace is stopping.",spinner:!0,canTerminate:!0,canConnect:!1,canStop:!1,canStart:!1},{key:"STARTING",display:"STARTING",color:"orange",tip:"The workspace is starting.",spinner:!0,canTerminate:!0,canConnect:!1,canStop:!1,canStart:!1},{key:"TAINTED",display:"TAINTED",color:"orange",tip:"The workspace is ready but the latest configuration updates might not have been successful.",spinner:!1,canTerminate:!0,canConnect:!0,canStop:!1,canStart:!1},{key:"FAILED",display:"FAILED",color:"red",tip:"Something went wrong.",spinner:!1,canTerminate:!0,canConnect:!1,canStop:!1,canStart:!1},{key:"TERMINATING",display:"TERMINATING",color:"red",tip:"The workspace is being terminated. This could take sometime.",spinner:!0,canTerminate:!1,canConnect:!1,canStop:!1,canStart:!1},{key:"TERMINATED",display:"TERMINATED",color:"grey",tip:"The workspace is terminated successfully and no longer available.",spinner:!1,canTerminate:!1,canConnect:!1,canStop:!1,canStart:!1},{key:"TERMINATING_FAILED",display:"TERMINATION FAILED",color:"red",tip:"The workspace was not terminated correctly, it is possible that some compute and storage resources are still in place.",spinner:!1,canTerminate:!0,canConnect:!0,canStop:!1,canStart:!1},{key:"UNKNOWN",display:"UNKNOWN",color:"grey",tip:"Something not right. This requires further investigation by the administrator.",spinner:!1,canTerminate:!0,canConnect:!0,canStop:!1,canStart:!1}],s=a.types.model("ScEnvironment",{id:a.types.identifier,rev:a.types.maybe(a.types.number),status:"",description:"",name:"",projectId:"",envTypeId:"",createdAt:"",createdBy:"",updatedAt:"",updatedBy:"",error:a.types.maybeNull(a.types.string),connections:a.types.frozen([]),hasConnections:!1,studyIds:a.types.frozen([]),cidr:"",outputs:a.types.frozen([])}).actions((function(e){return{setScEnvironment:function(t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{connections:e.connections||[]});(0,a.applySnapshot)(e,n)},setStatus:function(t){e.status=t},setConnections:function(t){e.connections=t}}})).views((function(e){return{get state(){var t=o.default.cloneDeep(o.default.find(c,["key",e.status])||o.default.find(c,["key","UNKNOWN"]));return t.canConnect=t.canConnect&&e.hasConnections,t},getConnections:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!0};return o.default.filter(e.connections,t)}}}));t.ScEnvironment=s},1614:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.ScEnvironmentStore=void 0;var o=n(8),a=n(15),i=n(55);function u(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}var c=a.BaseStore.named("ScEnvironmentStore").props({envId:"",tickPeriod:3e4}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return(t=r.mark((function t(){var n,a;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,o.getParent)(e,2),t.next=3,(0,i.getScEnvironment)(e.envId);case 3:a=t.sent,n.addScEnvironment(a);case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){u(a,r,o,i,c,"next",e)}function c(e){u(a,r,o,i,c,"throw",e)}i(void 0)}))})();var t},cleanup:function(){t()}}})).views((function(e){return{get scEnvironment(){return(0,o.getParent)(e,2).getScEnvironment(e.envId)}}}));t.ScEnvironmentStore=c},1615:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.ScEnvConnectionStore=void 0;var o,a=(o=n(5))&&o.__esModule?o:{default:o},i=n(8),u=n(15),c=n(55);function s(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){s(a,r,o,i,u,"next",e)}function u(e){s(a,r,o,i,u,"throw",e)}i(void 0)}))}}var f=u.BaseStore.named("ScEnvConnectionStore").props({envId:"",tickPeriod:3e4}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return l(r.mark((function t(){var n,o;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.scEnvironment,t.next=3,(0,c.getScEnvironmentConnections)(e.envId);case 3:o=t.sent,n.setConnections(o);case 5:case"end":return t.stop()}}),t)})))()},createConnectionUrl:function(t){return l(r.mark((function n(){var o;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,c.createScEnvironmentConnectionUrl)(e.envId,t);case 2:return o=n.sent,n.abrupt("return",a.default.get(o,"url"));case 4:case"end":return n.stop()}}),n)})))()},sendSshKey:function(t,n){return l(r.mark((function o(){return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.sendSshKey)(e.envId,t,n));case 1:case"end":return r.stop()}}),o)})))()},getWindowsRdpInfo:function(t){return l(r.mark((function n(){return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.getWindowsRpInfo)(e.envId,t));case 1:case"end":return n.stop()}}),n)})))()},cleanup:function(){t()}}})).views((function(e){return{get scEnvironment(){return(0,i.getParent)(e,2).getScEnvironment(e.envId)},get empty(){return a.default.isEmpty(e.scEnvironment.connections)}}}));t.ScEnvConnectionStore=f},1616:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.scEnvironmentCostsStore=m.create({},e)},t.ScEnvironmentCostsStore=void 0;var o,a=(o=n(5))&&o.__esModule?o:{default:o},i=n(8),u=n(27),c=n(15),s=n(55),l=n(1617),f=n(1618);function d(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){d(a,r,o,i,u,"next",e)}function u(e){d(a,r,o,i,u,"throw",e)}i(void 0)}))}}var m=c.BaseStore.named("ScEnvironmentCostsStore").props({costs:i.types.optional(i.types.map(l.ScEnvironmentCost),{}),costStores:i.types.optional(i.types.map(f.ScEnvironmentCostStore),{}),tickPeriod:6e4}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return p(r.mark((function t(){var n,o,i,l;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.scEnvironmentsStore,(0,c.isStoreReady)(n)){t.next=4;break}return t.next=4,n.load();case 4:return o=n.list,i=function(){var e=p(r.mark((function e(t){var n,o,i,u;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,o={entries:[],id:"".concat(n,"-cost"),error:""},e.prev=2,e.next=5,(0,s.getScEnvironmentCost)(n,30);case 5:i=e.sent,o.entries=i,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),u=a.default.get(e.t0,"message")||a.default.get(e.t0,"friendly","Something went wrong"),o.error=u;case 13:return e.abrupt("return",o);case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),t.next=8,Promise.all(a.default.map(o,(function(e){return i(e)})));case 8:l=t.sent,e.runInAction((function(){(0,u.consolidateToMap)(e.costs,l,(function(e,t){e.setScEnvironmentCost(t)}))}));case 10:case"end":return t.stop()}}),t)})))()},addScEnvironmentCost:function(t){var n=t.id,r=e.costs.get(n);r?r.setScEnvironmentCost(t):e.costs.put(t)},getScEnvironmentCostStore:function(t){var n=e.costStores.get(t);return n||(e.costStores.set(t,f.ScEnvironmentCostStore.create({envId:t})),n=e.costStores.get(t)),n},cleanup:function(){e.costStores.clear(),e.costs.clear(),t()}}})).views((function(e){return{get empty(){return 0===e.costs.size},getScEnvironmentCost:function(t){return e.costs.get("".concat(t,"-cost"))},get scEnvironmentsStore(){return(0,i.getEnv)(e).scEnvironmentsStore}}}));t.ScEnvironmentCostsStore=m},1617:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScEnvironmentCost=void 0;var r,o=(r=n(5))&&r.__esModule?r:{default:r},a=n(8);var i=a.types.model("ScEnvironmentCost",{id:a.types.identifier,entries:a.types.frozen([]),error:""}).actions((function(e){return{setScEnvironmentCost:function(t){(0,a.applySnapshot)(e,t)}}})).views((function(e){return{get previousDayCost(){var t=o.default.last(e.entries);return o.default.isEmpty(t)?0:e.getAmount(t)},getAmount:function(e){return o.default.sum(o.default.map(e.cost,(function(e){return o.default.get(e,"amount",0)})))},get list(){return o.default.map(e.entries,(function(t){return{date:t.startDate,amount:e.getAmount(t),unit:t.unit}}))}}}));t.ScEnvironmentCost=i},1618:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.ScEnvironmentCostStore=void 0;var o,a=(o=n(5))&&o.__esModule?o:{default:o},i=n(8),u=n(15),c=n(55);function s(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}var l=u.BaseStore.named("ScEnvironmentCostStore").props({envId:"",tickPeriod:432e5}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return(t=r.mark((function t(){var n,o,u,s,l;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.envId,o=(0,i.getParent)(e,2),u={entries:[],id:"".concat(n,"-cost"),error:""},t.prev=3,t.next=6,(0,c.getScEnvironmentCost)(n,30);case 6:s=t.sent,u.entries=s,o.addScEnvironmentCost(u),t.next=17;break;case 11:throw t.prev=11,t.t0=t.catch(3),l=a.default.get(t.t0,"message")||a.default.get(t.t0,"friendly","Something went wrong"),u.error=l,o.addScEnvironmentCost(u),t.t0;case 17:case"end":return t.stop()}}),t,null,[[3,11]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){s(a,r,o,i,u,"next",e)}function u(e){s(a,r,o,i,u,"throw",e)}i(void 0)}))})();var t},cleanup:function(){t()}}})).views((function(e){return{get scEnvironmentCost(){return(0,i.getParent)(e,2).getScEnvironmentCost(e.envId)}}}));t.ScEnvironmentCostStore=l},1619:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=v(n(0)),i=n(12),u=n(31),c=n(3),s=n(16),l=n(33),f=v(n(49)),d=v(n(52)),p=v(n(74)),m=n(1620);function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){y(a,r,o,i,u,"next",e)}function u(e){y(a,r,o,i,u,"throw",e)}i(void 0)}))}}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(u,e);var t,n,o,i=E(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).handleLogout=(0,c.action)(function(){var e=h(r.mark((function e(n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.logoutProcessing=!0,n.preventDefault(),n.stopPropagation(),e.prev=3,e.next=6,t.props.authentication.logout();case 6:(0,c.runInAction)((function(){t.logoutProcessing=!1})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),(0,l.displayError)(e.t0),(0,c.runInAction)((function(){t.logoutProcessing=!1}));case 13:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}()),t.handleSubmit=function(){var e=h(r.mark((function e(n){var o,a;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=n.values(),t.currentUser.firstName=o.firstName,t.currentUser.lastName=o.lastName,t.currentUser.applyReason=o.applyReason,t.currentUser.status="pending",e.next=8,t.getStore().updateUserApplication(t.currentUser);case 8:a=e.sent,(0,c.runInAction)((function(){t.currentUser.status=a.status})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),(0,l.displayError)(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),t.state={},(0,c.runInAction)((function(){t.logoutProcessing=!1,t.currentUser=e.userStore.cloneUser})),t.form=(0,m.getAddUserApplicationForm)(),t.form.$("email").value=t.currentUser.username,t}return t=u,(n=[{key:"render",value:function(){return"pending"===this.currentUser.status?this.renderFormSubmittedMessage():this.renderAddUserPage()}},{key:"renderAddUserPage",value:function(){return a.default.createElement(s.Container,{className:"pt4"},a.default.createElement("div",{className:"mt2 animated fadeIn"},a.default.createElement(s.Header,{as:"h2",icon:!0,textAlign:"center",className:"mt3",color:"grey"},"Research Portal Application"),a.default.createElement("div",{className:"mt3 ml3 mr3 animated fadeIn"},this.renderAddUserForm())))}},{key:"renderFormSubmittedMessage",value:function(){var e=this.logoutProcessing;return a.default.createElement(s.Container,{text:!0,className:"pt4"},a.default.createElement(s.Message,{icon:!0},a.default.createElement(s.Message.Content,null,a.default.createElement(s.Message.Header,null,"We have received your application"),"You will not have access to the portal until an administrator reviews and approves your application.",a.default.createElement("div",{className:"mt2"},"We recommend you logout and login when you have received access.",a.default.createElement(s.Button,{floated:"right",color:"blue",icon:!0,disabled:e,className:"ml2",onClick:this.handleLogout},"Logout")))))}},{key:"renderAddUserForm",value:function(){var e=this.form;return a.default.createElement(f.default,{form:e,onSuccess:this.handleSubmit},(function(t){var n=t.processing;return a.default.createElement(a.default.Fragment,null,a.default.createElement(d.default,{field:e.$("email"),disabled:!0,className:"mt3 mb4"}),a.default.createElement(d.default,{field:e.$("firstName"),className:"mt3 mb4"}),a.default.createElement(d.default,{field:e.$("lastName")}),a.default.createElement(p.default,{field:e.$("applyReason")}),a.default.createElement(s.Button,{className:"ml2 mb3",floated:"right",color:"blue",icon:!0,disabled:n,type:"submit"},"Submit Application"))}))}},{key:"getStore",value:function(){return this.props.usersStore}}])&&g(t.prototype,n),o&&g(t,o),u}(a.default.Component);(0,c.decorate)(k,{logoutProcessing:c.observable,currentUser:c.observable});var O=(0,i.inject)("userStore","usersStore","userRolesStore","awsAccountsStore","indexesStore","authentication")((0,u.withRouter)((0,i.observer)(k)));t.default=O},1620:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAddUserApplicationFormFields=function(){return o},t.getAddUserApplicationForm=function(){return(0,r.createForm)(o)};var r=n(91),o={email:{label:"Username",placeholder:"Type email address as username for the user"},firstName:{label:"First Name",placeholder:"Your first name",explain:"Your current default first name is ",rules:"required|string"},lastName:{label:"Last Name",placeholder:"Your last name",explain:"Your current default last name is ",rules:"required|string"},applyReason:{label:"Describe Your Research",explain:"Please tell us why you are requesting access to the Research Portal",placeholder:"Why are you requesting access?",rules:"required|string"}}},1624:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(n(0)),a=n(16),i=n(12),u=n(31),c=l(n(1625)),s=l(n(1626));function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=[{menuItem:"Users",render:function(){return o.default.createElement(s.default,null)}},{menuItem:"Roles",render:function(){return o.default.createElement(c.default,null)}}],g=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(u,e);var t,n,r,i=m(u);function u(){return f(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){return o.default.createElement(a.Container,{className:"mt3 animated fadeIn"},o.default.createElement(a.Segment,{basic:!0,className:"p0"},o.default.createElement(a.Tab,{panes:h})))}}])&&d(t.prototype,n),r&&d(t,r),u}(o.default.Component),b=(0,u.withRouter)((0,i.observer)(g));t.default=b},1625:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=m(n(0)),a=n(16),i=n(31),u=n(3),c=n(12),s=m(n(164)),l=n(15),f=m(n(39)),d=n(38),p=m(n(44));function m(e){return e&&e.__esModule?e:{default:e}}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(c,e);var t,n,r,i=h(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).handleAddUserRole=function(){t.goto("/user-roles/add")},t.state={},(0,u.runInAction)((function(){t.mapOfUsersBeingEdited={},t.formProcessing=!1})),t}return t=c,(n=[{key:"getUserRolesStore",value:function(){return this.props.userRolesStore}},{key:"getUserRoles",value:function(){return this.getUserRolesStore().list}},{key:"renderMain",value:function(){var e=this.getUserRoles(),t=e.length,n=e.length>t;return o.default.createElement("div",null,o.default.createElement(s.default,{data:e,showPagination:n,defaultPageSize:t,className:"-striped -highlight",filterable:!0,defaultFilterMethod:function(e,t){var n=String(t[e.id]).toLowerCase(),r=e.value.toLowerCase();return n.indexOf(r)>=0},columns:[{Header:"User Role Name",accessor:"id"},{Header:"Description",accessor:"description"},{Header:"User Type",accessor:"userType"}]}),o.default.createElement("br",null))}},{key:"goto",value:function(e){var t=this.props.location,n=(0,d.createLink)({location:t,pathname:e});this.props.history.push(n)}},{key:"renderHeader",value:function(){return o.default.createElement("div",{className:"mb3 flex"},o.default.createElement(a.Header,{as:"h3",className:"color-grey mt1 mb0 flex-auto"},o.default.createElement(a.Icon,{name:"id badge",className:"align-top"}),o.default.createElement(a.Header.Content,{className:"left-align"},"User Roles",this.renderTotal())))}},{key:"renderTotal",value:function(){return o.default.createElement(a.Label,{circular:!0},this.getUserRoles().length)}},{key:"render",value:function(){var e,t=this.getUserRolesStore();return e=(0,l.isStoreError)(t)?o.default.createElement(f.default,{error:t.error}):(0,l.isStoreLoading)(t)?o.default.createElement(p.default,{segmentCount:3}):this.renderMain(),o.default.createElement(a.Container,{className:"mt3 animated fadeIn"},this.renderHeader(),e)}}])&&v(t.prototype,n),r&&v(t,r),c}(o.default.Component);(0,u.decorate)(E,{mapOfUsersBeingEdited:u.observable,formProcessing:u.observable});var w=(0,c.inject)("userRolesStore")((0,i.withRouter)((0,c.observer)(E)));t.default=w},1626:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=h(n(0)),a=n(16),i=n(31),u=n(3),c=n(12),s=h(n(164)),l=n(27),f=n(33),d=n(15),p=n(38),m=h(n(39)),v=h(n(44)),y=h(n(1627));function h(e){return e&&e.__esModule?e:{default:e}}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(c,e);var t,n,r,i=E(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).handleAddUser=function(){t.goto("/users/add")},t.handleAddLocalUser=function(){t.goto("/users/add/local")},t.handleAddAuthenticationProvider=function(){t.goto("/authentication-providers")},t.notifyNonRootUsers=!0,t.state={selectedRole:"",projectId:[],identityProviderName:"",isIdentityProviderNameChanged:!1,unchangedIdentityProviderName:""},(0,u.runInAction)((function(){t.mapOfUsersBeingEdited={},t.formProcessing=!1})),t}return t=c,(n=[{key:"componentDidMount",value:function(){var e=this.getStore();(0,l.swallowError)(e.load()),e.startHeartbeat()}},{key:"componentWillUnmount",value:function(){this.getStore().stopHeartbeat()}},{key:"getStore",value:function(){return this.props.usersStore}},{key:"goto",value:function(e){var t=this.props,n=t.location,r=t.history,o=(0,p.createLink)({location:n,pathname:e});r.push(o)}},{key:"getAwsAccountOptions",value:function(){return this.props.awsAccountsStore.dropdownOptions}},{key:"renderHeader",value:function(){return o.default.createElement("div",{className:"mb3 flex"},o.default.createElement(a.Header,{as:"h3",className:"color-grey mt1 mb0 flex-auto"},o.default.createElement(a.Icon,{name:"users",className:"align-top"}),o.default.createElement(a.Header.Content,{className:"left-align"},"Users",this.renderTotal())),o.default.createElement(a.Button,{color:"blue",size:"medium",className:"mr2",basic:!0,onClick:this.handleAddLocalUser}," ","Add Local User"," "),o.default.createElement(a.Button,{color:"blue",size:"medium",basic:!0,onClick:this.handleAddUser}," ","Add Federated User"," "))}},{key:"renderTotal",value:function(){var e=this.getStore();if((0,d.isStoreError)(e)||(0,d.isStoreLoading)(e))return null;var t=e.nonRootUsers.length;return o.default.createElement(a.Label,{circular:!0},t)}},{key:"renderMain",value:function(){return this.renderUsers()}},{key:"renderUsers",value:function(){var e=this,t=this.getStore().list,n=t.length,r=t.length>n,i=this.formProcessing;return o.default.createElement(a.Segment,{basic:!0,className:"p0"},o.default.createElement(a.Dimmer,{active:i,inverted:!0},o.default.createElement(a.Loader,{inverted:!0},"Updating")),o.default.createElement(s.default,{data:t,defaultSorted:[{id:"lastName",desc:!0}],showPagination:r,defaultPageSize:n,className:"-striped -highlight",filterable:!0,defaultFilterMethod:function(e,t){var n=String(t[e.id]).toLowerCase(),r=e.value.toLowerCase();return n.indexOf(r)>=0},columns:[{Header:"Name",accessor:"username",width:200},{Header:"Email",accessor:"email",width:200},{Header:"Identity Provider",accessor:"identityProviderName",Cell:function(e){return e.original.identityProviderName||"internal"}},{Header:"Type",accessor:"isExternalUser",width:100,Cell:function(e){return e.original.isExternalUser?"External":"Internal"},filterMethod:function(e){return!e.value.toLowerCase().includes("ex")}},{Header:"Role",accessor:"userRole",width:100,style:{whiteSpace:"unset"},Cell:function(e){return e.original.userRole||"N/A"}},{Header:"Project",style:{whiteSpace:"unset"},Cell:function(e){return e.original.projectId.join(", ")||"<<none>>"}},{Header:"Status",accessor:"isActive",width:100,Cell:function(e){var t=e.original;return"active"===t.status?o.default.createElement("span",null,o.default.createElement(a.Label,{color:"green"},o.default.createElement("i",{className:"check circle outline icon"}),"Active")):"inactive"===t.status?o.default.createElement("span",null,o.default.createElement(a.Label,{color:"red"},o.default.createElement("i",{className:"circle icon"}),"Inactive")):o.default.createElement("span",null,o.default.createElement(a.Label,{color:"orange"},o.default.createElement("i",{className:"exclamation icon"}),"Pending"))},filterMethod:function(e,t){return t._original.status.indexOf(e.value.toLowerCase())>=0}},{Header:"",filterable:!1,Cell:function(t){var n=t.original;return o.default.createElement("div",{style:{textAlign:"center",verticalAlign:"middle"}},o.default.createElement("span",null,o.default.createElement(a.Popup,{content:"View User Detail",trigger:o.default.createElement(y.default,{user:n,adminMode:!0,userStore:e.props.userStore,usersStore:e.props.usersStore,userRolesStore:e.props.userRolesStore,awsAccountsStore:e.props.awsAccountsStore,projectsStore:e.props.projectsStore})})))}}]}))}},{key:"render",value:function(){var e=this.getStore(),t=null;return(0,d.isStoreError)(e)?t=o.default.createElement(m.default,{error:e.error}):(0,d.isStoreLoading)(e)?t=o.default.createElement(v.default,{segmentCount:3}):(0,d.isStoreReady)(e)&&(e.hasNonRootUsers||this.notifyNonRootUsers&&(this.notifyNonRootUsers=!1,(0,f.displayWarning)("Please add users in the Data Lake. May need to configure authentication provider in the Auth tab at left. Then login as a regular non-root User.")),t=this.renderMain()),o.default.createElement(a.Container,{className:"mt3 animated fadeIn"},this.renderHeader(),t)}}])&&g(t.prototype,n),r&&g(t,r),c}(o.default.Component);(0,u.decorate)(k,{mapOfUsersBeingEdited:u.observable,formProcessing:u.observable,handleAddUser:u.action,handleAddAuthenticationProvider:u.action,handleAddLocalUser:u.action});var O=(0,c.inject)("userStore","usersStore","userRolesStore","awsAccountsStore","projectsStore")((0,i.withRouter)((0,c.observer)(k)));t.default=O},1627:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=w(n(0)),i=n(12),u=n(3),c=n(16),s=w(n(5)),l=w(n(68)),f=n(27),d=w(n(39)),p=w(n(44)),m=w(n(49)),v=w(n(52)),y=w(n(61)),h=w(n(228)),g=n(33),b=n(1628),E=n(308);function w(e){return e&&e.__esModule?e:{default:e}}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function k(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){A(a,r,o,i,u,"next",e)}function u(e){A(a,r,o,i,u,"throw",e)}i(void 0)}))}}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return N(this,n)}}function N(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(w,e);var t,n,o,i=T(w);function w(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w),(t=i.call(this,e)).handleEditClick=function(){t.view="edit"},t.handleCancel=function(){t.form.clear(),"edit"===t.view?t.view="detail":t.handleClose()},t.handleFormSubmission=function(){var e=j(r.mark((function e(n){var o,a,i,u,c,s,l,f,d,p,m,v,y,h;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.values(),a=t.userRolesStore.isInternalUser(o.userRole),i=t.userRolesStore.isInternalGuest(o.userRole),u=o.projectId||[],a&&!i||(u=[]),c=o.firstName,s=o.lastName,l=o.email,f=o.userRole,d=o.status,p="admin"===f,m=n.$("identityProviderName"),v=C({},t.getCurrentUser(),{firstName:c,lastName:s,email:l}),t.props.adminMode&&!t.getCurrentUser().isRootUser&&(v=C({},v,{userRole:f,isAdmin:p,projectId:u,status:d})),e.prev=10,y=t.usersStore,!m.isDirty){e.next=27;break}if(!t.props.adminMode){e.next=24;break}return v.ns=void 0,h=(0,E.toIdpFromValue)(m.value),v.identityProviderName=h.idpName,v.authenticationProviderId=h.authNProviderId,e.next=20,y.addUser(v);case 20:return e.next=22,y.deleteUser(t.getCurrentUser());case 22:e.next=25;break;case 24:(0,g.displayError)("Only admins can update identity provider information for the user");case 25:e.next=29;break;case 27:return e.next=29,y.updateUser(v);case 29:return n.clear(),(0,g.displaySuccess)("Updated user successfully"),e.next=33,t.userStore.load();case 33:t.handleClose(),e.next=39;break;case 36:e.prev=36,e.t0=e.catch(10),(0,g.displayError)(e.t0);case 39:case"end":return e.stop()}}),e,null,[[10,36]])})));return function(t){return e.apply(this,arguments)}}(),t.handleDeleteClick=j(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.processing=!0,e.next=4,t.usersStore.deleteUser(t.getCurrentUser());case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),(0,g.displayError)(e.t0);case 9:(0,u.runInAction)((function(){t.processing=!1})),t.handleClose();case 11:case"end":return e.stop()}}),e,null,[[0,6]])}))),t.handleApproveDisapproveClick=function(){var e=j(r.mark((function e(n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.processing=!0,e.next=4,t.usersStore.updateUser(C({},t.getCurrentUser(),{status:n}));case 4:return e.next=6,t.userStore.load();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),(0,g.displayError)(e.t0);case 11:(0,u.runInAction)((function(){t.processing=!1})),t.handleClose();case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),t.handleOpen=function(){t.usersStore.stopHeartbeat(),t.form=(0,b.getUpdateUserConfigForm)(t.getCurrentUser()),t.modalOpen=!0},t.handleClose=function(){t.usersStore.startHeartbeat(),t.modalOpen=!1},t.handleFormError=function(e,t){},(0,u.runInAction)((function(){t.stores=new l.default([t.userStore,t.userRolesStore,t.awsAccountsStore,t.projectsStore,t.authenticationProviderConfigsStore]),t.modalOpen=!1,t.processing=!1,t.view="detail"})),t.form=(0,b.getUpdateUserConfigForm)(t.getCurrentUser()),t}return t=w,(n=[{key:"componentDidMount",value:function(){(0,f.swallowError)(this.getStores().load())}},{key:"render",value:function(){var e=this.getStores(),t=null;return t=e.hasError?a.default.createElement(d.default,{error:e.error,className:"p0 mb3"}):e.loading?a.default.createElement(p.default,null):e.ready?this.renderMain():null,a.default.createElement(c.Modal,{closeIcon:!0,trigger:this.renderTrigger(),open:this.modalOpen,onClose:this.handleClose},a.default.createElement("div",{className:"mt2 animated fadeIn"},a.default.createElement(c.Header,{as:"h3",icon:!0,textAlign:"center",className:"mt3",color:"grey"},"User Detail"),a.default.createElement("div",{className:"mt3 ml3 mr3 animated fadeIn"},t)))}},{key:"renderMain",value:function(){var e=null;return"detail"===this.view?e=this.renderDetailView():"edit"===this.view&&(e=this.renderEditView()),e}},{key:"renderDetailView",value:function(){var e=this,t=function(t){var n=s.default.get(e.getCurrentUser(),t),r=s.default.isArray(n)?s.default.map(n,(function(e,t){return a.default.createElement(c.Label,{key:t,content:e})})):n;return a.default.createElement(a.default.Fragment,null,a.default.createElement(c.Table.Cell,{collapsing:!0,active:!0},function(t){return e.form.$(t).label}(t)),a.default.createElement(c.Table.Cell,null,r))};return a.default.createElement(c.Segment,{basic:!0,className:"ui fluid form mb4"},a.default.createElement(c.Table,{celled:!0},a.default.createElement(c.Table.Body,null,a.default.createElement(c.Table.Row,null,t("username")),a.default.createElement(c.Table.Row,null,t("firstName")),a.default.createElement(c.Table.Row,null,t("lastName")),a.default.createElement(c.Table.Row,null,t("email")),this.getCurrentUser().isRootUser?null:a.default.createElement(a.default.Fragment,null,a.default.createElement(c.Table.Row,null,t("userRole")),a.default.createElement(c.Table.Row,null,t("identityProviderName")),a.default.createElement(c.Table.Row,null,t("projectId")),"pending"===this.getCurrentUser().status&&a.default.createElement(c.Table.Row,null,t("applyReason")),a.default.createElement(c.Table.Row,null,t("status"))))),this.renderDetailViewButtons())}},{key:"renderDetailViewButtons",value:function(){var e=this,t=function(e){var t=e.label,n=void 0===t?"":t,r=e.color,o=void 0===r?"blue":r,i=e.floated,u=void 0===i?"left":i,s=e.disabled,l=void 0!==s&&s,f=k(e,["label","color","floated","disabled"]),d={};return o&&(d.color=o),a.default.createElement(c.Button,S({floated:u,disabled:l,className:"ml2"},d,f),n)},n=this.getCurrentUser(),r=t({label:"Cancel",floated:"left",color:"",onClick:this.handleCancel,disabled:this.processing}),o="detail"===this.view?t({label:"Delete",floated:"right",color:"red",onClick:this.handleDeleteClick,disabled:n.isRootUser||this.processing}):"",i="pending"===this.props.user.status||"inactive"===this.props.user.status?t({label:"Activate User",floated:"right",color:"blue",onClick:function(){return e.handleApproveDisapproveClick("active")},disabled:this.processing}):"",u="active"===this.props.user.status||"pending"===this.props.user.status?t({label:"Deactivate User",floated:"right",disabled:n.isRootUser||this.processing,onClick:function(){return e.handleApproveDisapproveClick("inactive")}}):"",s="active"===n.status||"inactive"===n.status?t({label:"Edit",onClick:this.handleEditClick,floated:"right",disabled:this.processing}):"";return this.props.adminMode?a.default.createElement("div",{className:"mt4 mb4"},a.default.createElement(c.Modal.Actions,null,r,o,u,i,s)):a.default.createElement("div",{className:"mt4 mb4"},a.default.createElement(c.Modal.Actions,null,r,s))}},{key:"renderEditView",value:function(){var e=this,t=this.form,n=t.$("firstName"),r=t.$("lastName"),o=t.$("email"),i=t.$("identityProviderName"),u=t.$("userRole"),l=t.$("projectId"),f=t.$("status"),d=this.getIdentityProviderOptions(),p=this.getUserRoleOptions(),g=this.getProjectOptions(),b=this.userRolesStore.isInternalUser(u.value),E=this.userRolesStore.isInternalGuest(u.value),w=!s.default.isEmpty(g)&&b&&!E,S=this.props.adminMode;return a.default.createElement(c.Segment,{clearing:!0,className:"p3 mb4"},a.default.createElement(m.default,{form:t,onCancel:this.handleCancel,onSuccess:this.handleFormSubmission,onError:this.handleFormError},(function(t){var s=t.processing,m=t.onCancel;return a.default.createElement(a.default.Fragment,null,a.default.createElement(v.default,{field:n,disabled:s}),a.default.createElement(v.default,{field:r,disabled:s}),a.default.createElement(v.default,{field:o,disabled:s}),e.getCurrentUser().isRootUser?null:a.default.createElement(a.default.Fragment,null,S&&a.default.createElement(y.default,{field:i,options:d,selection:!0,fluid:!0,disabled:s}),S&&a.default.createElement(y.default,{field:u,options:p,selection:!0,fluid:!0,disabled:s}),S&&w&&a.default.createElement(y.default,{field:l,options:g,multiple:!0,selection:!0,clearable:!0,fluid:!0,disabled:s}),a.default.createElement(h.default,{field:f,disabled:s})),a.default.createElement("div",{className:"mt3"},a.default.createElement(c.Button,{floated:"right",color:"blue",icon:!0,disabled:s,className:"ml2",type:"submit"},"Save"),a.default.createElement(c.Button,{floated:"right",disabled:s,onClick:m},"Cancel")))})))}},{key:"renderTrigger",value:function(){return this.props.adminMode?a.default.createElement(c.Button,{size:"mini",compact:!0,color:"blue",onClick:this.handleOpen},"Detail"):a.default.createElement(c.Menu.Item,{onClick:this.handleOpen},a.default.createElement(c.Icon,{name:"user"})," ",this.props.userStore.user.displayName)}},{key:"getStores",value:function(){return this.stores}},{key:"getIdentityProviderOptions",value:function(){return(0,E.toIdpOptions)(this.authenticationProviderConfigsStore.list)}},{key:"getUserRoleOptions",value:function(){return this.userRolesStore.dropdownOptions}},{key:"getProjectOptions",value:function(){return this.projectsStore.dropdownOptions}},{key:"getCurrentUser",value:function(){return this.props.user}},{key:"userStore",get:function(){return this.props.userStore}},{key:"usersStore",get:function(){return this.props.usersStore}},{key:"userRolesStore",get:function(){return this.props.userRolesStore}},{key:"awsAccountsStore",get:function(){return this.props.awsAccountsStore}},{key:"projectsStore",get:function(){return this.props.projectsStore}},{key:"authenticationProviderConfigsStore",get:function(){return this.props.authenticationProviderConfigsStore}}])&&I(t.prototype,n),o&&I(t,o),w}(a.default.Component);(0,u.decorate)(D,{modalOpen:u.observable,view:u.observable,processing:u.observable,authenticationProviderConfigsStore:u.computed,projectsStore:u.computed,awsAccountsStore:u.computed,userRolesStore:u.computed,usersStore:u.computed,userStore:u.computed,handleOpen:u.action,handleClose:u.action,handleCancel:u.action,handleEditClick:u.action,handleDeleteClick:u.action,handleApproveDisapproveClick:u.action,handleFormSubmission:u.action});var R=(0,i.inject)("authenticationProviderConfigsStore")((0,i.observer)(D));t.default=R},1628:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUpdateUserConfigFormFields=u,t.getUpdateUserConfigForm=function(e){return(0,a.createForm)(u(e))};var r,o=(r=n(5))&&r.__esModule?r:{default:r},a=n(91),i=n(308);function u(e){return{username:{label:"Username",value:o.default.get(e,"username","")},firstName:{label:"First Name",placeholder:"First name of this user",value:o.default.get(e,"firstName",""),rules:"required|string"},lastName:{label:"Last Name",placeholder:"Last name of this user",value:o.default.get(e,"lastName",""),rules:"required|string"},email:{label:"Email",placeholder:"email address",value:o.default.get(e,"email",""),rules:"required|email|string"},identityProviderName:{label:"Identity Provider Name",value:(0,i.toValueFromIdp)({authenticationProviderId:o.default.get(e,"authenticationProviderId",""),identityProviderName:o.default.get(e,"identityProviderName","")})},projectId:{label:"Project",value:o.default.get(e,"projectId","")},userRole:{label:"User Role",value:o.default.get(e,"userRole","")},applyReason:{label:"Reason for Applying",explain:" ",value:o.default.get(e,"applyReason","")},status:{label:"User Status",extra:{explain:"Active users can log into the Research Portal",yesLabel:"Active",noLabel:"Inactive",yesValue:"active",noValue:"inactive"},value:o.default.get(e,"status","")}}}},1629:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=f(n(0)),a=n(16),i=n(12),u=n(31),c=f(n(1630)),s=f(n(1631)),l=f(n(1632));function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=[{menuItem:"Projects",render:function(){return o.default.createElement(l.default,null)}},{menuItem:"Indexes",render:function(){return o.default.createElement(s.default,null)}},{menuItem:"AWS Accounts",render:function(){return o.default.createElement(c.default,null)}}],b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(u,e);var t,n,r,i=v(u);function u(){return d(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){return o.default.createElement(a.Container,{className:"mt3 animated fadeIn"},o.default.createElement(a.Segment,{basic:!0,className:"p0"},o.default.createElement(a.Tab,{panes:g})))}}])&&p(t.prototype,n),r&&p(t,r),u}(o.default.Component),E=(0,i.inject)("userRolesStore","indexesStore","awsAccountsStore")((0,u.withRouter)((0,i.observer)(b)));t.default=E},1630:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=v(n(0)),a=n(16),i=n(31),u=n(3),c=n(12),s=v(n(164)),l=n(27),f=n(15),d=n(38),p=v(n(44)),m=v(n(39));function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(v,e);var t,n,r,i=g(v);function v(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(t=i.call(this,e)).handleAddAwsAccount=function(){t.goto("/aws-accounts/add")},t.handleCreateAwsAccount=function(){t.goto("/aws-accounts/create")},t.state={},(0,u.runInAction)((function(){t.mapOfUsersBeingEdited={}})),t}return t=v,(n=[{key:"componentDidMount",value:function(){var e=this.props.accountsStore,t=this.props.awsAccountsStore;(0,l.swallowError)(e.load()),(0,l.swallowError)(t.load()),e.startHeartbeat(),t.startHeartbeat()}},{key:"componentWillUnmount",value:function(){var e=this.props.accountsStore,t=this.props.awsAccountsStore;e.stopHeartbeat(),t.stopHeartbeat()}},{key:"getAwsAccountsStore",value:function(){return this.props.awsAccountsStore}},{key:"getAwsAccounts",value:function(){return this.getAwsAccountsStore().list}},{key:"renderMain",value:function(){var e=this,t=this.getAwsAccounts(),n=t.length>5;return o.default.createElement("div",null,o.default.createElement(s.default,{data:t,showPagination:n,defaultPageSize:5,className:"-striped -highlight",filterable:!0,defaultFilterMethod:function(e,t){var n=String(t[e.id]).toLowerCase(),r=e.value.toLowerCase();return n.indexOf(r)>=0},columns:[{Header:"Account Name",accessor:"name"},{Header:"AWS Account ID",accessor:"accountId"},{Header:"Description",accessor:"description"},{Header:"Role ARN",accessor:"roleArn"},{Header:"External ID",accessor:"externalId"},{Header:"VPC ID",accessor:"vpcId"},{Header:"Subnet ID",accessor:"subnetId"},{Header:"Encryption Key Arn",accessor:"encryptionKeyArn"},{Header:"Budget Configuration",filterable:!1,Cell:(0,c.observer)((function(t){return o.default.createElement(a.Button,{primary:!0,compact:!0,size:"mini",onClick:function(){return e.handleBudgetConfiguration(t.original.id)}},"Budget Detail")}))}]}))}},{key:"goto",value:function(e){var t=this.props.location,n=(0,d.createLink)({location:t,pathname:e});this.props.history.push(n)}},{key:"handleBudgetConfiguration",value:function(e){this.goto("/aws-accounts/budget/".concat(e))}},{key:"renderHeader",value:function(){return o.default.createElement("div",{className:"mb3 flex"},o.default.createElement(a.Header,{as:"h3",className:"color-grey mt1 mb0 flex-auto"},o.default.createElement(a.Icon,{name:"amazon",className:"align-top"}),o.default.createElement(a.Header.Content,{className:"left-align"},"AWS Accounts",this.renderTotal())),o.default.createElement(a.Button,{color:"blue",size:"medium",basic:!0,onClick:this.handleCreateAwsAccount},"Create AWS Account"),o.default.createElement(a.Button,{className:"ml2",color:"blue",size:"medium",basic:!0,onClick:this.handleAddAwsAccount},"Add AWS Account"))}},{key:"renderTotal",value:function(){return o.default.createElement(a.Label,{circular:!0},this.getAwsAccounts().length)}},{key:"handleDismiss",value:function(e){this.props.accountsStore.removeItem(e),this.componentDidMount()}},{key:"renderCreatingAccountNotification",value:function(){var e=this,t=this.props.accountsStore,n=t.listCreatingAccount,r=t.listErrorAccount;return o.default.createElement("div",{className:"mt3 mb3 animated fadeIn"},n.map((function(e){return o.default.createElement(a.Message,null,o.default.createElement(a.Icon,{name:"circle notched",loading:!0}),"Trying to create accountID: ",e.id)})),r.map((function(t){return o.default.createElement(a.Message,{onDismiss:function(){return e.handleDismiss(t.id)}},o.default.createElement(a.Icon,{name:"times",color:"red"}),"Error happended in creating accountID: ",t.id,". If the account is created, please contact follow"," ",o.default.createElement("a",{href:"https://aws.amazon.com/blogs/security/aws-organizations-now-supports-self-service-removal-of-accounts-from-an-organization/",target:"_blank",rel:"noopener noreferrer"},"instruction")," ","to remove it. You may close this message after you make sure the account is removed.")})))}},{key:"render",value:function(){var e,t=this.getAwsAccountsStore();return e=(0,f.isStoreError)(t)?o.default.createElement(m.default,{error:t.error}):(0,f.isStoreLoading)(t)?o.default.createElement(p.default,{segmentCount:3}):this.renderMain(),o.default.createElement(a.Container,{className:"mt3 animated fadeIn"},this.renderHeader(),this.renderCreatingAccountNotification(),e)}}])&&y(t.prototype,n),r&&y(t,r),v}(o.default.Component);(0,u.decorate)(w,{mapOfUsersBeingEdited:u.observable});var S=(0,c.inject)("awsAccountsStore","accountsStore")((0,i.withRouter)((0,c.observer)(w)));t.default=S},1631:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=p(n(0)),a=n(16),i=n(31),u=n(12),c=p(n(164)),s=n(15),l=p(n(39)),f=n(38),d=p(n(44));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(u,e);var t,n,r,i=y(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).handleAddIndex=function(){t.goto("/indexes/add")},t.state={},t}return t=u,(n=[{key:"getIndexesStore",value:function(){var e=this.props.indexesStore;return e.load(),e}},{key:"getIndexes",value:function(){return this.getIndexesStore().list}},{key:"renderMain",value:function(){var e=this,t=this.getIndexes(),n=t.length,r=t.length>n;return o.default.createElement("div",null,o.default.createElement(c.default,{data:t,showPagination:r,defaultPageSize:n,className:"-striped -highlight",filterable:!0,defaultFilterMethod:function(e,t){var n=String(t[e.id]).toLowerCase(),r=e.value.toLowerCase();return n.indexOf(r)>=0},columns:[{Header:"Index Name",accessor:"id"},{Header:"AWS Account",id:"awsAccountId",accessor:function(t){return e.props.awsAccountsStore.getNameForAccountId(t.awsAccountId)}},{Header:"Description",accessor:"description"}]}),o.default.createElement("br",null))}},{key:"goto",value:function(e){var t=this.props.location,n=(0,f.createLink)({location:t,pathname:e});this.props.history.push(n)}},{key:"renderHeader",value:function(){return o.default.createElement("div",{className:"mb3 flex"},o.default.createElement(a.Header,{as:"h3",className:"color-grey mt1 mb0 flex-auto"},o.default.createElement(a.Icon,{name:"briefcase",className:"align-top"}),o.default.createElement(a.Header.Content,{className:"left-align"},"Indexes",this.renderTotal())),o.default.createElement(a.Button,{color:"blue",size:"medium",basic:!0,onClick:this.handleAddIndex},"Add Index"))}},{key:"renderTotal",value:function(){return o.default.createElement(a.Label,{circular:!0},this.getIndexes().length)}},{key:"render",value:function(){var e,t=this.getIndexesStore();return e=(0,s.isStoreError)(t)?o.default.createElement(l.default,{error:t.error}):(0,s.isStoreLoading)(t)?o.default.createElement(d.default,{segmentCount:3}):this.renderMain(),o.default.createElement(a.Container,{className:"mt3 animated fadeIn"},this.renderHeader(),e)}}])&&m(t.prototype,n),r&&m(t,r),u}(o.default.Component),E=(0,u.inject)("awsAccountsStore","indexesStore")((0,i.withRouter)((0,u.observer)(b)));t.default=E},1632:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=h(n(0)),a=n(16),i=n(31),u=n(3),c=n(12),s=h(n(164)),l=h(n(5)),f=n(15),d=h(n(39)),p=n(38),m=h(n(44)),v=h(n(68)),y=h(n(1633));function h(e){return e&&e.__esModule?e:{default:e}}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(h,e);var t,n,r,i=S(h);function h(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=i.call(this,e)).handleAddProject=function(){t.goto("/projects/add")},t.state={},(0,u.runInAction)((function(){t.stores=new v.default([t.props.projectsStore])})),t}return t=h,(n=[{key:"getProjectsStore",value:function(){var e=this.props.projectsStore;return e.load(),e}},{key:"getProjects",value:function(){return this.getProjectsStore().list}},{key:"renderMain",value:function(){var e=this,t=this.getProjects(),n=t.length,r=t.length>n;return o.default.createElement("div",null,o.default.createElement(s.default,{data:t,showPagination:r,defaultPageSize:n,className:"-striped -highlight",filterable:!0,defaultFilterMethod:function(e,t){var n=String(t[e.id]).toLowerCase(),r=e.value.toLowerCase();return n.indexOf(r)>=0},columns:[{Header:"Project Name",accessor:"id"},{Header:"Index Id",accessor:"indexId"},{Header:"Description",accessor:"description"},{Header:"Project Admins",accessor:"projectAdmins",style:{whiteSpace:"unset"},Cell:(0,c.observer)((function(e){var t=e.original.projectAdminUsers;return l.default.map(t,(function(e){return e.username})).join(", ")||"<<none>>"}))},{Header:"",accessor:"viewDetail",filterable:!1,Cell:(0,c.observer)((function(t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.original);return o.default.createElement("div",{style:{textAlign:"center",verticalAlign:"middle"}},o.default.createElement("span",null,o.default.createElement(a.Popup,{content:"View Project Detail",trigger:o.default.createElement(y.default,{project:n,userStore:e.props.userStore,usersStore:e.props.usersStore,projectsStore:e.props.projectsStore,awsAccountsStore:e.props.awsAccountsStore})})))}))}]}),o.default.createElement("br",null))}},{key:"goto",value:function(e){var t=this.props.location,n=(0,p.createLink)({location:t,pathname:e});this.props.history.push(n)}},{key:"renderHeader",value:function(){return o.default.createElement("div",{className:"mb3 flex"},o.default.createElement(a.Header,{as:"h3",className:"color-grey mt1 mb0 flex-auto"},o.default.createElement(a.Icon,{name:"briefcase",className:"align-top"}),o.default.createElement(a.Header.Content,{className:"left-align"},"Projects",this.renderTotal())),o.default.createElement(a.Button,{color:"blue",size:"medium",basic:!0,onClick:this.handleAddProject},"Add Project"))}},{key:"renderTotal",value:function(){return o.default.createElement(a.Label,{circular:!0},this.getProjects().length)}},{key:"render",value:function(){var e,t=this.getProjectsStore();return e=(0,f.isStoreError)(t)?o.default.createElement(d.default,{error:t.error}):(0,f.isStoreLoading)(t)?o.default.createElement(m.default,{segmentCount:3}):this.renderMain(),o.default.createElement(a.Container,{className:"mt3 animated fadeIn"},this.renderHeader(),e)}}])&&E(t.prototype,n),r&&E(t,r),h}(o.default.Component),P=(0,c.inject)("awsAccountsStore","projectsStore","userStore","usersStore")((0,i.withRouter)((0,c.observer)(C)));t.default=P},1633:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=y(n(0)),i=n(12),u=n(3),c=n(16),s=y(n(5)),l=n(33),f=y(n(68)),d=n(27),p=y(n(39)),m=y(n(44)),v=n(682);function y(e){return e&&e.__esModule?e:{default:e}}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function b(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){b(a,r,o,i,u,"next",e)}function u(e){b(a,r,o,i,u,"throw",e)}i(void 0)}))}}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(y,e);var t,n,o,i=k(y);function y(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),(t=i.call(this,e)).handleModalOpen=function(){(0,u.runInAction)((function(){var e=t.props.project,n=e.rev,r=e.id,o=e.description,a=e.indexId,i=e.projectAdmins;t.updateProject={rev:n,id:r,description:o,indexId:a,projectAdmins:i},t.formProcessing=!1,t.modalOpen=!1,t.confirmDeleteOpen=!1,t.view="detail",t.modalOpen=!0}))},t.handleModalClose=function(){t.cleanUp()},t.handleDeleteConfirmOpen=function(){(0,u.runInAction)((function(){t.confirmDeleteOpen=!0}))},t.handleDeleteConfirmClose=function(){(0,u.runInAction)((function(){t.confirmDeleteOpen=!1}))},t.handleClickEditButton=function(){(0,u.runInAction)((function(){t.view="edit"}))},t.handleClickCancelButton=function(){"edit"===t.view?(0,u.runInAction)((function(){t.view="detail"})):t.handleModalClose()},t.handleClickSubmitButton=(0,u.action)(E(r.mark((function e(){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.updateProject.id||(t.updateProject.id=t.currentProject.id),(0,u.runInAction)((function(){t.formProcessing=!0})),e.prev=2,n=t.getStore(),e.next=6,n.updateProject(t.updateProject);case 6:(0,u.runInAction)((function(){t.formProcessing=!1})),t.cleanUp(),(0,l.displaySuccess)("Updated project successfully"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),(0,u.runInAction)((function(){t.formProcessing=!1})),(0,l.displayError)(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))),t.handleClickDeleteButton=(0,u.action)(E(r.mark((function e(){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,u.runInAction)((function(){t.confirmDeleteOpen=!1,t.formProcessing=!0})),e.prev=1,n=t.getStore(),e.next=5,n.deleteProject(t.currentProject.id);case 5:return e.next=7,n.load();case 7:(0,u.runInAction)(E(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.formProcessing=!1;case 1:case"end":return e.stop()}}),e)})))),t.cleanUp(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),(0,u.runInAction)((function(){t.formProcessing=!1})),(0,l.displayError)(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))),t.handleProjectAdminsSelection=function(e,n){var r=n.value;(0,u.runInAction)((function(){t.updateProject.projectAdmins=r}))},(0,u.runInAction)((function(){t.stores=new f.default([t.usersStore,t.awsAccountsStore,t.projectsStore,t.userStore]);var e=t.props.project,n=e.rev,r=e.id,o=e.description,a=e.indexId,i=e.projectAdmins;t.updateProject={rev:n,id:r,description:o,indexId:a,projectAdmins:i},t.formProcessing=!1,t.modalOpen=!1,t.confirmDeleteOpen=!1,t.view="detail"})),t.form=(0,v.getAddProjectForm)(),t.addProjectFormFields=(0,v.getAddProjectFormFields)(),t.currentProject=t.props.project,t}return t=y,(n=[{key:"componentWillUnmount",value:function(){this.cleanUp()}},{key:"getStores",value:function(){return this.stores}},{key:"componentDidMount",value:function(){(0,d.swallowError)(this.getStores().load())}},{key:"cleanUp",value:function(){var e=this;(0,u.runInAction)((function(){e.modalOpen=!1,e.confirmDeleteOpen=!1}))}},{key:"renderDetailView",value:function(){var e=this,t=function(t){var n=s.default.get(e.currentProject,t),r=s.default.isArray(n)?s.default.map(n,(function(t,n){var r=e.usersStore.asUserObject({uid:t});return a.default.createElement(c.Label,{key:n,content:r.username})})):n;return a.default.createElement(a.default.Fragment,null,a.default.createElement(c.Table.Cell,{collapsing:!0,active:!0},function(t){return e.form.$(t).label}(t)),a.default.createElement(c.Table.Cell,null,r))};return a.default.createElement(c.Segment,{basic:!0,className:"ui fluid form mb4"},a.default.createElement(c.Table,{celled:!0},a.default.createElement(c.Table.Body,null,a.default.createElement(c.Table.Row,null,t("id")),a.default.createElement(c.Table.Row,null,t("description")),a.default.createElement(c.Table.Row,null,t("projectAdmins")))),this.renderButtons())}},{key:"renderTrigger",value:function(){return a.default.createElement(c.Button,{size:"mini",compact:!0,color:"blue",onClick:this.handleModalOpen},"Detail")}},{key:"renderMain",value:function(){var e=null;return"detail"===this.view?e=this.renderDetailView():"edit"===this.view&&(e=this.renderEditView()),e}},{key:"render",value:function(){var e=this.getStores(),t=null;return t=e.hasError?a.default.createElement(p.default,{error:e.error,className:"p0 mb3"}):e.loading?a.default.createElement(m.default,null):e.ready?this.renderMain():null,a.default.createElement(c.Modal,{closeIcon:!0,trigger:this.renderTrigger(),open:this.modalOpen,onClose:this.handleModalClose},a.default.createElement("div",{className:"mt2 animated fadeIn"},a.default.createElement(c.Header,{as:"h3",icon:!0,textAlign:"center",className:"mt3",color:"grey"},"Project Detail"),a.default.createElement("div",{className:"mt3 ml3 mr3 animated fadeIn"},t)))}},{key:"renderEditView",value:function(){var e=this,t=this.formProcessing,n=this.addProjectFormFields,r=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",o=(0,u.action)((function(n){n.preventDefault(),e.updateProject[t]=n.target.value}));return a.default.createElement("div",{className:"ui focus input"},a.default.createElement("input",{type:r,defaultValue:e.currentProject[t],placeholder:n[t].placeholder||"",onChange:o}))};return a.default.createElement(c.Segment,{basic:!0,className:"ui fluid form"},a.default.createElement(c.Dimmer,{active:t,inverted:!0},a.default.createElement(c.Loader,{inverted:!0},"Checking")),this.renderField("id",r("id","id")),a.default.createElement("div",{className:"mb2"}),this.renderField("description",r("description","description")),a.default.createElement("div",{className:"mb2"}),this.renderField("projectAdmins"),this.renderProjectAdminsSelection(),a.default.createElement("div",{className:"mb2"}),this.renderButtons(),a.default.createElement("div",{className:"mb4"}))}},{key:"renderButtons",value:function(){var e=this,t=this.formProcessing,n=function(e){var n=e.label,r=void 0===n?"":n,o=e.color,i=void 0===o?"blue":o,u=e.floated,s=void 0===u?"left":u,l=g(e,["label","color","floated"]);return a.default.createElement(c.Button,h({color:i,floated:s,disabled:t,className:"ml2"},l),r)},r="detail"===this.view?n({label:"Edit",onClick:this.handleClickEditButton}):"",o="edit"===this.view?n({label:"Save",onClick:this.handleClickSubmitButton}):"",i="detail"===this.view?function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.label,o=void 0===r?"Delete":r,i=n.color,u=void 0===i?"red":i,s=n.floated,l=void 0===s?"right":s;return a.default.createElement("div",null,a.default.createElement(c.Button,{color:u,floated:l,disabled:t,className:"ml2",onClick:e.handleDeleteConfirmOpen},o),a.default.createElement(c.Confirm,{open:e.confirmDeleteOpen,content:"Are you sure you want to delete this project?",onCancel:e.handleDeleteConfirmClose,onConfirm:e.handleClickDeleteButton}))}():"",u=n({label:"Cancel",floated:"right",color:"grey",onClick:this.handleClickCancelButton});return a.default.createElement("div",{className:"mt3 mb3"},a.default.createElement(c.Modal.Actions,null,u,i,o,r))}},{key:"renderProjectAdminsSelection",value:function(){var e=this.props.usersStore,t=e.asDropDownOptions(),n=s.default.map(this.currentProject.projectAdmins,(function(t){return e.asUserObject({uid:t})}));return a.default.createElement(c.Dropdown,{options:t,defaultValue:s.default.map(n,(function(e){return e.uid})),fluid:!0,multiple:!0,selection:!0,onChange:this.handleProjectAdminsSelection})}},{key:"renderField",value:function(e,t,n){var r=this.addProjectFormFields,o=r[e].explain,i=r[e].label,u=!s.default.isEmpty(o),l=this.currentProject[e];return n&&"function"===typeof n&&(l=n(l)),l=s.default.isEmpty(l)?"N/A":l,a.default.createElement("div",null,a.default.createElement(c.Header,{className:"mr3 mt0",as:"h4",color:"grey"},i),u&&a.default.createElement("div",{className:"mb2"},o," ",a.default.createElement("span",null,"detail"===this.view?l:"")),a.default.createElement("div",{className:"ui field input block m0"},t))}},{key:"getStore",value:function(){return this.props.projectsStore}},{key:"userStore",get:function(){return this.props.userStore}},{key:"usersStore",get:function(){return this.props.usersStore}},{key:"awsAccountsStore",get:function(){return this.props.awsAccountsStore}},{key:"projectStore",get:function(){return this.props.projectsStore.getProjectStore()}},{key:"projectsStore",get:function(){return this.props.projectsStore}}])&&w(t.prototype,n),o&&w(t,o),y}(a.default.Component);(0,u.decorate)(P,{formProcessing:u.observable,modalOpen:u.observable,confirmDeleteOpen:u.observable,view:u.observable,updateProject:u.observable,projectsStore:u.computed,awsAccountsStore:u.computed,usersStore:u.computed,userStore:u.computed,handleClickSubmitButton:u.action});var A=(0,i.observer)(P);t.default=A},1634:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=v(n(0)),a=n(12),i=n(31),u=n(16),c=v(n(44)),s=n(27),l=v(n(39)),f=n(15),d=n(308),p=v(n(1635)),m=v(n(1637));function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(i,e);var t,n,r,a=b(i);function i(){return y(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"componentDidMount",value:function(){(0,s.swallowError)(this.getStore().load())}},{key:"render",value:function(){var e=this.getStore(),t=null;return(0,f.isStoreError)(e)?t=o.default.createElement(l.default,{error:e.error,className:"p0 mb3"}):(0,f.isStoreLoading)(e)?t=o.default.createElement(c.default,null):(0,f.isStoreReady)(e)&&(t=this.renderMain()),o.default.createElement(u.Container,{className:"mt3 mb4"},this.renderTitle(),t)}},{key:"renderTitle",value:function(){return o.default.createElement("div",{className:"mb3 flex"},o.default.createElement(u.Header,{as:"h3",className:"color-grey mt1 mb0 flex-auto"},o.default.createElement(u.Icon,{name:"user",className:"align-top"}),o.default.createElement(u.Header.Content,{className:"left-align"},"Add User")))}},{key:"renderMain",value:function(){var e=this.getIdentityProviderOptions(),t=[{menuItem:"Add Single User",render:function(){return o.default.createElement(u.Tab.Pane,{basic:!0,attached:!1},o.default.createElement("div",{className:"mt3 animated fadeIn"},o.default.createElement(m.default,null)))}},{menuItem:"Add Multiple Users",render:function(){return o.default.createElement(u.Tab.Pane,{basic:!0,attached:!1},o.default.createElement(p.default,{identityProviderOptions:e}))}}];return o.default.createElement(u.Grid,null,o.default.createElement(u.Grid.Column,null,o.default.createElement(u.Tab,{defaultActiveIndex:0,className:"mt2",menu:{secondary:!0,pointing:!0},panes:t})))}},{key:"getIdentityProviderOptions",value:function(){return(0,d.toIdpOptions)(this.getStore().list)}},{key:"getStore",value:function(){return this.props.authenticationProviderConfigsStore}}])&&h(t.prototype,n),r&&h(t,r),i}(o.default.Component),k=(0,a.inject)("authenticationProviderConfigsStore")((0,i.withRouter)((0,a.observer)(S)));t.default=k},1635:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=E(n(5)),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!==typeof e)return{default:e};var t=b();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),u=E(n(713)),c=n(31),s=n(12),l=n(16),f=n(3),d=n(33),p=n(38),m=n(27),v=E(n(39)),y=E(n(44)),h=E(n(68)),g=E(n(1636));function b(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return b=function(){return e},e}function E(e){return e&&e.__esModule?e:{default:e}}function w(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function S(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){w(a,r,o,i,u,"next",e)}function u(e){w(a,r,o,i,u,"throw",e)}i(void 0)}))}}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var o=A(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return P(this,n)}}function P(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(s,e);var t,n,o,c=C(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=c.call(this,e)).onDrop=function(e){var n=new FileReader;n.onabort=function(){return console.log("file reading was aborted")},n.onerror=function(){return console.log("file reading has failed")},n.onload=function(){var e=n.result,r=t.csvJSON(e);t.setState({jsonArrayContent:r}),t.setState({fileContent:e})},e.forEach((function(e){return n.readAsText(e)})),t.setState({files:e})},t.handleSubmit=(0,f.action)(S(r.mark((function e(){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.formProcessing=!0,e.prev=1,e.next=4,t.addAuthProviderId(t.state.jsonArrayContent);case 4:return n=e.sent,e.next=7,t.usersStore.addUsers(n);case 7:return(0,f.runInAction)((function(){t.formProcessing=!1})),e.next=10,t.usersStore.load();case 10:t.goto("/users"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),(0,f.runInAction)((function(){t.formProcessing=!1})),(0,d.displayError)(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))),t.handleCancel=(0,f.action)((function(e){e.preventDefault(),e.stopPropagation(),t.formProcessing=!1,t.goto("/users")})),t.state={files:[],fileContent:"",jsonArrayContent:[]},(0,f.runInAction)((function(){t.formProcessing=!1,t.validationErrors=new Map,t.user={},t.stores=new h.default([t.authenticationProviderConfigsStore,t.userRolesStore,t.usersStore,t.userStore])})),t}return t=s,(n=[{key:"componentDidMount",value:function(){(0,m.swallowError)(this.stores.load())}},{key:"csvJSON",value:function(e){for(var t=[],n=e.split(/\r?\n/),r=n[0].split(","),o=1;o<n.length;o++){for(var a={},i=n[o].split(","),u=0;u<r.length;u++)a[r[u]]=i[u];t.push(a)}return t}},{key:"goto",value:function(e){var t=this.props.location,n=(0,p.createLink)({location:t,pathname:e});this.props.history.push(n)}},{key:"renderButtons",value:function(){var e=this.formProcessing;return i.default.createElement("div",{className:"mt3"},i.default.createElement(l.Button,{floated:"right",color:"blue",icon:!0,disabled:e,className:"ml2",onClick:this.handleSubmit},"Submit"),i.default.createElement(l.Button,{floated:"right",disabled:e,onClick:this.handleCancel},"Cancel"))}},{key:"addAuthProviderId",value:function(){var e=S(r.mark((function e(t){var n,o=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map(function(){var e=S(r.mark((function e(t){var n,i;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.authenticationProviderConfigsStore.getAuthenticationProviderConfigByIdpName(t.identityProviderName),i=a.default.get(n,"id"),t.authenticationProviderId=i,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(n);case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderTable",value:function(){return this.state.fileContent?i.default.createElement(g.default,{userData:this.state.jsonArrayContent}):""}},{key:"render",value:function(){var e=this.stores;return e.hasError?i.default.createElement(v.default,{error:e.error,className:"p0 mb3"}):e.loading?i.default.createElement(y.default,null):e.ready?this.renderMain():null}},{key:"renderMain",value:function(){var e=this.state.files.map((function(e){return i.default.createElement("li",{key:e.name},e.name," - ",e.size," bytes")}));return i.default.createElement("div",null,i.default.createElement(l.Container,{text:!0},i.default.createElement(l.Message,{info:!0},i.default.createElement(l.Message.Content,null,i.default.createElement(l.Message.Header,null,"CSV Example"),i.default.createElement("p",null,"email,userRole,identityProviderName"),i.default.createElement("p",null,"user1@datalake.amazonaws.com,researcher,DataLake"),i.default.createElement("p",null,"user2@organization.onmicrosoft.com,researcher,AzureAD")))),i.default.createElement(l.Segment,{className:"mt4 center"},i.default.createElement(l.Header,{as:"h4",color:"grey"},"Drag and drop files here"),i.default.createElement(u.default,{onDrop:this.onDrop,minSize:0,maxSize:512e3,multiple:!0},(function(e){var t=e.getRootProps,n=e.getInputProps,r=e.rejectedFiles,o=r.length>0&&r[0].size>512e3;return i.default.createElement("div",t(),i.default.createElement("input",n()),i.default.createElement(l.Icon,{name:"cloud upload",size:"massive",color:"grey"}),o&&i.default.createElement("div",{className:"text-danger mt-2"},"File is too large."))}))),i.default.createElement("aside",null,i.default.createElement("h4",null,"Files"),i.default.createElement("ul",null,e)),this.renderTable(),this.renderButtons())}},{key:"userRolesStore",get:function(){return this.props.userRolesStore}},{key:"usersStore",get:function(){return this.props.usersStore}},{key:"userStore",get:function(){return this.props.userStore}},{key:"authenticationProviderConfigsStore",get:function(){return this.props.authenticationProviderConfigsStore}}])&&k(t.prototype,n),o&&k(t,o),s}(i.Component);(0,f.decorate)(j,{authenticationProviderConfigsStore:f.computed,userRolesStore:f.computed,usersStore:f.computed,userStore:f.computed,formProcessing:f.observable});var I=(0,s.inject)("userStore","usersStore","userRolesStore","authenticationProviderConfigsStore")((0,c.withRouter)((0,s.observer)(j)));t.default=I},1636:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=c(n(0)),a=n(31),i=n(12),u=c(n(164));function c(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(i,e);var t,n,r,a=d(i);function i(){return s(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props.userData;return o.default.createElement("div",null,o.default.createElement(u.default,{data:e,columns:[{Header:"Email",accessor:"email"},{Header:"User Role",accessor:"userRole"},{Header:"Identity Provider",accessor:"identityProviderName"}],defaultPageSize:5,className:"-striped -highlight"}),o.default.createElement("br",null))}}])&&l(t.prototype,n),r&&l(t,r),i}(o.default.Component),y=(0,a.withRouter)((0,i.observer)(v));t.default=y},1637:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=k(n(0)),i=k(n(5)),u=n(12),c=n(31),s=n(3),l=n(16),f=n(33),d=k(n(68)),p=k(n(44)),m=n(27),v=k(n(49)),y=k(n(228)),h=n(38),g=k(n(39)),b=k(n(61)),E=k(n(52)),w=n(1638),S=n(308);function k(e){return e&&e.__esModule?e:{default:e}}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return T(this,n)}}function T(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?N(e):t}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(c,e);var t,n,o,u=x(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=u.call(this,e)).handleCancel=function(){(0,h.gotoFn)(N(t))("/users")},t.handleFormSubmission=function(){var e,n=(e=r.mark((function e(n){var o,a,i,u,c,s,l;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.values(),a=t.userRolesStore.isInternalUser(o.userRole),i=t.userRolesStore.isInternalGuest(o.userRole),u=o.projectId||[],a&&!i||(u=[]),c=(0,S.toIdpFromValue)(o.identityProviderName),s=c.idpName,l=c.authNProviderId,e.prev=8,e.next=11,t.usersStore.addUser(C({},o,{authenticationProviderId:l,identityProviderName:s,projectId:u}));case 11:n.clear(),(0,f.displaySuccess)("Added user successfully"),(0,h.gotoFn)(N(t))("/users"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(8),(0,f.displayError)(e.t0);case 20:case"end":return e.stop()}}),e,null,[[8,17]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){A(a,r,o,i,u,"next",e)}function u(e){A(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}(),t.handleFormError=function(e,t){},(0,s.runInAction)((function(){t.stores=new d.default([t.userStore,t.usersStore,t.userRolesStore,t.awsAccountsStore,t.projectsStore,t.authenticationProviderConfigsStore])})),t.form=(0,w.getAddUserForm)(),t.addUserFormFields=(0,w.getAddUserFormFields)(),t}return t=c,(n=[{key:"componentDidMount",value:function(){(0,m.swallowError)(this.getStores().load())}},{key:"render",value:function(){var e=this.getStores();return e.hasError?a.default.createElement(g.default,{error:e.error,className:"p0 mb3"}):e.loading?a.default.createElement(p.default,null):e.ready?this.renderMain():null}},{key:"renderMain",value:function(){var e=this.form,t=e.$("email"),n=e.$("identityProviderName"),r=e.$("userRole"),o=e.$("projectId"),u=e.$("status"),c=this.getIdentityProviderOptions(),s=this.getUserRoleOptions(),f=this.getProjectOptions(),d=this.userRolesStore.isInternalUser(r.value),p=this.userRolesStore.isInternalGuest(r.value),m=!i.default.isEmpty(f)&&d&&!p;return a.default.createElement(l.Segment,{clearing:!0,className:"p3"},a.default.createElement(v.default,{form:e,onCancel:this.handleCancel,onSuccess:this.handleFormSubmission,onError:this.handleFormError},(function(e){var i=e.processing,d=(e._onSubmit,e.onCancel);return a.default.createElement(a.default.Fragment,null,a.default.createElement(E.default,{field:t,disabled:i}),a.default.createElement(b.default,{field:n,options:c,selection:!0,fluid:!0,disabled:i}),a.default.createElement(b.default,{field:r,options:s,selection:!0,fluid:!0,disabled:i}),m&&a.default.createElement(b.default,{field:o,options:f,multiple:!0,selection:!0,clearable:!0,fluid:!0,disabled:i}),a.default.createElement(y.default,{field:u,disabled:i}),a.default.createElement("div",{className:"mt3"},a.default.createElement(l.Button,{floated:"right",color:"blue",icon:!0,disabled:i,className:"ml2",type:"submit"},"Add User"),a.default.createElement(l.Button,{floated:"right",disabled:i,onClick:d},"Cancel")))})))}},{key:"getIdentityProviderOptions",value:function(){return(0,S.toIdpOptions)(this.authenticationProviderConfigsStore.list)}},{key:"getUserRoleOptions",value:function(){return this.userRolesStore.dropdownOptions}},{key:"getProjectOptions",value:function(){return this.projectsStore.dropdownOptions}},{key:"getStores",value:function(){return this.stores}},{key:"userStore",get:function(){return this.props.userStore}},{key:"usersStore",get:function(){return this.props.usersStore}},{key:"userRolesStore",get:function(){return this.props.userRolesStore}},{key:"awsAccountsStore",get:function(){return this.props.awsAccountsStore}},{key:"projectsStore",get:function(){return this.props.projectsStore}},{key:"authenticationProviderConfigsStore",get:function(){return this.props.authenticationProviderConfigsStore}}])&&j(t.prototype,n),o&&j(t,o),c}(a.default.Component);(0,s.decorate)(D,{userStore:s.computed,usersStore:s.computed,userRolesStore:s.computed,awsAccountsStore:s.computed,projectsStore:s.computed,authenticationProviderConfigsStore:s.computed});var R=(0,u.inject)("userStore","usersStore","userRolesStore","awsAccountsStore","projectsStore","authenticationProviderConfigsStore")((0,c.withRouter)((0,u.observer)(D)));t.default=R},1638:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAddUserFormFields=function(){return o},t.getAddUserForm=function(){return(0,r.createForm)(o)};var r=n(91),o={email:{label:"Username",placeholder:"Type email address as username for the user",extra:{explain:"Username in email format"},rules:"required|email|string"},identityProviderName:{label:"Identity Provider",extra:{explain:"Identity Provider for this user"}},projectId:{label:"Project Id",extra:{explain:"Select Project for this user"}},userRole:{label:"UserRole",extra:{explain:"Select user's role"}},status:{label:"Status",extra:{explain:"Active users can log into the Research Portal",yesLabel:"Active",noLabel:"Inactive",yesValue:"active",noValue:"inactive"}}}},1639:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=v(n(0)),i=n(12),u=n(31),c=n(3),s=n(16),l=v(n(5)),f=n(33),d=n(38),p=v(n(229)),m=n(1640);function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){y(a,r,o,i,u,"next",e)}function u(e){y(a,r,o,i,u,"throw",e)}i(void 0)}))}}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(u,e);var t,n,o,i=E(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).handleRoleChange=function(e,n){var r=n.value;return t.setState({role:r})},t.handleStatusChange=function(e,n){var r=n.value;return t.setState({status:r})},t.handleAwsAccountSelection=function(e,n){var r=n.value;return t.setState({awsAccountId:r})},t.handleCancel=(0,c.action)((function(e){e.preventDefault(),e.stopPropagation(),t.formProcessing=!1,t.goto("/accounts")})),t.handleSubmit=(0,c.action)(h(r.mark((function e(){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.formProcessing=!0,e.prev=1,t.index.awsAccountId=t.state.awsAccountId,e.next=5,(0,p.default)(t.index,t.addIndexFormFields);case 5:if(!(n=e.sent).fails()){e.next=10;break}(0,c.runInAction)((function(){t.validationErrors=n.errors,t.formProcessing=!1})),e.next=14;break;case 10:return e.next=12,t.props.indexesStore.addIndex(t.index);case 12:(0,c.runInAction)((function(){t.formProcessing=!1})),t.goto("/accounts");case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),(0,c.runInAction)((function(){t.formProcessing=!1})),(0,f.displayError)(e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})))),t.state={role:"guest",status:"active",awsAccountId:""},(0,c.runInAction)((function(){t.formProcessing=!1,t.validationErrors=new Map,t.index={}})),t.form=(0,m.getAddIndexForm)(),t.addIndexFormFields=(0,m.getAddIndexFormFields)(),t}return t=u,(n=[{key:"goto",value:function(e){var t=this.props.location,n=(0,d.createLink)({location:t,pathname:e});this.props.history.push(n)}},{key:"render",value:function(){return a.default.createElement("div",{className:"mt2 animated fadeIn"},a.default.createElement(s.Header,{as:"h2",icon:!0,textAlign:"center",className:"mt3",color:"grey"},"Add Index"),a.default.createElement("div",{className:"mt3 ml3 mr3 animated fadeIn"},this.renderAddIndexForm()))}},{key:"renderAddIndexForm",value:function(){var e=this,t=this.formProcessing,n=this.addIndexFormFields,r=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",o=(0,c.action)((function(n){n.preventDefault(),e.index[t]=n.target.value}));return a.default.createElement("div",{className:"ui focus input"},a.default.createElement("input",{type:r,defaultValue:e.index[t],placeholder:n[t].placeholder||"",onChange:o}))};return a.default.createElement(s.Segment,{basic:!0,className:"ui fluid form"},a.default.createElement(s.Dimmer,{active:t,inverted:!0},a.default.createElement(s.Loader,{inverted:!0},"Checking")),this.renderField("id",r("id","id")),a.default.createElement("div",{className:"mb4"}),this.renderField("awsAccountId"),this.renderAwsAccountSelection(),a.default.createElement("div",{className:"mb4"}),this.renderField("description",r("description","description")),this.renderButtons())}},{key:"renderButtons",value:function(){var e=this.formProcessing;return a.default.createElement("div",{className:"mt3"},a.default.createElement(s.Button,{floated:"right",color:"blue",icon:!0,disabled:e,className:"ml2",onClick:this.handleSubmit},"Add Index"),a.default.createElement(s.Button,{floated:"right",disabled:e,onClick:this.handleCancel},"Cancel"))}},{key:"renderAwsAccountSelection",value:function(){var e=this.props.awsAccountsStore.dropdownOptions;return a.default.createElement(s.Dropdown,{options:e,placeholder:"Please select an AWS Account",fluid:!0,selection:!0,onChange:this.handleAwsAccountSelection})}},{key:"renderField",value:function(e,t){var n=this.addIndexFormFields,r=n[e].explain,o=n[e].label,i=!l.default.isEmpty(r),u=this.validationErrors.get(e),c=!l.default.isEmpty(u);return a.default.createElement("div",null,a.default.createElement(s.Header,{className:"mr3 mt0",as:"h2",color:"grey"},o),i&&a.default.createElement("div",{className:"mb2"},r),a.default.createElement("div",{className:"ui big field input block m0 ".concat(c?"error":"")},t),c&&a.default.createElement("div",{className:"ui pointing red basic label"},a.default.createElement(s.List,null,l.default.map(u,(function(t){return a.default.createElement(s.List.Item,{key:e},a.default.createElement(s.List.Content,null,t))})))))}},{key:"getStore",value:function(){return this.props.usersStore}}])&&g(t.prototype,n),o&&g(t,o),u}(a.default.Component);(0,c.decorate)(k,{formProcessing:c.observable,user:c.observable,validationErrors:c.observable});var O=(0,i.inject)("usersStore","indexesStore","awsAccountsStore")((0,u.withRouter)((0,i.observer)(k)));t.default=O},1640:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAddIndexFormFields=function(){return o},t.getAddIndexForm=function(){return(0,r.createForm)(o)};var r=n(91),o={id:{label:"Index ID",placeholder:"Type id for this index",rules:"required|string|between:1,300"},awsAccountId:{label:"AWS Account ID",rules:"required|string"},description:{label:"Description",placeholder:"Type description for this index",rules:"string|between:1,3000"}}},1641:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=g(n(0)),i=g(n(5)),u=n(3),c=n(12),s=n(31),l=n(396),f=n(16),d=n(33),p=g(n(44)),m=n(55),v=n(188),y=n(683),h=g(n(1642));function g(e){return e&&e.__esModule?e:{default:e}}function b(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){b(a,r,o,i,u,"next",e)}function u(e){b(a,r,o,i,u,"throw",e)}i(void 0)}))}}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(c,e);var t,n,o,u=k(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=u.call(this,e)).state={totalCost:0,projNameToTotalCost:{},projNameToUserTotalCost:{},envNameToCostInfo:{},isLoading:!0},t}return t=c,(n=[{key:"componentDidMount",value:function(){var e=E(r.mark((function e(){var t,n,o,a,i,u;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.scrollTo(0,0),e.prev=1,e.next=4,this.getCosts();case 4:t=e.sent,n=t.totalCost,o=t.projNameToTotalCost,a=t.projNameToUserTotalCost,i=t.envNameToCostInfo,this.setState({totalCost:n,projNameToTotalCost:o,projNameToUserTotalCost:a,envNameToCostInfo:i,isLoading:!1}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),u=this.getStore(),"AccessDeniedException"===e.t0.code?u.user.isAdmin&&(0,d.displayWarning)("Error encountered accessing cost data. Please enable Cost Explorer in the AWS Management Console and wait for 24 hours."):(0,d.displayError)(e.t0.message);case 16:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"getStore",value:function(){return this.props.userStore}},{key:"render",value:function(){return a.default.createElement(f.Container,{className:"mt3 mb4"},this.renderTitle(),this.renderContent())}},{key:"renderTitle",value:function(){return a.default.createElement("div",{"data-testid":"page-title",className:"mb3 flex"},a.default.createElement(f.Header,{as:"h3",className:"color-grey mt1 mb0 flex-auto"},a.default.createElement(f.Icon,{name:"dashboard",className:"align-top"}),a.default.createElement(f.Header.Content,{className:"left-align"},"Dashboard")))}},{key:"renderContent",value:function(){return a.default.createElement("div",null,!1===this.state.isLoading&&0===this.state.totalCost?a.default.createElement(f.Segment,{className:"bold"},"No cost data to show"):a.default.createElement(a.default.Fragment,null,a.default.createElement(f.Segment,null,this.renderCostPerProj()),a.default.createElement(f.Segment,null,this.renderPastMonthCostPerEnv()),a.default.createElement(f.Segment,null,this.renderYesterdayCostPerEnv()),a.default.createElement(f.Segment,{className:"clearfix"},this.renderPastMonthCostPerProjPerUser()),a.default.createElement(f.Segment,{className:"bold"},"Total cost of all research workspaces for the past 30 days: $",Math.round(100*this.state.totalCost)/100)))}},{key:"getCosts",value:function(){var e=E(r.mark((function e(){var t,n,o,a,u,c;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAccumulatedEnvCost();case 2:return t=e.sent,n=t.envNameToCostInfo,o=t.envNameToIndex,a={},Object.keys(n).forEach((function(e){var t=o[e];void 0===a[t]&&(a[t]={}),Object.keys(n[e].pastMonthCostByUser).forEach((function(r){var o=i.default.get(a,"".concat(t,".").concat(r),0);a[t][r]=o+n[e].pastMonthCostByUser[r]}))})),u={},c=0,Object.keys(a).forEach((function(e){var t=0;Object.keys(a[e]).forEach((function(n){t+=a[e][n]})),c+=t,u[e]=t})),e.abrupt("return",{totalCost:c,projNameToTotalCost:u,projNameToUserTotalCost:a,envNameToCostInfo:n});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAccumulatedEnvCost",value:function(){var e=E(r.mark((function e(){var t,n,o,a,u,c,s,l,f,d,p;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v.enableBuiltInWorkspaces){e.next=6;break}return e.next=3,(0,m.getEnvironments)();case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,(0,m.getScEnvironments)();case 8:e.t0=e.sent;case 9:return t=e.t0,n={},o={},t.forEach((function(e){e.isExternal||(n[e.id]=e.name,o[e.name]=e.indexId)})),a=Object.keys(n),u=a.map((function(e){return v.enableBuiltInWorkspaces?(0,m.getEnvironmentCost)(e,30,!1,!0):(0,m.getScEnvironmentCost)(e,30,!1,!0)})),e.next=17,Promise.all(u);case 17:for(c=e.sent,s=c.map((function(e){var t={};return i.default.forEach(e,(function(e){var n=e.cost;Object.keys(n).forEach((function(e){var r=e.split("$")[1];r=r||"None";var o=i.default.get(t,r,0);t[r]=o+n[e].amount}))})),t})),l=c.map((function(e){var t=e.length>0?e[e.length-1]:{},n=0;return t&&i.default.flatMapDeep(t.cost).forEach((function(e){n+=e.amount})),n})),f={},d=0;d<a.length;d++)p=n[a[d]],f[p]={pastMonthCostByUser:s[d],yesterdayCost:l[d]};return e.abrupt("return",{envNameToCostInfo:f,envNameToIndex:o});case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"renderCostPerProj",value:function(){var e=this;if(i.default.isEmpty(this.state.projNameToTotalCost))return a.default.createElement(p.default,null);var t="Index Costs for Past 30 Days",n=Object.keys(this.state.projNameToTotalCost),r=Object.keys(this.state.projNameToTotalCost).map((function(t){return e.state.projNameToTotalCost[t]})),o={labels:n,datasets:(0,y.blueDatasets)(t,r)};return a.default.createElement(h.default,{className:"mr4",data:o,title:t})}},{key:"renderPastMonthCostPerEnv",value:function(){var e=this;if(i.default.isEmpty(this.state.envNameToCostInfo))return a.default.createElement(p.default,null);var t=[];Object.keys(this.state.envNameToCostInfo).forEach((function(n){var r=0;Object.keys(e.state.envNameToCostInfo[n].pastMonthCostByUser).forEach((function(t){r+=e.state.envNameToCostInfo[n].pastMonthCostByUser[t]})),t.push(r)}));var n="Env Cost for Past 30 Days",r=Object.keys(this.state.envNameToCostInfo),o=t,u={labels:r,datasets:(0,y.blueDatasets)(n,o)};return a.default.createElement(h.default,{className:"mr4",data:u,title:n})}},{key:"renderYesterdayCostPerEnv",value:function(){var e=this;if(i.default.isEmpty(this.state.envNameToCostInfo))return a.default.createElement(p.default,null);var t="Yesterday's Env Cost",n=Object.keys(this.state.envNameToCostInfo),r=Object.keys(this.state.envNameToCostInfo).map((function(t){return e.state.envNameToCostInfo[t].yesterdayCost})),o={labels:n,datasets:(0,y.blueDatasets)(t,r)};return a.default.createElement(h.default,{className:"mr4",data:o,title:t})}},{key:"renderPastMonthCostPerProjPerUser",value:function(){var e=this;if(i.default.isEmpty(this.state.projNameToUserTotalCost))return a.default.createElement(p.default,null);var t=[];return Object.keys(this.state.projNameToUserTotalCost).forEach((function(n){var r=e.state.projNameToUserTotalCost[n],o=["#FF6384","#36A2EB","#FFCE56","#CDDC39","#4527a0","#f4511e"],i={labels:Object.keys(r),datasets:[{data:Object.keys(r).map((function(e){return r[e]})),backgroundColor:o,hoverBackgroundColor:o}]};t.push(a.default.createElement("div",{key:n,className:"col col-6"},a.default.createElement("div",{className:"center"},n),a.default.createElement(l.Pie,{data:i})))})),a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"center bold"},"Index Cost Breakdowns for Past 30 Days"),t)}}])&&w(t.prototype,n),o&&w(t,o),c}(a.default.Component);(0,u.decorate)(P,{});var A=(0,c.inject)("userStore")((0,s.withRouter)((0,c.observer)(P)));t.default=A},1642:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(0))&&r.__esModule?r:{default:r},a=n(396),i=n(683);var u=function(e){var t=e.className,n=e.data,r=e.title,u=e.width,c=void 0===u?250:u,s=e.height,l=void 0===s?120:s;return o.default.createElement("div",{className:t},o.default.createElement("div",{className:"fs-9 center mt1 mb1"},r),o.default.createElement("div",null,o.default.createElement(a.Bar,{className:t,data:n,width:c,height:l,options:i.barOptions})))};t.default=u},1643:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=h(n(0)),a=h(n(5)),i=n(3),u=n(12),c=n(31),s=n(16),l=n(27),f=n(38),d=n(15),p=n(187),m=h(n(1644)),v=h(n(1655)),y=h(n(684));function h(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(e){w(n,e);var t=k(n);function n(){return g(this,n),t.apply(this,arguments)}return E(n,[{key:"render",value:function(){return o.default.createElement(o.default.Fragment,null,this.props.children)}}]),n}(o.default.Component),A=function(e){w(n,e);var t=k(n);function n(){var e;g(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleNext=function(){e.envTypeId?e.goto("/studies/setup-workspace/type/".concat(encodeURIComponent(e.envTypeId))):e.goto("/studies/setup-workspace")},e.handlePrevious=function(){e.goto("/workspace-types-management")},e}return E(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"getStudiesStore",value:function(e){return this.props.studiesStoresMap[e.id]}},{key:"goto",value:function(e){(0,f.gotoFn)(this)(e)}},{key:"render",value:function(){var e=this.canSelectStudy;return o.default.createElement(s.Container,{className:"mt3"},this.renderTitle(),e&&this.renderStepsProgress(),this.renderSelection(),this.renderStudyTabs())}},{key:"renderTitle",value:function(){var e=this.canCreateStudy,t=this.hasProjects;return o.default.createElement("div",{className:"flex"},o.default.createElement(s.Header,{as:"h3",className:"color-grey mt1 mb0 flex-auto"},o.default.createElement(s.Icon,{name:"book",className:"align-top"}),o.default.createElement(s.Header.Content,{className:"left-align"},"Studies")),e&&t&&o.default.createElement(v.default,null))}},{key:"renderStepsProgress",value:function(){return o.default.createElement(y.default,{envTypeImmutable:!!this.envTypeId})}},{key:"renderStudyTabs",value:function(){var e=this,t=this.isExternalUser,n=function(t){var n=e.getStudiesStore(t);return n?(0,d.isStoreError)(n)||(0,d.isStoreNew)(n)||(0,d.isStoreLoading)(n)?null:o.default.createElement(s.Label,null,(0,l.niceNumber)(n.total)):null},r=a.default.filter(p.categories,(function(e){return"my-studies"!==e.id||!t})),i=a.default.map(r,(function(e){return{menuItem:o.default.createElement(s.Menu.Item,{key:e.id},e.name," ",n(e)),render:function(){return o.default.createElement(s.Tab.Pane,{attached:!1,key:e.id,as:P},o.default.createElement(u.Observer,null,(function(){return o.default.createElement(m.default,{category:e})})))}}}));return o.default.createElement(s.Tab,{className:"mt3",menu:{secondary:!0,pointing:!0},renderActiveOnly:!0,panes:i})}},{key:"renderSelection",value:function(){var e=this.props.filesSelection,t=e.empty,n=e.count,r=this.canCreateStudy,a=this.canSelectStudy,i=this.hasProjects;return t&&r&&a&&i?this.renderWarningWithButton({content:o.default.createElement(o.default.Fragment,null,"Select one or more studies to proceed to the next step or create a study by clicking on ",o.default.createElement("b",null,"Create Study")," ","button at the top.")}):t&&r&&a&&!i?this.renderWarning({header:"Missing association with one or more projects!",content:"You won't be able to select or create studies because you currently don't have any association with one or more projects, please contact your administrator."}):t&&a&&!r?this.renderWarningWithButton({content:"Select one or more studies to proceed to the next step."}):t?this.renderWarning({header:"Limited access",content:"You currently have limited access and will not be able to select studies to proceed to the next step."}):o.default.createElement(s.Message,{visible:!0,className:"clearfix",info:!0},o.default.createElement(s.Button,{icon:!0,labelPosition:"right",className:"ml2",floated:"right",onClick:this.handleNext,color:"blue"},"Next",o.default.createElement(s.Icon,{name:"right arrow"})),this.envTypeId&&o.default.createElement(s.Button,{floated:"right",icon:"left arrow",labelPosition:"left",className:"ml2",content:"Previous",onClick:this.handlePrevious}),o.default.createElement("div",{className:"mt1"},o.default.createElement("span",null,"Selected studies",o.default.createElement(s.Label,{circular:!0,color:"blue",className:"ml1"},(0,l.niceNumber)(n))," ")))}},{key:"renderWarning",value:function(e){var t=e.header,n=e.content;return o.default.createElement(s.Message,{icon:!0,warning:!0,className:"mt2"},o.default.createElement(s.Icon,{name:"warning"}),o.default.createElement(s.Message.Content,null,o.default.createElement(s.Message.Header,null,t),o.default.createElement("p",null,n)))}},{key:"renderWarningWithButton",value:function(e){var t=e.content;return o.default.createElement(s.Message,{visible:!0,className:"clearfix",warning:!0},o.default.createElement(s.Button,{icon:!0,labelPosition:"right",className:"ml2",floated:"right",disabled:!0},"Next",o.default.createElement(s.Icon,{name:"right arrow"})),this.envTypeId&&o.default.createElement(s.Button,{floated:"right",icon:"left arrow",labelPosition:"left",className:"ml2",content:"Previous",onClick:this.handlePrevious}),o.default.createElement("div",{className:"mt1"},t))}},{key:"canCreateStudy",get:function(){return a.default.get(this.props.userStore,"user.capabilities.canCreateStudy",!0)}},{key:"canSelectStudy",get:function(){return a.default.get(this.props.userStore,"user.capabilities.canSelectStudy",!0)}},{key:"isExternalUser",get:function(){return a.default.get(this.props.userStore,"user.isExternalUser",!0)}},{key:"hasProjects",get:function(){return a.default.get(this.props.userStore,"user.hasProjects",!0)}},{key:"envTypeId",get:function(){return(this.props.match.params||{}).envTypeId}}]),n}(o.default.Component);(0,i.decorate)(A,{getStudiesStore:i.observable,canCreateStudy:i.computed,canSelectStudy:i.computed,hasProjects:i.computed,isExternalUser:i.computed,handleNext:i.action});var j=(0,u.inject)("filesSelection","studiesStoresMap","userStore")((0,c.withRouter)((0,u.observer)(A)));t.default=j},1644:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=v(n(0)),a=v(n(5)),i=n(3),u=n(12),c=n(16),s=n(27),l=n(15),f=v(n(44)),d=v(n(39)),p=v(n(1645)),m=n(187);function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(u,e);var t,n,r,i=b(u);function u(){return y(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"componentDidMount",value:function(){var e=this.studiesStore;e&&((0,l.isStoreReady)(e)||(0,s.swallowError)(e.load()),e.startHeartbeat())}},{key:"componentWillUnmount",value:function(){var e=this.studiesStore;e&&e.stopHeartbeat()}},{key:"render",value:function(){var e=this.studiesStore;return e?(0,l.isStoreError)(e)?o.default.createElement(d.default,{error:e.error,className:"mt3 mr0 ml0"}):(0,l.isStoreLoading)(e)?o.default.createElement(f.default,{segmentCount:3,className:"mt3 mr0 ml0"}):(0,l.isStoreEmpty)(e)?this.renderEmpty():this.renderContent():null}},{key:"renderContent",value:function(){var e=this.studiesStore,t=this.canSelectStudy;return o.default.createElement("div",{className:"mt3 mr0 ml0"},e.list.map((function(e){return o.default.createElement(p.default,{key:e.id,study:e,isSelectable:t})})))}},{key:"renderEmpty",value:function(){var e=this.props.category.id,t=e===m.categories.openData.id,n=e===m.categories.organization.id,r=this.canCreateStudy,a="No studies",i=r?o.default.createElement(o.default.Fragment,null,"To create a study, click on the ",o.default.createElement("b",null,"Create Study")," button at the top."):"";return t&&(a="No studies from the Open Data project",i="The information in this page is updated once a day, please come back later."),n&&(a="No studies shared with you",i=o.default.createElement(o.default.Fragment,null,o.default.createElement("div",null,"Studies created at the organization level can be shared but you don't have any that is shared with you."),r&&o.default.createElement("div",null,"You can create one yourself by clicking on the ",o.default.createElement("b",null,"Create Study")," button at the top."),!r&&o.default.createElement("div",null,"Consider viewing the Open Data studies by clicking on the ",o.default.createElement("span",null,"Open Data")," tab above."))),o.default.createElement(c.Segment,{placeholder:!0,className:"mt3"},o.default.createElement(c.Header,{icon:!0,className:"color-grey"},o.default.createElement(c.Icon,{name:"clipboard outline"}),a,o.default.createElement(c.Header.Subheader,null,i)))}},{key:"studiesStore",get:function(){return this.props.studiesStoresMap[this.props.category.id]}},{key:"canCreateStudy",get:function(){return a.default.get(this.props.userStore,"user.capabilities.canCreateStudy",!0)&&this.hasProjects}},{key:"canSelectStudy",get:function(){var e=a.default.get(this.props.userStore,"user.capabilities.canSelectStudy",!0);return e?this.isExternalUser?e:this.hasProjects:e}},{key:"isExternalUser",get:function(){return a.default.get(this.props.userStore,"user.isExternalUser",!0)}},{key:"hasProjects",get:function(){return a.default.get(this.props.userStore,"user.hasProjects",!0)}}])&&h(t.prototype,n),r&&h(t,r),u}(o.default.Component);(0,i.decorate)(S,{studiesStore:i.computed,canCreateStudy:i.computed,canSelectStudy:i.computed,hasProjects:i.computed,isExternalUser:i.computed});var k=(0,u.inject)("studiesStoresMap","userStore")((0,u.observer)(S));t.default=k},1645:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=d(n(0)),a=n(3),i=n(12),u=n(16),c=d(n(6)),s=d(n(1646)),l=d(n(1647)),f=d(n(1649));function d(e){return e&&e.__esModule?e:{default:e}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(d,e);var t,n,r,i=y(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=i.call(this,e)).handleFileSelection=function(e){var n=t.props.filesSelection;if(n.hasFile(e.id))n.deleteFile(e.id);else{var r=e.id,o=e.name,a=e.description;n.setFile({id:r,name:o,description:a,accessStatus:"approved"})}},t.handleFilesExpanded=function(){t.filesExpanded=!t.filesExpanded},t.handlePermissionsExpanded=function(){t.permissionsExpanded=!t.permissionsExpanded},(0,a.runInAction)((function(){t.filesExpanded=!1,t.permissionsExpanded=!1})),t}return t=d,(n=[{key:"render",value:function(){var e=this,t=this.isSelectable,n=this.study,r=this.props.filesSelection.hasFile(n.id),a={},i={};return r&&(a.color="blue"),t&&(i.onClick=function(){return e.handleFileSelection(n)}),o.default.createElement(u.Segment,p({clearing:!0,padded:!0,raised:!0,className:"mb3"},a),o.default.createElement("div",{className:"flex"},o.default.createElement("div",p({className:"mr2"},i),t&&o.default.createElement(u.Checkbox,{checked:r,style:{marginTop:"3px"}})),o.default.createElement("div",{className:"flex-auto mb1"},this.renderHeader(n),this.renderDescription(n),this.renderFilesAccordion(n),this.renderPermissionsAccordion(n))))}},{key:"renderHeader",value:function(e){var t=this,n=this.isSelectable,r={};return n&&(r.onClick=function(){return t.handleFileSelection(e)}),o.default.createElement(o.default.Fragment,null,e.uploadLocationEnabled&&e.canUpload&&o.default.createElement(f.default,{studyId:e.id}),o.default.createElement(u.Header,p({as:"h3",color:"blue",className:(0,c.default)("mt0",n?"cursor-pointer":"")},r),e.name,o.default.createElement(u.Header.Subheader,null,o.default.createElement("span",{className:"pt1 fs-8 color-grey"},e.id),e.projectId&&o.default.createElement("span",{className:"fs-8 color-grey"}," \xb7 ",e.projectId))))}},{key:"renderDescription",value:function(e){return o.default.createElement("div",null,e.description)}},{key:"renderFilesAccordion",value:function(e){if(e.isOpenDataStudy)return null;if(!e.uploadLocationEnabled)return null;var t=this.filesExpanded;return o.default.createElement(u.Accordion,{className:"mt2"},o.default.createElement(u.Accordion.Title,{active:t,index:0,onClick:this.handleFilesExpanded},o.default.createElement(u.Icon,{name:"dropdown"}),o.default.createElement("b",null,"Files")),o.default.createElement(u.Accordion.Content,{active:t},t&&e.uploadLocationEnabled&&o.default.createElement("div",{className:"mb2"},o.default.createElement(s.default,{study:e}))))}},{key:"renderPermissionsAccordion",value:function(e){if(!e.isOrganizationStudy)return null;var t=this.permissionsExpanded;return o.default.createElement(u.Accordion,{className:"mt0"},o.default.createElement(u.Accordion.Title,{active:t,index:0,onClick:this.handlePermissionsExpanded},o.default.createElement(u.Icon,{name:"dropdown"}),o.default.createElement("b",null,"Permissions")),o.default.createElement(u.Accordion.Content,{active:t},t&&o.default.createElement(l.default,{study:e})))}},{key:"study",get:function(){return this.props.study}},{key:"isSelectable",get:function(){return this.props.isSelectable}}])&&m(t.prototype,n),r&&m(t,r),d}(o.default.Component);(0,a.decorate)(b,{handleFileSelection:a.action,handleFilesExpanded:a.action,handlePermissionsExpanded:a.action,study:a.computed,filesExpanded:a.observable,permissionsExpanded:a.observable,isSelectable:a.computed});var E=(0,i.inject)("filesSelection")((0,i.observer)(b));t.default=E},1646:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=d(n(0)),a=n(3),i=n(12),u=n(16),c=n(27),s=n(15),l=d(n(44)),f=d(n(39));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(d,e);var t,n,r,i=v(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),t=i.call(this,e),(0,a.runInAction)((function(){t.filesStore=e.study.getFilesStore()})),t}return t=d,(n=[{key:"componentDidMount",value:function(){(0,c.swallowError)(this.filesStore.load()),this.filesStore.startHeartbeat()}},{key:"componentWillUnmount",value:function(){this.filesStore.stopHeartbeat()}},{key:"render",value:function(){var e=this.filesStore;return(0,s.isStoreError)(e)?o.default.createElement(f.default,{error:e.error,className:"m0"}):(0,s.isStoreLoading)(e)?o.default.createElement(l.default,{segmentCount:1}):(0,s.isStoreEmpty)(e)?this.renderEmpty():this.renderTable()}},{key:"renderTable",value:function(){return o.default.createElement(o.default.Fragment,null,o.default.createElement(u.Table,{striped:!0},o.default.createElement(u.Table.Header,null,o.default.createElement(u.Table.Row,null,o.default.createElement(u.Table.HeaderCell,null,"Filename"),o.default.createElement(u.Table.HeaderCell,null,"Size"),o.default.createElement(u.Table.HeaderCell,null,"Last Modified"))),o.default.createElement(u.Table.Body,null,this.filesStore.files.map((function(e){return o.default.createElement(u.Table.Row,{key:e.filename},o.default.createElement(u.Table.Cell,null,e.filename),o.default.createElement(u.Table.Cell,null,(0,c.formatBytes)(e.size)),o.default.createElement(u.Table.Cell,null,e.lastModified.toISOString()))})))))}},{key:"renderEmpty",value:function(){return o.default.createElement(u.Segment,{placeholder:!0,className:"mt0"},o.default.createElement(u.Header,{icon:!0,className:"color-grey"},o.default.createElement(u.Icon,{name:"file outline"}),"No files",o.default.createElement(u.Header.Subheader,null,"No files are uploaded yet for this study")))}}])&&p(t.prototype,n),r&&p(t,r),d}(o.default.Component);(0,a.decorate)(g,{filesStore:a.observable});var b=(0,i.observer)(g);t.default=b},1647:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=y(n(5)),i=y(n(0)),u=n(3),c=n(12),s=n(16),l=n(33),f=n(27),d=n(15),p=y(n(44)),m=y(n(39)),v=y(n(1648));function y(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){h(a,r,o,i,u,"next",e)}function u(e){h(a,r,o,i,u,"throw",e)}i(void 0)}))}}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(y,e);var t,n,o,c=w(y);function y(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),(t=c.call(this,e)).enableEditMode=function(){t.permissionsStore.studyPermissions.userTypes.forEach((function(e){t.selectedUserIds[e]=t.permissionsStore.studyPermissions["".concat(e,"Users")]})),t.editModeOn=!0},t.resetForm=function(){t.editModeOn=!1,t.isProcessing=!1,t.selectedUserIds={}},t.submitUpdate=g(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,u.runInAction)((function(){t.isProcessing=!0})),e.prev=1,e.next=4,t.permissionsStore.update(t.selectedUserIds);case 4:(0,l.displaySuccess)("Update Succeeded"),(0,u.runInAction)((function(){t.resetForm()})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),(0,l.displayError)("Update Failed",e.t0),(0,u.runInAction)((function(){t.isProcessing=!1}));case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),(0,u.runInAction)((function(){t.permissionsStore=e.study.getPermissionsStore(),t.currUser=e.userStore.user,t.usersStore=e.usersStore,t.resetForm()})),t}return t=y,(n=[{key:"componentDidMount",value:function(){(0,f.swallowError)(this.permissionsStore.load()),this.permissionsStore.startHeartbeat()}},{key:"componentWillUnmount",value:function(){this.permissionsStore.stopHeartbeat()}},{key:"render",value:function(){return(0,d.isStoreError)(this.permissionsStore)?i.default.createElement(m.default,{error:this.permissionsStore.error,className:"mt0"}):(0,d.isStoreLoading)(this.permissionsStore)||(0,d.isStoreNew)(this.permissionsStore)?i.default.createElement(p.default,{segmentCount:1}):this.renderTable()}},{key:"renderTable",value:function(){var e=this,t=this.permissionsStore.studyPermissions,n=t.adminUsers.some((function(t){return t===e.currUser.uid}));return i.default.createElement(i.default.Fragment,null,i.default.createElement(s.Dimmer.Dimmable,{dimmed:this.isProcessing},i.default.createElement(s.Dimmer,{active:this.isProcessing,inverted:!0},i.default.createElement(s.Loader,{size:"big"})),i.default.createElement(s.Table,{striped:!0,className:"mt0"},i.default.createElement(s.Table.Header,null,i.default.createElement(s.Table.Row,null,i.default.createElement(s.Table.HeaderCell,{width:2},"Permission Level"),i.default.createElement(s.Table.HeaderCell,null,"Users",n&&!this.editModeOn&&i.default.createElement(s.Icon,{name:"pencil",className:"ml1 cursor-pointer",color:"grey",onClick:this.enableEditMode})))),i.default.createElement(s.Table.Body,null,this.permissionsStore.studyPermissions.userTypes.map((function(n){var r=t["".concat(n,"Users")],o=a.default.map(r,(function(e){return{uid:e}})),u=e.usersStore.asUserObjects(o);return i.default.createElement(s.Table.Row,{key:n},i.default.createElement(s.Table.Cell,{style:{textTransform:"capitalize"}},n),i.default.createElement(s.Table.Cell,null,e.editModeOn?e.renderUsersDropdown(n):i.default.createElement(v.default,{users:u})))})))),this.editModeOn&&i.default.createElement(i.default.Fragment,null,i.default.createElement(s.Button,{floated:"right",disabled:this.isProcessing,onClick:this.submitUpdate,size:"mini",color:"blue",icon:!0},"Submit"),i.default.createElement(s.Button,{floated:"right",disabled:this.isProcessing,onClick:this.resetForm,size:"mini"},"Cancel"))))}},{key:"renderUsersDropdown",value:function(e){var t=this,n=(0,u.action)((function(n,r){t.selectedUserIds[e]=r.value}));return i.default.createElement(s.Dropdown,{selection:!0,fluid:!0,multiple:!0,search:!0,options:this.usersStore.asDropDownOptions(),value:this.selectedUserIds[e],placeholder:"Select users",onChange:n})}}])&&b(t.prototype,n),o&&b(t,o),y}(i.default.Component);(0,u.decorate)(O,{editModeOn:u.observable,isProcessing:u.observable,selectedUserIds:u.observable,enableEditMode:u.action,resetForm:u.action,submitUpdate:u.action});var C=(0,c.inject)("userStore","usersStore")((0,c.observer)(O));t.default=C},1648:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(5)),o=u(n(0)),a=n(12),i=n(16);function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,a.observer)((function(e){var t=e.color,n=e.className,a=void 0===n?"":n,u=e.users;return o.default.createElement("div",{className:a},r.default.map(u,(function(e){return o.default.createElement(i.Label,{key:e.username,color:t,image:!0,className:"mt1"},e.firstName,e.lastName,o.default.createElement(i.Label.Detail,null,e.unknown&&"".concat(e.username,"??"),!e.unknown&&(e.email||e.username)))})))}));t.default=c},1649:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=d(n(0)),i=n(12),u=n(3),c=n(16),s=d(n(1650)),l=n(55),f=d(n(1654));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(d,e);var t,n,o,i=y(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),t=i.call(this,e),(0,u.runInAction)((function(){t.modalOpen=!1})),t.fileUploadHandler=t.fileUploadHandler.bind(g(t)),t}return t=d,(n=[{key:"fileUploadHandler",value:function(){var e,t=(e=r.mark((function e(t){var n,o,a,i,u,c;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getFile()){e.next=3;break}throw new Error("No file");case 3:return e.prev=3,e.next=6,(0,l.getPresignedStudyUploadRequests)(this.props.studyId,t.name);case 6:a=e.sent,o=a[t.name],e.next=15;break;case 10:throw e.prev=10,e.t0=e.catch(3),i="Error occurred obtaining presigned request",console.error("".concat(i,":"),e.t0),new Error(i);case 15:if(o){e.next=17;break}throw new Error("Failed to obtain presigned request");case 17:return u=(0,f.default)(n,o.url,o.fields),t.setCancel(u.cancel),u.onProgress(t.updateProgress),e.prev=20,e.next=23,u.done;case 23:e.next=30;break;case 25:throw e.prev=25,e.t1=e.catch(20),c="Error encountered while uploading file",console.error("".concat(c,":"),e.t1),new Error(c);case 30:case"end":return e.stop()}}),e,this,[[3,10],[20,25]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){p(a,r,o,i,u,"next",e)}function u(e){p(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return a.default.createElement(c.Modal,{closeIcon:!0,trigger:this.renderTrigger(),open:this.modalOpen,onClose:(0,u.action)((function(){e.modalOpen=!1}))},a.default.createElement("div",{className:"mt2 animated fadeIn"},a.default.createElement(c.Header,{as:"h3",icon:!0,textAlign:"center",className:"mt3",color:"grey"},"Upload Study Files"),a.default.createElement("div",{className:"mx3 animated fadeIn"},a.default.createElement(s.default,{resourceId:this.props.studyId,fileUploadHandler:this.fileUploadHandler}))))}},{key:"renderTrigger",value:function(){var e=this;return a.default.createElement(c.Button,{floated:"right",color:"blue",basic:!0,onClick:(0,u.action)((function(){e.modalOpen=!0}))},"Upload Files")}}])&&m(t.prototype,n),o&&m(t,o),d}(a.default.Component);(0,u.decorate)(E,{modalOpen:u.observable});var w=(0,i.observer)(E);t.default=w},1650:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(3),i=n(12),u=p(n(4)),c=p(n(0)),s=n(16),l=n(33),f=p(n(1651)),d=p(n(1652));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){m(a,r,o,i,u,"next",e)}function u(e){m(a,r,o,i,u,"throw",e)}i(void 0)}))}}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=(0,i.observer)((function(e){var t=e.files,n=void 0===t?[]:t,r=e.state,o=void 0===r?"PENDING":r,a=e.onCancelSelectFiles,i=e.onCancelUpload,u=e.onClickStartUpload,l=e.onClickUploadMore,p=e.onSelectFiles,m=e.onClickRemoveFile,v=e.onClickCancelFile;return c.default.createElement(s.Segment,{vertical:!0},c.default.createElement(s.Header,{as:"h3"},"Upload Files"),c.default.createElement(f.default,{state:o,onSelectFiles:p}),n.length>0&&c.default.createElement(s.Segment,null,c.default.createElement(s.Grid,null,c.default.createElement(s.Grid.Row,null,c.default.createElement(s.Grid.Column,null,c.default.createElement(d.default,{files:n,state:o,onClickRemoveFile:m,onClickCancelFile:v}))),c.default.createElement(s.Grid.Row,null,c.default.createElement(s.Grid.Column,null,"PENDING"===o?c.default.createElement(s.Button,{floated:"right",basic:!0,color:"blue",onClick:u},"Upload Files"):"UPLOADING"===o?c.default.createElement(s.Button,{floated:"right",basic:!0,color:"blue",loading:!0,disabled:!0},"Uploading"):"COMPLETE"===o?c.default.createElement(s.Button,{floated:"right",basic:!0,color:"blue",onClick:l},"Upload More Files"):null,"PENDING"===o?c.default.createElement(s.Button,{floated:"right",basic:!0,onClick:a},"Cancel"):"UPLOADING"===o?c.default.createElement(s.Button,{floated:"right",basic:!0,onClick:i},"Cancel"):null)))))}));w.propTypes={files:u.default.arrayOf(u.default.shape({name:u.default.string.isRequired,size:u.default.number.isRequired,status:u.default.oneOf(["PENDING","UPLOADING","COMPLETE","FAILED"]).isRequired,uploaded:u.default.number,error:u.default.string})),state:u.default.oneOf(["PENDING","UPLOADING","COMPLETE"]).isRequired,onCancelSelectFiles:u.default.func,onCancelUpload:u.default.func,onClickStartUpload:u.default.func,onClickUploadMore:u.default.func,onSelectFiles:u.default.func,onClickRemoveFile:u.default.func,onClickCancelFile:u.default.func};var S=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(u,e);var t,n,o,i=g(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).handleResetFileUploadGroup=function(){(0,a.runInAction)((function(){t.props.fileUploadsStore.resetFileUploadGroup(t.props.resourceId),t.fileUploadGroup=t.props.fileUploadsStore.getFileUploadGroup(t.props.resourceId)}))},t.handleCancel=function(){t.fileUploadGroup.cancel()},t.handleStart=v(r.mark((function e(){var n,o,a;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fileUploadGroup,e.prev=1,e.next=4,n.start(t.props.fileUploadHandler);case 4:o=0,a=0,n.fileUploadObjects.forEach((function(e){switch(e.status){case"COMPLETE":o++;break;case"FAILED":"Cancelled"!==e.error&&a++}})),a>0&&o>0?(0,l.displayWarning)("File uploads completed with ".concat(a," errors")):a>0?(0,l.displayError)("File uploads failed"):o>0&&(0,l.displaySuccess)("File uploads completed successfully!"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),(0,l.displayError)("File uploads failed: ".concat(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,10]])}))),t.handleCancelFileUpload=function(e){var n=t.fileUploadGroup.getFileUpload(e);n&&n.doCancel()},t.handleRemoveFileUpload=function(e){t.fileUploadGroup.remove(e)},t.handleSelectFiles=function(e){var n=t.fileUploadGroup;e.forEach((function(e){n.add({file:e})}))},(0,a.runInAction)((function(){t.fileUploadGroup=e.fileUploadsStore.getFileUploadGroup(t.props.resourceId)})),t}return t=u,(n=[{key:"componentDidUpdate",value:function(e){var t=this;e.resourceId!==this.props.resourceId&&(0,a.runInAction)((function(){t.fileUploadGroup=t.props.fileUploadsStore.getFileUploadGroup(t.props.resourceId)}))}},{key:"render",value:function(){return c.default.createElement(w,{files:this.fileUploadGroup.fileUploadObjects,state:this.fileUploadGroup.state,onCancelSelectFiles:this.handleResetFileUploadGroup,onCancelUpload:this.handleCancel,onClickStartUpload:this.handleStart,onClickUploadMore:this.handleResetFileUploadGroup,onSelectFiles:this.handleSelectFiles,onClickRemoveFile:this.handleRemoveFileUpload,onClickCancelFile:this.handleCancelFileUpload})}}])&&y(t.prototype,n),o&&y(t,o),u}(c.default.Component);S.propTypes={resourceId:u.default.string.isRequired,fileUploadHandler:u.default.func.isRequired,fileUploadsStore:i.PropTypes.observableObject.isRequired},(0,a.decorate)(S,{fileUploadGroup:a.observable});var k=(0,i.inject)("fileUploadsStore")((0,i.observer)(S));t.default=k},1651:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(n(0)),a=n(3),i=n(12),u=l(n(4)),c=n(16),s=l(n(681));function l(e){return e&&e.__esModule?e:{default:e}}function f(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){o=!0,a=c}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"===typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var S=o.default.forwardRef((function(e,t){var n=e.onChange,r=w(e,["onChange"]),a=g(o.default.useState((0,s.default)()),2),i=a[0],u=a[1];return o.default.createElement("input",h({key:i,ref:t,type:"file",onChange:function(e){n(e),u((0,s.default)())}},r))})),k=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(u,e);var t,n,r,i=m(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),t=i.call(this,e),(0,a.runInAction)((function(){t.highlighted=!1})),t}return t=u,(n=[{key:"setHighlight",value:function(e){var t=this;(0,a.runInAction)((function(){t.highlighted=e}))}},{key:"render",value:function(){var e=this,t=o.default.createRef(),n="PENDING"===this.props.state;return o.default.createElement(c.Segment,{tertiary:this.highlighted,placeholder:!0,onDragEnter:function(t){n&&t.dataTransfer.types.includes("Files")&&(t.preventDefault(),e.setHighlight(!0))},onDragOver:function(t){n&&t.dataTransfer.types.includes("Files")&&(t.preventDefault(),e.setHighlight(!0))},onDragLeave:function(){e.setHighlight(!1)},onDragEnd:function(){e.setHighlight(!1)},onDrop:function(t){if(n&&t.dataTransfer.types.includes("Files")){t.preventDefault(),e.setHighlight(!1);var r=t.dataTransfer.files||[];e.props.onSelectFiles(f(r))}}},o.default.createElement(c.Header,{icon:!0,color:"grey"},o.default.createElement(S,{ref:t,hidden:!0,multiple:!0,onChange:function(t){if(e.props.onSelectFiles){var n=t.currentTarget.files||[];e.props.onSelectFiles(f(n))}}}),"PENDING"===this.props.state?o.default.createElement(o.default.Fragment,null,o.default.createElement(c.Icon,{name:"upload",className:"mb2"}),"Drag and drop",o.default.createElement(c.Divider,{horizontal:!0},"Or"),o.default.createElement(c.Button,{basic:!0,color:"blue",onClick:function(){t.current&&t.current.click()}},"Browse Files")):"UPLOADING"===this.props.state?o.default.createElement(o.default.Fragment,null,o.default.createElement(c.Icon,{loading:!0,name:"circle notch",className:"mb2"}),"Uploading"):"COMPLETE"===this.props.state?o.default.createElement(o.default.Fragment,null,o.default.createElement(c.Icon,{name:"check",className:"mb2"}),"Upload Complete"):null))}}])&&d(t.prototype,n),r&&d(t,r),u}(o.default.Component);k.propTypes={state:u.default.oneOf(["PENDING","UPLOADING","COMPLETE"]).isRequired,onSelectFiles:u.default.func},k.defaultProps={onSelectFiles:null},(0,a.decorate)(k,{setHighlight:a.observable});var O=(0,i.observer)(k);t.default=O},1652:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(0)),o=u(n(1653)),a=n(12),i=n(16);function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,a.observer)((function(e){var t=e.file;return"PENDING"===t.status?"Pending":"UPLOADING"===t.status?r.default.createElement(i.Progress,{size:"small",className:"mb0",indicating:!0,autoSuccess:!0,progress:!0,percent:Math.floor(t.uploaded/t.size*100)}):"FAILED"===t.status?r.default.createElement(r.default.Fragment,null,r.default.createElement(i.Icon,{name:"times",color:"red"})," ","".concat(t.error||"Error")):"COMPLETE"===t.status?r.default.createElement(r.default.Fragment,null,r.default.createElement(i.Icon,{name:"check",color:"green"})," Complete"):"Unknown"})),s=(0,a.observer)((function(e){var t=e.file,n=e.state,o=e.onClickRemove,a=e.onClickCancel;return"PENDING"===t.status?r.default.createElement(i.Button,{floated:"right",icon:"trash",size:"tiny",basic:!0,color:"grey",onClick:o,disabled:"PENDING"!==n}):"UPLOADING"===t.status?r.default.createElement(i.Button,{floated:"right",icon:"remove",size:"tiny",basic:!0,color:"red",onClick:a}):null})),l=(0,a.observer)((function(e){var t=e.file,n=e.state,a=e.onClickRemove,u=e.onClickCancel;return r.default.createElement(i.Table.Row,null,r.default.createElement(i.Table.Cell,null,t.name),r.default.createElement(i.Table.Cell,null,(0,o.default)(t.size)),r.default.createElement(i.Table.Cell,null,r.default.createElement(c,{file:t})),r.default.createElement(i.Table.Cell,null,r.default.createElement(s,{file:t,state:n,onClickRemove:a,onClickCancel:u})))})),f=(0,a.observer)((function(e){var t=e.files,n=void 0===t?[]:t,o=e.state,a=e.onClickRemoveFile,u=e.onClickCancelFile;return r.default.createElement(i.Table,{basic:"very"},r.default.createElement(i.Table.Header,null,r.default.createElement(i.Table.Row,null,r.default.createElement(i.Table.HeaderCell,null,"Filename"),r.default.createElement(i.Table.HeaderCell,null,"Size"),r.default.createElement(i.Table.HeaderCell,null,"Status"),r.default.createElement(i.Table.HeaderCell,null))),r.default.createElement(i.Table.Body,null,n.map((function(e){return r.default.createElement(l,{key:e.id,file:e,state:o,onClickRemove:function(){return a(e.id)},onClickCancel:function(){return u(e.id)}})}))))}));t.default=f},1654:function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){o=!0,a=c}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=new XMLHttpRequest,a=[],i=function(e){a.forEach((function(t){t(e)}))},u=new Promise((function(e,t){o.upload.addEventListener("progress",(function(e){i(e.loaded||0)})),o.upload.addEventListener("error",(function(){t(new Error("Network Error"))})),o.onreadystatechange=function(){4===o.readyState&&(0===o.status?t(new Error("Cancelled")):o.status>=400&&o.status<=599?t(new Error("Error: ".concat(o.statusText))):e())}})),c=new FormData;return Object.entries(n).forEach((function(e){var t=r(e,2),n=t[0],o=t[1];return c.append(n,o)})),c.append("file",e,e.name),o.open("POST",t),o.send(c),{done:u,cancel:function(){o.abort()},onProgress:function(e){a.push(e)}}};t.default=a},1655:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=h(n(0)),i=n(12),u=n(3),c=n(16),s=n(33),l=h(n(61)),f=h(n(49)),d=h(n(52)),p=h(n(74)),m=h(n(228)),v=n(1656),y=n(187);function h(e){return e&&e.__esModule?e:{default:e}}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(h,e);var t,n,o,i=O(h);function h(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=i.call(this,e)).cleanModal=function(){(0,u.runInAction)((function(){t.modalOpen=!1}))},t.handleFormCancel=function(e){e.clear(),t.cleanModal()},t.handleFormError=function(e,t){},t.handleFormSubmission=function(){var e,n=(e=r.mark((function e(n){var o,a,i,u;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=n.values(),a=o.categoryId,i=((0,y.getCategoryById)(a)||{}).name,u=t.getStudiesStore(a),delete o.categoryId,e.next=8,u.createStudy(b({},o,{category:i}));case 8:n.clear(),t.cleanModal(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),(0,s.displayError)(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){w(a,r,o,i,u,"next",e)}function u(e){w(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}(),(0,u.runInAction)((function(){t.cleanModal(),t.form=(0,v.getCreateStudyForm)()})),t}return t=h,(n=[{key:"getStudiesStore",value:function(e){return this.props.studiesStoresMap[e]}},{key:"render",value:function(){return a.default.createElement(c.Modal,{closeIcon:!0,trigger:this.renderTrigger(),open:this.modalOpen,onClose:this.cleanModal},a.default.createElement("div",{className:"mt2"},a.default.createElement(c.Header,{as:"h3",icon:!0,textAlign:"center",className:"mt3",color:"grey"},"Create Study"),a.default.createElement("div",{className:"mx3"},this.renderCreateStudyForm())))}},{key:"renderTrigger",value:function(){var e=this;return a.default.createElement(c.Button,{floated:"right",color:"blue",onClick:(0,u.action)((function(){e.modalOpen=!0}))},"Create Study")}},{key:"renderCreateStudyForm",value:function(){var e=this.form,t=this.props.userStore.projectIdDropdown;return a.default.createElement(c.Segment,{clearing:!0,className:"p3 mb3"},a.default.createElement(f.default,{form:e,onCancel:this.handleFormCancel,onSuccess:this.handleFormSubmission},(function(n){var r=n.processing,o=n.onCancel;return a.default.createElement(a.default.Fragment,null,a.default.createElement(d.default,{field:e.$("id")}),a.default.createElement(m.default,{field:e.$("categoryId")}),a.default.createElement(d.default,{field:e.$("name")}),a.default.createElement(p.default,{field:e.$("description")}),a.default.createElement(l.default,{field:e.$("projectId"),options:t,fluid:!0,selection:!0}),a.default.createElement(c.Button,{className:"ml2",floated:"right",color:"blue",icon:!0,disabled:r,type:"submit"},"Create Study"),a.default.createElement(c.Button,{floated:"right",disabled:r,onClick:o},"Cancel"))})))}}])&&S(t.prototype,n),o&&S(t,o),h}(a.default.Component);(0,u.decorate)(A,{form:u.observable,modalOpen:u.observable,getStudiesStore:u.observable,cleanModal:u.action,handleFormSubmission:u.action});var j=(0,i.inject)("userStore","studiesStoresMap")((0,i.observer)(A));t.default=j},1656:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCreateStudyForm=void 0;var r=n(91),o=n(187),a={id:{label:"ID",placeholder:"A unique ID used to reference the study",extra:{explain:'Must be less than 100 characters long and only contain alphanumeric characters, "-", or "_"'},rules:["required","string","between:1,100","regex:/^[A-Za-z0-9-_]+$/"]},categoryId:{label:"",extra:{explain:'If you choose "My Study", only you can access it. If you choose "Organization Study", you get to decide who can access it.',yesLabel:"My Study",noLabel:"Organization Study",yesValue:o.categories.myStudies.id,noValue:o.categories.organization.id,showHeader:!1},rules:["required"]},name:{label:"Name",placeholder:"A name for the study",rules:["string","max:2048"]},description:{label:"Description",placeholder:"A description of the study",rules:["string","max:8192"]},projectId:{label:"Project ID",placeholder:"The project ID associated with this study",rules:["required","string","min:1","max:100"]}};t.getCreateStudyForm=function(){return(0,r.createForm)(a)}},1657:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=g(n(5)),i=g(n(0)),u=n(3),c=n(12),s=n(31),l=n(16),f=n(38),d=n(33),p=n(188),m=n(685),v=g(n(686)),y=g(n(684)),h=g(n(699));function g(e){return e&&e.__esModule?e:{default:e}}function b(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(s,e);var t,n,o,c=S(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=c.call(this,e)).handlePrevious=function(){t.envTypeId?t.goto("/studies/workspace-type/".concat(encodeURIComponent(t.envTypeId))):t.goto("/studies")},t.handleCompleted=function(){var e,n=(e=r.mark((function e(n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.props.filesSelection.cleanup(),(0,d.displaySuccess)("The research workspace is being provisioned"),t.goto("/workspaces");case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){b(a,r,o,i,u,"next",e)}function u(e){b(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}(),(0,u.runInAction)((function(){var e=p.enableBuiltInWorkspaces?"selectComputePlatform":t.envTypeId?"selectEnvConfig":"selectEnvType";t.currentStep=m.CurrentStep.create({step:e})})),t}return t=s,(n=[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"goto",value:function(e){(0,f.gotoFn)(this)(e)}},{key:"render",value:function(){return i.default.createElement(l.Container,{className:"mt3"},this.renderTitle(),this.renderStepsProgress(),this.renderContent())}},{key:"renderTitle",value:function(){return i.default.createElement("div",{className:"flex"},i.default.createElement(l.Header,{as:"h3",className:"color-grey mt1 mb0 flex-auto"},i.default.createElement(l.Icon,{name:"book",className:"align-top"}),i.default.createElement(l.Header.Content,{className:"left-align"},"Studies")))}},{key:"renderStepsProgress",value:function(){return i.default.createElement(y.default,{currentStep:this.currentStep,envTypeImmutable:!!this.envTypeId})}},{key:"renderContent",value:function(){var e=this.studyIds;return a.default.isEmpty(e)?this.renderEmpty():p.enableBuiltInWorkspaces?i.default.createElement(v.default,{currentStep:this.currentStep,studyIds:this.studyIds,onPrevious:this.handlePrevious,onCompleted:this.handleCompleted}):i.default.createElement(h.default,{currentStep:this.currentStep,studyIds:this.studyIds,onPrevious:this.handlePrevious,onCompleted:this.handleCompleted,envTypeId:this.envTypeId,envTypeImmutable:!!this.envTypeId})}},{key:"renderEmpty",value:function(){return i.default.createElement(i.default.Fragment,null,i.default.createElement(l.Segment,{placeholder:!0,className:"mt2"},i.default.createElement(l.Header,{icon:!0,className:"color-grey"},i.default.createElement(l.Icon,{name:"clipboard outline"}),"No studies selected",i.default.createElement(l.Header.Subheader,null,"Before you can create a workspace, you need to select one or more studies."))),this.renderButtons())}},{key:"renderButtons",value:function(){return i.default.createElement("div",{className:"mt3"},i.default.createElement(l.Button,{floated:"right",icon:"right arrow",labelPosition:"right",className:"ml2",primary:!0,content:"Next",disabled:!0}),i.default.createElement(l.Button,{floated:"right",icon:"left arrow",labelPosition:"left",className:"ml2",content:"Previous",onClick:this.handlePrevious}))}},{key:"studyIds",get:function(){return this.props.filesSelection.fileNames}},{key:"envTypeId",get:function(){return(this.props.match.params||{}).envTypeId}}])&&E(t.prototype,n),o&&E(t,o),s}(i.default.Component);(0,u.decorate)(C,{handlePrevious:u.action,handleCompleted:u.action,studyIds:u.computed,currentStep:u.observable});var P=(0,c.inject)("filesSelection")((0,s.withRouter)((0,c.observer)(C)));t.default=P},187:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCategoryById=function(e){return o.default.find(a,["id",e])},t.categories=void 0;var r,o=(r=n(5))&&r.__esModule?r:{default:r};var a={myStudies:{name:"My Studies",id:"my-studies"},organization:{name:"Organization",id:"organization"},openData:{name:"Open Data",id:"open-data"}};t.categories=a},188:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableBuiltInWorkspaces=void 0;t.enableBuiltInWorkspaces=!1},200:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=f(n(5)),o=f(n(0)),a=n(12),i=n(16),u=f(n(6)),c=f(n(159)),s=f(n(160)),l=f(n(161));function f(e){return e&&e.__esModule?e:{default:e}}var d=(0,a.observer)((function(e){var t=e.field,n=e.disabled,a=void 0!==n&&n,f=e.show,d=void 0===f?"both":f,p=e.className,m=void 0===p?"mb4":p,v=e.size,y=void 0===v?"large":v,h=t.id,g=t.value,b=t.sync,E=t.error,w=void 0===E?"":E,S=t.extra,k=(void 0===S?{}:S)||{},O=k.yesLabel,C=void 0===O?"Yes":O,P=k.noLabel,A=void 0===P?"No":P,j=!r.default.isEmpty(w),I=t.disabled||a,x=I?"disabled":"",T=j?"error":"",N=r.default.isBoolean(g)&&!0===g||"true"===g,_=I?"op-3":"cursor-pointer",D=function(e){return function(n){n.preventDefault(),n.stopPropagation(),I||(b(e),t.validate({showErrors:!0}))}},R={name:"toggle on",color:j?"red":"blue",size:y,className:"mr1",disabled:I},M={name:"toggle off",color:j?"red":"grey",size:y,className:"mr1",disabled:I},B="both"===d||"headerOnly"===d,F="headerOnly"===d,U="toggleOnly"===d,L=o.default.createElement("div",{className:(0,u.default)(j?"color-red":"")},N&&o.default.createElement("span",{id:h,className:(0,u.default)(_),onClick:D(!1)},o.default.createElement(i.Icon,R),C),!N&&o.default.createElement("span",{id:h,className:(0,u.default)("op-65",_),onClick:D(!0)},o.default.createElement(i.Icon,M),A));return o.default.createElement("div",{className:(0,u.default)(m,T,x)},B&&o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:"flex flex-wrap mb1"},o.default.createElement(c.default,{field:t,className:"mt0 mb0 mr2"}),!F&&L),o.default.createElement(s.default,{field:t}),o.default.createElement(l.default,{field:t})),U&&L)}));t.default=d},2046:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getExternalUserPinForm=function(){return(0,r.createForm)([{name:"pin",label:"PIN",placeholder:"A PIN or password to secure your IAM credentials",rules:"required|string|between:4,16"}])},t.getExternalUserPinFormFields=o;var r=n(91);function o(){return[{name:"pin",label:"PIN",placeholder:"A PIN or password to secure your IAM credentials",rules:"required|string|between:4,16"}]}},2047:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(0)),a=i(n(52));function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(f,e);var t,n,r,i=l(f);function f(){return u(this,f),i.apply(this,arguments)}return t=f,(n=[{key:"render",value:function(){var e=this.props.form.$("pin");return o.default.createElement(a.default,{field:e,disabled:this.props.processing,type:"password",icon:"lock",iconPosition:"left"})}}])&&c(t.prototype,n),r&&c(t,r),f}(o.default.PureComponent);t.default=p},2048:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=g(n(5)),i=g(n(0)),u=n(3),c=n(12),s=n(31),l=n(16),f=g(n(6)),d=n(33),p=n(27),m=n(15),v=g(n(44)),y=n(38),h=g(n(39));function g(e){return e&&e.__esModule?e:{default:e}}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(s,e);var t,n,o,c=k(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=c.call(this,e)).handleSelectedComputeType=function(e){t.selectedPlatformId=e},t.handlePrevious=function(e){e.preventDefault(),e.stopPropagation(),a.default.isFunction(t.props.onPrevious)&&t.props.onPrevious()},t.handleNext=function(){var e,n=(e=r.mark((function e(n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),n.stopPropagation(),!a.default.isFunction(t.props.onNext)){e.next=15;break}return e.prev=3,t.processing=!0,e.next=7,t.props.onNext(t.selectedPlatformId);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),(0,d.displayError)(e.t0);case 12:return e.prev=12,(0,u.runInAction)((function(){t.processing=!1})),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[3,9,12,15]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){E(a,r,o,i,u,"next",e)}function u(e){E(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}(),(0,u.runInAction)((function(){t.selectedPlatformId=void 0,t.processing=!1})),t}return t=s,(n=[{key:"componentDidMount",value:function(){window.scrollTo(0,0),(0,p.swallowError)(this.computePlatformsStore.load())}},{key:"goto",value:function(e){(0,y.gotoFn)(this)(e)}},{key:"render",value:function(){var e=this.computePlatformsStore;return e?(0,m.isStoreError)(e)?this.renderLoadingError():(0,m.isStoreLoading)(e)?i.default.createElement(v.default,{className:"mt2"}):(0,m.isStoreEmpty)(e)?this.renderEmpty():this.renderContent():null}},{key:"renderContent",value:function(){var e=a.default.isUndefined(this.selectedPlatformId);return i.default.createElement("div",{className:"mt2 animated fadeIn"},this.renderCards(),this.renderButtons({nextDisabled:e}))}},{key:"renderCards",value:function(){var e=this,t=this.processing,n=this.computePlatformsStore.list||[],r=function(t){return t.id===e.selectedPlatformId};return i.default.createElement(l.Card.Group,{stackable:!0,itemsPerRow:3},a.default.map(n,(function(n){return i.default.createElement(l.Card,b({key:n.id,raised:!0,className:(0,f.default)("mb3",{"cursor-pointer":!t})},function(n){var o={};return r(n)&&(o.color="blue"),t||(o.onClick=function(){return e.handleSelectedComputeType(n.id)}),o}(n)),i.default.createElement(l.Card.Content,null,i.default.createElement(l.Card.Header,null,i.default.createElement(l.Radio,{className:"mr2",checked:r(n),disabled:t}),n.title,i.default.createElement(l.Divider,null)),i.default.createElement(l.Card.Description,null,i.default.createElement("div",{className:"mb3 pr1 pl1 pb1"},i.default.createElement("div",{dangerouslySetInnerHTML:{__html:n.descHtml}})))))})))}},{key:"renderLoadingError",value:function(){var e=this.computePlatformsStore;return i.default.createElement(i.default.Fragment,null,i.default.createElement(h.default,{error:e.error,className:"p0 mt2 mb3"}),this.renderButtons())}},{key:"renderEmpty",value:function(){return i.default.createElement(i.default.Fragment,null,i.default.createElement(l.Segment,{placeholder:!0,className:"mt2"},i.default.createElement(l.Header,{icon:!0,className:"color-grey"},i.default.createElement(l.Icon,{name:"server"}),"No compute platform",i.default.createElement(l.Header.Subheader,null,"There are no compute platform to choose from. Your role might be restricted. Please contact your administrator."))),this.renderButtons())}},{key:"renderButtons",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nextDisabled,n=void 0===t||t,r=this.processing;return i.default.createElement("div",{className:"mt3"},i.default.createElement(l.Button,{floated:"right",icon:"right arrow",labelPosition:"right",className:"ml2",primary:!0,content:"Next",loading:r,disabled:n||r,onClick:this.handleNext}),i.default.createElement(l.Button,{floated:"right",icon:"left arrow",labelPosition:"left",className:"ml2",content:"Previous",disabled:r,onClick:this.handlePrevious}))}},{key:"userStore",get:function(){return this.props.userStore}},{key:"computePlatformsStore",get:function(){return this.props.computePlatformsStore}}])&&w(t.prototype,n),o&&w(t,o),s}(i.default.Component);(0,u.decorate)(P,{handlePrevious:u.action,handleNext:u.action,handleSelectedComputeType:u.action,userStore:u.computed,computePlatformsStore:u.computed,processing:u.observable,selectedPlatformId:u.observable});var A=(0,c.inject)("userStore","computePlatformsStore")((0,s.withRouter)((0,c.observer)(P)));t.default=A},2049:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=d(n(5)),i=d(n(0)),u=n(3),c=n(12),s=n(16),l=d(n(2050)),f=d(n(2052));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){y(a,r,o,i,u,"next",e)}function u(e){y(a,r,o,i,u,"throw",e)}i(void 0)}))}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(c,e);var t,n,o,u=w(c);function c(){var e;g(this,c);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=u.call.apply(u,[this].concat(n))).handlePrevious=function(){a.default.isFunction(e.props.onPrevious)&&e.props.onPrevious()},e.handleCreate=function(){var t=h(r.mark((function t(n){var o,a,i;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.studyIds||[],a=e.environmentsStore,t.next=4,a.createEnvironment(m({},n,{studyIds:o}));case 4:return i=t.sent,t.abrupt("return",e.props.onCompleted(i));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return t=c,(n=[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e=this.configurations;return a.default.isEmpty(e)?this.renderEmpty():this.renderContent()}},{key:"renderContent",value:function(){var e=this.platformId,t=this.configurations,n=this.platformTitle,r=this.defaultCidr,o=this.userStore.user.isExternalUser;return i.default.createElement("div",{className:"mt2 animated fadeIn"},!o&&i.default.createElement(l.default,{platformId:e,configurations:t,title:n,defaultCidr:r,onPrevious:this.handlePrevious,onNext:this.handleCreate}),o&&i.default.createElement(f.default,{platformId:e,configurations:t,title:n,defaultCidr:r,onPrevious:this.handlePrevious,onNext:this.handleCreate}))}},{key:"renderEmpty",value:function(){var e=this.platformTitle;return i.default.createElement(i.default.Fragment,null,i.default.createElement(s.Header,{as:"h3",textAlign:"center",className:"mt2"},e),i.default.createElement(s.Segment,{placeholder:!0,className:"mt2"},i.default.createElement(s.Header,{icon:!0,className:"color-grey"},i.default.createElement(s.Icon,{name:"server"}),"No compute platform configurations",i.default.createElement(s.Header.Subheader,null,"There are no compute platform configurations to choose from. Your role might be restricted. Please contact your administrator."))),this.renderButtons())}},{key:"renderButtons",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nextDisabled,n=void 0===t||t;return i.default.createElement("div",{className:"mt3"},i.default.createElement(s.Button,{floated:"right",className:"ml2",primary:!0,content:"Create Research Workspace",disabled:n}),i.default.createElement(s.Button,{floated:"right",icon:"left arrow",labelPosition:"left",className:"ml2",content:"Previous",onClick:this.handlePrevious}))}},{key:"platformId",get:function(){return this.props.platformId}},{key:"platformTitle",get:function(){return a.default.get(this.computePlatformsStore.getComputePlatform(this.platformId),"title")}},{key:"userStore",get:function(){return this.props.userStore}},{key:"clientInformationStore",get:function(){return this.props.clientInformationStore}},{key:"computePlatformsStore",get:function(){return this.props.computePlatformsStore}},{key:"environmentsStore",get:function(){return this.props.environmentsStore}},{key:"configurations",get:function(){var e=this.computePlatformsStore.getComputePlatform(this.platformId);return e?e.configurationsList:[]}},{key:"defaultCidr",get:function(){var e=a.default.get(a.default.first(this.configurations),"defaultCidr");if(!a.default.isUndefined(e))return a.default.isEmpty(e)?a.default.isEmpty(this.clientInformationStore.ipAddress)?"":"".concat(this.clientInformationStore.ipAddress,"/32"):e}},{key:"studyIds",get:function(){return this.props.studyIds}}])&&b(t.prototype,n),o&&b(t,o),c}(i.default.Component);(0,u.decorate)(O,{handlePrevious:u.action,handleCreate:u.action,userStore:u.computed,computePlatformsStore:u.computed,clientInformationStore:u.computed,platformId:u.computed,defaultCidr:u.computed,platformTitle:u.computed,environmentsStore:u.computed,studyIds:u.computed});var C=(0,c.inject)("userStore","computePlatformsStore","clientInformationStore","environmentsStore")((0,c.observer)(O));t.default=C},2050:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=h(n(5)),i=h(n(0)),u=n(3),c=n(12),s=n(16),l=n(33),f=h(n(61)),d=h(n(49)),p=h(n(52)),m=h(n(74)),v=n(2051),y=h(n(698));function h(e){return e&&e.__esModule?e:{default:e}}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(h,e);var t,n,o,c=O(h);function h(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=c.call(this,e)).handlePrevious=function(){if(a.default.isFunction(t.props.onPrevious))return t.props.onPrevious()},t.handleNext=function(){var e,n=(e=r.mark((function e(n){var o,i;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=b({},n.values(),{params:{},platformId:t.platformId}),i=a.default.find(t.configurations,["id",o.configurationId]),a.default.forEach(a.default.keys(i.mutableParams),(function(e){a.default.has(o,e)&&(o.params[e]=o[e],delete o[e])})),e.prev=3,e.next=6,t.props.onNext(o);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),(0,l.displayError)(e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){w(a,r,o,i,u,"next",e)}function u(e){w(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}(),(0,u.runInAction)((function(){t.form=(0,v.getCreateInternalPlatformForm)({projectIdOptions:t.projectIdOptions,cidr:t.props.defaultCidr})})),t}return t=h,(n=[{key:"render",value:function(){var e=this.props.title||"";return i.default.createElement("div",{className:"mt2"},i.default.createElement(s.Header,{as:"h3",textAlign:"center"},e),this.renderForm())}},{key:"renderForm",value:function(){var e=this.form,t=!a.default.isUndefined(this.props.defaultCidr),n=this.configurations;return i.default.createElement(s.Segment,{clearing:!0,className:"p3 mb3"},i.default.createElement(d.default,{form:e,onCancel:this.handlePrevious,onSuccess:this.handleNext},(function(r){var o=r.processing,a=r.onCancel;return i.default.createElement(i.default.Fragment,null,i.default.createElement(p.default,{field:e.$("name")}),t&&i.default.createElement(p.default,{field:e.$("cidr")}),i.default.createElement(f.default,{field:e.$("projectId"),fluid:!0,selection:!0}),i.default.createElement(y.default,{configurations:n,formField:e.$("configurationId")}),i.default.createElement(m.default,{field:e.$("description")}),i.default.createElement(s.Button,{floated:"right",className:"ml2",primary:!0,content:"Create Research Workspace",disabled:o,type:"submit"}),i.default.createElement(s.Button,{floated:"right",icon:"left arrow",labelPosition:"left",className:"ml2",content:"Previous",disabled:o,onClick:a}))})))}},{key:"projectIdOptions",get:function(){return this.userStore.projectIdDropdown}},{key:"platformId",get:function(){return this.props.platformId}},{key:"configurations",get:function(){return this.props.configurations}},{key:"userStore",get:function(){return this.props.userStore}}])&&S(t.prototype,n),o&&S(t,o),h}(i.default.Component);(0,u.decorate)(A,{form:u.observable,platformId:u.computed,configurations:u.computed,userStore:u.computed,projectIdOptions:u.computed,handlePrevious:u.action});var j=(0,c.inject)("userStore","clientInformationStore")((0,c.observer)(A));t.default=j},2051:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCreateInternalPlatformForm=function(){return(0,a.createForm)(i.apply(void 0,arguments))};var r,o=(r=n(5))&&r.__esModule?r:{default:r},a=n(91);var i=function(e){var t=e.projectIdOptions,n=e.cidr,r={name:{label:"Name",placeholder:"Type a name for this research workspace",extra:{explain:"Name can contain only alphanumeric characters (case sensitive) and hyphens. It must start with an alphabetic character and cannot be longer than 128 characters"},rules:"required|string|between:3,128|regex:/^[A-Za-z][A-Za-z0-9-]+$/"},description:{label:"Description",placeholder:"The description of this research workspace",rules:"required|string|between:3,2048"},projectId:{label:"Project ID",placeholder:"The project ID associated with this study",rules:["required","string","min:1","max:100"],extra:{options:t}},configurationId:{label:"Configuration",placeholder:"The configuration for the research workspace",rules:"required"}};return o.default.isUndefined(n)||(r.cidr={label:"Restricted CIDR",extra:{explain:"This research workspace will only be reachable from this CIDR. You can get your organization's CIDR range from your IT department. The provided default is the CIDR that restricts to your IP address."},placeholder:"The CIDR range to restrict research workspace access to",rules:"required|cidr",value:n}),r}},2052:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=h(n(5)),i=h(n(0)),u=n(3),c=n(12),s=n(16),l=h(n(49)),f=h(n(52)),d=h(n(74)),p=n(33),m=n(135),v=n(2053),y=h(n(698));function h(e){return e&&e.__esModule?e:{default:e}}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(h,e);var t,n,o,c=O(h);function h(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=c.call(this,e)).handlePrevious=function(){if(a.default.isFunction(t.props.onPrevious))return t.props.onPrevious()},t.handleNext=function(){var e,n=(e=r.mark((function e(n){var o,i,u,c,s,l,f,d;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=b({},n.values(),{params:{},platformId:t.platformId}),i=a.default.find(t.configurations,["id",o.configurationId]),a.default.forEach(a.default.keys(i.mutableParams),(function(e){a.default.has(o,e)&&(o.params[e]=o[e],delete o[e])})),u=t.askForCredentials,c=t.userStore.user,s=["accessKeyId","secretAccessKey"],e.prev=6,!u){e.next=15;break}return(l=a.default.pick(o,s)).region=m.awsRegion,f=t.usersStore,e.next=13,c.setEncryptedCreds(l,o.pin);case 13:return e.next=15,f.updateUser(c);case 15:return d=a.default.omit(o,s),e.next=18,t.props.onNext(d);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(6),(0,p.displayError)(e.t0);case 23:case"end":return e.stop()}}),e,null,[[6,20]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){w(a,r,o,i,u,"next",e)}function u(e){w(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}(),t.handleForgotPin=function(e){e.preventDefault(),e.stopPropagation();var n=t.form,r=function(e){var t=e.rules;a.default.startsWith("required")||e.set("rules","required|".concat(t))};r(n.$("accessKeyId")),r(n.$("secretAccessKey")),t.askForCredentials=!0},(0,u.runInAction)((function(){t.askForCredentials=!t.userStore.user.hasCredentials,t.form=(0,v.getCreateExternalPlatformForm)({askForCredentials:t.askForCredentials,cidr:t.props.defaultCidr})})),t}return t=h,(n=[{key:"render",value:function(){var e=this.props.title||"";return i.default.createElement("div",{className:"mt2"},i.default.createElement(s.Header,{as:"h3",textAlign:"center"},e),this.renderForm())}},{key:"renderForm",value:function(){var e=this,t=this.form,n=!a.default.isUndefined(this.props.defaultCidr),r=this.configurations,o=this.askForCredentials;return i.default.createElement(s.Segment,{clearing:!0,className:"p3 mb3"},i.default.createElement(l.default,{form:t,onCancel:this.handlePrevious,onSuccess:this.handleNext},(function(a){var u=a.processing,c=a.onCancel;return i.default.createElement(i.default.Fragment,null,i.default.createElement(f.default,{field:t.$("name")}),n&&i.default.createElement(f.default,{field:t.$("cidr")}),i.default.createElement(y.default,{configurations:r,formField:t.$("configurationId")}),i.default.createElement(d.default,{field:t.$("description")}),o&&i.default.createElement(i.default.Fragment,null,i.default.createElement(f.default,{field:t.$("accessKeyId")}),i.default.createElement(f.default,{field:t.$("secretAccessKey"),type:"password"})),i.default.createElement(f.default,{field:t.$("pin"),type:"password",icon:"lock",iconPosition:"left"}),!o&&i.default.createElement(s.Button,{floated:"left",disabled:u,onClick:e.handleForgotPin},"Forgot PIN?"),i.default.createElement(s.Button,{floated:"right",className:"ml2",primary:!0,content:"Create Research Workspace",disabled:u,type:"submit"}),i.default.createElement(s.Button,{floated:"right",icon:"left arrow",labelPosition:"left",className:"ml2",content:"Previous",disabled:u,onClick:c}))})))}},{key:"platformId",get:function(){return this.props.platformId}},{key:"configurations",get:function(){return this.props.configurations}},{key:"userStore",get:function(){return this.props.userStore}},{key:"usersStore",get:function(){return this.props.usersStore}}])&&S(t.prototype,n),o&&S(t,o),h}(i.default.Component);(0,u.decorate)(A,{form:u.observable,platformId:u.computed,askForCredentials:u.observable,configurations:u.computed,userStore:u.computed,usersStore:u.computed,handlePrevious:u.action,handleForgotPin:u.action});var j=(0,c.inject)("userStore","usersStore","clientInformationStore")((0,c.observer)(A));t.default=j},2053:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCreateExternalPlatformForm=function(){return(0,a.createForm)(i.apply(void 0,arguments))};var r,o=(r=n(5))&&r.__esModule?r:{default:r},a=n(91);var i=function(e){var t=e.askForCredentials,n=e.cidr,r=t?"required|":"",a={name:{label:"Name",placeholder:"Type a name for this research workspace",extra:{explain:"Name can contain only alphanumeric characters (case sensitive) and hyphens. It must start with an alphabetic character and cannot be longer than 128 characters"},rules:"required|string|between:3,128|regex:/^[A-Za-z][A-Za-z0-9-]+$/"},description:{label:"Description",placeholder:"The description of this research workspace",rules:"required|string|between:3,2048"},configurationId:{label:"Configuration",placeholder:"The configuration for the research workspace",rules:"required"},accessKeyId:{label:"IAM Access Key Id",placeholder:"Access key for your IAM user",rules:"".concat(r,"string|between:16,128")},secretAccessKey:{label:"IAM Secret Access Key",placeholder:"Secret access key for your IAM user",rules:"".concat(r,"string|size:40")},pin:{label:"PIN",placeholder:"A PIN or password to secure your IAM credentials",rules:"required|string|between:4,16"}};return o.default.isUndefined(n)||(a.cidr={label:"Restricted CIDR",extra:{explain:"This research workspace will only be reachable from this CIDR. You can get your organization's CIDR range from your IT department. The provided default is the CIDR that restricts to your IP address."},placeholder:"The CIDR range to restrict research workspace access to",rules:"required|cidr",value:n}),a}},2054:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=g(n(5)),i=g(n(0)),u=n(3),c=n(12),s=n(31),l=n(16),f=g(n(6)),d=n(33),p=n(27),m=n(15),v=g(n(44)),y=n(38),h=g(n(39));function g(e){return e&&e.__esModule?e:{default:e}}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(s,e);var t,n,o,c=k(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=c.call(this,e)).handleSelectedEnvType=function(e){t.selectedEnvTypeId=e},t.handlePrevious=function(e){e.preventDefault(),e.stopPropagation(),a.default.isFunction(t.props.onPrevious)&&t.props.onPrevious()},t.handleNext=function(){var e,n=(e=r.mark((function e(n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),n.stopPropagation(),!a.default.isFunction(t.props.onNext)){e.next=15;break}return e.prev=3,t.processing=!0,e.next=7,t.props.onNext(t.selectedEnvTypeId);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),(0,d.displayError)(e.t0);case 12:return e.prev=12,(0,u.runInAction)((function(){t.processing=!1})),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[3,9,12,15]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){E(a,r,o,i,u,"next",e)}function u(e){E(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}(),(0,u.runInAction)((function(){t.selectedEnvTypeId=void 0,t.processing=!1})),t}return t=s,(n=[{key:"componentDidMount",value:function(){window.scrollTo(0,0),(0,p.swallowError)(this.envTypesStore.load())}},{key:"goto",value:function(e){(0,y.gotoFn)(this)(e)}},{key:"render",value:function(){var e=this.envTypesStore;return e?(0,m.isStoreError)(e)?this.renderLoadingError():(0,m.isStoreLoading)(e)?i.default.createElement(v.default,{className:"mt2"}):(0,m.isStoreEmpty)(e)?this.renderEmpty():this.renderContent():null}},{key:"renderContent",value:function(){var e=a.default.isUndefined(this.selectedEnvTypeId);return i.default.createElement("div",{className:"mt2 animated fadeIn"},this.renderCards(),this.renderButtons({nextDisabled:e}))}},{key:"renderCards",value:function(){var e=this,t=this.processing,n=this.envTypesStore.listApproved||[],r=function(t){return t.id===e.selectedEnvTypeId};return i.default.createElement(l.Card.Group,{stackable:!0,itemsPerRow:3},a.default.map(n,(function(n){return i.default.createElement(l.Card,b({"data-testid":"env-type-card",key:n.id,raised:!0,className:(0,f.default)("mb3",{"cursor-pointer":!t})},function(n){var o={};return r(n)&&(o.color="blue"),t||(o.onClick=function(){return e.handleSelectedEnvType(n.id)}),o}(n)),i.default.createElement(l.Card.Content,null,i.default.createElement(l.Card.Header,null,i.default.createElement("div",{className:"flex mt1"},i.default.createElement(l.Radio,{className:"mr2",checked:r(n),disabled:t}),i.default.createElement(l.Header,{as:"h4",className:"flex-auto mt0 pt0"},n.name)),i.default.createElement(l.Divider,null)),i.default.createElement(l.Card.Description,null,i.default.createElement("div",{className:"mb3 pr1 pl1 pb1"},i.default.createElement("div",{dangerouslySetInnerHTML:{__html:n.descHtml}})))))})))}},{key:"renderLoadingError",value:function(){var e=this.envTypesStore;return i.default.createElement(i.default.Fragment,null,i.default.createElement(h.default,{error:e.error,className:"p0 mt2 mb3"}),this.renderButtons())}},{key:"renderEmpty",value:function(){return i.default.createElement(i.default.Fragment,null,i.default.createElement(l.Segment,{placeholder:!0,className:"mt2"},i.default.createElement(l.Header,{icon:!0,className:"color-grey"},i.default.createElement(l.Icon,{name:"server"}),"No workspace types",i.default.createElement(l.Header.Subheader,null,"There are no workspace types to choose from. Your role might be restricted. Please contact your administrator."))),this.renderButtons())}},{key:"renderButtons",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nextDisabled,n=void 0===t||t,r=this.processing;return i.default.createElement("div",{className:"mt3"},i.default.createElement(l.Button,{floated:"right",icon:"right arrow",labelPosition:"right",className:"ml2",primary:!0,content:"Next",loading:r,disabled:n||r,onClick:this.handleNext}),i.default.createElement(l.Button,{floated:"right",icon:"left arrow",labelPosition:"left",className:"ml2",content:"Previous",disabled:r,onClick:this.handlePrevious}))}},{key:"userStore",get:function(){return this.props.userStore}},{key:"envTypesStore",get:function(){return this.props.envTypesStore}}])&&w(t.prototype,n),o&&w(t,o),s}(i.default.Component);(0,u.decorate)(P,{handlePrevious:u.action,handleNext:u.action,handleSelectedEnvType:u.action,userStore:u.computed,envTypesStore:u.computed,processing:u.observable,selectedEnvTypeId:u.observable});var A=(0,c.inject)("userStore","envTypesStore")((0,s.withRouter)((0,c.observer)(P)));t.default=A},2055:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=v(n(5)),i=v(n(0)),u=n(3),c=n(12),s=n(16),l=n(27),f=n(15),d=v(n(44)),p=v(n(39)),m=v(n(2056));function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){b(a,r,o,i,u,"next",e)}function u(e){b(a,r,o,i,u,"throw",e)}i(void 0)}))}}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(c,e);var t,n,o,u=O(c);function c(){var e;w(this,c);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=u.call.apply(u,[this].concat(n))).handlePrevious=function(){a.default.isFunction(e.props.onPrevious)&&e.props.onPrevious()},e.handleCreate=function(){var t=E(r.mark((function t(n){var o,a,i;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.studyIds||[],a=e.scEnvironmentsStore,t.next=4,a.createScEnvironment(h({},n,{studyIds:o}));case 4:return i=t.sent,t.abrupt("return",e.props.onCompleted(i));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return t=c,(n=[{key:"componentDidMount",value:function(){window.scrollTo(0,0),(0,l.swallowError)(this.envTypeConfigsStore.load())}},{key:"render",value:function(){var e=this.envTypeConfigsStore;return(0,f.isStoreError)(e)?this.renderLoadingError():(0,f.isStoreLoading)(e)?i.default.createElement(d.default,{className:"mt2"}):(0,f.isStoreEmpty)(e)?this.renderEmpty():this.renderContent()}},{key:"renderLoadingError",value:function(){var e=this.envTypeConfigsStore;return i.default.createElement(i.default.Fragment,null,i.default.createElement(p.default,{error:e.error,className:"p0 mt2 mb3"}),this.renderButtons())}},{key:"renderContent",value:function(){var e=this.envTypeId,t=this.configurations,n=this.envTypeTitle,r=this.defaultCidr,o=this.userStore.user.isExternalUser;return i.default.createElement("div",{className:"mt2 animated fadeIn"},!o&&i.default.createElement(m.default,{envTypeId:e,configurations:t,title:n,defaultCidr:r,onPrevious:this.handlePrevious,onNext:this.handleCreate}),o&&this.renderExternalNotSupported())}},{key:"renderExternalNotSupported",value:function(){return i.default.createElement(i.default.Fragment,null,i.default.createElement(s.Segment,{placeholder:!0,className:"mt2"},i.default.createElement(s.Header,{icon:!0,className:"color-grey"},i.default.createElement(s.Icon,{name:"server"}),"No support for external researchers",i.default.createElement(s.Header.Subheader,null,"There are no workspace configurations to choose from. Your role is restricted. Please contact your administrator."))),this.renderButtons())}},{key:"renderEmpty",value:function(){var e=this.envTypeTitle;return i.default.createElement(i.default.Fragment,null,i.default.createElement(s.Header,{as:"h3",textAlign:"center",className:"mt2"},e),i.default.createElement(s.Segment,{placeholder:!0,className:"mt2"},i.default.createElement(s.Header,{icon:!0,className:"color-grey"},i.default.createElement(s.Icon,{name:"server"}),"No workspace configurations",i.default.createElement(s.Header.Subheader,null,"There are no workspace configurations to choose from. Your role might be restricted. Please contact your administrator."))),this.renderButtons())}},{key:"renderButtons",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nextDisabled,n=void 0===t||t;return i.default.createElement("div",{className:"mt3"},i.default.createElement(s.Button,{floated:"right",className:"ml2",primary:!0,content:"Create Research Workspace",disabled:n}),i.default.createElement(s.Button,{floated:"right",icon:"left arrow",labelPosition:"left",className:"ml2",content:"Previous",onClick:this.handlePrevious}))}},{key:"envTypeId",get:function(){return this.props.envTypeId}},{key:"envTypeTitle",get:function(){return a.default.get(this.envTypesStore.getEnvType(this.envTypeId),"name")}},{key:"userStore",get:function(){return this.props.userStore}},{key:"clientInformationStore",get:function(){return this.props.clientInformationStore}},{key:"envTypesStore",get:function(){return this.props.envTypesStore}},{key:"scEnvironmentsStore",get:function(){return this.props.scEnvironmentsStore}},{key:"envTypeConfigsStore",get:function(){return this.envTypesStore.getEnvTypeConfigsStore(this.envTypeId)}},{key:"configurations",get:function(){return this.envTypeConfigsStore.list}},{key:"defaultCidr",get:function(){return a.default.isEmpty(this.clientInformationStore.ipAddress)?"":"".concat(this.clientInformationStore.ipAddress,"/32")}},{key:"studyIds",get:function(){return this.props.studyIds}}])&&S(t.prototype,n),o&&S(t,o),c}(i.default.Component);(0,u.decorate)(A,{handlePrevious:u.action,handleCreate:u.action,userStore:u.computed,envTypesStore:u.computed,clientInformationStore:u.computed,envTypeId:u.computed,defaultCidr:u.computed,envTypeTitle:u.computed,scEnvironmentsStore:u.computed,configurations:u.computed,studyIds:u.computed});var j=(0,c.inject)("userStore","envTypesStore","scEnvironmentsStore","clientInformationStore")((0,c.observer)(A));t.default=j},2056:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=h(n(5)),i=h(n(0)),u=n(3),c=n(12),s=n(16),l=n(33),f=h(n(61)),d=h(n(49)),p=h(n(52)),m=h(n(74)),v=n(2057),y=h(n(2058));function h(e){return e&&e.__esModule?e:{default:e}}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(h,e);var t,n,o,c=O(h);function h(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=c.call(this,e)).handlePrevious=function(){if(a.default.isFunction(t.props.onPrevious))return t.props.onPrevious()},t.handleNext=function(){var e,n=(e=r.mark((function e(n){var o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=b({},n.values(),{envTypeId:t.envTypeId}),e.prev=1,e.next=4,t.props.onNext(o);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),(0,l.displayError)(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){w(a,r,o,i,u,"next",e)}function u(e){w(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}(),(0,u.runInAction)((function(){t.form=(0,v.getCreateInternalEnvForm)({projectIdOptions:t.projectIdOptions,cidr:t.props.defaultCidr})})),t}return t=h,(n=[{key:"render",value:function(){var e=this.props.title||"";return i.default.createElement("div",{className:"mt2"},i.default.createElement(s.Header,{as:"h3",textAlign:"center"},e),this.renderForm())}},{key:"renderForm",value:function(){var e=this.form,t=!a.default.isUndefined(this.props.defaultCidr),n=this.configurations;return i.default.createElement(s.Segment,{clearing:!0,className:"p3 mb3"},i.default.createElement(d.default,{form:e,onCancel:this.handlePrevious,onSuccess:this.handleNext},(function(r){var o=r.processing,a=r.onCancel;return i.default.createElement(i.default.Fragment,null,i.default.createElement(p.default,{dataTestId:"workspace-name",field:e.$("name")}),t&&i.default.createElement(p.default,{field:e.$("cidr")}),i.default.createElement(f.default,{dataTestId:"project-id",field:e.$("projectId"),fluid:!0,selection:!0}),i.default.createElement(y.default,{configurations:n,formField:e.$("envTypeConfigId")}),i.default.createElement(m.default,{dataTestId:"description-text-area",field:e.$("description")}),i.default.createElement(s.Button,{floated:"right",className:"ml2",primary:!0,content:"Create Research Workspace",disabled:o,type:"submit"}),i.default.createElement(s.Button,{floated:"right",icon:"left arrow",labelPosition:"left",className:"ml2",content:"Previous",disabled:o,onClick:a}))})))}},{key:"projectIdOptions",get:function(){return this.userStore.projectIdDropdown}},{key:"envTypeId",get:function(){return this.props.envTypeId}},{key:"configurations",get:function(){return this.props.configurations}},{key:"userStore",get:function(){return this.props.userStore}}])&&S(t.prototype,n),o&&S(t,o),h}(i.default.Component);(0,u.decorate)(A,{form:u.observable,envTypeId:u.computed,configurations:u.computed,userStore:u.computed,projectIdOptions:u.computed,handlePrevious:u.action});var j=(0,c.inject)("userStore","clientInformationStore")((0,c.observer)(A));t.default=j},2057:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCreateInternalEnvForm=function(){return(0,a.createForm)(i.apply(void 0,arguments))};var r,o=(r=n(5))&&r.__esModule?r:{default:r},a=n(91);var i=function(e){var t=e.projectIdOptions,n=e.cidr,r={name:{label:"Name",placeholder:"Type a name for this research workspace",extra:{explain:"Name can contain only alphanumeric characters (case sensitive) and hyphens. It must start with an alphabetic character and cannot be longer than 128 characters"},rules:"required|string|between:3,128|regex:/^[A-Za-z][A-Za-z0-9-]+$/"},description:{label:"Description",placeholder:"The description of this research workspace",rules:"required|string|between:3,2048"},projectId:{label:"Project ID",placeholder:"The project ID associated with this study",rules:["required","string","min:1","max:100"],extra:{options:t}},envTypeConfigId:{label:"Configuration",placeholder:"The configuration for the research workspace",rules:"required"}};return o.default.isUndefined(n)||(r.cidr={label:"Restricted CIDR",extra:{explain:"This research workspace will only be reachable from this CIDR. You can get your organization's CIDR range from your IT department. The provided default is the CIDR that restricts to your IP address."},placeholder:"The CIDR range to restrict research workspace access to",rules:"required|cidr",value:n}),r}},2058:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=m(n(5)),a=m(n(0)),i=n(3),u=n(12),c=n(16),s=m(n(6)),l=m(n(159)),f=m(n(160)),d=m(n(161)),p=n(27);function m(e){return e&&e.__esModule?e:{default:e}}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(u,e);var t,n,r,i=b(u);function u(){var e;y(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).handleSelectConfigurationId=function(t){e.formField.sync(t),e.formField.resetValidation()},e}return t=u,(n=[{key:"render",value:function(){var e=this.formField,t=e.error,n=void 0===t?"":t,r=!o.default.isEmpty(n),i=e.disabled?"disabled":"",u=r?"error":"";return a.default.createElement("div",{className:(0,s.default)("mb4",u,i)},a.default.createElement(l.default,{field:e}),a.default.createElement(f.default,{field:e}),a.default.createElement(d.default,{field:e,className:"mb1"}),this.renderCards())}},{key:"renderCards",value:function(){var e=this,t=this.formField.disabled,n=this.configurations,r=function(t){return t.id===e.configurationId};return a.default.createElement(c.Card.Group,{stackable:!0,itemsPerRow:3,className:"mt1"},o.default.map(n,(function(n){return a.default.createElement(c.Card,v({"data-testid":"configuration-card",key:n.id,className:(0,s.default)("mb3",{"cursor-pointer":!t})},function(n){var o={};return r(n)&&(o.color="blue"),t||(o.onClick=function(){return e.handleSelectConfigurationId(n.id)}),o}(n)),a.default.createElement(c.Card.Content,null,a.default.createElement(c.Card.Header,null,a.default.createElement("div",{className:"flex mt1"},a.default.createElement(c.Radio,{className:"mr2",checked:r(n),disabled:t}),a.default.createElement(c.Header,{as:"h4",className:"flex-auto mt0 pt0"},n.name)),a.default.createElement(c.Divider,null)),a.default.createElement(c.Card.Description,null,a.default.createElement("div",{className:"pr1 pl1 pb1"},a.default.createElement("div",{dangerouslySetInnerHTML:{__html:n.descHtml}})),a.default.createElement(c.Divider,null),e.renderEstimatedCostInfo(n))))})))}},{key:"renderEstimatedCostInfo",value:function(e){var t=!o.default.isEmpty(e.estimatedCostInfoHtml),n=a.default.createElement("div",{className:"flex p1"},a.default.createElement("div",{className:"bold flex-auto"},"Estimated Cost"),a.default.createElement("div",{className:"pr1"},"N/A"));return t&&(n=a.default.createElement("div",{className:"p1"},a.default.createElement("div",{className:"mb2 bold"},"Estimated Cost"),a.default.createElement("div",{dangerouslySetInnerHTML:{__html:e.estimatedCostInfoHtml}}))),n}},{key:"renderTableInfo",value:function(e){var t;return a.default.createElement(c.Table,{basic:"very",size:"small"},a.default.createElement(c.Table.Body,null,o.default.map(e.displayProps).map((function(e,t){return a.default.createElement(c.Table.Row,{key:t,textAlign:"center"},a.default.createElement(c.Table.Cell,null,e.key),a.default.createElement(c.Table.Cell,null,e.value))})),a.default.createElement(c.Table.Row,{textAlign:"center"},a.default.createElement(c.Table.Cell,null,(t=e,"spot"===o.default.get(t,"priceInfo.type")?"Maximum price per day":"Price per day"),a.default.createElement("div",{className:"color-grey fs-9"},function(e){return o.default.get(e,"priceInfo.region")}(e))),a.default.createElement(c.Table.Cell,{verticalAlign:"top"},function(e){var t=e.pricePerDay;return o.default.isUndefined(t)||o.default.isString(t)&&o.default.isEmpty(t)?"N/A":"$".concat((0,p.nicePrice)(t))}(e)))))}},{key:"configurations",get:function(){return this.props.configurations}},{key:"configurationId",get:function(){return this.formField.value}},{key:"formField",get:function(){return this.props.formField}}])&&h(t.prototype,n),r&&h(t,r),u}(a.default.Component);(0,i.decorate)(S,{configurations:i.computed,configurationId:i.computed,formField:i.computed,handleSelectConfigurationId:i.action});var k=(0,u.inject)()((0,u.observer)(S));t.default=k},2059:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(0)),o=n(188),a=u(n(2060)),i=u(n(2071));function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return o.enableBuiltInWorkspaces?r.default.createElement(a.default,null):r.default.createElement(i.default,null)}},2060:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=b(n(5)),a=b(n(0)),i=n(3),u=n(12),c=n(31),s=n(16),l=n(38),f=n(27),d=n(15),p=b(n(39)),m=b(n(44)),v=b(n(2061)),y=b(n(427)),h=b(n(2070)),g=b(n(230));function b(e){return e&&e.__esModule?e:{default:e}}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(c,e);var t,n,r,u=S(c);function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=u.call(this,e)).setOnboarding=function(e){t.onboardingOpen=e},t.hidePinModal=function(){t.pinModalOpen=!1},t.handleDetailClick=function(e){e.preventDefault(),e.stopPropagation();var n=e.currentTarget.dataset.instance;(0,l.gotoFn)(O(t))("/workspaces/id/".concat(n))},t.handleCreateEnvironment=function(e){e.preventDefault(),e.stopPropagation(),(0,l.gotoFn)(O(t))("/workspaces/create")},t.handleConfigureCredentials=function(e){e.preventDefault(),e.stopPropagation(),t.setOnboarding(!0)},t.needsAWSCredentials=function(){return t.user.isExternalResearcher&&!t.user.hasCredentials};var n=t.getUserStore().user;return(0,i.runInAction)((function(){t.user=n,t.onboardingOpen=!1,t.pinModalOpen=n.isExternalUser&&o.default.isEmpty(f.storage.getItem(g.default.pinToken))})),t}return t=c,(n=[{key:"componentDidMount",value:function(){(0,f.swallowError)(this.getEnvironmentsStore().load()),this.getEnvironmentsStore().startHeartbeat()}},{key:"componentWillUnmount",value:function(){this.getEnvironmentsStore().stopHeartbeat()}},{key:"getEnvironmentsStore",value:function(){return this.props.environmentsStore}},{key:"getUserStore",value:function(){return this.props.userStore}},{key:"render",value:function(){var e=this,t=this.getEnvironmentsStore(),n=null;return n=this.needsAWSCredentials()?this.renderConfigureAWS():(0,d.isStoreError)(t)?a.default.createElement(p.default,{error:t.error,className:"p0"}):(0,d.isStoreLoading)(t)?a.default.createElement(m.default,{segmentCount:3}):(0,d.isStoreEmpty)(t)?this.renderEmpty():(0,d.isStoreNotEmpty)(t)?this.renderMain():null,a.default.createElement(s.Container,{className:"mt3 animated fadeIn"},this.renderTitle(),n,this.onboardingOpen&&a.default.createElement(y.default,{onclose:function(){return e.setOnboarding(!1)}}))}},{key:"renderEmpty",value:function(){return a.default.createElement(s.Segment,{placeholder:!0},a.default.createElement(s.Header,{icon:!0,className:"color-grey"},a.default.createElement(s.Icon,{name:"clipboard outline"}),"No research workspaces",a.default.createElement(s.Header.Subheader,null,"To create a research workspace, click Create Research Workspace.")))}},{key:"renderConfigureAWS",value:function(){return a.default.createElement(s.Segment,{placeholder:!0},a.default.createElement(s.Header,{icon:!0,className:"color-grey"},a.default.createElement(s.Icon,{name:"key"}),"No AWS credentials",a.default.createElement(s.Header.Subheader,null,"To manage research workspaces, click Configure AWS Credentials.")))}},{key:"renderTitle",value:function(){return a.default.createElement("div",{className:"mb3 flex"},a.default.createElement(s.Header,{as:"h3",className:"color-grey mt1 mb0 flex-auto"},a.default.createElement(s.Icon,{name:"server",className:"align-top"}),a.default.createElement(s.Header.Content,{className:"left-align"},"Research Workspaces ",this.renderTotal())),this.needsAWSCredentials()?a.default.createElement(s.Button,{color:"orange",size:"medium",basic:!0,onClick:this.handleConfigureCredentials},"Configure AWS Credentials"):a.default.createElement(s.Button,{color:"blue",size:"medium",basic:!0,onClick:this.handleCreateEnvironment},"Create Research Workspace"))}},{key:"renderTotal",value:function(){var e=this.getEnvironmentsStore();return(0,d.isStoreError)(e)||(0,d.isStoreLoading)(e)?null:a.default.createElement(s.Label,{circular:!0},e.total)}},{key:"renderMain",value:function(){var e=this,t=this.getEnvironmentsStore().list;return a.default.createElement("div",null,a.default.createElement(h.default,{show:this.pinModalOpen,hideModal:this.hidePinModal,user:this.user,message:"PIN is required to get previously created stack information"}),o.default.map(t,(function(t){return a.default.createElement(s.Segment,{className:"p3 mb2 cursor-pointer",clearing:!0,key:t.id,"data-instance":t.id,onClick:e.handleDetailClick},a.default.createElement(v.default,{environment:t,environmentsStore:e.getEnvironmentsStore(),user:e.user}))})))}}])&&E(t.prototype,n),r&&E(t,r),c}(a.default.Component);(0,i.decorate)(P,{handleDetailClick:i.action,setOnboarding:i.action,hidePinModal:i.action,user:i.observable,onboardingOpen:i.observable,pinModalOpen:i.observable});var A=(0,u.inject)("environmentsStore","userStore")((0,c.withRouter)((0,u.observer)(P)));t.default=A},2061:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=k(n(0)),i=k(n(5)),u=n(12),c=n(3),s=n(31),l=k(n(57)),f=n(16),d=k(n(2062)),p=n(33),m=n(27),v=k(n(700)),y=k(n(310)),h=k(n(701)),g=k(n(230)),b=k(n(2066)),E=k(n(2067)),w=k(n(2068)),S=k(n(2069));function k(e){return e&&e.__esModule?e:{default:e}}function O(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){O(a,r,o,i,u,"next",e)}function u(e){O(a,r,o,i,u,"throw",e)}i(void 0)}))}}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var o=x(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return I(this,n)}}function I(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(s,e);var t,n,o,u=j(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=u.call(this,e)).checkExternalUpdate=function(e,n){var r=m.storage.getItem(g.default.pinToken);e.isExternal&&e.isPending&&n.isExternalUser?i.default.isEmpty(r)||t.getStore().updateExternalEnvironment(e,n,r):clearInterval(t.intervalId)},t.handleTerminateEnvironment=function(){var e=C(r.mark((function e(n){var o,a;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),n.stopPropagation(),o=function(){(0,c.runInAction)((function(){t.shouldShowTerminateDialog=!1,t.terminationInProgress=!1}))},e.prev=3,(0,c.runInAction)((function(){t.terminationInProgress=!0})),a=t.getStore(),e.next=8,a.deleteEnvironment(t.getEnvironment(),t.props.user,m.storage.getItem(g.default.pinToken));case 8:o(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),o(),(0,p.displayError)(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),t.handleStopEnvironment=function(){var e=C(r.mark((function e(n){var o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),n.stopPropagation(),e.prev=2,o=t.getStore(),e.next=6,o.stopEnvironment(t.getEnvironment());case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),(0,p.displayError)(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),t.handleStartEnvironment=function(){var e=C(r.mark((function e(n){var o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),n.stopPropagation(),e.prev=2,o=t.getStore(),e.next=6,o.startEnvironment(t.getEnvironment());case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),(0,p.displayError)(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),t.showTerminateDialog=function(){var e=C(r.mark((function e(n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),n.stopPropagation(),t.shouldShowTerminateDialog=!0,t.terminationInProgress=!1;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.hideTerminateDialog=function(){var e=C(r.mark((function e(n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),n.stopPropagation(),!t.terminationInProgress){e.next=4;break}return e.abrupt("return");case 4:t.shouldShowTerminateDialog=!1;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(0,c.runInAction)((function(){t.shouldShowTerminateDialog=!1,t.terminationInProgress=!1})),t}return t=s,(n=[{key:"componentDidMount",value:function(){var e=this.getEnvironment();e.setFetchingUrl(!1),e.isExternal&&e.isPending&&this.props.user.isExternalUser&&(this.intervalId=setInterval(this.checkExternalUpdate,2e4,e,this.props.user))}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"renderTerminateDialog",value:function(e){var t=this.shouldShowTerminateDialog,n=e.name,r=this.terminationInProgress;return a.default.createElement(f.Modal,{open:t,size:"tiny",onClose:this.hideTerminateDialog,closeOnDimmerClick:!r},a.default.createElement(f.Header,{content:"Terminate Environment"}),a.default.createElement(f.Modal.Content,null,a.default.createElement("p",null,'Are you sure you want to terminate environment "',n,'" ?')),a.default.createElement(f.Modal.Actions,null,a.default.createElement(f.Button,{disabled:r,onClick:this.hideTerminateDialog},"Cancel"),a.default.createElement(f.Button,{loading:r,disabled:r,color:"red",onClick:this.handleTerminateEnvironment},a.default.createElement(f.Icon,{name:"remove"})," Terminate")))}},{key:"getEnvironment",value:function(){return this.props.environment}},{key:"getStore",value:function(){return this.props.environmentsStore}},{key:"getUserDisplayName",value:function(){return this.props.userDisplayName}},{key:"getIcon",value:function(e){switch(e){case"sagemaker":return b.default;case"emr":return E.default;case"ec2-rstudio":return S.default;case"ec2-linux":case"ec2-windows":return w.default;default:return null}}},{key:"render",value:function(){var e=this.getEnvironment();return a.default.createElement("div",{className:"flex"},this.renderLeftCard(e),this.renderRightCard(e),this.renderTerminateDialog(e))}},{key:"renderLeftCard",value:function(e){var t=e.name,n=e.description,r=e.createdAt,o=e.createdBy,i=e.fetchingUrl,u=e.status,c=e.instanceInfo;return a.default.createElement("div",{className:"flex-auto"},a.default.createElement("div",{className:"flex"},a.default.createElement(f.Image,{src:this.getIcon(c.type),className:"mt0 mr1",style:{maxHeight:"24px",maxWidth:"24px"}}),a.default.createElement(f.Header,{as:"h3",color:"grey",className:"mt0 flex-auto"},t),a.default.createElement("div",{className:"flex"},a.default.createElement(f.Label,{className:"flex-auto basic",style:{border:0}},"COMPLETED"===u&&("ec2-rstudio"===c.type||"sagemaker"===c.type||"emr"===c.type)&&a.default.createElement(h.default,{as:f.Label,user:this.props.user,environment:e,size:"mini",color:"green"},i?a.default.createElement(a.default.Fragment,null,"Connecting",a.default.createElement(f.Icon,{loading:!0,name:"spinner",size:"small",className:"ml1 mr1"})):a.default.createElement(a.default.Fragment,null,"Connect"))),a.default.createElement(f.Label,{className:"flex-auto basic",style:{border:0}},a.default.createElement(v.default,{environment:e})))),a.default.createElement("div",{className:"ml3 mb2 mt2 breakout"},"created ",a.default.createElement(l.default,{date:r})," ",a.default.createElement(y.default,{uid:o})),a.default.createElement("div",{className:"ml3 mb2 mt2 breakout"},a.default.createElement(d.default,{clamp:3},n)),a.default.createElement("div",{className:"ml3 mb2 mt2 breakout bold"},"Yesterday's Research Workspace Cost: $",this.getCostInPastDay(e.costs)))}},{key:"getCostInPastDay",value:function(e){if(i.default.isEmpty(e))return 0;var t=e[e.length-1].cost,n=0;return t.forEach((function(e){n+=e.amount})),n.toFixed(2)}},{key:"renderRightCard",value:function(e){var t=this.getUserDisplayName(),n=e.sharedWithUsers,r=i.default.map(n,(function(e){return t.getDisplayName({uid:e})}));return a.default.createElement("div",{className:"border-left border-grey pl2 ml2"},a.default.createElement("div",{className:"mt1 fs-9"},a.default.createElement("span",{className:"bold  inline-block"},"Research Workspace Owners")," ",a.default.createElement(f.Label,{circular:!0,size:"mini",color:"blue"},1)),a.default.createElement("div",{className:"fs-9"},a.default.createElement(d.default,{clamp:1},t.getLongDisplayName({uid:e.createdBy}))),a.default.createElement("div",{className:"mt3 fs-9"},a.default.createElement("span",{className:"bold  inline-block"},"Research Workspace Shared Users")," ",a.default.createElement(f.Label,{circular:!0,size:"mini"},r.length)),a.default.createElement("div",{className:"fs-9"},a.default.createElement(d.default,{clamp:1},r.join(", "))),a.default.createElement("div",{className:"mt3 fs-9"},a.default.createElement("span",{className:"bold  inline-block"},"Project")," "),a.default.createElement("div",{className:"fs-9 mb2"},a.default.createElement(d.default,{clamp:1},e.projectId)),a.default.createElement("div",{className:"mb1 mt5 breakout flex-auto"},this.renderStopButton(e),this.renderStartButton(e),this.renderTerminateButton(e)))}},{key:"renderTerminateButton",value:function(e){var t;return(e.isCompleted||e.isStopped)&&(t=a.default.createElement(f.Label,{color:"red",className:"cursor-pointer","data-id":e.id,onClick:this.showTerminateDialog},a.default.createElement(f.Icon,{name:"minus circle"}),"Terminate")),a.default.createElement(a.default.Fragment,null,t)}},{key:"renderStopButton",value:function(e){var t;return!e.isCompleted||this.props.user.isAdmin&&e.isExternal||!i.default.includes(["ec2-windows","ec2-linux","ec2-rstudio","sagemaker"],e.instanceInfo.type)||(t=a.default.createElement(f.Label,{color:"orange",className:"cursor-pointer","data-id":e.id,onClick:this.handleStopEnvironment},a.default.createElement(f.Icon,{name:"power"}),"Stop")),a.default.createElement(a.default.Fragment,null,t)}},{key:"renderStartButton",value:function(e){var t;return!e.isStopped||this.props.user.isAdmin&&e.isExternal||(t=a.default.createElement(f.Label,{color:"green",className:"cursor-pointer","data-id":e.id,onClick:this.handleStartEnvironment},a.default.createElement(f.Icon,{name:"power"}),"Start")),a.default.createElement(a.default.Fragment,null,t)}}])&&P(t.prototype,n),o&&P(t,o),s}(a.default.Component);(0,c.decorate)(T,{showTerminateDialog:c.action,hideTerminateDialog:c.action,handleStartEnvironment:c.action,handleStopEnvironment:c.action,shouldShowTerminateDialog:c.observable,terminationInProgress:c.observable});var N=(0,u.inject)("userDisplayName")((0,s.withRouter)((0,u.observer)(T)));t.default=N},2066:function(e,t,n){e.exports=n.p+"static/media/sagemaker-notebook-icon.16b8ce34.svg"},2067:function(e,t,n){e.exports=n.p+"static/media/emr-icon.bd442490.svg"},2068:function(e,t,n){e.exports=n.p+"static/media/ec2-icon.5803b096.svg"},2069:function(e,t,n){e.exports=n.p+"static/media/rstudio-icon.b72a04a4.svg"},2070:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=l(n(0)),i=n(3),u=n(12),c=n(16),s=l(n(4));function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(s,e);var t,n,o,u=m(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=u.call(this,e)).handlePinSubmission=function(){var e,n=(e=r.mark((function e(n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),n.persist(),e.prev=2,e.next=5,t.props.user.unencryptedCreds(n.target.pin.value);case 5:(0,i.runInAction)((function(){t.errorMsg=void 0})),t.props.hideModal(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),(0,i.runInAction)((function(){t.errorMsg=e.t0.message}));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){f(a,r,o,i,u,"next",e)}function u(e){f(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}(),(0,i.runInAction)((function(){t.errorMsg=void 0})),t}return t=s,(n=[{key:"render",value:function(){return a.default.createElement(c.Modal,{as:c.Form,onSubmit:this.handlePinSubmission,open:this.props.show,size:"tiny",onClose:this.props.hideModal,closeOnDimmerClick:!0},a.default.createElement(c.Header,{content:"Enter PIN"}),a.default.createElement(c.Modal.Content,null,this.props.message,a.default.createElement(c.Form.Input,{label:"PIN",name:"pin",required:!0,type:"password",placeholder:"Your pin to access your AWS IAM user",error:this.errorMsg})),a.default.createElement(c.Modal.Actions,null,a.default.createElement(c.Button,{type:"button",content:"Close",onClick:this.props.hideModal}),a.default.createElement(c.Button,{type:"submit",color:"blue",content:"Save"})))}}])&&d(t.prototype,n),o&&d(t,o),s}(a.default.Component);h.propTypes={show:s.default.bool.isRequired,hideModal:s.default.func.isRequired,user:s.default.object.isRequired,message:s.default.string},h.defaultProps={message:""},(0,i.decorate)(h,{errorMsg:i.observable});var g=(0,u.observer)(h);t.default=g},2071:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=b(n(0)),a=b(n(5)),i=n(3),u=n(12),c=n(31),s=n(16),l=n(38),f=n(27),d=b(n(528)),p=n(15),m=b(n(39)),v=b(n(44)),y=n(426),h=b(n(2072)),g=b(n(2083));function b(e){return e&&e.__esModule?e:{default:e}}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(c,e);var t,n,r,u=S(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=u.call(this,e)).handleCreateEnvironment=function(e){e.preventDefault(),e.stopPropagation(),(0,l.gotoFn)(O(t))("/workspaces/create")},t.handleSelectedFilter=function(e){t.selectedFilter=e;var n=d.default.workspacesFilterName;f.storage.setItem(n,e)},(0,i.runInAction)((function(){var e=d.default.workspacesFilterName,n=f.storage.getItem(e)||y.filterNames.ALL;f.storage.setItem(e,n),t.selectedFilter=n})),t}return t=c,(n=[{key:"componentDidMount",value:function(){window.scrollTo(0,0);var e=this.envsStore;(0,f.swallowError)(e.load()),e.startHeartbeat();var t=this.envTypesStore;(0,p.isStoreReady)(t)||(0,f.swallowError)(t.load())}},{key:"componentWillUnmount",value:function(){this.envsStore.stopHeartbeat()}},{key:"render",value:function(){var e=this.envsStore,t=null;return t=(0,p.isStoreError)(e)?o.default.createElement(m.default,{error:e.error,className:"p0"}):(0,p.isStoreLoading)(e)?o.default.createElement(v.default,{segmentCount:3}):(0,p.isStoreEmpty)(e)?this.renderEmpty():(0,p.isStoreNotEmpty)(e)?this.renderMain():null,o.default.createElement(s.Container,{className:"mt3 animated fadeIn"},this.renderTitle(),t)}},{key:"renderMain",value:function(){var e=this.envsStore,t=this.selectedFilter,n=e.filtered(t),r=a.default.isEmpty(n);return o.default.createElement("div",{"data-testid":"workspaces"},o.default.createElement(g.default,{selectedFilter:t,onSelectedFilter:this.handleSelectedFilter,className:"mb3"}),!r&&a.default.map(n,(function(e){return o.default.createElement(s.Segment,{className:"p3 mb4",clearing:!0,key:e.id},o.default.createElement(h.default,{scEnvironment:e}))})),r&&o.default.createElement(s.Segment,{placeholder:!0},o.default.createElement(s.Header,{icon:!0,className:"color-grey"},o.default.createElement(s.Icon,{name:"server"}),"No research workspaces matching the selected filter.",o.default.createElement(s.Header.Subheader,null,"Select 'All' to view all the workspaces"))))}},{key:"renderEmpty",value:function(){return o.default.createElement(s.Segment,{"data-testid":"workspaces",placeholder:!0},o.default.createElement(s.Header,{icon:!0,className:"color-grey"},o.default.createElement(s.Icon,{name:"server"}),"No research workspaces",o.default.createElement(s.Header.Subheader,null,"To create a research workspace, click Create Research Workspace.")))}},{key:"renderTitle",value:function(){return o.default.createElement("div",{className:"mb3 flex"},o.default.createElement(s.Header,{as:"h3",className:"color-grey mt1 mb0 flex-auto"},o.default.createElement(s.Icon,{name:"server",className:"align-top"}),o.default.createElement(s.Header.Content,{className:"left-align"},"Research Workspaces ",this.renderTotal())),o.default.createElement("div",null,o.default.createElement(s.Button,{"data-testid":"create-workspace",color:"blue",size:"medium",basic:!0,onClick:this.handleCreateEnvironment},"Create Research Workspace")))}},{key:"renderTotal",value:function(){var e=this.envsStore;return(0,p.isStoreError)(e)||(0,p.isStoreLoading)(e)?null:o.default.createElement(s.Label,{circular:!0},e.total)}},{key:"envTypesStore",get:function(){return this.props.envTypesStore}},{key:"envsStore",get:function(){return this.props.scEnvironmentsStore}}])&&E(t.prototype,n),r&&E(t,r),c}(o.default.Component);(0,i.decorate)(P,{selectedFilter:i.observable,envsStore:i.computed,envTypesStore:i.computed,handleCreateEnvironment:i.action,handleSelectedFilter:i.action});var A=(0,u.inject)("scEnvironmentsStore","envTypesStore")((0,c.withRouter)((0,u.observer)(P)));t.default=A},2072:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=v(n(5)),a=v(n(0)),i=n(3),u=n(12),c=n(31),s=n(16),l=v(n(57)),f=n(27),d=v(n(310)),p=v(n(702)),m=v(n(704));function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(u,e);var t,n,r,i=b(u);function u(){return y(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){var e=this.environment,t=e.state;return a.default.createElement(a.default.Fragment,null,this.renderStatus(t),this.renderTitle(e),this.renderError(e),a.default.createElement(s.Divider,{className:"mt1 mb1"}),this.renderButtons(e),a.default.createElement(s.Divider,{className:"mt1"}),e.description||"No description was provided for this workspace.",a.default.createElement(s.Grid,{columns:2,stackable:!0,className:"mt2"},a.default.createElement(s.Grid.Row,{stretched:!0},a.default.createElement(s.Grid.Column,{width:12},this.renderDetailTable(e)),a.default.createElement(s.Grid.Column,{width:4},a.default.createElement(s.Segment,{className:"flex items-center"},a.default.createElement("div",{className:"w-100 overflow-hidden"},a.default.createElement(m.default,{envId:e.id})))))))}},{key:"renderDetailTable",value:function(e){var t=o.default.size(o.default.get(e,"studyIds",[])),n=this.envType||{},r=function(e,t){return a.default.createElement(s.Table.Row,null,a.default.createElement(s.Table.Cell,{width:5},e),a.default.createElement(s.Table.Cell,{width:11,className:"breakout"},t))};return a.default.createElement(s.Table,{definition:!0},a.default.createElement(s.Table.Body,null,r("Owner",a.default.createElement(d.default,{uid:e.createdBy,skipPrefix:!0})),r("Studies",0===t?"No studies linked to this workspace":(0,f.niceNumber)(t)),r("Project",o.default.isEmpty(e.projectId)?"N/A":e.projectId),r("Restricted CIDR",o.default.isEmpty(e.cidr)?"N/A":e.cidr),r("Workspace Type",n.name)))}},{key:"renderButtons",value:function(e){return a.default.createElement(p.default,{scEnvironment:e,showDetailButton:!0})}},{key:"renderStatus",value:function(e){return a.default.createElement("div",{style:{cursor:"default"}},a.default.createElement(s.Popup,{trigger:a.default.createElement(s.Label,{attached:"top left",size:"mini",color:e.color},e.spinner&&a.default.createElement(s.Icon,{name:"spinner",loading:!0}),e.display)},e.tip))}},{key:"renderTitle",value:function(e){return a.default.createElement(s.Header,{as:"h3",className:"mt1"},e.name,a.default.createElement(s.Header.Subheader,null,a.default.createElement("span",{className:"fs-8 color-grey"},"Created ",a.default.createElement(l.default,{date:e.createdAt,className:"mr2"})," ",a.default.createElement(d.default,{uid:e.createdBy,className:"mr2"})),a.default.createElement("span",{className:"fs-8 color-grey mr2"}," ",e.id)))}},{key:"renderError",value:function(e){return o.default.isEmpty(e.error)?null:a.default.createElement(s.Message,{negative:!0},a.default.createElement("p",null,e.error))}},{key:"envTypesStore",get:function(){return this.props.envTypesStore}},{key:"environment",get:function(){return this.props.scEnvironment}},{key:"envType",get:function(){var e=this.props.scEnvironment;return this.envTypesStore.getEnvType(e.envTypeId)}}])&&h(t.prototype,n),r&&h(t,r),u}(a.default.Component);(0,i.decorate)(S,{envTypesStore:i.computed,environment:i.computed,envType:i.computed});var k=(0,u.inject)("envTypesStore")((0,c.withRouter)((0,u.observer)(S)));t.default=k},2073:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=h(n(5)),a=h(n(0)),i=n(3),u=n(12),c=n(31),s=n(16),l=n(27),f=n(15),d=h(n(39)),p=h(n(44)),m=h(n(2074)),v=h(n(2075)),y=h(n(2081));function h(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(u,e);var t,n,r,i=w(u);function u(){return g(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"componentDidMount",value:function(){var e=this.getConnectionStore();(0,f.isStoreReady)(e)||(0,l.swallowError)(e.load())}},{key:"getConnectionStore",value:function(){return this.envsStore.getScEnvConnectionStore(this.environment.id)}},{key:"render",value:function(){var e=this.getConnectionStore();if(!this.environment.state.canConnect)return null;var t=null;return t=(0,f.isStoreError)(e)?a.default.createElement(d.default,{error:e.error,className:"pt2 mb2"}):(0,f.isStoreLoading)(e)?a.default.createElement(p.default,{segmentCount:1,className:"mt2 mb2"}):(0,f.isStoreEmpty)(e)?this.renderEmpty():(0,f.isStoreNotEmpty)(e)?this.renderConnections():null,a.default.createElement("div",{className:"fadeIn animated"},t)}},{key:"renderConnections",value:function(){var e=this.environment,t=!o.default.isEmpty(e.getConnections((function(e){return"http"===(t=e.scheme)||"https"===t||o.default.isEmpty(t);var t}))),n=!o.default.isEmpty(e.getConnections((function(e){return"ssh"===e.scheme}))),r=!o.default.isEmpty(e.getConnections((function(e){return"rdp"===e.scheme})));return a.default.createElement(a.default.Fragment,null,t&&a.default.createElement(m.default,{scEnvironment:e}),r&&a.default.createElement(y.default,{scEnvironment:e}),n&&a.default.createElement(v.default,{scEnvironment:e}))}},{key:"renderEmpty",value:function(){return a.default.createElement(s.Segment,{placeholder:!0,className:"mt2 mb2"},a.default.createElement(s.Header,{icon:!0,className:"color-grey"},a.default.createElement(s.Icon,{name:"linkify"}),"No Connections",a.default.createElement(s.Header.Subheader,null,"This workspace does not have any defined connections.")))}},{key:"environment",get:function(){return this.props.scEnvironment}},{key:"envsStore",get:function(){return this.props.scEnvironmentsStore}}])&&b(t.prototype,n),r&&b(t,r),u}(a.default.Component);(0,i.decorate)(O,{envsStore:i.computed,environment:i.computed});var C=(0,u.inject)("scEnvironmentsStore")((0,c.withRouter)((0,u.observer)(O)));t.default=C},2074:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=d(n(5)),i=d(n(0)),u=n(3),c=n(12),s=n(31),l=n(16),f=n(33);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){p(a,r,o,i,u,"next",e)}function u(e){p(a,r,o,i,u,"throw",e)}i(void 0)}))}}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(e,t){return window.open(e,"_blank",t)},w=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(s,e);var t,n,o,c=h(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=c.call(this,e)).handleConnect=function(e){return(0,u.action)(m(r.mark((function n(){var o,i,c,s,l;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.getConnectionStore(),i=t.environment.connections,c=a.default.find(i,["id",e])||{},s=c.url,t.processingId=e,n.prev=5,!s){n.next=10;break}E(s,"noopener,noreferrer"),n.next=15;break;case 10:return l=E("about:blank"),n.next=13,o.createConnectionUrl(e);case 13:s=n.sent,l.location=s;case 15:n.next=20;break;case 17:n.prev=17,n.t0=n.catch(5),(0,f.displayError)(n.t0);case 20:return n.prev=20,(0,u.runInAction)((function(){t.processingId=""})),n.finish(20);case 23:case"end":return n.stop()}}),n,null,[[5,17,20,23]])}))))},(0,u.runInAction)((function(){t.processingId=""})),t}return t=s,(n=[{key:"getConnectionStore",value:function(){return this.envsStore.getScEnvConnectionStore(this.environment.id)}},{key:"render",value:function(){var e=this,t=this.environment.state.canConnect,n=this.connections,r=this.processingId,o=function(e){return r===e};return t?i.default.createElement("div",{className:"mt2 mb2"},i.default.createElement(l.Table,{celled:!0},i.default.createElement(l.Table.Header,null,i.default.createElement(l.Table.Row,null,i.default.createElement(l.Table.HeaderCell,{colSpan:"1"},"HTTP Connections"))),i.default.createElement(l.Table.Body,null,a.default.map(n,(function(t){return i.default.createElement(l.Table.Row,{key:t.id},i.default.createElement(l.Table.Cell,{className:"clearfix"},i.default.createElement(l.Button,{floated:"right",size:"mini",primary:!0,disabled:(n=t.id,r!==n&&!a.default.isEmpty(r)),loading:o(t.id),onClick:e.handleConnect(t.id)},"Connect"),i.default.createElement("div",{className:"mt1"},t.name||"Connect")));var n}))))):null}},{key:"renderEmpty",value:function(){return i.default.createElement(l.Segment,{placeholder:!0,className:"mt2 mb2"},i.default.createElement(l.Header,{icon:!0,className:"color-grey"},i.default.createElement(l.Icon,{name:"linkify"}),"No HTTP Connections",i.default.createElement(l.Header.Subheader,null,"This workspace does not have any defined HTTP connections.")))}},{key:"environment",get:function(){return this.props.scEnvironment}},{key:"envsStore",get:function(){return this.props.scEnvironmentsStore}},{key:"connections",get:function(){return this.environment.getConnections((function(e){return"http"===(t=e.scheme)||"https"===t||a.default.isEmpty(t);var t}))}}])&&v(t.prototype,n),o&&v(t,o),s}(i.default.Component);(0,u.decorate)(w,{envsStore:u.computed,environment:u.computed,connections:u.computed,processingId:u.observable});var S=(0,c.inject)("scEnvironmentsStore")((0,s.withRouter)((0,c.observer)(w)));t.default=S},2075:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=y(n(5)),a=y(n(0)),i=n(3),u=n(12),c=n(31),s=n(16),l=n(27),f=n(15),d=y(n(39)),p=y(n(44)),m=y(n(443)),v=y(n(2076));function y(e){return e&&e.__esModule?e:{default:e}}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(c,e);var t,n,r,u=b(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=u.call(this,e)).toggleCreateKey=function(){t.showCreateKey=!t.showCreateKey},(0,i.runInAction)((function(){t.showCreateKey=!1})),t}return t=c,(n=[{key:"componentDidMount",value:function(){var e=this.keyPairsStore;(0,f.isStoreReady)(e)||(0,l.swallowError)(e.load())}},{key:"render",value:function(){var e=this.keyPairsStore,t=this.environment.state.canConnect,n=o.default.isEmpty(this.connections);if(!t)return null;var r=null;return r=(0,f.isStoreError)(e)?a.default.createElement(d.default,{error:e.error,className:"pt2 mb2"}):(0,f.isStoreLoading)(e)?a.default.createElement(p.default,{segmentCount:1,className:"mt2 mb2"}):n?this.renderEmpty():this.renderConnections(),a.default.createElement("div",{className:"fadeIn animated"},r)}},{key:"renderConnections",value:function(){var e=this.environment,t=this.showCreateKey,n=this.connections,r=this.keyPairsStore.empty;return t?this.renderCreateKeyForm():a.default.createElement("div",{className:"mt2 mb2 fadeIn animated"},r&&a.default.createElement(s.Message,{warning:!0},a.default.createElement(s.Message.Header,null,"Attention!"),a.default.createElement(s.Message.List,null,a.default.createElement(s.Message.Item,null,"You do not have any key pairs. A key pair is needed to connect via SSH to the target machine."),a.default.createElement(s.Message.Item,null,"You can create a key pair now by clicking on the 'Create Key' button below."))),a.default.createElement(s.Table,{celled:!0},a.default.createElement(s.Table.Header,null,a.default.createElement(s.Table.Row,null,a.default.createElement(s.Table.HeaderCell,{colSpan:"3",className:"clearfix"},a.default.createElement("div",null,a.default.createElement(s.Button,{floated:"right",color:"blue",size:"mini",basic:!0,onClick:this.toggleCreateKey},"Create Key")),a.default.createElement("div",{className:"mt1"},"SSH Connections")))),a.default.createElement(s.Table.Body,null,o.default.map(n,(function(t){return a.default.createElement(v.default,{key:t.id,scEnvironment:e,connectionId:t.id})})))))}},{key:"renderCreateKeyForm",value:function(){return a.default.createElement(s.Segment,{className:"clearfix mt2 mb2 p2 fadeIn animated"},a.default.createElement(m.default,{onCancel:this.toggleCreateKey}))}},{key:"renderEmpty",value:function(){return a.default.createElement(s.Segment,{placeholder:!0,className:"mt2 mb2"},a.default.createElement(s.Header,{icon:!0,className:"color-grey"},a.default.createElement(s.Icon,{name:"linkify"}),"No SSH Connections",a.default.createElement(s.Header.Subheader,null,"This workspace does not have any defined SSH connections.")))}},{key:"environment",get:function(){return this.props.scEnvironment}},{key:"keyPairsStore",get:function(){return this.props.keyPairsStore}},{key:"connections",get:function(){return this.environment.getConnections((function(e){return"ssh"===e.scheme}))}}])&&h(t.prototype,n),r&&h(t,r),c}(a.default.Component);(0,i.decorate)(S,{environment:i.computed,keyPairsStore:i.computed,connections:i.computed,showCreateKey:i.observable,toggleCreateKey:i.action});var k=(0,u.inject)("keyPairsStore")((0,c.withRouter)((0,u.observer)(S)));t.default=k},2076:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=p(n(5)),i=p(n(0)),u=n(3),c=n(12),s=n(31),l=n(16),f=n(33),d=p(n(2077));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){m(a,r,o,i,u,"next",e)}function u(e){m(a,r,o,i,u,"throw",e)}i(void 0)}))}}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(s,e);var t,n,o,c=g(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=c.call(this,e)).handleActivate=v(r.mark((function e(){var n,o,i,c;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.selectedKeyId,o=t.getConnectionStore(),i=t.connectionId,!a.default.isEmpty(n)){e.next=6;break}return(0,f.displayError)("Please select the name of the key pair that you want to use"),e.abrupt("return");case 6:return t.networkInterfaces=void 0,t.processingSendKey=!0,e.prev=8,e.next=11,o.sendSshKey(i,n);case 11:c=e.sent,(0,u.runInAction)((function(){t.networkInterfaces=a.default.get(c,"networkInterfaces")})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),(0,f.displayError)(e.t0);case 18:return e.prev=18,(0,u.runInAction)((function(){t.processingSendKey=!1})),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[8,15,18,21]])}))),t.handleKeyChange=function(e,n){var r=a.default.get(n,"value"),o=r!==t.selectedKeyId;t.selectedKeyId=r,o&&(t.networkInterfaces=void 0)},(0,u.runInAction)((function(){var e=a.default.first(t.keyPairsStore.listActive)||{};t.networkInterfaces=void 0,t.processingSendKey=!1,t.selectedKeyId=e.id})),t}return t=s,(n=[{key:"getConnectionStore",value:function(){return this.envsStore.getScEnvConnectionStore(this.environment.id)}},{key:"render",value:function(){var e=this.keyPairsStore,t=a.default.isEmpty(e.listActive),n=this.connection,r=this.networkInterfaces,o=this.keyPairOptions,u=this.selectedKeyId,c=this.selectedKeyName,s=[i.default.createElement(l.Table.Row,{key:n.id},i.default.createElement(l.Table.Cell,null,i.default.createElement("div",{className:"mt1"},n.name||n.instanceId)),i.default.createElement(l.Table.Cell,null,t&&"No key pair found",!t&&i.default.createElement(l.Dropdown,{upward:!0,placeholder:"Select Key",fluid:!0,selection:!0,options:o,value:u,onChange:this.handleKeyChange,disabled:t||this.processingSendKey})),i.default.createElement(l.Table.Cell,{collapsing:!0},i.default.createElement(l.Button,{primary:!0,size:"mini",onClick:this.handleActivate,disabled:t,loading:this.processingSendKey},"Use this SSH Key")))];return r&&s.push(i.default.createElement(d.default,{key:"".concat(n.id,"__1"),networkInterfaces:r,keyName:c,connectionId:n.id})),s}},{key:"environment",get:function(){return this.props.scEnvironment}},{key:"envsStore",get:function(){return this.props.scEnvironmentsStore}},{key:"keyPairsStore",get:function(){return this.props.keyPairsStore}},{key:"keyPairOptions",get:function(){return a.default.map(this.keyPairsStore.listActive,(function(e){return{key:e.id,value:e.id,text:e.name}}))}},{key:"connections",get:function(){return this.environment.getConnections((function(e){return"ssh"===e.scheme}))}},{key:"connection",get:function(){var e=this.connectionId,t=this.connections;return a.default.find(t,["id",e])||{}}},{key:"connectionId",get:function(){return this.props.connectionId}},{key:"selectedKeyName",get:function(){return a.default.isEmpty(this.selectedKeyId)?"":a.default.get(this.keyPairsStore.getKeyPair(this.selectedKeyId),"name")}}])&&y(t.prototype,n),o&&y(t,o),s}(i.default.Component);(0,u.decorate)(w,{envsStore:u.computed,environment:u.computed,keyPairsStore:u.computed,connections:u.computed,connection:u.computed,connectionId:u.computed,keyPairOptions:u.computed,selectedKeyName:u.computed,selectedKeyId:u.observable,networkInterfaces:u.observable,processingSendKey:u.observable,handleActivate:u.action,handleKeyChange:u.action});var S=(0,c.inject)("scEnvironmentsStore","keyPairsStore")((0,s.withRouter)((0,c.observer)(w)));t.default=S},2077:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=d(n(5)),i=d(n(0)),u=n(3),c=n(12),s=n(31),l=n(16),f=d(n(703));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){p(a,r,o,i,u,"next",e)}function u(e){p(a,r,o,i,u,"throw",e)}i(void 0)}))}}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(s,e);var t,n,o,c=h(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=c.call(this,e)).startCountDown=function(){a.default.isUndefined(t.intervalId)&&(t.countDown=60,t.intervalId=setInterval(m(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,u.runInAction)((function(){if(t.countDown<=0)return t.clearInterval(),void(t.expired=!0);t.countDown-=1}));case 1:case"end":return e.stop()}}),e)}))),1e3))},(0,u.runInAction)((function(){t.countDown=void 0,t.intervalId=void 0,t.expired=!1})),t}return t=s,(n=[{key:"componentDidMount",value:function(){this.startCountDown()}},{key:"componentWillUnmount",value:function(){this.clearInterval()}},{key:"clearInterval",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){a.default.isUndefined(this.intervalId)||(clearInterval(this.intervalId),this.intervalId=void 0),this.countDown=void 0,this.expired=!1}))},{key:"render",value:function(){var e=this.connectionId,t=this.keyName,n=this.networkInterfaces,r="ssh -i '".concat(t,".pem' ec2-user@").concat(a.default.get(a.default.first(n),"value"));return i.default.createElement(l.Table.Row,{key:e,className:"fadeIn animated"},i.default.createElement(l.Table.Cell,{colSpan:"3",className:"p3"},i.default.createElement(l.Grid,{columns:2,stackable:!0},i.default.createElement(l.Grid.Row,{stretched:!0},i.default.createElement(l.Grid.Column,{width:12},this.renderInfo()),i.default.createElement(l.Grid.Column,{width:4},i.default.createElement(l.Segment,{className:"flex items-center"},i.default.createElement("div",{className:"w-100 overflow-hidden"},this.renderCountDown()))))),i.default.createElement("div",{className:"mt3"},"Example:",i.default.createElement(l.Segment,{className:"mt2"},r," ",i.default.createElement(f.default,{text:r,className:"ml2 mt0"})))))}},{key:"renderInfo",value:function(){var e=this,t=this.networkInterfaces,n=a.default.size(t)>1;return i.default.createElement("div",null,i.default.createElement("b",null,"You'll need two pieces of information to connect to this research workspace."),i.default.createElement(l.List,{bulleted:!0},i.default.createElement(l.List.Item,null,"The IP Address or DNS of the instance."," ",n?"Ask your administrator if you are not sure which one to use:":"",i.default.createElement(l.List,null,a.default.map(t,(function(t){return i.default.createElement(l.List.Item,{key:t.value,className:"flex"},e.renderHostLabel(t),i.default.createElement(f.default,{text:t.value}))})))),i.default.createElement(l.List.Item,null,"The SSH private key. You downloaded the private key when you created the SSH key.")),i.default.createElement("div",{className:"mt3"},"Connecting to your research workspace depends on the operating system you are connecting from."),i.default.createElement(l.List,{bulleted:!0},i.default.createElement(l.List.Item,{href:"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AccessingInstancesLinux.html",target:"_blank",rel:"noopener noreferrer"},"Connecting from MacOS or Linux via SSH"),i.default.createElement(l.List.Item,{href:"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/putty.html",target:"_blank",rel:"noopener noreferrer"},"Connecting from Windows via Putty")))}},{key:"renderCountDown",value:function(){var e=this.expired,t=this.countDown;return e?i.default.createElement("div",{className:"center color-red"},"The time window to connect has expired. To reset it, click on the ",i.default.createElement("b",{className:"fs-9"},"Use this SSH Key")," ","button again."):i.default.createElement("div",{className:"center"},i.default.createElement("div",{className:"mb1"},"You have ",i.default.createElement("br",null)," ",i.default.createElement("b",null,t)," ",i.default.createElement("br",null)," seconds to connect"))}},{key:"renderHostLabel",value:function(e){return i.default.createElement(l.Label,null,"Host",i.default.createElement(l.Label.Detail,null,e.value," ",i.default.createElement("span",{className:"fs-7 pl1"},"(",e.info,")")))}},{key:"networkInterfaces",get:function(){var e=this.props.networkInterfaces;if(a.default.isEmpty(e))return[];var t=[];return a.default.forEach(e,(function(e){e.publicDnsName&&t.push({value:e.publicDnsName,type:"dns",scope:"public",info:"Public"}),e.privateIp&&t.push({value:e.privateIp,type:"ip",scope:"private",info:"Private"})})),t}},{key:"keyName",get:function(){return this.props.keyName}},{key:"connectionId",get:function(){return this.props.connectionId}}])&&v(t.prototype,n),o&&v(t,o),s}(i.default.Component);(0,u.decorate)(E,{networkInterfaces:u.computed,keyName:u.computed,connectionId:u.computed,intervalId:u.observable,countDown:u.observable,expired:u.observable,startCountDown:u.action,clearInterval:u.action});var w=(0,c.inject)()((0,s.withRouter)((0,c.observer)(E)));t.default=w},2081:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=f(n(5)),a=f(n(0)),i=n(3),u=n(12),c=n(31),s=n(16),l=f(n(2082));function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(u,e);var t,n,r,i=v(u);function u(){return d(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){var e=this.environment.state.canConnect,t=o.default.isEmpty(this.connections);if(!e)return null;var n=null;return n=t?this.renderEmpty():this.renderConnections(),a.default.createElement("div",{className:"fadeIn animated"},n)}},{key:"renderConnections",value:function(){var e=this.environment,t=this.connections;return a.default.createElement("div",{className:"mt2 mb2 fadeIn animated"},a.default.createElement(s.Table,{celled:!0},a.default.createElement(s.Table.Header,null,a.default.createElement(s.Table.Row,null,a.default.createElement(s.Table.HeaderCell,{colSpan:"1"},"RDP Connections"))),a.default.createElement(s.Table.Body,null,o.default.map(t,(function(t){return a.default.createElement(l.default,{key:t.id,scEnvironment:e,connectionId:t.id})})))))}},{key:"renderEmpty",value:function(){return a.default.createElement(s.Segment,{placeholder:!0,className:"mt2 mb2"},a.default.createElement(s.Header,{icon:!0,className:"color-grey"},a.default.createElement(s.Icon,{name:"linkify"}),"No RDP Connections",a.default.createElement(s.Header.Subheader,null,"This workspace does not have any defined RDP connections.")))}},{key:"environment",get:function(){return this.props.scEnvironment}},{key:"connections",get:function(){return this.environment.getConnections((function(e){return"rdp"===e.scheme}))}}])&&p(t.prototype,n),r&&p(t,r),u}(a.default.Component);(0,i.decorate)(g,{environment:i.computed,connections:i.computed});var b=(0,u.inject)()((0,c.withRouter)((0,u.observer)(g)));t.default=b},2082:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=p(n(5)),i=p(n(0)),u=n(3),c=n(12),s=n(31),l=n(16),f=n(33),d=p(n(703));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){m(a,r,o,i,u,"next",e)}function u(e){m(a,r,o,i,u,"throw",e)}i(void 0)}))}}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(s,e);var t,n,o,c=g(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=c.call(this,e)).handleGetInfo=v(r.mark((function e(){var n,o,a;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getConnectionStore(),o=t.connectionId,t.windowsRdpInfo=void 0,t.showPassword=!1,t.processingGetInfo=!0,e.prev=5,e.next=8,n.getWindowsRdpInfo(o);case 8:a=e.sent,(0,u.runInAction)((function(){t.windowsRdpInfo=a||{}})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),(0,f.displayError)(e.t0);case 15:return e.prev=15,(0,u.runInAction)((function(){t.processingGetInfo=!1})),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[5,12,15,18]])}))),t.toggleShowPassword=function(){t.showPassword=!t.showPassword},(0,u.runInAction)((function(){t.windowsRdpInfo=void 0,t.processingGetInfo=!1,t.showPassword=!1})),t}return t=s,(n=[{key:"getConnectionStore",value:function(){return this.envsStore.getScEnvConnectionStore(this.environment.id)}},{key:"render",value:function(){var e=this.connection,t=this.windowsRdpInfo,n=this.processingGetInfo,r=[i.default.createElement(l.Table.Row,{key:e.id},i.default.createElement(l.Table.Cell,{className:"clearfix"},i.default.createElement(l.Button,{floated:"right",size:"mini",primary:!0,loading:n,onClick:this.handleGetInfo},"Get Password"),i.default.createElement("div",{className:"mt1"},e.name||"Connect")))];return t&&r.push(this.renderExpanded()),r}},{key:"renderExpanded",value:function(){var e=this,t=this.connection,n=this.windowsRdpInfo,r=this.networkInterfaces,o=n.password,u=this.showPassword,c=a.default.size(r)>1;return i.default.createElement(l.Table.Row,{key:"".concat(t.id,"__2")},i.default.createElement(l.Table.Cell,{className:"p3"},i.default.createElement("b",null,"Your Windows workspace can be accessed via an RDP client by using the DNS host name and credentials defined below."),i.default.createElement(l.List,{bulleted:!0},i.default.createElement(l.List.Item,null,"The IP Address or DNS of the instance."," ",c?"Ask your administrator if you are not sure which one to use:":"",i.default.createElement(l.List,null,a.default.map(r,(function(t){return i.default.createElement(l.List.Item,{key:t.value,className:"flex"},e.renderHostLabel(t),i.default.createElement(d.default,{text:t.value}))})))),i.default.createElement(l.List.Item,null,"The username and password:",i.default.createElement(l.List,null,i.default.createElement(l.List.Item,{className:"flex"},this.renderUsernameLabel("Administrator"),i.default.createElement(d.default,{text:"Administrator"})),i.default.createElement(l.List.Item,{className:"flex"},this.renderPasswordLabel(o),i.default.createElement(l.Button,{className:"ml2",basic:!0,size:"mini",onClick:this.toggleShowPassword},u?"Hide":"Show"),i.default.createElement(d.default,{text:o}))))),i.default.createElement("div",{className:"mt3"},"Additional information about connecting via RDP can be found in the documentation below:"),i.default.createElement(l.List,{bulleted:!0},i.default.createElement(l.List.Item,{href:"https://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/connecting_to_windows_instance.html#connect-rdp",target:"_blank",rel:"noopener noreferrer"},"Connect to Your Windows Instance"))))}},{key:"renderPasswordLabel",value:function(e){var t=this.showPassword;return i.default.createElement(l.Label,null,"Password",i.default.createElement(l.Label.Detail,null,t?e:"****************"))}},{key:"renderUsernameLabel",value:function(e){return i.default.createElement(l.Label,null,"Username",i.default.createElement(l.Label.Detail,null,e))}},{key:"renderHostLabel",value:function(e){return i.default.createElement(l.Label,null,"Host",i.default.createElement(l.Label.Detail,null,e.value," ",i.default.createElement("span",{className:"fs-7 pl1"},"(",e.info,")")))}},{key:"environment",get:function(){return this.props.scEnvironment}},{key:"envsStore",get:function(){return this.props.scEnvironmentsStore}},{key:"connections",get:function(){return this.environment.getConnections((function(e){return"rdp"===e.scheme}))}},{key:"connection",get:function(){var e=this.connectionId,t=this.connections;return a.default.find(t,["id",e])||{}}},{key:"connectionId",get:function(){return this.props.connectionId}},{key:"networkInterfaces",get:function(){var e=a.default.get(this.windowsRdpInfo,"networkInterfaces");if(a.default.isEmpty(e))return[];var t=[];return a.default.forEach(e,(function(e){e.publicDnsName&&t.push({value:e.publicDnsName,type:"dns",scope:"public",info:"Public"}),e.privateIp&&t.push({value:e.privateIp,type:"ip",scope:"private",info:"Private"})})),t}}])&&y(t.prototype,n),o&&y(t,o),s}(i.default.Component);(0,u.decorate)(w,{envsStore:u.computed,environment:u.computed,connections:u.computed,connection:u.computed,connectionId:u.computed,networkInterfaces:u.computed,windowsRdpInfo:u.observable,processingGetInfo:u.observable,showPassword:u.observable,handleGetInfo:u.action,toggleShowPassword:u.action});var S=(0,c.inject)("scEnvironmentsStore")((0,s.withRouter)((0,c.observer)(w)));t.default=S},2083:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=d(n(5)),i=d(n(0)),u=n(3),c=n(12),s=n(16),l=d(n(6)),f=n(426);function d(e){return e&&e.__esModule?e:{default:e}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=(E(o={},f.filterNames.ALL,"blue"),E(o,f.filterNames.AVAILABLE,"green"),E(o,f.filterNames.PENDING,"orange"),E(o,f.filterNames.ERRORED,"red"),E(o,f.filterNames.TERMINATED,"grey"),o),S=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(c,e);var t,n,r,o=h(c);function c(){var e;m(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).handleSelected=function(t){return(0,u.action)((function(){e.onSelectedFilter(t)}))},e}return t=c,(n=[{key:"render",value:function(){var e=this,t=this.selectedFilter;return i.default.createElement("div",{className:(0,l.default)("clearfix",this.props.className)},i.default.createElement(s.Button.Group,{floated:"right"},a.default.map(a.default.keys(w),(function(n){return i.default.createElement(s.Button,p({key:n},function(n){var r=a.default.get(w,n,"grey"),o=n===t,i={active:o,basic:!o,color:r,style:{cursor:o?"default":"pointer"}};return o||(i.onClick=e.handleSelected(n)),i}(n)),a.default.startCase(n))}))))}},{key:"selectedFilter",get:function(){return this.props.selectedFilter}},{key:"onSelectedFilter",get:function(){var e=this.props.onSelectedFilter;return a.default.isFunction(e)?e:function(){}}}])&&v(t.prototype,n),r&&v(t,r),c}(i.default.Component);(0,u.decorate)(S,{selectedFilter:u.computed,onSelectedFilter:u.computed});var k=(0,c.observer)(S);t.default=k},2084:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(0)),o=n(188),a=u(n(2085)),i=u(n(2086));function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return o.enableBuiltInWorkspaces?r.default.createElement(a.default,null):r.default.createElement(i.default,null)}},2085:function(e,t,n){"use strict";(function(e){var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=k(n(5)),i=k(n(0)),u=n(12),c=n(3),s=n(31),l=k(n(57)),f=n(16),d=n(345),p=k(n(629)),m=n(38),v=n(27),y=n(33),h=n(15),g=k(n(39)),b=k(n(44)),E=k(n(700)),w=k(n(310)),S=k(n(701));function k(e){return e&&e.__esModule?e:{default:e}}function O(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){O(a,r,o,i,u,"next",e)}function u(e){O(a,r,o,i,u,"throw",e)}i(void 0)}))}}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var o=x(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return I(this,n)}}function I(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){o=!0,a=c}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=function(e){var t=e.environment,n=T(i.default.useState((function(){return!1})),2),r=n[0],o=n[1];return i.default.createElement(f.Segment,null,"This research workspace encountered an ",t.error?"error":"unknown error",".",t.error?i.default.createElement(f.Accordion,null,i.default.createElement(f.Accordion.Title,{active:r,index:0,onClick:function(){return o((function(e){return!e}))}},i.default.createElement(f.Icon,{name:"dropdown"}),"Detailed error information"),i.default.createElement(f.Accordion.Content,{active:r},i.default.createElement("p",null,t.error))):null)},D=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(O,t);var n,o,s,k=j(O);function O(t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,O),(n=k.call(this,t)).handleSharedWithUsersSelection=function(e,t){var r=t.value;n.updateSharedWithUsers=r.map((function(e){return JSON.parse(e)}))},n.handleSubmitSharedWithUsersClick=function(){var e=C(r.mark((function e(t){var o,a;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.stopPropagation(),o=n.getEnvironment(),(0,c.runInAction)((function(){n.formProcessing=!0})),a={id:o.id,sharedWithUsers:n.updateSharedWithUsers},e.prev=5,e.next=8,n.props.environmentsStore.updateEnvironment(a);case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(5),(0,c.runInAction)((function(){n.formProcessing=!1})),(0,y.displayError)(e.t0);case 14:(0,c.runInAction)((function(){n.formProcessing=!1}));case 15:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t){return e.apply(this,arguments)}}(),n.handleKeyPairRequest=function(){var e=C(r.mark((function e(t){var o,a,i;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.stopPropagation(),o=n.getEnvironment(),e.next=5,o.getKeyPair();case 5:a=e.sent,(i=document.createElement("a")).setAttribute("href","data:application/octet-stream,".concat(encodeURIComponent(a.privateKey))),i.setAttribute("download","".concat(o.id,".pem")),i.click();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleWindowsPasswordRequest=function(){var t=C(r.mark((function t(o){var a,i,u,s,l,f;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.preventDefault(),(0,c.runInAction)((function(){n.windowsPassword="loading"})),a=n.getEnvironment(),t.next=5,a.getWindowsPassword();case 5:i=t.sent,u=T(i,2),s=u[0].privateKey,l=u[1].passwordData,f=p.default.privateDecrypt({key:s,padding:p.default.constants.RSA_PKCS1_PADDING},e.from(l,"base64")).toString("utf8"),(0,c.runInAction)((function(){n.windowsPassword=f}));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(0,c.runInAction)((function(){n.updateSharedWithUsers=[],n.formProcessing=!1})),n}return n=O,(o=[{key:"componentDidMount",value:function(){var e=this.getInstanceStore();(0,v.swallowError)(e.load()),e.startHeartbeat()}},{key:"componentWillUnmount",value:function(){this.getInstanceStore().stopHeartbeat()}},{key:"getInstanceStore",value:function(){var e=this.getInstanceId();return this.props.environmentsStore.getEnvironmentStore(e)}},{key:"getUserStore",value:function(){return this.props.userStore}},{key:"getUser",value:function(){var e=this.getUserStore();return(0,h.isStoreReady)(e)?e.user:{}}},{key:"getInstanceId",value:function(){return(this.props.match.params||{}).instanceId}},{key:"getEnvironment",value:function(){var e=this.getInstanceStore();return(0,h.isStoreReady)(e)?e.environment:{}}},{key:"render",value:function(){var e=this.getInstanceStore(),t=null;return t=(0,h.isStoreError)(e)?i.default.createElement(g.default,{error:e.error,className:"p0"}):(0,h.isStoreLoading)(e)?i.default.createElement(b.default,null):(0,h.isStoreReady)(e)?this.renderMain():null,i.default.createElement(f.Container,{className:"mt3"},this.renderBreadcrumb(),t)}},{key:"renderBreadcrumb",value:function(){var e=this.getInstanceId(),t=(0,m.gotoFn)(this);return i.default.createElement(f.Breadcrumb,{className:"block mb3"},i.default.createElement(f.Breadcrumb.Section,{link:!0,onClick:function(){return t("/workspaces")}},"Research Workspaces"),i.default.createElement(f.Breadcrumb.Divider,{icon:"right angle"}),i.default.createElement(f.Breadcrumb.Section,{active:!0},e))}},{key:"renderMain",value:function(){var e=this.getEnvironment(),t=e.id,n=e.name,r=e.updatedAt,o=e.updatedBy;return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:"flex mb2"},i.default.createElement(f.Header,{as:"h3",color:"grey",className:"mt0 flex-auto ellipsis"},i.default.createElement("span",{className:"flex justify-between"},i.default.createElement("div",null,i.default.createElement(f.Label,{color:"blue",className:"ml0 mr1"},"Research Workspace"),n," - ",t),i.default.createElement("div",null,i.default.createElement(E.default,{environment:e}))),i.default.createElement(f.Header.Subheader,{className:"fs-9 color-grey mt1"},i.default.createElement("div",null,"updated ",i.default.createElement(l.default,{date:r})," ",i.default.createElement(w.default,{uid:o}))))),i.default.createElement("div",{className:"mb3"},this.renderTabs()))}},{key:"renderTabs",value:function(){var e=this.getEnvironment();return e.isCompleted?this.renderCompletedTabs():e.isStopped?this.renderStoppedTabs():e.isError?i.default.createElement(_,{environment:e}):e.isTerminated?this.renderTerminateInfo():this.renderPendingInfo()}},{key:"renderCostDetailsTabPane",value:function(){var e=this;return{menuItem:"Research Workspace Details",render:function(){return i.default.createElement(f.Tab.Pane,{attached:!1},i.default.createElement(u.Observer,null,(function(){return e.renderInstanceDetails()})))}}}},{key:"renderCompletedTabs",value:function(){var e=this,t=this.getEnvironment(),n=[{menuItem:"Security",render:function(){return i.default.createElement(f.Tab.Pane,{attached:!1},i.default.createElement(u.Observer,null,(function(){switch(t.instanceInfo.type){case"ec2-rstudio":return e.renderRStudioSecurity();case"ec2-linux":return e.renderEc2LinuxSecurity();case"ec2-windows":return e.renderEc2WindowsSecurity();case"sagemaker":return e.renderSagemakerSecurity();case"emr":return e.renderEmrSecurity();default:return i.default.createElement(f.Segment,{placeholder:!0},i.default.createElement(f.Header,{icon:!0,className:"color-grey"},i.default.createElement(f.Icon,{name:"hdd"}),"Security"))}})))}},this.renderCostDetailsTabPane(),this.renderUserShareTabPane()];return i.default.createElement(f.Tab,{menu:{secondary:!0,pointing:!0},panes:n})}},{key:"renderInstanceDetails",value:function(){return this.renderCostInfo()}},{key:"renderCostInfo",value:function(){return i.default.createElement(f.Segment,null,i.default.createElement("h2",{className:"center"}," Daily Costs"),this.renderCostTable())}},{key:"renderUserShareTabPane",value:function(){var e=this,t=this.getEnvironment(),n=t.createdBy,r=this.props.usersStore.asDropDownOptions().filter((function(e){return!(e.value===n)}));return{menuItem:"Sharing",render:function(){return i.default.createElement(f.Tab.Pane,{attached:!1},i.default.createElement(u.Observer,null,(function(){return i.default.createElement(f.Segment,null,i.default.createElement("h2",{className:"center"},"Share with Users"),i.default.createElement(f.Dropdown,{options:r,defaultValue:t.sharedWithUsers.map((function(e){return e.id})),fluid:!0,multiple:!0,selection:!0,search:!0,placeholder:"Select other users you want to share this environment",disabled:e.formProcessing,onChange:e.handleSharedWithUsersSelection}),i.default.createElement("div",{className:"mb2"}),i.default.createElement(f.Button,{color:"blue",disabled:e.formProcessing,onClick:e.handleSubmitSharedWithUsersClick},"Update"))})))}}}},{key:"renderStoppedTabs",value:function(){var e=[this.renderUserShareTabPane(),this.renderCostDetailsTabPane()];return i.default.createElement(f.Tab,{menu:{secondary:!0,pointing:!0},panes:e})}},{key:"renderCostTable",value:function(){var e=JSON.parse(JSON.stringify(this.getEnvironment())),t=[],n=[];return e.costs.forEach((function(e){var r=e.cost,o=Object.keys(r);t.push(o);var a={};a.date=e.startDate;var i=0;o.forEach((function(e){var t=r[e].amount;a[e]=t.toFixed(2),i+=t})),a.total=i.toFixed(2),n.push(a)})),t=a.default.flatten(t),t=a.default.uniq(t),i.default.createElement(f.Table,{celled:!0},i.default.createElement(f.Table.Header,null,i.default.createElement(f.Table.Row,null,i.default.createElement(f.Table.HeaderCell,null,"Date"),t.map((function(e){return i.default.createElement(f.Table.HeaderCell,{key:e},e)})),i.default.createElement(f.Table.HeaderCell,null,"Total"))),i.default.createElement(f.Table.Body,null,n.map((function(e){return i.default.createElement(f.Table.Row,{key:e.date},i.default.createElement(f.Table.Cell,null,e.date),t.map((function(t){return i.default.createElement(f.Table.Cell,{key:e},"$",a.default.get(e,t,0))})),i.default.createElement(f.Table.Cell,null,"$",e.total))}))))}},{key:"renderTerminateInfo",value:function(){var e=this.getEnvironment();return i.default.createElement(i.default.Fragment,null,i.default.createElement(f.Segment,null,"This research workspace was terminated ",i.default.createElement(l.default,{date:e.updatedAt})," ",i.default.createElement(w.default,{uid:e.updatedBy}),"."),this.renderCostInfo())}},{key:"renderPendingInfo",value:function(){var e=this.getEnvironment();return i.default.createElement(i.default.Fragment,null,i.default.createElement(f.Segment,null,"This research workspace was started ",i.default.createElement(l.default,{date:e.createdAt})," ",i.default.createElement(w.default,{uid:e.createdBy}),"."))}},{key:"renderCopyToClipboard",value:function(e){return i.default.createElement(f.Popup,{content:"Copy",trigger:i.default.createElement(d.CopyToClipboard,{className:"ml1 mr0",text:e,style:{cursor:"pointer"}},i.default.createElement(f.Icon,{name:"copy"}))})}},{key:"renderEc2LinuxSecurity",value:function(){var e=this.getEnvironment();return i.default.createElement("div",null,"You'll need two pieces of information to connect to this research workspace.",i.default.createElement("ol",null,i.default.createElement("li",null,"The IP Address or DNS of the instance, for this research workspace it is"," ",e.instanceInfo.Ec2WorkspaceDnsName),i.default.createElement("li",null,"The ssh key")),"Connecting to your research workspace depends on the operating system you are connecting from.",i.default.createElement("ul",null,i.default.createElement("li",null,i.default.createElement("a",{href:"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/putty.html"},"Connecting from Windows via Putty")),i.default.createElement("li",null,i.default.createElement("a",{href:"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AccessingInstancesLinux.html"},"Connecting from MacOS or Linux via SSH"))),"Example:",i.default.createElement(f.Segment,null,"ssh -i ".concat(e.id,".pem ec2-user@").concat(e.instanceInfo.Ec2WorkspaceDnsName)),i.default.createElement(f.Button,{color:"blue",onClick:this.handleKeyPairRequest},"Download SSH Key"))}},{key:"renderEc2WindowsSecurity",value:function(){var e=this.getEnvironment(),t=!this.windowsPassword||"loading"===this.windowsPassword,n={width:"27em",height:"5em"};return i.default.createElement(i.default.Fragment,null,i.default.createElement("p",null,"Your Windows workspace can be accessed via an RDP client by using the DNS host name and credentials defined defined below."),i.default.createElement(f.Label,{className:"mx1"},"Host ",i.default.createElement(f.Label.Detail,null,e.instanceInfo.Ec2WorkspaceDnsName),this.renderCopyToClipboard(e.instanceInfo.Ec2WorkspaceDnsName)),i.default.createElement(f.Reveal,{className:"mt1",animated:"move",disabled:t},i.default.createElement(f.Reveal.Content,{visible:!0},i.default.createElement(f.Button,{color:"blue",onClick:this.handleWindowsPasswordRequest,loading:"loading"===this.windowsPassword,style:n},i.default.createElement(f.Icon,{name:t?"lock":"unlock"}),t?"Get ":"Show "," Windows Credentials")),i.default.createElement(f.Reveal.Content,{hidden:!0},i.default.createElement(f.Segment,{className:"px1 py1",style:n},i.default.createElement(f.Label,null,"Username ",i.default.createElement(f.Label.Detail,null,"Administrator")),i.default.createElement("br",null),i.default.createElement(f.Label,{className:"mx0"},"Password",i.default.createElement(f.Label.Detail,null,this.windowsPassword),this.renderCopyToClipboard(this.windowsPassword))))),i.default.createElement("p",{className:"mt2"},"Additional information about connecting via RDP can be found in the documentation below:",i.default.createElement("ul",null,i.default.createElement("li",null,i.default.createElement("a",{href:"https://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/connecting_to_windows_instance.html#connect-rdp",target:"_blank",rel:"noopener noreferrer"},"Connect to Your Windows Instance")))))}},{key:"renderRStudioSecurity",value:function(){return this.renderConnectBtn("To connect to this RStudio Server instance simply click the launch button below.")}},{key:"renderEmrSecurity",value:function(){return this.renderConnectBtn("To connect to this EMR Jupyter notebook instance simply click the launch button below.")}},{key:"renderSagemakerSecurity",value:function(){return this.renderConnectBtn("To connect to this SageMaker notebook instance simply click the launch button below.")}},{key:"renderConnectBtn",value:function(e){var t=this.getEnvironment();return i.default.createElement("div",null,i.default.createElement("p",null,e),i.default.createElement(S.default,{as:f.Button,environment:t,color:"green"},t.fetchingUrl?i.default.createElement(i.default.Fragment,null,"Connecting",i.default.createElement(f.Icon,{loading:!0,name:"spinner",size:"small",className:"ml1 mr1"})):i.default.createElement(i.default.Fragment,null,"Connect")))}}])&&P(n.prototype,o),s&&P(n,s),O}(i.default.Component);(0,c.decorate)(D,{windowsPassword:c.observable,updateSharedWithUsers:c.observable,formProcessing:c.observable,handleSharedWithUsersSelection:c.action});var R=(0,u.inject)("environmentsStore","userStore","usersStore")((0,s.withRouter)((0,u.observer)(D)));t.default=R}).call(this,n(65).Buffer)},2086:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=w(n(0)),a=w(n(5)),i=n(3),u=n(12),c=n(31),s=n(16),l=w(n(57)),f=n(38),d=n(27),p=n(15),m=w(n(39)),v=w(n(44)),y=w(n(310)),h=w(n(702)),g=w(n(704)),b=w(n(2087)),E=w(n(2088));function w(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t,n){return t&&k(e.prototype,t),n&&k(e,n),e}function C(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var o=I(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=function(e){C(n,e);var t=A(n);function n(){return S(this,n),t.apply(this,arguments)}return O(n,[{key:"render",value:function(){return o.default.createElement(o.default.Fragment,null,this.props.children)}}]),n}(o.default.Component),T=function(e){C(n,e);var t=A(n);function n(){return S(this,n),t.apply(this,arguments)}return O(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0);var e=this.getEnvStore();e&&((0,d.swallowError)(e.load()),e.startHeartbeat())}},{key:"componentWillUnmount",value:function(){var e=this.getEnvStore();e&&e.stopHeartbeat()}},{key:"getEnvStore",value:function(){var e=this.envsStore,t=this.instanceId;return e.getScEnvironmentStore(t)}},{key:"getEnv",value:function(){var e=this.getEnvStore();return e&&(0,p.isStoreReady)(e)?e.scEnvironment:{}}},{key:"render",value:function(){var e=this.getEnvStore(),t=null;return t=(0,p.isStoreError)(e)?o.default.createElement(m.default,{error:e.error,className:"p0"}):(0,p.isStoreLoading)(e)?o.default.createElement(v.default,null):(0,p.isStoreReady)(e)?this.renderMain():null,o.default.createElement(s.Container,{className:"mt3"},this.renderBreadcrumb(),t)}},{key:"renderBreadcrumb",value:function(){var e=this.instanceId,t=(0,f.gotoFn)(this);return o.default.createElement(s.Breadcrumb,{className:"block mb3"},o.default.createElement(s.Breadcrumb.Section,{link:!0,onClick:function(){return t("/workspaces")}},"Research Workspaces"),o.default.createElement(s.Breadcrumb.Divider,{icon:"right angle"}),o.default.createElement(s.Breadcrumb.Section,{active:!0},"Workspace # ",e))}},{key:"renderMain",value:function(){var e=this.getEnv();return o.default.createElement(o.default.Fragment,null,this.renderTitle(e),this.renderError(e),o.default.createElement(s.Divider,{className:"mt1 mb1"}),this.renderButtons(e),o.default.createElement(s.Divider,{className:"mt1"}),e.description||"Not description for this workspace was provided.",o.default.createElement(s.Grid,{columns:2,stackable:!0,className:"mt2"},o.default.createElement(s.Grid.Row,{stretched:!0},o.default.createElement(s.Grid.Column,{width:12},this.renderDetailTable(e)),o.default.createElement(s.Grid.Column,{width:4},o.default.createElement(s.Segment,{className:"flex items-center"},o.default.createElement("div",{className:"w-100 overflow-hidden"},o.default.createElement(g.default,{envId:e.id})))))),this.renderTabs(e))}},{key:"renderDetailTable",value:function(e){var t=a.default.get(e,"studyIds",[]),n=a.default.size(t),r=function(e,t){return o.default.createElement(s.Table.Row,null,o.default.createElement(s.Table.Cell,{width:5},e),o.default.createElement(s.Table.Cell,{width:11,className:"breakout"},t))};return o.default.createElement(s.Table,{definition:!0},o.default.createElement(s.Table.Body,null,r("Status",this.renderStatus(e)),r("Owner",o.default.createElement(y.default,{uid:e.createdBy,skipPrefix:!0})),r("Studies",0===n?"No studies linked to this workspace":t.join(", ")),r("Project",a.default.isEmpty(e.projectId)?"N/A":e.projectId),r("Restricted CIDR",a.default.isEmpty(e.cidr)?"N/A":e.cidr),r("Workspace Type",o.default.createElement(b.default,{envTypeId:e.envTypeId}))))}},{key:"renderButtons",value:function(e){return o.default.createElement(h.default,{scEnvironment:e})}},{key:"renderTitle",value:function(e){return o.default.createElement(s.Header,{as:"h3",className:"mt1"},o.default.createElement(s.Icon,{name:"server",className:"align-top"}),o.default.createElement(s.Header.Content,{className:"left-align"},e.name),o.default.createElement(s.Header.Subheader,null,o.default.createElement("span",{className:"fs-8 color-grey"},"Created ",o.default.createElement(l.default,{date:e.createdAt,className:"mr2"})," ",o.default.createElement(y.default,{uid:e.createdBy,className:"mr2"})),o.default.createElement("span",{className:"fs-8 color-grey mr2"}," ",e.id)))}},{key:"renderStatus",value:function(e){var t=e.state;return o.default.createElement("div",{style:{cursor:"default"}},o.default.createElement(s.Popup,{trigger:o.default.createElement(s.Label,{size:"mini",color:t.color},t.spinner&&o.default.createElement(s.Icon,{name:"spinner",loading:!0}),t.display)},t.tip))}},{key:"renderError",value:function(e){return a.default.isEmpty(e.error)?null:o.default.createElement(s.Message,{negative:!0},o.default.createElement("p",null,e.error))}},{key:"renderTabs",value:function(e){var t=this,n=[{menuItem:"Cost",render:function(){return o.default.createElement(s.Tab.Pane,{attached:!1,key:"cost",as:x},o.default.createElement(u.Observer,null,(function(){return o.default.createElement(E.default,{envId:e.id})})))}},{menuItem:"CloudFormation Output",render:function(){return o.default.createElement(s.Tab.Pane,{attached:!1,key:"cfn-outputs",as:x},o.default.createElement(u.Observer,null,(function(){return t.renderCfnOutput(e)})))}}];return o.default.createElement(s.Tab,{className:"mt4",menu:{secondary:!0,pointing:!0},renderActiveOnly:!0,panes:n})}},{key:"renderCfnOutput",value:function(e){var t=e.outputs,n=a.default.isEmpty(t);return o.default.createElement(o.default.Fragment,null,!n&&o.default.createElement(s.Table,{definition:!0,className:"mt3"},o.default.createElement(s.Table.Body,null,a.default.map(t,(function(e,t){return function(e,t,n,r){return o.default.createElement(s.Table.Row,{key:e},o.default.createElement(s.Table.Cell,{width:5},t),o.default.createElement(s.Table.Cell,{width:11,className:"breakout"},n,o.default.createElement("div",{className:"fs-7"},r)))}(t,e.OutputKey,e.OutputValue,e.Description)})))),n&&o.default.createElement(s.Message,{className:"mt3",content:"None is available"}))}},{key:"envsStore",get:function(){return this.props.scEnvironmentsStore}},{key:"instanceId",get:function(){return(this.props.match.params||{}).instanceId}}]),n}(o.default.Component);(0,i.decorate)(T,{instanceId:i.computed,envsStore:i.computed});var N=(0,u.inject)("scEnvironmentsStore")((0,c.withRouter)((0,u.observer)(T)));t.default=N},2087:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=d(n(5)),a=d(n(0)),i=n(3),u=n(12),c=n(31),s=n(16),l=n(15),f=n(27);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(u,e);var t,n,r,i=y(u);function u(){return p(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"componentDidMount",value:function(){var e=this.getEnvTypeStore();e&&!(0,l.isStoreReady)(e)&&(0,f.swallowError)(e.load())}},{key:"getEnvTypeStore",value:function(){var e=this.envTypesStore,t=this.envTypeId;return e.getEnvTypeStore(t)}},{key:"render",value:function(){var e=this.getEnvTypeStore();return(0,l.isStoreError)(e)?this.renderError(e.error):(0,l.isStoreLoading)(e)?a.default.createElement(s.Placeholder,null,a.default.createElement(s.Placeholder.Line,null)):(0,l.isStoreReady)(e)?e.envType.name||"Not provided":null}},{key:"renderError",value:function(e){var t=e||"Hmm... something went wrong",n=o.default.isString(t)?t:o.default.get(t,"message","Hmm... something went wrong");return a.default.createElement(s.Popup,{trigger:a.default.createElement(s.Label,{size:"mini",basic:!0,color:"red"},"Show Error"),basic:!0},a.default.createElement("div",{className:"color-red"},a.default.createElement("p",null,"An error occurred while retrieving the workspace type information."),a.default.createElement("p",null,"The system returned this error message:"),a.default.createElement("p",null,n)))}},{key:"envTypeId",get:function(){return this.props.envTypeId}},{key:"envTypesStore",get:function(){return this.props.envTypesStore}}])&&m(t.prototype,n),r&&m(t,r),u}(a.default.Component);(0,i.decorate)(b,{envTypeId:i.computed,envTypesStore:i.computed});var E=(0,u.inject)("envTypesStore")((0,c.withRouter)((0,u.observer)(b)));t.default=E},2088:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=m(n(5)),a=m(n(0)),i=n(3),u=n(12),c=n(31),s=n(16),l=n(15),f=n(27),d=m(n(39)),p=m(n(44));function m(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(u,e);var t,n,r,i=g(u);function u(){return v(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"componentDidMount",value:function(){var e=this.getEnvCostStore();(0,l.isStoreReady)(e)||(0,l.isStoreError)(e)||(0,f.swallowError)(e.load()),e.startHeartbeat()}},{key:"componentWillUnmount",value:function(){this.getEnvCostStore().stopHeartbeat()}},{key:"getEnvCostStore",value:function(){var e=this.costsStore,t=this.envId;return e.getScEnvironmentCostStore(t)}},{key:"render",value:function(){var e=this.getEnvCostStore(),t=null;return t=(0,l.isStoreError)(e)?a.default.createElement(d.default,{error:e.error,className:"p0"}):(0,l.isStoreLoading)(e)?a.default.createElement(p.default,null):(0,l.isStoreReady)(e)?this.renderMain():null,a.default.createElement(a.default.Fragment,null,t)}},{key:"renderMain",value:function(){var e=this.getEnvCostStore().scEnvironmentCost.list,t=o.default.isEmpty(e);return a.default.createElement(a.default.Fragment,null,!t&&a.default.createElement(s.Table,{definition:!0,className:"mt3"},a.default.createElement(s.Table.Body,null,o.default.map(e,(function(e,t){return function(e,t,n){return a.default.createElement(s.Table.Row,{key:e},a.default.createElement(s.Table.Cell,{width:5},t),a.default.createElement(s.Table.Cell,{width:11,className:"breakout"},"$",(0,f.nicePrice)(n)))}(t,e.date,e.amount)})))),t&&a.default.createElement(s.Message,{className:"mt3",content:"None is available"}))}},{key:"costsStore",get:function(){return this.props.scEnvironmentCostsStore}},{key:"envId",get:function(){return this.props.envId}}])&&y(t.prototype,n),r&&y(t,r),u}(a.default.Component);(0,i.decorate)(w,{costsStore:i.computed,envId:i.computed});var S=(0,u.inject)("scEnvironmentCostsStore")((0,c.withRouter)((0,u.observer)(w)));t.default=S},2089:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=v(n(0)),i=n(12),u=n(31),c=n(3),s=n(16),l=v(n(5)),f=n(33),d=n(38),p=v(n(229)),m=n(2090);function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){y(a,r,o,i,u,"next",e)}function u(e){y(a,r,o,i,u,"throw",e)}i(void 0)}))}}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(u,e);var t,n,o,i=E(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).handleRoleChange=function(e,n){var r=n.value;return t.setState({role:r})},t.handleStatusChange=function(e,n){var r=n.value;return t.setState({status:r})},t.handleCancel=(0,c.action)((function(e){e.preventDefault(),e.stopPropagation(),t.formProcessing=!1,t.goto("/accounts")})),t.handleSubmit=(0,c.action)(h(r.mark((function e(){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.formProcessing=!0,e.prev=1,e.next=4,(0,p.default)(t.awsAccount,t.addAwsAccountFormFields);case 4:if(!(n=e.sent).fails()){e.next=9;break}(0,c.runInAction)((function(){t.validationErrors=n.errors,t.formProcessing=!1})),e.next=13;break;case 9:return e.next=11,t.props.awsAccountsStore.addAwsAccount(t.awsAccount);case 11:(0,c.runInAction)((function(){t.formProcessing=!1})),t.goto("/accounts");case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),(0,c.runInAction)((function(){t.formProcessing=!1})),(0,f.displayError)(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})))),t.state={role:"guest",status:"active"},(0,c.runInAction)((function(){t.formProcessing=!1,t.validationErrors=new Map,t.awsAccount={}})),t.form=(0,m.getAddAwsAccountForm)(),t.addAwsAccountFormFields=(0,m.getAddAwsAccountFormFields)(),t}return t=u,(n=[{key:"render",value:function(){return a.default.createElement("div",{className:"mt2 animated fadeIn"},a.default.createElement(s.Header,{as:"h2",icon:!0,textAlign:"center",className:"mt3",color:"grey"},"Add AWS Account"),a.default.createElement("div",{className:"mt3 ml3 mr3 animated fadeIn"},this.renderAddAwsAccountForm()))}},{key:"renderAddAwsAccountForm",value:function(){var e=this,t=this.formProcessing,n=this.addAwsAccountFormFields;return a.default.createElement(s.Segment,{basic:!0,className:"ui fluid form"},a.default.createElement(s.Dimmer,{active:t,inverted:!0},a.default.createElement(s.Loader,{inverted:!0},"Checking")),Object.keys(n).map((function(t){return a.default.createElement(a.default.Fragment,{key:t},e.renderField(t,function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",o=(0,c.action)((function(n){n.preventDefault(),e.awsAccount[t]=n.target.value}));return a.default.createElement("div",{className:"ui focus input"},a.default.createElement("input",{type:r,defaultValue:e.awsAccount[t],placeholder:n[t].placeholder||"",onChange:o}))}(t)),a.default.createElement("div",{className:"mb4"}))})),this.renderButtons())}},{key:"renderButtons",value:function(){var e=this.formProcessing;return a.default.createElement("div",{className:"mt3"},a.default.createElement(s.Button,{floated:"right",color:"blue",icon:!0,disabled:e,className:"ml2",onClick:this.handleSubmit},"Add AWS Account"),a.default.createElement(s.Button,{floated:"right",disabled:e,onClick:this.handleCancel},"Cancel"))}},{key:"renderField",value:function(e,t){var n=this.addAwsAccountFormFields,r=n[e].explain,o=n[e].label,i=!l.default.isEmpty(r),u=this.validationErrors.get(e),c=!l.default.isEmpty(u);return a.default.createElement("div",null,a.default.createElement(s.Header,{className:"mr3 mt0",as:"h2",color:"grey"},o),i&&a.default.createElement("div",{className:"mb2"},r),a.default.createElement("div",{className:"ui big field input block m0 ".concat(c?"error":"")},t),c&&a.default.createElement("div",{className:"ui pointing red basic label"},a.default.createElement(s.List,null,l.default.map(u,(function(t){return a.default.createElement(s.List.Item,{key:e},a.default.createElement(s.List.Content,null,t))})))))}},{key:"goto",value:function(e){var t=this.props.location,n=(0,d.createLink)({location:t,pathname:e});this.props.history.push(n)}},{key:"getStore",value:function(){return this.props.usersStore}}])&&g(t.prototype,n),o&&g(t,o),u}(a.default.Component);(0,c.decorate)(k,{formProcessing:c.observable,user:c.observable,validationErrors:c.observable});var O=(0,i.inject)("usersStore","awsAccountsStore")((0,u.withRouter)((0,i.observer)(k)));t.default=O},2090:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAddAwsAccountFormFields=function(){return o},t.getAddAwsAccountForm=function(){return(0,r.createForm)(o)};var r=n(91),o={name:{label:"Account Name",placeholder:"Type the name of this account",rules:"required|string|between:1,100"},accountId:{label:"AWS Account ID",placeholder:"Type the 12-digit AWS account ID",rules:"required|string|size:12"},roleArn:{label:"Role Arn",placeholder:"Type Role ARN for launching resources into this AWS account",rules:"required|string|between:10,300"},xAccEnvMgmtRoleArn:{label:"AWS Service Catalog Role Arn",placeholder:"Type Role ARN for launching resources into this AWS account using AWS Service Catalog",rules:"required|string|between:10,300"},externalId:{label:"External ID",placeholder:"Type external ID for this AWS account",rules:"required|string|between:1,300"},description:{label:"Description",placeholder:"Type description for this AWS account",rules:"required|string"},vpcId:{label:"VPC ID",placeholder:"Type the ID of the VPC where EMR clusters will be launched",rules:"required|string|min:12|max:21"},subnetId:{label:"Subnet ID",placeholder:"Type the ID of the subnet where the EMR clusters will be launched",rules:"required|string|min:15|max:24"},encryptionKeyArn:{label:"KMS Encryption Key ARN",placeholder:"Type the KMS Encryption Key ARN to use for this AWS account",rules:"required|string|between:1,100"}}},2091:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=v(n(0)),i=n(12),u=n(31),c=n(3),s=n(16),l=v(n(5)),f=n(33),d=n(38),p=v(n(229)),m=n(2092);function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){y(a,r,o,i,u,"next",e)}function u(e){y(a,r,o,i,u,"throw",e)}i(void 0)}))}}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(u,e);var t,n,o,i=E(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).handleRoleChange=function(e,n){var r=n.value;return t.setState({role:r})},t.handleStatusChange=function(e,n){var r=n.value;return t.setState({status:r})},t.handleCancel=(0,c.action)((function(e){e.preventDefault(),e.stopPropagation(),t.formProcessing=!1,t.goto("/accounts")})),t.handleSubmit=(0,c.action)(h(r.mark((function e(){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.formProcessing=!0,e.prev=1,e.next=4,(0,p.default)(t.awsAccount,t.createAwsAccountFormFields);case 4:if(!(n=e.sent).fails()){e.next=9;break}(0,c.runInAction)((function(){t.validationErrors=n.errors,t.formProcessing=!1})),e.next=13;break;case 9:return e.next=11,t.props.awsAccountsStore.createAwsAccount(t.awsAccount);case 11:(0,c.runInAction)((function(){t.formProcessing=!1})),t.goto("/accounts");case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),(0,c.runInAction)((function(){t.formProcessing=!1})),(0,f.displayError)(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})))),(0,c.runInAction)((function(){t.formProcessing=!1,t.validationErrors=new Map,t.awsAccount={}})),t.form=(0,m.getCreateAwsAccountForm)(),t.createAwsAccountFormFields=(0,m.getCreateAwsAccountFormFields)(),t}return t=u,(n=[{key:"render",value:function(){return a.default.createElement("div",{className:"mt2 animated fadeIn"},a.default.createElement(s.Header,{as:"h2",icon:!0,textAlign:"center",className:"mt3",color:"grey"},"Create AWS Account"),a.default.createElement("div",{className:"mt3 ml3 mr3 animated fadeIn"},this.renderCreateAwsAccountForm()))}},{key:"renderCreateAwsAccountForm",value:function(){var e=this,t=this.formProcessing,n=this.createAwsAccountFormFields;return a.default.createElement(s.Segment,{basic:!0,className:"ui fluid form"},a.default.createElement(s.Dimmer,{active:t,inverted:!0},a.default.createElement(s.Loader,{inverted:!0},"Checking")),Object.keys(n).map((function(t){return a.default.createElement(a.default.Fragment,{key:t},e.renderField(t,function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",o=(0,c.action)((function(n){n.preventDefault(),e.awsAccount[t]=n.target.value}));return a.default.createElement("div",{className:"ui focus input"},a.default.createElement("input",{type:r,defaultValue:e.awsAccount[t],placeholder:n[t].placeholder||"",onChange:o}))}(t)),a.default.createElement("div",{className:"mb4"}))})),this.renderButtons())}},{key:"renderButtons",value:function(){var e=this.formProcessing;return a.default.createElement("div",{className:"mt3"},a.default.createElement(s.Button,{floated:"right",color:"blue",icon:!0,disabled:e,className:"ml2",onClick:this.handleSubmit},"Create AWS Account"),a.default.createElement(s.Button,{floated:"right",disabled:e,onClick:this.handleCancel},"Cancel"))}},{key:"renderField",value:function(e,t){var n=this.createAwsAccountFormFields,r=n[e].explain,o=n[e].label,i=!l.default.isEmpty(r),u=this.validationErrors.get(e),c=!l.default.isEmpty(u);return a.default.createElement("div",null,a.default.createElement(s.Header,{className:"mr3 mt0",as:"h2",color:"grey"},o),i&&a.default.createElement("div",{className:"mb2"},r),a.default.createElement("div",{className:"ui big field input block m0 ".concat(c?"error":"")},t),c&&a.default.createElement("div",{className:"ui pointing red basic label"},a.default.createElement(s.List,null,l.default.map(u,(function(t){return a.default.createElement(s.List.Item,{key:e},a.default.createElement(s.List.Content,null,t))})))))}},{key:"goto",value:function(e){var t=this.props.location,n=(0,d.createLink)({location:t,pathname:e});this.props.history.push(n)}},{key:"getStore",value:function(){return this.props.usersStore}}])&&g(t.prototype,n),o&&g(t,o),u}(a.default.Component);(0,c.decorate)(k,{formProcessing:c.observable,user:c.observable,validationErrors:c.observable});var O=(0,i.inject)("usersStore","awsAccountsStore")((0,u.withRouter)((0,i.observer)(k)));t.default=O},2092:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCreateAwsAccountFormFields=function(){return o},t.getCreateAwsAccountForm=function(){return(0,r.createForm)(o)};var r=n(91),o={accountName:{label:"Account Name",placeholder:"Type the name of this account",rules:"required|string|between:1,100"},accountEmail:{label:"AWS Account Email",placeholder:"Type AWS account email",rules:"required|string|email"},masterRoleArn:{label:"Master Role Arn",placeholder:"Type configured Role ARN of master account of the Organization",rules:"required|string|between:10,300"},externalId:{label:"External ID",placeholder:"Type external ID for this AWS account",rules:"required|string|between:1,300"},description:{label:"Description",placeholder:"Type description for this AWS account",rules:"required|string"}}},2093:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=g(n(0)),i=n(12),u=n(3),c=n(16),s=n(33),l=g(n(49)),f=g(n(52)),d=g(n(44)),p=g(n(39)),m=n(15),v=g(n(61)),y=n(38),h=g(n(2094));function g(e){return e&&e.__esModule?e:{default:e}}function b(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){b(a,r,o,i,u,"next",e)}function u(e){b(a,r,o,i,u,"throw",e)}i(void 0)}))}}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(u,e);var t,n,o,i=k(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).componentDidMount=E(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.budgetStore.load();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),(0,s.displayError)(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),t.handleCancel=function(){t.goBackToAccountsPage()},t.handleFormSubmission=function(){var e=E(r.mark((function e(n){var o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=t.convertDateToEpoch(n.values()),e.next=4,t.budgetStore.createOrUpdateBudget(o);case 4:n.clear(),(0,s.displaySuccess)("Updated budget successfully"),t.goBackToAccountsPage(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,s.displayError)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),t.awsAccountUUID=(t.props.match.params||{}).id,t.budgetStore=t.props.awsAccountsStore.getBudgetStore(t.awsAccountUUID),t}return t=u,(n=[{key:"render",value:function(){var e;return e=(0,m.isStoreError)(this.budgetStore)?a.default.createElement(p.default,{error:this.budgetStore.error,className:"p0 mb3"}):(0,m.isStoreLoading)(this.budgetStore)?a.default.createElement(d.default,null):this.renderMain(),a.default.createElement("div",{className:"mt2 animated fadeIn"},a.default.createElement(c.Header,{as:"h2",icon:!0,textAlign:"center",className:"mt3",color:"grey"},"Budget Detail"),a.default.createElement("div",{className:"mt3 ml3 mr3 animated fadeIn"},e))}},{key:"renderMain",value:function(){var e=this.budgetStore.budget,t=(0,h.default)(e),n=this.budgetStore.thresholdsOptions;return a.default.createElement(l.default,{form:t,onCancel:this.handleCancel,onSuccess:this.handleFormSubmission},(function(e){var r=e.processing,o=e.onCancel;return a.default.createElement(a.default.Fragment,null,a.default.createElement(f.default,{field:t.$("budgetLimit"),type:"number"}),a.default.createElement(f.default,{field:t.$("startDate"),type:"date"}),a.default.createElement(f.default,{field:t.$("endDate"),type:"date"}),a.default.createElement(v.default,{field:t.$("thresholds"),options:n,multiple:!0,selection:!0,clearable:!0,fluid:!0}),a.default.createElement(f.default,{field:t.$("notificationEmail"),type:"email"}),a.default.createElement("div",{className:"mt3"},a.default.createElement(c.Button,{floated:"right",primary:!0,className:"ml2",type:"submit",content:"Update Budget",disabled:r}),a.default.createElement(c.Button,{floated:"right",onClick:o,content:"Cancel",disabled:r})))}))}},{key:"goto",value:function(e){var t=this.props.location,n=(0,y.createLink)({location:t,pathname:e});this.props.history.push(n)}},{key:"goBackToAccountsPage",value:function(){this.budgetStore.cleanup(),this.goto("/accounts")}},{key:"convertDateToEpoch",value:function(e){return e.startDate=new Date(e.startDate).getTime()/1e3,e.endDate=new Date(e.endDate).getTime()/1e3,e}}])&&w(t.prototype,n),o&&w(t,o),u}(a.default.Component);(0,u.decorate)(P,{handleCancel:u.action,handleFormSubmission:u.action});var A=(0,i.inject)("awsAccountsStore")((0,i.observer)(P));t.default=A},2094:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(5))&&r.__esModule?r:{default:r},a=n(91);var i=function(e){var t={budgetLimit:{label:"Budget Limit Dollar Amount",placeholder:"Type the dollar amount for the budget",rules:"required|numeric|regex:/^[^-]*$/",value:o.default.get(e,"budgetLimit","")},startDate:{label:"Budget Start Date",rules:"required|string",value:o.default.get(e,"startDate","").slice(0,10)},endDate:{label:"Budget Expiration Date",extra:{explain:"Budget expiration date need to be less than a year from start date."},rules:"required|string",value:o.default.get(e,"endDate","").slice(0,10)},thresholds:{label:"Thresholds",extra:{explain:"Give percentage thresholds you would like to receive alarm for this budget, up to 5 thresholds."},value:o.default.get(e,"thresholds")},notificationEmail:{label:"Notification Email",extra:{explain:"Email to notify when actual spent exceeds a threshold. "},rules:"email",value:o.default.get(e,"notificationEmail")}};return(0,a.createForm)(t)};t.default=i},2095:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=h(n(0)),i=n(3),u=n(12),c=n(31),s=n(16),l=n(38),f=n(33),d=n(188),p=n(685),m=h(n(686)),v=h(n(2096)),y=h(n(699));function h(e){return e&&e.__esModule?e:{default:e}}function g(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(c,e);var t,n,o,u=w(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=u.call(this,e)).handlePrevious=function(){t.envTypeId?t.goto("/workspace-types-management"):t.goto("/workspaces")},t.handleCompleted=function(){var e,n=(e=r.mark((function e(n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,f.displaySuccess)("The research workspace is being provisioned"),t.goto("/workspaces");case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){g(a,r,o,i,u,"next",e)}function u(e){g(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}(),(0,i.runInAction)((function(){var e="selectEnvType";d.enableBuiltInWorkspaces?e="selectComputePlatform":t.envTypeId&&(e="selectEnvConfig"),t.currentStep=p.CurrentStep.create({step:e})})),t}return t=c,(n=[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"goto",value:function(e){(0,l.gotoFn)(this)(e)}},{key:"render",value:function(){return a.default.createElement(s.Container,{className:"mt3"},this.renderTitle(),this.renderStepsProgress(),this.renderContent())}},{key:"renderTitle",value:function(){return a.default.createElement("div",{className:"flex"},a.default.createElement(s.Header,{as:"h3",className:"color-grey mt1 mb0 flex-auto"},a.default.createElement(s.Icon,{name:"server",className:"align-top"}),a.default.createElement(s.Header.Content,{className:"left-align"},"Research Workspaces")))}},{key:"renderStepsProgress",value:function(){return a.default.createElement(v.default,{currentStep:this.currentStep,envTypeImmutable:!!this.envTypeId})}},{key:"renderContent",value:function(){return d.enableBuiltInWorkspaces?a.default.createElement(m.default,{currentStep:this.currentStep,onPrevious:this.handlePrevious,onCompleted:this.handleCompleted}):a.default.createElement(y.default,{currentStep:this.currentStep,onPrevious:this.handlePrevious,onCompleted:this.handleCompleted,envTypeId:this.envTypeId,envTypeImmutable:!!this.envTypeId})}},{key:"envTypeId",get:function(){return(this.props.match.params||{}).envTypeId}}])&&b(t.prototype,n),o&&b(t,o),c}(a.default.Component);(0,i.decorate)(O,{handlePrevious:i.action,handleCompleted:i.action,currentStep:i.observable});var C=(0,u.inject)()((0,c.withRouter)((0,u.observer)(O)));t.default=C},2096:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(0))&&r.__esModule?r:{default:r},a=n(12),i=n(16);var u=(0,a.observer)((function(e){var t,n=e.currentStep,r=void 0===n?{}:n,a=e.envTypeImmutable,u=void 0!==a&&a;switch(r.step){case"selectComputePlatform":case"selectEnvType":t=0;break;case"selectComputeConfiguration":case"selectEnvConfig":t=1;break;default:t=0}return o.default.createElement(i.Step.Group,{widths:2},!u&&o.default.createElement(i.Step,{active:0===t,disabled:t<0},o.default.createElement(i.Icon,{name:"server"}),o.default.createElement(i.Step.Content,null,o.default.createElement(i.Step.Title,null,"Select Compute"),o.default.createElement(i.Step.Description,null,"Select a compute platform"))),o.default.createElement(i.Step,{active:1===t,disabled:t<1},o.default.createElement(i.Icon,{name:"hdd outline"}),o.default.createElement(i.Step.Content,null,o.default.createElement(i.Step.Title,null,"Create Workspace"),o.default.createElement(i.Step.Description,null,"Create the workspace"))))}));t.default=u},2097:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=v(n(0)),i=n(12),u=n(31),c=n(3),s=n(16),l=v(n(5)),f=n(33),d=n(38),p=v(n(229)),m=n(682);function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){y(a,r,o,i,u,"next",e)}function u(e){y(a,r,o,i,u,"throw",e)}i(void 0)}))}}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(u,e);var t,n,o,i=E(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).handleRoleChange=function(e,n){var r=n.value;return t.setState({role:r})},t.handleStatusChange=function(e,n){var r=n.value;return t.setState({status:r})},t.handleProjectAdminsSelection=function(e,n){var r=n.value;(0,c.runInAction)((function(){Array.isArray(r)&&(t.project.projectAdmins=r)}))},t.handleIndexSelection=function(e,n){var r=n.value;return t.setState({indexId:r})},t.handleCancel=(0,c.action)((function(e){e.preventDefault(),e.stopPropagation(),t.formProcessing=!1,t.goto("/accounts")})),t.handleSubmit=(0,c.action)(h(r.mark((function e(){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.formProcessing=!0,e.prev=1,t.project.indexId=t.state.indexId,e.next=5,(0,p.default)(t.project,t.addProjectFormFields);case 5:if(!(n=e.sent).fails()){e.next=10;break}(0,c.runInAction)((function(){t.validationErrors=n.errors,t.formProcessing=!1})),e.next=14;break;case 10:return e.next=12,t.props.projectsStore.addProject(t.project);case 12:(0,c.runInAction)((function(){t.formProcessing=!1})),t.goto("/accounts");case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),(0,c.runInAction)((function(){t.formProcessing=!1})),(0,f.displayError)(e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})))),t.state={role:"guest",status:"active",indexId:""},(0,c.runInAction)((function(){t.formProcessing=!1,t.validationErrors=new Map,t.project={id:"",description:"",indexId:"",projectAdmins:[]}})),t.form=(0,m.getAddProjectForm)(),t.addProjectFormFields=(0,m.getAddProjectFormFields)(),t}return t=u,(n=[{key:"goto",value:function(e){var t=this.props.location,n=(0,d.createLink)({location:t,pathname:e});this.props.history.push(n)}},{key:"render",value:function(){return a.default.createElement("div",{className:"mt2 animated fadeIn"},a.default.createElement(s.Header,{as:"h2",icon:!0,textAlign:"center",className:"mt3",color:"grey"},"Add Project"),a.default.createElement("div",{className:"mt3 ml3 mr3 animated fadeIn"},this.renderAddProjectForm()))}},{key:"renderAddProjectForm",value:function(){var e=this,t=this.formProcessing,n=this.addProjectFormFields,r=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",o=(0,c.action)((function(n){n.preventDefault(),e.project[t]=n.target.value}));return a.default.createElement("div",{className:"ui focus input"},a.default.createElement("input",{type:r,defaultValue:e.project[t],placeholder:n[t].placeholder||"",onChange:o}))};return a.default.createElement(s.Segment,{basic:!0,className:"ui fluid form"},a.default.createElement(s.Dimmer,{active:t,inverted:!0},a.default.createElement(s.Loader,{inverted:!0},"Checking")),this.renderField("id",r("id","id")),a.default.createElement("div",{className:"mb4"}),this.renderField("indexId"),this.renderIndexSelection(),a.default.createElement("div",{className:"mb4"}),this.renderField("description",r("description","description")),a.default.createElement("div",{className:"mb4"}),this.renderField("projectAdmins"),this.renderProjectAdminsSelection(),this.renderButtons())}},{key:"renderProjectAdminsSelection",value:function(){var e=this.props.usersStore.asDropDownOptions(),t=this.addProjectFormFields.projectAdmins.placeholder||"Please select a user";return a.default.createElement(s.Dropdown,{options:e,placeholder:t,fluid:!0,multiple:!0,selection:!0,onChange:this.handleProjectAdminsSelection})}},{key:"renderButtons",value:function(){var e=this.formProcessing;return a.default.createElement("div",{className:"mt3"},a.default.createElement(s.Button,{floated:"right",color:"blue",icon:!0,disabled:e,className:"ml2",onClick:this.handleSubmit},"Add Project"),a.default.createElement(s.Button,{floated:"right",disabled:e,onClick:this.handleCancel},"Cancel"))}},{key:"renderIndexSelection",value:function(){var e=this.props.indexesStore.dropdownOptions;return a.default.createElement(s.Dropdown,{options:e,placeholder:"Please assign indexes to this project",fluid:!0,selection:!0,onChange:this.handleIndexSelection})}},{key:"renderField",value:function(e,t){var n=this.addProjectFormFields,r=n[e].explain,o=n[e].label,i=!l.default.isEmpty(r),u=this.validationErrors.get(e),c=!l.default.isEmpty(u);return a.default.createElement("div",null,a.default.createElement(s.Header,{className:"mr3 mt0",as:"h2",color:"grey"},o),i&&a.default.createElement("div",{className:"mb2"},r),a.default.createElement("div",{className:"ui big field input block m0 ".concat(c?"error":"")},t),c&&a.default.createElement("div",{className:"ui pointing red basic label"},a.default.createElement(s.List,null,l.default.map(u,(function(t){return a.default.createElement(s.List.Item,{key:e},a.default.createElement(s.List.Content,null,t))})))))}},{key:"getStore",value:function(){return this.props.usersStore}}])&&g(t.prototype,n),o&&g(t,o),u}(a.default.Component);(0,c.decorate)(k,{formProcessing:c.observable,user:c.observable,validationErrors:c.observable});var O=(0,i.inject)("usersStore","indexesStore","projectsStore")((0,u.withRouter)((0,i.observer)(k)));t.default=O},2098:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=k(n(5)),i=k(n(0)),u=n(3),c=n(12),s=n(31),l=n(16),f=n(33),d=k(n(68)),p=k(n(44)),m=n(27),v=k(n(39)),y=n(38),h=k(n(49)),g=k(n(228)),b=k(n(61)),E=k(n(52)),w=n(15),S=n(2099);function k(e){return e&&e.__esModule?e:{default:e}}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return T(this,n)}}function T(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?N(e):t}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(s,e);var t,n,o,c=x(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=c.call(this,e)).handleCancel=function(){(0,y.gotoFn)(N(t))("/users")},t.handleFormSubmission=function(){var e,n=(e=r.mark((function e(n){var o,a,i,c;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.values(),a=t.userRolesStore.isInternalUser(o.userRole),i=t.userRolesStore.isInternalGuest(o.userRole),c=o.projectId||[],a&&!i||(c=[]),e.prev=5,e.next=8,t.usersStore.addUser(C({},o,{projectId:c}));case 8:(0,u.runInAction)((function(){n.clear()})),(0,f.displaySuccess)("Added local user successfully"),(0,y.gotoFn)(N(t))("/users"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),(0,f.displayError)(e.t0);case 17:case"end":return e.stop()}}),e,null,[[5,14]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){A(a,r,o,i,u,"next",e)}function u(e){A(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}(),(0,u.runInAction)((function(){t.stores=new d.default([t.userRolesStore,t.projectsStore]),t.form=(0,S.getAddUserForm)()})),t}return t=s,(n=[{key:"componentDidMount",value:function(){(0,m.swallowError)(this.stores.load())}},{key:"render",value:function(){var e=this.stores,t=null;return t=e.hasError?i.default.createElement(v.default,{error:e.error,className:"p0 mb3"}):(0,w.isStoreLoading)(e)?i.default.createElement(p.default,null):(0,w.isStoreReady)(e)?this.renderContent():null,i.default.createElement(l.Container,{className:"mt3 mb4"},this.renderTitle(),this.renderWarning(),t)}},{key:"renderTitle",value:function(){return i.default.createElement("div",{className:"mb3 flex"},i.default.createElement(l.Header,{as:"h3",className:"color-grey mt1 mb0 flex-auto"},i.default.createElement(l.Icon,{name:"user",className:"align-top"}),i.default.createElement(l.Header.Content,{className:"left-align"},"Add Local User")))}},{key:"renderContent",value:function(){var e=this.form,t=e.$("email"),n=e.$("firstName"),r=e.$("lastName"),o=e.$("password"),u=e.$("userRole"),c=e.$("projectId"),s=e.$("status"),f=this.userRolesStore.dropdownOptions,d=this.projectsStore.dropdownOptions,p=this.userRolesStore.isInternalUser(u.value),m=this.userRolesStore.isInternalGuest(u.value),v=!a.default.isEmpty(d)&&p&&!m,y=a.default.isEmpty(d)&&p&&!m;return i.default.createElement(l.Segment,{clearing:!0,className:"p3"},i.default.createElement(h.default,{form:e,onCancel:this.handleCancel,onSuccess:this.handleFormSubmission},(function(e){var a=e.processing,p=e.onCancel;return i.default.createElement(i.default.Fragment,null,i.default.createElement(E.default,{field:t,disabled:a}),i.default.createElement(E.default,{field:n,disabled:a}),i.default.createElement(E.default,{field:r,disabled:a}),i.default.createElement(E.default,{field:o,type:"password",disabled:a}),i.default.createElement(b.default,{field:u,options:f,selection:!0,fluid:!0,disabled:a}),v&&i.default.createElement(b.default,{field:c,options:d,multiple:!0,selection:!0,clearable:!0,fluid:!0,disabled:a}),y&&i.default.createElement(l.Message,{className:"mb4",icon:"warning",header:"Missing projects",content:"There are no projects created. Once you create a project or two. You want to come back and associate this user to at least one project. You can still create the user for now."}),i.default.createElement(g.default,{field:s,disabled:a}),i.default.createElement("div",{className:"mt3"},i.default.createElement(l.Button,{floated:"right",color:"blue",icon:!0,disabled:a,className:"ml2",type:"submit"},"Add Local User"),i.default.createElement(l.Button,{floated:"right",disabled:a,onClick:p},"Cancel")))})))}},{key:"renderWarning",value:function(){return i.default.createElement(l.Message,{warning:!0,icon:"warning",header:"Not for production usage",content:"Creating local users is not meant to be used in production environments."})}},{key:"projectsStore",get:function(){return this.props.projectsStore}},{key:"userRolesStore",get:function(){return this.props.userRolesStore}},{key:"usersStore",get:function(){return this.props.usersStore}}])&&j(t.prototype,n),o&&j(t,o),s}(i.default.Component);(0,u.decorate)(D,{projectsStore:u.computed,userRolesStore:u.computed,usersStore:u.computed,stores:u.observable,form:u.observable,handleCancel:u.action,handleFormSubmission:u.action});var R=(0,c.inject)("projectsStore","userRolesStore","usersStore")((0,s.withRouter)((0,c.observer)(D)));t.default=R},2099:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAddUserForm=function(){return(0,r.createForm)(o)};var r=n(91),o={email:{label:"Username",placeholder:"Type email address as username for the user",extra:{explain:"Username in email format"},rules:"required|email|string"},password:{label:"Password",placeholder:"Type default password for the user",explain:"The password must be between 4 and 2048 characters long.",rules:"required|string|between:4,2048"},firstName:{label:"First Name",placeholder:"Type first name of the user",rules:"required|string|between:1,500"},lastName:{label:"Last Name",placeholder:"Type last name of the user",rules:"required|string|between:1,500"},userRole:{label:"UserRole",extra:{explain:"Select user's role"},rules:"required"},projectId:{label:"Projects",extra:{explain:"Select projects that this user are associated with"}},status:{label:"Status",extra:{explain:"Active users can log into the Research Portal",yesLabel:"Active",noLabel:"Inactive",yesValue:"active",noValue:"inactive"},rules:"required"}}},2100:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=(o=n(5))&&o.__esModule?o:{default:o},u=n(31),c=n(16),s=n(12),l=n(2101);function f(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(u,e);var t,n,r,o=v(u);function u(){var e;d(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).handleTestClick=function(){var t=e.props.envType;(0,l.gotoFn)(h(e))("/workspaces/create/type/".concat(encodeURIComponent(t.id)))},e.handleTestWithDataClick=function(){var t=e.props.envType;(0,l.gotoFn)(h(e))("/studies/workspace-type/".concat(encodeURIComponent(t.id)))},e}return t=u,(n=[{key:"render",value:function(){return!("approved"===i.default.toLower(this.props.envType.status))&&a.default.createElement(a.default.Fragment,null,a.default.createElement(c.Divider,null),a.default.createElement(c.Popup,{trigger:a.default.createElement(c.Button,{basic:!0,onClick:this.handleTestClick},"Test launch"),content:"Create a test Workspace"}),a.default.createElement(c.Popup,{trigger:a.default.createElement(c.Button,{basic:!0,onClick:this.handleTestWithDataClick},"Test launch with data"),content:"Create a test Workspace with data"}))}}])&&p(t.prototype,n),r&&p(t,r),u}(a.Component),E=(0,u.withRouter)((0,s.observer)(b));t.default=E},2101:function(e,t,n){"use strict";function r(e){var t=e.location;return{pathname:e.pathname,search:e.search||t.search,hash:t.hash,state:t.state}}function o(e){var t=e.location;return{pathname:e.pathname,hash:t.hash,state:t.state}}function a(){setTimeout((function(){window.location.reload()}),150)}function i(e){return function(t){var n=o({location:e.props.location,pathname:t});e.props.history.push(n)}.bind(e)}n.r(t),n.d(t,"createLink",(function(){return o})),n.d(t,"createLinkWithSearch",(function(){return r})),n.d(t,"reload",(function(){return a})),n.d(t,"gotoFn",(function(){return i}))},2102:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(0)),o=n(12),a=n(16),i=c(n(2103)),u=c(n(2105));function c(e){return e&&e.__esModule?e:{default:e}}var s=(0,o.observer)((function(){return r.default.createElement(a.Container,{className:"mt3"},r.default.createElement(i.default,null),r.default.createElement(a.Divider,null),r.default.createElement(u.default,null))}));t.default=s},2103:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=g(n(5)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=n(3),u=n(12),c=n(31),s=n(16),l=g(n(39)),f=g(n(44)),d=n(27),p=n(15),m=n(38),v=n(705),y=g(n(2104));function h(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function g(e){return e&&e.__esModule?e:{default:e}}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?k(e):t}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(c,e);var t,n,r,u=w(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=u.call(this,e)).handleShowAllVersionsToggle=function(){t.showAllVersions=!t.showAllVersions},t.handleImportButtonClick=function(e){(0,m.gotoFn)(k(t))("/workspace-types-management/import/".concat(encodeURIComponent(e)))},(0,i.runInAction)((function(){t.showAllVersions=!1})),t}return t=c,(n=[{key:"componentDidMount",value:function(){(0,d.swallowError)(this.envTypeCandidatesStore.load())}},{key:"render",value:function(){var e,t=this.envTypeCandidatesStore;if((0,p.isStoreError)(t))e=a.default.createElement(l.default,{error:t.error,className:"p0 mb3"});else if((0,p.isStoreLoading)(t))e=a.default.createElement(f.default,null);else if((0,p.isStoreReady)(t)&&(0,p.isStoreEmpty)(t))e=this.renderEmpty();else if((0,p.isStoreReady)(t)&&(0,p.isStoreNotEmpty)(t)){var n=this.envTypeCandidatesList;e=o.default.isEmpty(n)?this.renderEmpty():this.renderMain()}else e=null;return a.default.createElement(s.Container,{className:"mt3 mb4"},this.renderTitle(),e)}},{key:"renderTitle",value:function(){var e=this;return a.default.createElement("div",{className:"mb3 flex"},a.default.createElement(s.Header,{as:"h3",className:"color-grey mt1 mb0 flex-auto"},a.default.createElement(s.Image,{src:y.default}),a.default.createElement(s.Header.Content,{className:"left-align"},"AWS Service Catalog Products",function(){var t=e.envTypeCandidatesStore;return(0,p.isStoreReady)(t)&&(0,p.isStoreNotEmpty)(t)&&a.default.createElement(s.Label,{circular:!0,size:"medium"},e.envTypeCandidatesList.length)}()),a.default.createElement(s.Header.Subheader,{className:"mt2"},"Available AWS Service Catalog Product Versions not imported yet")),a.default.createElement("div",null,a.default.createElement(s.Checkbox,{toggle:!0,checked:this.showAllVersions,onClick:function(){return e.handleShowAllVersionsToggle()},label:this.showAllVersions?"All Versions":"Latest Versions"})))}},{key:"renderEmpty",value:function(){return a.default.createElement(s.Segment,{placeholder:!0},a.default.createElement(s.Header,{icon:!0,className:"color-grey"},a.default.createElement(s.Icon,{name:"computer"}),"No AWS Service Catalog Product Versions available for importing",a.default.createElement(s.Header.Subheader,{className:"mt2"},"Please create AWS Service Catalog Product Version and share the Portfolio with the AWS IAM role"," ",a.default.createElement("strong",null,v.envMgmtRoleName),".")))}},{key:"renderMain",value:function(){var e=this,t=this.envTypeCandidatesList;return o.default.isEmpty(t)?this.renderEmpty():a.default.createElement(s.Card.Group,{stackable:!0,itemsPerRow:3},o.default.map(t,(function(t){return a.default.createElement(s.Card,{key:"etc-".concat(t.id),raised:!0,className:"mb3"},a.default.createElement(s.Card.Content,null,a.default.createElement(s.Header,{as:"h4"},t.name),a.default.createElement(s.Card.Meta,null,o.default.get(t,"provisioningArtifact.name")),a.default.createElement(s.Divider,null),a.default.createElement(s.Card.Description,null,a.default.createElement("div",{className:"mb3 pr1 pl1 pb1"},a.default.createElement("div",{dangerouslySetInnerHTML:{__html:t.descHtml}})))),a.default.createElement(s.Card.Content,{extra:!0},a.default.createElement(s.Button,{basic:!0,icon:!0,color:"blue",onClick:function(){return e.handleImportButtonClick(t.id)},labelPosition:"right",floated:"right",size:"mini"},"Import",a.default.createElement(s.Icon,{name:"arrow down"}))))})))}},{key:"envTypeCandidatesStore",get:function(){return this.props.envTypeCandidatesStore}},{key:"envTypeCandidatesList",get:function(){return this.showAllVersions?this.envTypeCandidatesStore.listAllVersions:this.envTypeCandidatesStore.listLatestVersions}}])&&b(t.prototype,n),r&&b(t,r),c}(a.Component);(0,i.decorate)(C,{envTypeCandidatesList:i.computed,envTypeCandidatesStore:i.computed,showAllVersions:i.observable,handleShowAllVersionsToggle:i.action,handleImportButtonClick:i.action});var P=(0,u.inject)("envTypeCandidatesStore")((0,c.withRouter)((0,u.observer)(C)));t.default=P},2104:function(e,t,n){e.exports=n.p+"static/media/AWS-Service-Catalog.1ed0286e.svg"},2105:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=g(n(5)),a=g(n(0)),i=n(3),u=n(12),c=n(31),s=n(16),l=g(n(39)),f=g(n(44)),d=n(27),p=n(15),m=n(705),v=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(311)),y=g(n(2106));function h(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function g(e){return e&&e.__esModule?e:{default:e}}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(c,e);var t,n,r,u=w(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=u.call(this,e)).handleStatusFilterChange=function(e,n){var r=n.value;t.statusFilter=r},(0,i.runInAction)((function(){t.statusFilter="*"})),t}return t=c,(n=[{key:"componentDidMount",value:function(){(0,d.swallowError)(this.envTypesStore.load())}},{key:"render",value:function(){var e,t=this.envTypesStore;if((0,p.isStoreError)(t))e=a.default.createElement(l.default,{error:t.error,className:"p0 mb3"});else if((0,p.isStoreLoading)(t))e=a.default.createElement(f.default,null);else if((0,p.isStoreReady)(t)&&(0,p.isStoreEmpty)(t))e=this.renderEmpty();else if((0,p.isStoreReady)(t)&&(0,p.isStoreNotEmpty)(t)){var n=this.envTypesList;e=o.default.isEmpty(n)?this.renderEmpty():this.renderMain()}else e=null;return a.default.createElement(s.Container,{className:"mt3 mb4"},this.renderTitle(),e)}},{key:"renderTitle",value:function(){var e=this;return a.default.createElement("div",{className:"mb3 flex"},a.default.createElement(s.Header,{as:"h3",className:"color-grey mt1 mb0 flex-auto"},a.default.createElement(s.Icon,{name:"computer",className:"align-top"}),a.default.createElement(s.Header.Content,{className:"left-align"},"Workspace Types",function(){var t=e.envTypesStore;return(0,p.isStoreReady)(t)&&(0,p.isStoreNotEmpty)(t)&&a.default.createElement(s.Label,{circular:!0,size:"medium"},e.envTypesList.length)}()),a.default.createElement(s.Header.Subheader,{className:"mt2"},"AWS Service Catalog Product Versions imported as Environment Types")),a.default.createElement("div",null,a.default.createElement(s.Radio,{label:"Approved",name:"statusFilter",checked:v.isApproved(this.statusFilter),value:v.approved,onChange:this.handleStatusFilterChange,className:"mr2"}),a.default.createElement(s.Radio,{label:"Not Approved",name:"statusFilter",checked:v.isNotApproved(this.statusFilter),value:v.notApproved,onChange:this.handleStatusFilterChange,className:"mr2"}),a.default.createElement(s.Radio,{label:"All",name:"statusFilter",checked:"*"===this.statusFilter,value:"*",onChange:this.handleStatusFilterChange,className:"mr2"})))}},{key:"renderEmpty",value:function(){var e=this;return a.default.createElement(s.Segment,{placeholder:!0},a.default.createElement(s.Header,{icon:!0,className:"color-grey"},a.default.createElement(s.Icon,{name:"computer"}),v.isApproved(e.statusFilter)?a.default.createElement(a.default.Fragment,null,"No approved Environment Types found"):v.isNotApproved(e.statusFilter)?a.default.createElement(a.default.Fragment,null,"No Environments Types found that require approval"):a.default.createElement(a.default.Fragment,null,"No AWS Service Catalog Product Versions imported yet",a.default.createElement(s.Header.Subheader,{className:"mt2"},"Start by importing an AWS Service Catalog Product Version as Environment Type. AWS Service Catalog Products that are part of AWS Service Catalog Portfolio shared with AWS IAM role"," ",a.default.createElement("strong",null,m.envMgmtRoleName)," are eligible for importing."))))}},{key:"renderMain",value:function(){var e=this,t=this.envTypesList;return a.default.createElement(s.Card.Group,{stackable:!0,itemsPerRow:3},o.default.map(t,(function(t){return a.default.createElement(y.default,{key:t.id,envType:t,envTypesStore:e.envTypesStore})})))}},{key:"envTypesStore",get:function(){return this.props.envTypesStore}},{key:"envTypesList",get:function(){return v.isApproved(this.statusFilter)?this.envTypesStore.listApproved:v.isNotApproved(this.statusFilter)?this.envTypesStore.listNotApproved:this.envTypesStore.list}}])&&b(t.prototype,n),r&&b(t,r),c}(a.default.Component);(0,i.decorate)(O,{envTypesList:i.computed,envTypesStore:i.computed,statusFilter:i.observable,handleStatusFilterChange:i.action});var C=(0,u.inject)("envTypesStore")((0,c.withRouter)((0,u.observer)(O)));t.default=C},2106:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n(5))&&a.__esModule?a:{default:a},u=y(n(0)),c=n(12),s=n(31),l=n(16),f=n(3),d=n(33),p=n(38),m=y(n(311));function v(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return v=function(){return e},e}function y(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!==typeof e)return{default:e};var t=v();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function h(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){h(a,r,o,i,u,"next",e)}function u(e){h(a,r,o,i,u,"throw",e)}i(void 0)}))}}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?k(e):t}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(c,e);var t,n,o,a=w(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).showDeleteDialog=function(){t.shouldShowDeleteDialog=!0,t.processing=!1},t.hideDeleteDialog=function(){t.processing||(t.shouldShowDeleteDialog=!1)},t.handleApproveRevokeClick=function(){var e=g(r.mark((function e(n){var o,a,i=arguments;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=i.length>1&&void 0!==i[1]&&i[1],t.processing=!0,a=t.envTypesStore,e.prev=3,!o){e.next=9;break}return e.next=7,a.revokeEnvType(n);case 7:e.next=11;break;case 9:return e.next=11,a.approveEnvType(n);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),(0,d.displayError)(e.t0);case 16:(0,f.runInAction)((function(){t.processing=!1}));case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),t.handleDeleteClick=function(){var e=g(r.mark((function e(n){var o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.processing=!0,o=t.envTypesStore,e.prev=2,e.next=5,o.deleteEnvType(n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),(0,d.displayError)(e.t0);case 10:(0,f.runInAction)((function(){t.processing=!1,t.hideDeleteDialog()}));case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),t.handleEditClick=function(){var e=g(r.mark((function e(n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,p.gotoFn)(k(t))("/workspace-types-management/edit/".concat(encodeURIComponent(n)));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(0,f.runInAction)((function(){t.processing=!1,t.shouldShowDeleteDialog=!1})),t}return t=c,(n=[{key:"render",value:function(){var e=this,t=this.props.envType,n=m.isApproved(t.status),r=this.props.pluginRegistry,o=r.visitPlugins("env-type-management","getEnvTypeCardMetaActions",{payload:[]},t),a=[u.default.createElement(l.Button,{key:"env-type-mgmt-action-edit",basic:!0,color:"blue",onClick:function(){return e.handleEditClick(t.id)},floated:"right",size:"mini",disabled:this.processing},"Edit"),u.default.createElement(l.Button,{key:"env-type-mgmt-action-delete",basic:!0,color:"red",onClick:function(){return e.showDeleteDialog()},floated:"right",size:"mini",disabled:this.processing},"Delete"),this.renderDeleteConfirmation(t),u.default.createElement(l.Button,{key:"env-type-mgmt-action-revoke-or-approve",basic:!0,color:n?"red":"blue",onClick:function(){return e.handleApproveRevokeClick(t.id,n)},floated:"right",size:"mini",disabled:this.processing},n?"Revoke":"Approve")],c=r.visitPlugins("env-type-management","getEnvTypeCardMgmtActions",{payload:a},t);return u.default.createElement(l.Card,{key:"et-".concat(t.id),raised:!0,className:"mb3"},u.default.createElement(l.Card.Content,null,u.default.createElement(l.Header,{as:"h4"},t.name),u.default.createElement(l.Card.Meta,{className:"flex"},u.default.createElement("span",{className:"fs-8 color-grey mr2"},t.id),u.default.createElement(l.Label,{className:"ml1",size:"mini",color:n?"green":"red"},n?"Approved":"Not Approved")),i.default.map(o,(function(e){return e})),u.default.createElement(l.Divider,null),u.default.createElement(l.Card.Description,null,u.default.createElement("div",{className:"mb3 pr1 pl1 pb1"},u.default.createElement("div",{dangerouslySetInnerHTML:{__html:t.descHtml}})))),u.default.createElement(l.Card.Content,{extra:!0},i.default.map(c,(function(e){return e}))))}},{key:"renderDeleteConfirmation",value:function(e){var t=this,n=this.shouldShowDeleteDialog,r=this.processing;return u.default.createElement(l.Modal,{key:"env-type-mgmt-action-delete-confirmation",open:n,onClose:this.hideDeleteDialog,closeOnDimmerClick:!r},u.default.createElement(l.Modal.Header,null,"Delete ",e.name),u.default.createElement(l.Modal.Content,null,u.default.createElement("p",null,"Are you sure you want to delete ",e.name,"?"),u.default.createElement("p",null,"Once you delete environment type, users will not be able launch them. You will need to re-import it from the AWS Service Catalog Product."),u.default.createElement("p",null,"Is it okay to delete?")),u.default.createElement(l.Modal.Actions,null,u.default.createElement(l.Button,{basic:!0,icon:!0,color:"grey",labelPosition:"right",size:"mini",disabled:this.processing,onClick:this.hideDeleteDialog},u.default.createElement(l.Icon,{name:"close"}),"Cancel"),u.default.createElement(l.Button,{basic:!0,icon:!0,color:"red",labelPosition:"right",size:"mini",disabled:this.processing,onClick:function(){return t.handleDeleteClick(e.id)}},u.default.createElement(l.Icon,{name:"trash"})," Delete")))}},{key:"envTypesStore",get:function(){return this.props.envTypesStore}}])&&b(t.prototype,n),o&&b(t,o),c}(u.Component);(0,f.decorate)(C,{processing:f.observable,envTypesStore:f.computed,shouldShowDeleteDialog:f.observable,handleEditClick:f.action,handleDeleteClick:f.action,handleApproveRevokeClick:f.action,showDeleteDialog:f.action,hideDeleteDialog:f.action});var P=(0,c.inject)("pluginRegistry")((0,s.withRouter)((0,c.observer)(C)));t.default=P},2107:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=b(n(5)),a=b(n(0)),i=n(12),u=n(31),c=n(3),s=n(16),l=b(n(68)),f=n(27),d=b(n(39)),p=b(n(44)),m=n(15),v=n(38),y=n(706),h=b(n(2108)),g=b(n(2110));function b(e){return e&&e.__esModule?e:{default:e}}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e){return a.default.createElement(a.default.Fragment,null,e.children)}var A=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(b,e);var t,n,r,u=S(b);function b(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),(t=u.call(this,e)).renderTitle=function(){return a.default.createElement("div",{className:"mb3 flex"},a.default.createElement(s.Header,{as:"h3",className:"color-grey mt1 mb0 flex-auto"},a.default.createElement(s.Icon,{name:"computer",className:"align-top"}),a.default.createElement(s.Header.Content,{className:"left-align"},t.isEditAction()?"Edit":"Import"," Workspace Type"),a.default.createElement(s.Header.Subheader,{className:"mt2"},o.default.get(t.envType,"name"))))},t.renderContent=function(){return a.default.createElement(a.default.Fragment,null,t.renderTitle(),t.isImportAction()?a.default.createElement(a.default.Fragment,null,t.renderStepProgress(),t.renderCurrentStep()):t.renderStepTabs())},t.renderStepProgress=function(){return a.default.createElement(s.Step.Group,{ordered:!0,className:"container"},o.default.map(t.wizardModel.steps,(function(e){var n={key:e.key,completed:e.isComplete,active:t.wizardModel.isStepActive(e.key)};return a.default.createElement(s.Step,n,a.default.createElement(s.Step.Content,null,a.default.createElement(s.Step.Title,null,e.title),a.default.createElement(s.Step.Description,null,e.desc)))})))},t.renderStepTabs=function(){var e=o.default.map(t.wizardModel.steps,(function(e){return{menuItem:e.title,render:function(){return a.default.createElement(s.Tab.Pane,{attached:!1,key:e.key,as:P},a.default.createElement(i.Observer,null,(function(){return t.renderEnvTypeStep(e.key)})))}}}));return a.default.createElement(s.Tab,{className:"mt3",menu:{secondary:!0,pointing:!0},renderActiveOnly:!0,panes:e})},t.renderCurrentStep=function(){return t.renderEnvTypeStep(t.wizardModel.currentStep.key)},t.handleCancel=function(){(0,v.gotoFn)(O(t))("/workspace-types-management")},t.handleDone=function(){t.handleCancel()},(0,c.runInAction)((function(){t.stores=new l.default([t.envTypeCandidatesStore,t.envTypesStore]),t.wizardModel=(0,y.createWizard)([{key:"basic_information",title:"Basic Information",desc:"Enter basic information about the Environment Type",isComplete:!1},{key:"configurations",title:"Configurations",desc:"Define configurations with predefined set of AWS CloudFormation Input Parameter values",isComplete:!1}])})),t}return t=b,(n=[{key:"componentDidMount",value:function(){(0,f.swallowError)(this.stores.load())}},{key:"render",value:function(){var e=this.stores,t=null;return t=e.hasError?a.default.createElement(d.default,{error:e.error,className:"p0 mb3"}):(0,m.isStoreLoading)(e)?a.default.createElement(p.default,null):(0,m.isStoreReady)(e)?this.renderContent():null,a.default.createElement(s.Container,{className:"mt3 mb4"},t)}},{key:"renderEnvTypeStep",value:function(e){switch(e){case"basic_information":return a.default.createElement(h.default,{envTypesStore:this.envTypesStore,envType:this.envType,wizardModel:this.wizardModel,workspaceTypeAction:this.getAction(),onCancel:this.handleCancel,onEnvTypeSaveComplete:this.handleDone});case"configurations":return a.default.createElement(g.default,{envType:this.envType,envTypeConfigsStore:this.getEnvTypeConfigsStore(),wizardModel:this.wizardModel,workspaceTypeAction:this.getAction(),onCancel:this.handleCancel,onEnvTypeSaveComplete:this.handleDone});default:return}}},{key:"isEditAction",value:function(){return"edit"===this.getAction()}},{key:"isImportAction",value:function(){return"import"===this.getAction()}},{key:"getEnvTypeConfigsStore",value:function(){return this.envTypesStore.getEnvTypeConfigsStore(this.getEnvTypeId())}},{key:"getEnvTypeId",value:function(){return decodeURIComponent((this.props.match.params||{}).id)}},{key:"getAction",value:function(){return decodeURIComponent((this.props.match.params||{}).action)}},{key:"envType",get:function(){var e=this.getEnvTypeId(),t=this.envTypesStore.getEnvType(e);return!t&&this.isImportAction()?this.envTypeCandidatesStore.getEnvTypeCandidate(e):t}},{key:"envTypeCandidatesStore",get:function(){return this.props.envTypeCandidatesStore}},{key:"envTypesStore",get:function(){return this.props.envTypesStore}}])&&E(t.prototype,n),r&&E(t,r),b}(a.default.Component);(0,c.decorate)(A,{envTypesStore:c.computed,envType:c.computed,envTypeCandidatesStore:c.computed,stores:c.observable,steps:c.observable,currentStepNo:c.observable});var j=(0,i.inject)("envTypesStore","envTypeCandidatesStore")((0,u.withRouter)((0,i.observer)(A)));t.default=j},2108:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=v(n(0)),i=n(3),u=n(12),c=n(16),s=v(n(52)),l=v(n(74)),f=v(n(49)),d=n(33),p=n(2109),m=v(n(311));function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(v,e);var t,n,o,u=S(v);function v(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(t=u.call(this,e)).handleFormSubmission=function(){var e,n=(e=r.mark((function e(n){var o,a,i,u,c,s;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.props.envType,a=t.props.envTypesStore,i=n.$("name").value,u=n.$("desc").value,e.prev=4,!t.isImportAction()){e.next=19;break}return e.next=8,a.createEnvType({id:o.id,name:i,desc:u,status:m.default.notApproved,product:o.product,provisioningArtifact:o.provisioningArtifact,params:o.params});case 8:if(c=e.sent,(0,d.displaySuccess)("Imported Workspace Type ".concat(o.name," successfully")),!(s=t.props.wizardModel).hasNext){e.next=15;break}s.next(),e.next=17;break;case 15:return e.next=17,t.props.onEnvTypeSaveComplete(c);case 17:e.next=25;break;case 19:return e.next=21,a.updateEnvType(h({},o,{name:i,desc:u}));case 21:return c=e.sent,(0,d.displaySuccess)("Updated Workspace Type ".concat(o.name," successfully")),e.next=25,t.props.onEnvTypeSaveComplete(c);case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(4),(0,d.displayError)(e.t0);case 30:case"end":return e.stop()}}),e,null,[[4,27]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){b(a,r,o,i,u,"next",e)}function u(e){b(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}(),(0,i.runInAction)((function(){t.form=(0,p.getAddEnvTypeBasicInfoForm)(e.envType)})),t}return t=v,(n=[{key:"render",value:function(){var e=this,t=this.form;return a.default.createElement(c.Segment,{clearing:!0,className:"mt3 p3"},a.default.createElement(f.default,{form:t,onCancel:this.props.onCancel,onSuccess:this.handleFormSubmission},(function(n){var r=n.processing,o=n.onCancel;return a.default.createElement(a.default.Fragment,null,e.renderFormFields({form:t,processing:r,onCancel:o}),e.renderActionButtons({processing:r,onCancel:o}))})))}},{key:"renderActionButtons",value:function(e){var t=e.processing,n=e.onCancel,r=this.isEditAction();return a.default.createElement("div",{className:"right-align"},a.default.createElement(c.Button,{basic:!0,color:"grey",disabled:t,onClick:n},"Cancel"),a.default.createElement(c.Button,{className:"ml2",primary:!0,content:r?"Save Workspace Type":"Import Workspace Type",disabled:t,type:"submit"}))}},{key:"isEditAction",value:function(){return"edit"===this.props.workspaceTypeAction}},{key:"isImportAction",value:function(){return"import"===this.props.workspaceTypeAction}},{key:"renderFormFields",value:function(e){var t=e.form,n=e.processing,r=t.$("name"),o=t.$("desc");return a.default.createElement(a.default.Fragment,null,a.default.createElement(s.default,{field:r,disabled:n}),a.default.createElement(l.default,{field:o,disabled:n}))}}])&&E(t.prototype,n),o&&E(t,o),v}(a.default.Component),P=(0,u.observer)(C);t.default=P},2109:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAddEnvTypeBasicInfoForm=function(e){var t={name:{label:"Name",placeholder:"Name for this workspace type",extra:{explain:"Easily identifiable name for this workspace type. It must be an alpha numeric string starting with an alphabet and may contain underscore ( _ ) and/or dash ( - )."},value:o.default.get(e,"name")||"",rules:["required","min:2","max:16383","regex:/^[a-zA-Z0-9_\\-]*/"]},desc:{label:"Description",placeholder:"Description for this workspace type",extra:{explain:"Description for this workspace type. Markdown syntax is supported"},value:o.default.get(e,"desc")||"",rules:"max:8191|string"}};return(0,a.createForm)(t)};var r,o=(r=n(5))&&r.__esModule?r:{default:r},a=n(53)},2110:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=h(n(5)),i=h(n(0)),u=n(12),c=n(16),s=n(3),l=n(31),f=h(n(39)),d=n(15),p=h(n(44)),m=n(27),v=h(n(2111)),y=h(n(707));function h(e){return e&&e.__esModule?e:{default:e}}function g(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){g(a,r,o,i,u,"next",e)}function u(e){g(a,r,o,i,u,"throw",e)}i(void 0)}))}}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(l,e);var t,n,o,u=S(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=u.call(this,e)).showEnvTypeConfigDialog=function(){t.shouldShowEnvTypeConfigDialog=!0,t.processing=!1},t.hideEnvTypeConfigDialog=function(){t.processing||(t.shouldShowEnvTypeConfigDialog=!1)},t.onNext=b(r.mark((function e(){var n,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props.wizardModel,o=t.props.onEnvTypeSaveComplete,!t.isImportAction()||!n.hasNext){e.next=6;break}n.next(),e.next=9;break;case 6:if(!a.default.isFunction(o)){e.next=9;break}return e.next=9,o();case 9:case"end":return e.stop()}}),e)}))),(0,s.runInAction)((function(){t.processing=!1,t.shouldShowEnvTypeConfigDialog=!1})),t}return t=l,(n=[{key:"componentDidMount",value:function(){(0,m.swallowError)(this.envTypeConfigsStore.load())}},{key:"render",value:function(){var e,t=this.envTypeConfigsStore;return e=(0,d.isStoreError)(t)?i.default.createElement(f.default,{error:t.error,className:"p0 mb3"}):(0,d.isStoreLoading)(t)?i.default.createElement(p.default,null):(0,d.isStoreReady)(t)&&(0,d.isStoreEmpty)(t)?this.renderEmpty():(0,d.isStoreReady)(t)&&(0,d.isStoreNotEmpty)(t)?this.renderMain():null,i.default.createElement(c.Container,{className:"mt3 mb4"},e)}},{key:"renderEmpty",value:function(){return i.default.createElement(i.default.Fragment,null,!this.shouldShowEnvTypeConfigDialog&&i.default.createElement(c.Segment,{placeholder:!0},i.default.createElement(c.Header,{icon:!0,className:"color-grey"},i.default.createElement(c.Icon,{name:"settings"}),"No Configurations for this Workspace Type yet",i.default.createElement(c.Header.Subheader,{className:"mt2"},i.default.createElement("p",null,"Configurations are predefined set of Input Parameter values for the AWS Service Catalog Product. The configurations are presented as preset options when launching workspaces of this type."),i.default.createElement(c.Button,{basic:!0,color:"blue",onClick:this.showEnvTypeConfigDialog},"Add Configuration")))),this.shouldShowEnvTypeConfigDialog&&this.renderConfigEditorDialog(),i.default.createElement("div",{className:"right-align"},i.default.createElement(c.Button,{basic:!0,color:"grey",onClick:this.props.onCancel},"Cancel")))}},{key:"renderMain",value:function(){return i.default.createElement(i.default.Fragment,null,i.default.createElement(c.Segment,{basic:!0},!this.shouldShowEnvTypeConfigDialog&&i.default.createElement(c.Button,{className:"ml3",basic:!0,color:"blue",floated:"right",onClick:this.showEnvTypeConfigDialog},"Add Configuration"),this.renderEnvTypeConfigs(),this.shouldShowEnvTypeConfigDialog&&this.renderConfigEditorDialog(),!this.shouldShowEnvTypeConfigDialog&&this.renderActionButtons({onCancel:this.props.onCancel})))}},{key:"renderConfigEditorDialog",value:function(){var e=this.shouldShowEnvTypeConfigDialog;return i.default.createElement(c.Modal,{closeIcon:!0,open:e,onClose:this.hideEnvTypeConfigDialog,closeOnDimmerClick:!1,closeOnEscape:!1,size:"large"},i.default.createElement(y.default,{onCancel:this.hideEnvTypeConfigDialog,envTypeConfigsStore:this.envTypeConfigsStore,envType:this.props.envType,onEnvTypeConfigSaveComplete:this.hideEnvTypeConfigDialog,action:"create"}))}},{key:"renderEnvTypeConfigs",value:function(){var e=this,t=this.envTypeConfigsStore.listAll;return i.default.createElement(c.Card.Group,{stackable:!0,itemsPerRow:3},a.default.map(t,(function(t){return i.default.createElement(v.default,{key:t.id,envTypeConfig:t,envType:e.props.envType,envTypeConfigsStore:e.envTypeConfigsStore})})))}},{key:"renderActionButtons",value:function(e){var t=e.processing,n=e.onCancel;return i.default.createElement("div",{className:"mt3"},i.default.createElement("div",{className:"right-align"},i.default.createElement(c.Button,{basic:!0,color:"grey",onClick:n},"Cancel"),i.default.createElement(c.Button,{className:"ml2",primary:!0,content:"Done",disabled:t,onClick:this.onNext})))}},{key:"isImportAction",value:function(){return"import"===this.props.workspaceTypeAction}},{key:"envTypeConfigsStore",get:function(){return this.props.envTypeConfigsStore}}])&&E(t.prototype,n),o&&E(t,o),l}(i.default.Component);(0,s.decorate)(C,{envTypeConfigsStore:s.computed,processing:s.observable,shouldShowEnvTypeConfigDialog:s.observable,showEnvTypeConfigDialog:s.action,hideEnvTypeConfigDialog:s.action});var P=(0,l.withRouter)((0,u.observer)(C));t.default=P},2111:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=m(n(5)),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!==typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),u=n(12),c=n(31),s=n(16),l=n(3),f=n(33),d=m(n(707));function p(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function m(e){return e&&e.__esModule?e:{default:e}}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(c,e);var t,n,o,u=E(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=u.call(this,e)).showDeleteDialog=function(){t.shouldShowDeleteDialog=!0,t.processing=!1},t.hideDeleteDialog=function(){t.processing||(t.shouldShowDeleteDialog=!1)},t.showCloneDialog=function(){t.cloning=!0,t.showEditorDialog()},t.showEditorDialog=function(){t.shouldShowEditorDialog=!0,t.processing=!1},t.hideEditorDialog=function(){t.processing||(t.shouldShowEditorDialog=!1,t.cloning=!1)},t.handleDeleteClick=function(){var e,n=(e=r.mark((function e(n){var o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.processing=!0,o=t.envTypeConfigsStore,e.prev=2,e.next=5,o.deleteEnvTypeConfig(n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),(0,f.displayError)(e.t0);case 10:(0,l.runInAction)((function(){t.processing=!1,t.hideDeleteDialog()}));case 11:case"end":return e.stop()}}),e,null,[[2,7]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){h(a,r,o,i,u,"next",e)}function u(e){h(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}(),(0,l.runInAction)((function(){t.processing=!1,t.shouldShowDeleteDialog=!1,t.shouldShowEditorDialog=!1,t.cloning=!1})),t}return t=c,(n=[{key:"render",value:function(){var e=this,t=this.props.envTypeConfig;return i.default.createElement(s.Card,{key:"etConfig-".concat(t.id),raised:!0,className:"mb3"},i.default.createElement(s.Card.Content,null,i.default.createElement(s.Header,{as:"h4"},t.name),i.default.createElement(s.Card.Meta,{className:"flex"},i.default.createElement("span",{className:"flex-auto"},a.default.get(t,"id")),i.default.createElement(s.Button,{basic:!0,color:"grey",onClick:function(){return e.showCloneDialog()},floated:"right",size:"mini",disabled:this.processing},"Clone")),i.default.createElement(s.Divider,null),i.default.createElement(s.Card.Description,null,i.default.createElement("div",{className:"mb3 pr1 pl1 pb1"},i.default.createElement("div",{dangerouslySetInnerHTML:{__html:t.descHtml}})))),i.default.createElement(s.Card.Content,{extra:!0},i.default.createElement(s.Button,{basic:!0,color:"blue",onClick:function(){return e.showEditorDialog()},floated:"right",size:"mini",disabled:this.processing},"Edit"),i.default.createElement(s.Button,{basic:!0,color:"red",onClick:function(){return e.showDeleteDialog()},floated:"right",size:"mini",disabled:this.processing},"Delete"),this.renderDeleteConfirmation(t),this.renderEditorPopup(t)))}},{key:"renderEditorPopup",value:function(e){var t=this.shouldShowEditorDialog,n=this.cloning?"clone":"edit",r=this.cloning?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{id:"".concat(e.id,"-copy"),name:"".concat(e.name,"-copy")}):e;return i.default.createElement(s.Modal,{closeIcon:!0,open:t,onClose:this.hideEditorDialog,closeOnDimmerClick:!1,closeOnEscape:!1,size:"large"},i.default.createElement(d.default,{onCancel:this.hideEditorDialog,envTypeConfig:r,envType:this.props.envType,envTypeConfigsStore:this.envTypeConfigsStore,onEnvTypeConfigSaveComplete:this.hideEditorDialog,action:n}))}},{key:"renderDeleteConfirmation",value:function(e){var t=this,n=this.shouldShowDeleteDialog,r=this.processing;return i.default.createElement(s.Modal,{open:n,onClose:this.hideDeleteDialog,closeOnDimmerClick:!r},i.default.createElement(s.Modal.Header,null,"Delete Configuration: ",i.default.createElement("strong",null,e.name)),i.default.createElement(s.Modal.Content,null,i.default.createElement("p",null,"Are you sure you want to delete ",i.default.createElement("strong",null,e.name)," configuration?"),i.default.createElement("p",null,"Once you delete environment type configuration, users will not be able launch workspaces using that configuration. You will need to re-create the configuration."),i.default.createElement("p",null,"Is it okay to delete?")),i.default.createElement(s.Modal.Actions,null,i.default.createElement(s.Button,{basic:!0,icon:!0,color:"grey",labelPosition:"right",size:"mini",disabled:this.processing,onClick:this.hideDeleteDialog},i.default.createElement(s.Icon,{name:"close"}),"Cancel"),i.default.createElement(s.Button,{basic:!0,icon:!0,color:"red",labelPosition:"right",size:"mini",disabled:this.processing,onClick:function(){return t.handleDeleteClick(e.id)}},i.default.createElement(s.Icon,{name:"trash"})," Delete")))}},{key:"envTypeConfigsStore",get:function(){return this.props.envTypeConfigsStore}}])&&g(t.prototype,n),o&&g(t,o),c}(i.Component);(0,l.decorate)(k,{processing:l.observable,envTypeConfigsStore:l.computed,shouldShowDeleteDialog:l.observable,shouldShowEditorDialog:l.observable,cloning:l.observable,handleDeleteClick:l.action,showDeleteDialog:l.action,hideDeleteDialog:l.action,showCloneDialog:l.action,showEditorDialog:l.action,hideEditorDialog:l.action});var O=(0,c.withRouter)((0,u.observer)(k));t.default=O},2112:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnvTypeConfigForm=function(e){var t={id:{label:"Id",placeholder:"Unique identifier for this Configuration",extra:{explain:"Unique identifier for this Configuration. It must be an alpha numeric string between 2 and 128 characters long may contain underscore (_) and/or dash (-)."},value:o.default.get(e,"id",""),rules:["required","min:2","max:128","regex:/^[A-Za-z0-9-_]+$/"]},name:{label:"Name",placeholder:"Name for this Configuration",extra:{explain:"Easily identifiable name for this Configuration. It must be an alpha numeric string between 2 and 128 characters long may contain space, underscore (_) and/or dash (-)."},value:o.default.get(e,"name",""),rules:["required","min:2","max:128","regex:/^[A-Za-z0-9-_ ]+$/"]},desc:{label:"Description",placeholder:"Description for this Configuration",extra:{explain:"Description for this Configuration. Markdown syntax is supported"},value:o.default.get(e,"desc",""),rules:"max:8191|string"},estimatedCostInfo:{label:"Estimate Costs",placeholder:"Information about estimated costs when using this Configuration",extra:{explain:"Provide information about estimated cost. Markdown syntax is supported"},value:o.default.get(e,"estimatedCostInfo",""),rules:"max:1024|string"},allowRoleIds:{label:"Roles Allowed",extra:{explain:"User roles allowed to launch workspaces with this Configuration"},value:o.default.get(e,"allowRoleIds",[])},denyRoleIds:{label:"Roles Not Allowed",extra:{explain:"User roles not allowed to launch workspaces with this Configuration"},value:o.default.get(e,"denyRoleIds",[])},params:{label:"AWS CloudFormation Input Params",value:JSON.stringify(o.default.get(e,"params",[]))},tags:{label:"Resource Tags",value:JSON.stringify(o.default.get(e,"tags",[]))}};return(0,a.createForm)(t)};var r,o=(r=n(5))&&r.__esModule?r:{default:r},a=n(53)},2113:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=c(n(0)),a=n(12),i=c(n(52)),u=c(n(74));function c(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(c,e);var t,n,r,a=d(c);function c(){return s(this,c),a.apply(this,arguments)}return t=c,(n=[{key:"renderFormFields",value:function(e){var t=e.form,n=e.processing,r=this.isEditAction(),a=t.$("id"),c=t.$("name"),s=t.$("desc"),l=t.$("estimatedCostInfo");return o.default.createElement(o.default.Fragment,null,!r&&o.default.createElement(i.default,{field:a,disabled:n}),o.default.createElement(i.default,{field:c,disabled:n}),o.default.createElement(u.default,{field:s,disabled:n}),o.default.createElement(u.default,{field:l,disabled:n}))}}])&&l(t.prototype,n),r&&l(t,r),c}(c(n(312)).default),y=(0,a.observer)(v);t.default=y},2114:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n(5)),a=s(n(0)),i=n(12),u=n(3),c=s(n(61));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(u,e);var t,n,r,i=p(u);function u(){return l(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"renderFormFields",value:function(e){var t=e.form,n=e.processing,r=t.$("allowRoleIds")||[],i=t.$("denyRoleIds")||[],u=o.default.filter(this.userRolesStore.dropdownOptions,(function(e){return!o.default.includes(["external-researcher","guest"],o.default.toLower(e.value))}));return a.default.createElement(a.default.Fragment,null,a.default.createElement(c.default,{field:r,options:u,selection:!0,multiple:!0,fluid:!0,disabled:n}),a.default.createElement(c.default,{field:i,options:u,selection:!0,multiple:!0,fluid:!0,disabled:n}))}},{key:"userRolesStore",get:function(){return this.props.userRolesStore}}])&&f(t.prototype,n),r&&f(t,r),u}(s(n(312)).default);(0,u.decorate)(y,{userRolesStore:u.computed});var h=(0,i.inject)("userRolesStore")((0,i.observer)(y));t.default=h},2115:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=p(n(5)),a=p(n(0)),i=n(12),u=n(3),c=n(16),s=p(n(49)),l=p(n(61)),f=n(64),d=n(2116);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(p,e);var t,n,r,i=y(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=i.call(this,e)).handleCfnParamsFormSubmit=function(e){var n=[];e.each((function(e){return n.push({key:e.key,value:e.value})})),t.form.$("params").value=JSON.stringify(n),t.props.onSubmit(t.form)},(0,u.runInAction)((function(){var n=o.default.get(e.envType,"params"),r=o.default.get(e.envTypeConfig,"params"),a=t.props.wizardTempStoreKeyPrefix,i="".concat(a,"-InputParamsStep"),u=f.sessionStore.get(i);u||(u=(0,d.getCfnParamsForm)(n,r),f.sessionStore.set(i,u)),t.cfnParamsForm=u})),t}return t=p,(n=[{key:"render",value:function(){var e=this,t=this.cfnParamsForm;return a.default.createElement(c.Segment,{clearing:!0,className:"mt3 p3"},a.default.createElement(s.default,{form:t,onCancel:this.props.onCancel,onSuccess:this.handleCfnParamsFormSubmit},(function(n){var r=n.processing,o=n.onCancel;return a.default.createElement(a.default.Fragment,null,e.renderFormFields({form:t,processing:r,onCancel:o}),e.renderActionButtons({processing:r,onCancel:o}))})))}},{key:"renderFormFields",value:function(e){var t=e.form,n=e.processing,r=[];this.props.envTypeConfigsStore.envTypeConfigVars.forEach((function(e){r.push({key:e.name,value:"${".concat(e.name,"}"),text:"${".concat(e.name,"}"),content:a.default.createElement(c.Header,{as:"h5",content:e.name,subheader:e.desc})})}));var i=[];return t.each((function(e){return i.push(e)})),o.default.map(i,(function(e){var t=o.default.uniqBy([{key:e.key,value:e.value,text:e.value}].concat(r),"value");return a.default.createElement(l.default,{key:e.key,field:e,options:t,disabled:n,search:!0,selection:!0,fluid:!0,allowAdditions:!0,clearable:!0})}))}}])&&m(t.prototype,n),r&&m(t,r),p}(p(n(312)).default);(0,u.decorate)(b,{handleCfnParamsFormSubmit:u.action});var E=(0,i.observer)(b);t.default=E},2116:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCfnParamsForm=function(e,t){var n={};return o.default.forEach(e,(function(e){var r=e.ParameterKey,a=e.Description,i=e.DefaultValue,u=o.default.get(o.default.find(t,{key:r}),"value")||i;n[r]={label:r,extra:{explain:a},value:u,rules:"required"}})),(0,a.createForm)(n)};var r,o=(r=n(5))&&r.__esModule?r:{default:r},a=n(53)},2117:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(n(0)),a=n(12),i=n(3),u=n(16),c=l(n(49)),s=l(n(2118));function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(l,e);var t,n,r,a=p(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e)).disableActionButtons=function(){t.shouldEnableActionButtons=!1},t.enableActionButtons=function(){t.shouldEnableActionButtons=!0},(0,i.runInAction)((function(){t.processing=!1,t.shouldEnableActionButtons=!0})),t}return t=l,(n=[{key:"render",value:function(){var e=this,t=this.form;return o.default.createElement(u.Segment,{clearing:!0,className:"mt3"},o.default.createElement(u.Dimmer,{active:this.processing,inverted:!0}),this.renderFormFields({form:t}),o.default.createElement(c.default,{form:t,onCancel:this.props.onCancel,onSuccess:this.props.onSubmit},(function(t){var n=t.processing,r=t.onCancel;return o.default.createElement(o.default.Fragment,null,e.renderActionButtons({processing:n,onCancel:r}))})))}},{key:"renderFormFields",value:function(e){var t=e.form.$("tags");return o.default.createElement("div",{className:"mb3"},o.default.createElement("div",{className:"ml1 mb2"},"Click plus (+) button below to add resource tags. These tags will be applied to the environment resources that are launched using this configuration. Additionally, some standard tags for cost allocation will be automatically applied even if you do not configure any other resource tags here."),o.default.createElement(s.default,{field:t,onEnterEditMode:this.disableActionButtons,onExitEditMode:this.enableActionButtons,emptyRenderer:function(){return o.default.createElement(u.Table.Row,{key:"empty-row",textAlign:"center"},o.default.createElement(u.Table.Cell,{colSpan:3},o.default.createElement(u.Header,{icon:!0,className:"color-grey"},o.default.createElement(u.Icon,{name:"tags"}),"No resource tags are added yet")))}}))}},{key:"renderActionButtons",value:function(e){var t=this,n=e.processing,r=e.onCancel,a=this.isEditAction(),c=a?"Save":this.props.wizardModel.hasNext?"Next":"Add";return o.default.createElement("div",{className:"clearfix"},o.default.createElement(u.Button,{onClick:(0,i.action)((function(){t.processing=!0})),className:"ml2 mb3",primary:!0,content:c,disabled:n||!this.shouldEnableActionButtons,type:"submit",floated:"right"}),!a&&this.props.wizardModel.hasPrevious&&o.default.createElement(u.Button,{className:"ml2 mb3",primary:!0,content:"Previous",disabled:n||!this.shouldEnableActionButtons,floated:"right",onClick:this.props.onPrevious}),o.default.createElement(u.Button,{basic:!0,color:"grey",disabled:n||!this.shouldEnableActionButtons,onClick:r,floated:"left"},"Cancel"))}}])&&f(t.prototype,n),r&&f(t,r),l}(l(n(312)).default);(0,i.decorate)(y,{disableActionButtons:i.action,enableActionButtons:i.action,processing:i.observable,shouldEnableActionButtons:i.observable});var h=(0,a.observer)(y);t.default=h},2118:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(n(0)),a=l(n(5)),i=n(12),u=n(3),c=n(16),s=l(n(2119));function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,n,r,i=m(l);function l(){var e;f(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).onEnterEditMode=function(t){e.hideShowAddRowButton();var n=e.props.onEnterEditMode;n&&n(t)},e.onExitEditMode=function(t){e.showAddRowButton();var n=e.props.onExitEditMode;n&&n(t)},e.handleNameValueChange=function(t){var n=t.rowIdx,r=t.nameValueForm,o=r.$("name"),a=r.$("value");e.nameValues[n]={name:o.value,value:a.value},e.syncField(),e.showAddRowButton()},e.handleNameValueDelete=function(t){var n=t.rowIdx;e.nameValues.splice(n,1),e.syncField()},e.hideShowAddRowButton=function(){e.shouldShowAddRowButton=!1},e.showAddRowButton=function(){e.shouldShowAddRowButton=!0,e.hideCreateRow()},e.hideCreateRow=function(){e.shouldShowCreateRow=!1},e.showCreateRow=function(){e.shouldShowCreateRow=!0,e.hideShowAddRowButton()},e.syncField=function(){e.value=JSON.stringify(e.nameValues),(0,e.props.field.sync)(e.value)},e}return t=l,(n=[{key:"componentDidMount",value:function(){var e=this;(0,u.runInAction)((function(){e.value=e.props.field.value||"[]";var t=JSON.parse(e.value||"[]")||[];e.nameValues=a.default.map(t,(function(e){return{name:e.key||e.name,value:e.value}})),e.shouldShowAddRowButton=!0,e.shouldShowCreateRow=!1}))}},{key:"render",value:function(){var e=this,t=a.default.isNil(this.props.nameHeader)?"Name":this.props.nameHeader,n=a.default.isNil(this.props.valueHeader)?"Value":this.props.valueHeader,r=a.default.isNil(this.props.actionHeader)?"Action":this.props.actionHeader,i=a.default.map(this.nameValues,(function(t,n){var r=t.name,o=t.value;return e.renderNameValueLine({rowIdx:n,name:r,value:o})}));if(this.shouldShowCreateRow){var u=this.nameValues.length;i.push(o.default.createElement(s.default,{key:u,name:"",value:"",editorOn:!0,onSubmit:function(t){e.handleNameValueChange({rowIdx:u,nameValueForm:t})},onDelete:this.hideCreateRow,onEnterEditMode:this.onEnterEditMode,onExitEditMode:this.onExitEditMode}))}if(a.default.isEmpty(i)){var l=a.default.isFunction(this.props.emptyRenderer)?this.props.emptyRenderer():o.default.createElement(c.Table.Row,{key:"empty-row"},o.default.createElement(c.Table.Cell,{colSpan:3},"No name/value pairs. Click + to add one."));i.push(l)}return o.default.createElement(c.Table,{celled:!0},o.default.createElement(c.Table.Header,null,o.default.createElement(c.Table.Row,null,o.default.createElement(c.Table.HeaderCell,null,t),o.default.createElement(c.Table.HeaderCell,null,n),o.default.createElement(c.Table.HeaderCell,{width:2},r))),o.default.createElement(c.Table.Body,null,i),o.default.createElement(c.Table.Footer,{fullWidth:!0},o.default.createElement(c.Table.Row,null,this.shouldShowAddRowButton&&o.default.createElement(c.Table.HeaderCell,{colSpan:"3"},o.default.createElement(c.Button,{icon:!0,color:"blue",size:"tiny",className:"ml1",onClick:this.showCreateRow},o.default.createElement(c.Icon,{name:"plus"}))),!this.shouldShowAddRowButton&&o.default.createElement(c.Table.HeaderCell,{colSpan:"3",className:"pb3"}))))}},{key:"renderNameValueLine",value:function(e){var t=this,n=e.rowIdx,r=e.name,a=e.value;return o.default.createElement(s.default,{key:n,rowKey:n,name:r,value:a,onSubmit:function(e){return t.handleNameValueChange({rowIdx:n,nameValueForm:e})},onDelete:function(){return t.handleNameValueDelete({rowIdx:n})},onEnterEditMode:this.onEnterEditMode,onExitEditMode:this.onExitEditMode})}}])&&d(t.prototype,n),r&&d(t,r),l}(o.default.Component);(0,u.decorate)(h,{nameValues:u.observable,shouldShowAddRowButton:u.observable,shouldShowCreateRow:u.observable,hideShowAddRowButton:u.action,showAddRowButton:u.action,hideCreateRow:u.action,showCreateRow:u.action,handleNameValueChange:u.action,handleNameValueDelete:u.action});var g=(0,i.observer)(h);t.default=g},2119:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=p(n(0)),i=n(3),u=n(16),c=n(12),s=p(n(5)),l=n(2120),f=p(n(2121)),d=p(n(52));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){m(a,r,o,i,u,"next",e)}function u(e){m(a,r,o,i,u,"throw",e)}i(void 0)}))}}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(p,e);var t,n,o,c=g(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=c.call(this,e)).handleEditClick=(0,i.action)(function(){var e=v(r.mark((function e(n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.notifyHandler(t.props.onEnterEditMode,n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.handleSubmit=(0,i.action)(function(){var e=v(r.mark((function e(n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.notifyHandler(t.props.onExitEditMode,t.props.rowKey);case 2:return e.next=4,t.notifyHandler(t.props.onSubmit,n);case 4:(0,i.runInAction)((function(){t.form=(0,l.getNameValueForm)({name:t.props.name,value:t.props.value})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.handleCancel=(0,i.action)(function(){var e=v(r.mark((function e(n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.notifyHandler(t.props.onExitEditMode,t.props.rowKey);case 2:return e.next=4,t.notifyHandler(t.props.onCancel,n);case 4:(0,i.runInAction)((function(){t.form=(0,l.getNameValueForm)({name:t.props.name,value:t.props.value})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.notifyHandler=function(){var e=v(r.mark((function e(t){var n,o,a,i,u=arguments;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t||s.default.noop,o=u.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=u[i];return e.next=4,n.apply(void 0,a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(0,i.runInAction)((function(){t.form=(0,l.getNameValueForm)({name:e.name,value:e.value}),e.editorOn&&t.handleEditClick()})),t}return t=p,(n=[{key:"render",value:function(){var e=this,t=this.form,n=t.$("name"),r=t.$("value"),o=this.props.onDelete;return a.default.createElement(f.default,{form:t,showDimmer:!1,showErrorPanel:!1,renderFormAs:function(e){return a.default.createElement(a.default.Fragment,null,e)},editorOn:this.props.editorOn,onSubmit:this.handleSubmit,onCancel:this.handleCancel,renderFieldForView:function(t){var n=t.onEditorOn;return a.default.createElement(u.Table.Row,null,a.default.createElement(u.Table.Cell,null,e.props.name),a.default.createElement(u.Table.Cell,null,e.props.value),a.default.createElement(u.Table.Cell,null,a.default.createElement(u.Icon,{name:"pencil",className:"ml1 cursor-pointer",color:"grey",onClick:function(){n(),e.handleEditClick(e.props.rowKey)}}),a.default.createElement(u.Icon,{name:"trash",className:"ml1 cursor-pointer",color:"grey",onClick:o})))},renderFieldForEdit:function(e){var t=e.processing,o=e.onSubmit,i=e.onCancel;return a.default.createElement(u.Table.Row,null,a.default.createElement(u.Table.Cell,null,a.default.createElement(d.default,{field:n,className:"mb0",showHeader:!1,disabled:t})),a.default.createElement(u.Table.Cell,null,a.default.createElement(d.default,{field:r,className:"mb0",showHeader:!1,disabled:t})),a.default.createElement(u.Table.Cell,null,a.default.createElement(u.Icon,{name:"close",className:"ml1 cursor-pointer",color:"grey",onClick:i}),a.default.createElement(u.Icon,{name:"check",className:"ml1 cursor-pointer",color:"grey",onClick:o})))}})}}])&&y(t.prototype,n),o&&y(t,o),p}(a.default.Component),S=(0,c.observer)(w);t.default=S},2120:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNameValueForm=function(e){var t=e.name,n=e.value,r=e.nameLabel,i=e.namePlaceholder,u=e.valueLabel,c=e.valuePlaceholder,s={name:{label:o.default.isNil(r)?"Name":r,placeholder:o.default.isNil(i)?"Name":i,rules:"required",value:t},value:{label:o.default.isNil(u)?"Value":u,placeholder:o.default.isNil(c)?"Value":c,rules:"required",value:n}};return(0,a.createForm)(s)};var r,o=(r=n(5))&&r.__esModule?r:{default:r},a=n(53)},2121:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(12),i=f(n(0)),u=n(3),c=f(n(5)),s=n(33),l=f(n(49));function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){d(a,r,o,i,u,"next",e)}function u(e){d(a,r,o,i,u,"throw",e)}i(void 0)}))}}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(f,e);var t,n,o,a=y(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=a.call(this,e)).handleEditorOn=(0,u.action)((function(){t.editorOn=!0})),t.handleFormSubmission=(0,u.action)(function(){var e=p(r.mark((function e(n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.notifyHandler(t.props.onSubmit,n);case 3:(0,u.runInAction)((function(){t.editorOn=!1})),e.next=11;break;case 6:e.prev=6,e.t0=e.catch(0),(0,s.displayError)(e.t0),n.clear(),(0,u.runInAction)((function(){t.editorOn=!1}));case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()),t.handleCancel=(0,u.action)(p(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.editorOn=!1,e.next=3,t.notifyHandler(t.props.onCancel);case 3:case"end":return e.stop()}}),e)})))),t.handleFormError=(0,u.action)(function(){var e=p(r.mark((function e(n,o){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.notifyHandler(t.props.onError,n,o);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),t.notifyHandler=function(){var e=p(r.mark((function e(t){var n,o,a,i,u=arguments;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t||c.default.noop,o=u.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=u[i];return e.next=4,n.apply(void 0,a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(0,u.runInAction)((function(){t.editorOn=!c.default.isNil(e.editorOn)&&e.editorOn})),t}return t=f,(n=[{key:"render",value:function(){return this.editorOn?this.renderEditMode():this.renderViewMode()}},{key:"renderEditMode",value:function(){var e=this.props.form,t=this.props.renderFieldForEdit;return i.default.createElement(l.default,{form:e,dimmer:this.props.showDimmer,showErrorPanel:this.props.showErrorPanel,renderFormAs:this.props.renderFormAs,onCancel:this.handleCancel,onSuccess:this.handleFormSubmission,onError:this.handleFormError},(function(e){var n=e.processing,r=e.onSubmit,o=e.onCancel;return t({processing:n,onSubmit:r,onCancel:o})}))}},{key:"renderViewMode",value:function(){return this.props.renderFieldForView({onEditorOn:this.handleEditorOn})}}])&&m(t.prototype,n),o&&m(t,o),f}(i.default.Component);(0,u.decorate)(b,{editorOn:u.observable});var E=(0,a.observer)(b);t.default=E},2122:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.envTypesStore=v.create({},e)},t.EnvTypesStore=void 0;var o,a=n(8),i=n(15),u=(o=n(5))&&o.__esModule?o:{default:o},c=n(27),s=n(2123),l=n(313),f=n(2124),d=n(2127);function p(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){p(a,r,o,i,u,"next",e)}function u(e){p(a,r,o,i,u,"throw",e)}i(void 0)}))}}var v=i.BaseStore.named("EnvTypesStore").props({envTypes:a.types.optional(a.types.map(s.EnvType),{}),envTypeStores:a.types.optional(a.types.map(d.EnvTypeStore),{}),envTypeConfigsStores:a.types.optional(a.types.map(f.EnvTypeConfigsStore),{}),tickPeriod:6e4}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return m(r.mark((function t(){var n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.getAllEnvTypes)();case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=[];case 5:n=t.t0,e.runInAction((function(){(0,c.consolidateToMap)(e.envTypes,n,(function(e,t){e.setEnvType(t)}))}));case 7:case"end":return t.stop()}}),t)})))()},addEnvType:function(t){var n=t.id,r=e.envTypes.get(n);r?r.setEnvType(t):e.envTypes.put(t)},createEnvType:function(t){return m(r.mark((function n(){var o,i;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,l.createEnvType)(t);case 2:return o=n.sent,e.runInAction((function(){var t=s.EnvType.create(o);e.envTypes.set(t.id,t)})),i=(0,a.getEnv)(e),n.next=7,i.envTypeCandidatesStore.onEnvTypeCandidateImport(t.id);case 7:case"end":return n.stop()}}),n)})))()},deleteEnvType:function(t){return m(r.mark((function n(){var o;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,l.deleteEnvType)(t);case 2:return e.runInAction((function(){e.envTypes.delete(t)})),o=(0,a.getEnv)(e),n.next=6,o.envTypeCandidatesStore.load();case 6:case"end":return n.stop()}}),n)})))()},updateEnvType:function(t){return m(r.mark((function n(){var o;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,l.updateEnvType)(t);case 2:o=n.sent,e.runInAction((function(){e.envTypes.get(o.id).setEnvType(o)}));case 4:case"end":return n.stop()}}),n)})))()},approveEnvType:function(t){return m(r.mark((function n(){var o,a;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.getEnvType(t),n.next=3,(0,l.approveEnvType)(t,o.rev);case 3:a=n.sent,o.setEnvType(a);case 5:case"end":return n.stop()}}),n)})))()},revokeEnvType:function(t){return m(r.mark((function n(){var o,a;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.getEnvType(t),n.next=3,(0,l.revokeEnvType)(t,o.rev);case 3:a=n.sent,o.setEnvType(a);case 5:case"end":return n.stop()}}),n)})))()},getEnvTypeStore:function(t){var n=e.envTypeStores.get(t);return n||(e.envTypeStores.set(t,d.EnvTypeStore.create({envTypeId:t})),n=e.envTypeStores.get(t)),n},getEnvTypeConfigsStore:function(t){var n=e.envTypeConfigsStores.get(t);return n||(e.envTypeConfigsStores.set(t,f.EnvTypeConfigsStore.create({id:t})),n=e.envTypeConfigsStores.get(t)),n},cleanup:function(){e.envTypes.clear(),e.envTypeStores.clear(),e.envTypeConfigsStores.clear(),t()}}})).views((function(e){return{get list(){return u.default.sortBy((0,c.mapToArray)(e.envTypes),(function(e){return-1*u.default.get(e,"provisioningArtifact.createdTime")}))},get listApproved(){return u.default.filter(e.list,"isApproved")},get listNotApproved(){return u.default.filter(e.list,"isNotApproved")},get empty(){return u.default.isEmpty(e.list)},getEnvType:function(t){return e.envTypes.get(t)}}}));t.EnvTypesStore=v},2123:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnvType=t.default=void 0;var r=n(8),o=n(708),a=n(311),i=o.EnvTypeCandidate.named("EnvType").props({rev:0,status:r.types.enumeration("EnvTypeStatus",(0,a.getValidStatuses)()),createdAt:"",createdBy:"",updatedAt:"",updatedBy:""}).actions((function(e){return{setEnvType:function(t){(0,r.applySnapshot)(e,t)}}})).views((function(e){return{get isApproved(){return(0,a.isApproved)(e.status)},get isNotApproved(){return(0,a.isNotApproved)(e.status)}}}));t.EnvType=i;var u=i;t.default=u},2124:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.EnvTypeConfigsStore=t.default=void 0;var o,a=(o=n(5))&&o.__esModule?o:{default:o},i=n(8),u=n(27),c=n(15),s=n(313),l=n(2125),f=n(2126);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){o=!0,a=c}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){m(a,r,o,i,u,"next",e)}function u(e){m(a,r,o,i,u,"throw",e)}i(void 0)}))}}var y=c.BaseStore.named("EnvTypeConfigsStore").props({id:i.types.identifier,envTypeConfigs:i.types.optional(i.types.map(l.EnvTypeConfig),{}),envTypeConfigVars:i.types.optional(i.types.map(f.EnvTypeConfigVar),{}),tickPeriod:6e4}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return v(r.mark((function t(){var n,o,a,i;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([(0,s.getAllEnvTypeConfigs)(e.id),(0,s.getEnvTypeConfigVars)(e.id)]);case 2:n=t.sent,o=d(n,2),a=o[0],i=o[1],e.runInAction((function(){(0,u.consolidateToMap)(e.envTypeConfigs,a||[],(function(e,t){e.setEnvTypeConfig(t)})),(0,u.consolidateToMap)(e.envTypeConfigVars,i||[],(function(e,t){e.setEnvTypeConfigVar(t)}),"name")}));case 7:case"end":return t.stop()}}),t)})))()},cleanup:function(){e.envTypes.clear(),t()},createEnvTypeConfig:function(t){return v(r.mark((function n(){var o;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,s.createEnvTypeConfig)(e.id,t);case 2:o=n.sent,e.runInAction((function(){var t=l.EnvTypeConfig.create(o);e.envTypeConfigs.set(t.id,t)}));case 4:case"end":return n.stop()}}),n)})))()},updateEnvTypeConfig:function(t){return v(r.mark((function n(){var o;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,s.updateEnvTypeConfig)(e.id,t);case 2:o=n.sent,e.runInAction((function(){e.envTypeConfigs.get(o.id).setEnvTypeConfig(o)}));case 4:case"end":return n.stop()}}),n)})))()},deleteEnvTypeConfig:function(t){return v(r.mark((function n(){return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,s.deleteEnvTypeConfig)(e.id,t);case 2:e.runInAction((function(){e.envTypeConfigs.delete(t)}));case 3:case"end":return n.stop()}}),n)})))()}}})).views((function(e){return{get list(){var t=a.default.filter((0,u.mapToArray)(e.envTypeConfigs),(function(e){return e.allowedToUse}));return a.default.orderBy(t,["createdAt","name"],["asc","asc"])},get listAll(){var t=(0,u.mapToArray)(e.envTypeConfigs);return a.default.orderBy(t,["createdAt","name"],["asc","asc"])},get empty(){return a.default.isEmpty(e.listAll)},getEnvTypeConfig:function(t){return e.envTypeConfigs.get(t)}}}));t.EnvTypeConfigsStore=y;var h=y;t.default=h},2125:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnvTypeConfig=t.default=void 0;var r=n(8),o=r.types.model("KeyValuePair",{key:"",value:""}),a=r.types.model("EnvTypeConfig",{id:r.types.identifier,name:"",desc:"",estimatedCostInfo:"",allowRoleIds:r.types.optional(r.types.array(r.types.string),[]),denyRoleIds:r.types.optional(r.types.array(r.types.string),[]),params:r.types.optional(r.types.array(o),[]),tags:r.types.optional(r.types.array(o),[]),createdAt:"",createdBy:"",updatedAt:"",updatedBy:"",allowedToUse:r.types.optional(r.types.boolean,!0)}).actions((function(e){return{setEnvTypeConfig:function(t){(0,r.applySnapshot)(e,t)}}})).views((function(e){return{get descHtml(){return(0,r.getEnv)(e).showdown.convert(e.desc)},get estimatedCostInfoHtml(){return(0,r.getEnv)(e).showdown.convert(e.estimatedCostInfo)}}}));t.EnvTypeConfig=a;var i=a;t.default=i},2126:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnvTypeConfigVar=t.default=void 0;var r=n(8),o=r.types.model("EnvTypeConfigVar",{name:"",desc:""}).actions((function(e){return{setEnvTypeConfigVar:function(t){(0,r.applySnapshot)(e,t)}}})).views((function(e){return{get descHtml(){return(0,r.getEnv)(e).showdown.convert(e.desc)}}}));t.EnvTypeConfigVar=o;var a=o;t.default=a},2127:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.EnvTypeStore=void 0;var o=n(8),a=n(15),i=n(313);function u(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}var c=a.BaseStore.named("EnvTypeStore").props({envTypeId:""}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return(t=r.mark((function t(){var n,a;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,o.getParent)(e,2),t.next=3,(0,i.getEnvType)(e.envTypeId);case 3:a=t.sent,n.addEnvType(a);case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){u(a,r,o,i,c,"next",e)}function c(e){u(a,r,o,i,c,"throw",e)}i(void 0)}))})();var t},cleanup:function(){t()}}})).views((function(e){return{get envType(){return(0,o.getParent)(e,2).getEnvType(e.envTypeId)}}}));t.EnvTypeStore=c},2128:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.envTypeCandidatesStore=p.create({},e)},t.EnvTypeCandidatesStore=void 0;var o,a=(o=n(5))&&o.__esModule?o:{default:o},i=n(8),u=n(15),c=n(27),s=n(313),l=n(708);function f(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){f(a,r,o,i,u,"next",e)}function u(e){f(a,r,o,i,u,"throw",e)}i(void 0)}))}}var p=u.BaseStore.named("EnvTypeCandidatesStore").props({envTypeCandidates:i.types.optional(i.types.map(l.EnvTypeCandidate),{}),tickPeriod:6e4}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return d(r.mark((function t(){var n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.getAllEnvTypeCandidatesNotImported)();case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=[];case 5:n=t.t0,e.runInAction((function(){(0,c.consolidateToMap)(e.envTypeCandidates,n,(function(e,t){e.setEnvTypeCandidate(t)}))}));case 7:case"end":return t.stop()}}),t)})))()},cleanup:function(){e.envTypeCandidates.clear(),t()},onEnvTypeCandidateImport:function(t){return d(r.mark((function n(){var o;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.envTypeCandidates.get(t),(0,i.detach)(o),n.next=4,e.load();case 4:case"end":return n.stop()}}),n)})))()}}})).views((function(e){return{get list(){return a.default.sortBy((0,c.mapToArray)(e.envTypeCandidates),(function(e){return-1*a.default.get(e,"provisioningArtifact.createdTime")}))},get listLatestVersions(){return a.default.filter(e.list,"isLatest")},get listAllVersions(){return e.list},get empty(){return a.default.isEmpty(e.list)},getEnvTypeCandidate:function(t){return e.envTypeCandidates.get(t)}}}));t.EnvTypeCandidatesStore=p},2133:function(e,t,n){},2134:function(e,t,n){},2138:function(e,t,n){},2139:function(e,t,n){"use strict";n.r(t);var r=n(355),o=n(739),a=n.n(o),i=n(740),u=n.n(i),c=n(741),s=n.n(c),l=n(742),f=n.n(l),d=n(743),p=n.n(d),m=n(744),v=n.n(m),y=n(745),h=n.n(y),g=n(10),b=n.n(g),E=n(19),w=n(5),S=n.n(w),k=n(8),O=n(15),C=n(43);function P(){return A.apply(this,arguments)}function A(){return(A=Object(E.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.httpApiGet)("api/workflow-templates"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return I.apply(this,arguments)}function I(){return(I=Object(E.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.httpApiGet)("api/workflow-templates/drafts"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return T.apply(this,arguments)}function T(){return(T=Object(E.a)(b.a.mark((function e(t){var n,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.isNewTemplate,r=t.templateId,o=t.templateTitle,e.abrupt("return",Object(C.httpApiPost)("api/workflow-templates/drafts",{data:{isNewTemplate:n,templateId:r,templateTitle:o}}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return _.apply(this,arguments)}function _(){return(_=Object(E.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.httpApiPut)("api/workflow-templates/drafts/".concat(encodeURIComponent(t.id)),{data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return R.apply(this,arguments)}function R(){return(R=Object(E.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.httpApiPost)("api/workflow-templates/drafts/publish",{data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return B.apply(this,arguments)}function B(){return(B=Object(E.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.httpApiDelete)("api/workflow-templates/drafts/".concat(encodeURIComponent(t.id))));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return U.apply(this,arguments)}function U(){return(U=Object(E.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.httpApiGet)("api/step-templates"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return W.apply(this,arguments)}function W(){return(W=Object(E.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.httpApiGet)("api/workflows"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return z.apply(this,arguments)}function z(){return(z=Object(E.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.httpApiGet)("api/workflows/drafts"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){return V.apply(this,arguments)}function V(){return(V=Object(E.a)(b.a.mark((function e(t){var n,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.isNewWorkflow,r=t.workflowId,o=t.templateId,e.abrupt("return",Object(C.httpApiPost)("api/workflows/drafts",{data:{isNewWorkflow:n,workflowId:r,workflowVer:0,templateId:o,templateVer:0}}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return K.apply(this,arguments)}function K(){return(K=Object(E.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.httpApiPut)("api/workflows/drafts/".concat(encodeURIComponent(t.id)),{data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(E.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.httpApiPost)("api/workflows/drafts/publish",{data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(E.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.httpApiDelete)("api/workflows/drafts/".concat(encodeURIComponent(t.id))));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return X.apply(this,arguments)}function X(){return(X=Object(E.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.httpApiGet)("api/workflows/".concat(encodeURIComponent(t))));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e,t){return te.apply(this,arguments)}function te(){return(te=Object(E.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.httpApiGet)("api/workflows/".concat(encodeURIComponent(t),"/v/").concat(n,"/instances")));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e,t,n){return re.apply(this,arguments)}function re(){return(re=Object(E.a)(b.a.mark((function e(t,n,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.httpApiGet)("api/workflows/".concat(encodeURIComponent(t),"/v/").concat(n,"/instances/").concat(encodeURIComponent(r))));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e,t,n){return ae.apply(this,arguments)}function ae(){return(ae=Object(E.a)(b.a.mark((function e(t,n,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.httpApiPost)("api/workflows/".concat(encodeURIComponent(t),"/v/").concat(n,"/trigger"),{data:r}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e){return ue.apply(this,arguments)}function ue(){return(ue=Object(E.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.httpApiGet)("api/workflows/".concat(encodeURIComponent(t),"/assignments")));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ce=n(98);var se=k.types.model("StepTemplateVersion",{id:"",v:k.types.maybeNull(k.types.number),title:"",desc:"",skippable:k.types.maybe(k.types.boolean),inputManifest:k.types.maybe(ce.InputManifest),adminInputManifest:k.types.maybe(ce.InputManifest)}).actions((function(e){function t(t){var n=Object(k.getEnv)(e).showdown;return t?Object(ce.applyMarkdown)({inputManifest:t,showdown:n,assets:{}}):t}return{afterCreate(){e.inputManifest=t(e.inputManifest),e.adminInputManifest?e.adminInputManifest=t(e.adminInputManifest):e.inputManifest&&(e.adminInputManifest=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=S.a.cloneDeep(e),n=function(e){return S.a.isString(e.rules)&&(e.rules=e.rules.replace(/\|required\|/,""),e.rules=e.rules.replace(/required\|/,""),e.rules=e.rules.replace(/\|required/,""),e.rules=e.rules.replace(/required/,"")),delete e.condition,e},r=S.a.map(t.sections,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(ce.visit)(e.children,n)}));return t.sections=[{children:S.a.flatten(r)}],t}(Object(k.getSnapshot)(e.inputManifest)))},setStepTemplateVersion(t){Object(k.applySnapshot)(e,t),e.afterCreate()}}})).views((function(e){return{}})),le=k.types.model("StepTemplate",{id:k.types.identifier,versions:k.types.optional(k.types.array(se),[])}).actions((function(e){return{setStepTemplate(t){var n=S.a.keyBy(e.versions,(function(e){return e.v.toString()})),r=[];S.a.forEach(t.versions,(function(e){var t=n[e.v];t?(t.setStepTemplateVersion(e),r.push(t)):r.push(se.create(e))})),e.versions.replace(r)}}})).views((function(e){return{get latest(){var t=e.versions[0];return S.a.forEach(e.versions,(function(e){e.v>t.v&&(t=e)})),t},getVersion:t=>S.a.find(e.versions,["v",t]),get versionNumbers(){return S.a.map(e.versions,(function(e){return e.v}))}}})),fe=O.BaseStore.named("StepTemplatesStore").props({templates:k.types.optional(k.types.map(le),{}),tickPeriod:9e5}).actions((function(e){var t=e.cleanup;return{doLoad:()=>Object(E.a)(b.a.mark((function t(){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F();case 2:n=t.sent,r=de(n),e.runInAction((function(){var t={};e.templates.forEach((function(e,n){t[n]=!0})),r.forEach((function(n){var r=n.id,o=e.templates.has(r);e.addTemplate(n),o&&delete t[r]})),S.a.forEach(t,(function(t,n){e.templates.delete(n)}))}));case 5:case"end":return t.stop()}}),t)})))(),addTemplate(t){var n=t.id,r=e.templates.get(n);r?r.setStepTemplate(t):e.templates.put(t)},cleanup:function(){e.templates.clear(),t()}}})).views((function(e){return{get empty(){return 0===e.templates.size},get total(){return e.templates.size},get list(){var t=[];return e.templates.forEach((function(e){return t.push(e)})),S.a.sortBy(t,["latest.title"])},getTemplate:t=>e.templates.get(t)}}));function de(e){var t={};return S.a.forEach(e,(function(e){var n=e.id,r=t[n]||{id:n,versions:[]};r.versions.push(e),t[n]=r})),S.a.values(t)}var pe=n(94),me=n(64),ve=n(59),ye=n(53);var he=function(e){var t=function(e){var t=e.title,n=void 0===t?"":t,r=e.desc,o=void 0===r?"":r,a=e.instanceTtl,i=e.runSpec,u=void 0===i?{}:i,c=e.propertyOverrideSummaryRows,s=void 0===c?[]:c,l=[{name:"templateTitle",label:"Workflow Template Title",placeholder:"Type a title for the workflow template",extra:{explain:"This is a required field and the number of characters must be between 3 and 255.\n      The title is shown in many places in the UI."},value:n,rules:"required|string|between:3,255"},{name:"templateDesc",label:"Workflow Template Description",placeholder:"Type a description for the workflow template",extra:{explain:"The description can be written in markdown but must be between 3 and 4000 characters."},value:o,rules:"required|string|between:3,4000"},{name:"instanceTtl",label:"Time to Live (TTL) for instances of the workflow",placeholder:"Type the number of days",extra:{explain:"The number of days for which a record of a workflow instance is kept in the database.\n      Leave it empty or type -1 if you don't want to have a time limit on the record."},value:a,rules:"integer"},{name:"runSpecSize",label:"Runtime lambda size",extra:{options:[{value:"small",text:"Small"},{value:"medium",text:"Medium"},{value:"large",text:"Large"}]},value:u.size||"small",rules:"required|in:small,medium,large"},{name:"runSpecTarget",label:"Runtime target",extra:{options:[{value:"stepFunctions",text:"Step Functions"},{value:"workerLambda",text:"Worker Lambda"},{value:"inPlace",text:"In Place"}]},value:u.target||"stepFunctions",rules:"required|in:stepFunctions,workerLambda,inPlace"}],f=S.a.map(s,(function(e){var t=e.name,n=e.title_,r=e.allowed,o=void 0!==r&&r;return{name:"propsOverride_".concat(t),label:n,value:o,default:o}}));return[].concat(l,Object(ve.a)(f))}(e);return Object(ye.createForm)(t)};var ge=function(e,t){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isTemplate,r=void 0===n||n,o=e.title,a=void 0===o?"":o,i=e.desc,u=void 0===i?"":i,c=e.derivedTitle,s=void 0===c?"":c,l=e.derivedDesc,f=void 0===l?"":l,d=e.propsOverrideOption||{allowed:[]},p="The workflow template used by this workflow does not allow you to modify this field",m=function(e){return r||d.allowed.includes(e)},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;return m(e)?void 0:t};return{stepTitle:{label:"Title",placeholder:"Type a title for the step",extra:{explain:"This is a required field and the number of characters must be between 3 and 255.\n        The title is shown in many places in the UI.",warn:v("title")},value:a||s,rules:"required|string|between:3,255",disabled:!m("title")},stepDesc:{label:"Description",placeholder:"Type a description for the step",extra:{explain:"The description can be written in markdown but must be between 3 and 4000 characters.",warn:v("desc")},value:u||f,rules:"required|string|between:3,4000",disabled:!m("desc")}}}(e,t);return Object(ye.createForm)(n)};var be=function(e,t){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isTemplate,r=void 0===n||n,o=e.skippable,a=e.propsOverrideOption||{allowed:[]},i="The workflow template used by this workflow does not allow you to modify this field",u=function(e){return r||a.allowed.includes(e)},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;return u(e)?void 0:t};return{skippable:{label:"Skip this step if pervious steps failed?",extra:{explain:"If a previous step failed, should this step still run by the workflow engine?",warn:c("skippable")},value:o,rules:"required|boolean",disabled:!u("skippable")}}}(e,t);return Object(ye.createForm)(n)};var Ee=function(e){var t=function(e){var t=e.configOverrideSummaryRows||[];return S.a.map(t,(function(e){var t=e.name,n=e.title,r=e.allowed,o=void 0!==r&&r;return{name:t,label:n,value:o,default:o}}))}(e);return Object(ye.createForm)(t)};var we,Se=function(e){var t=function(e){var t=e.propertyOverrideSummaryRows||[];return S.a.map(t,(function(e){var t=e.name,n=e.title,r=e.allowed,o=void 0!==r&&r;return{name:t,label:n,value:o,default:o}}))}(e);return Object(ye.createForm)(t)},ke=n(201),Oe=n(451),Ce=k.types.model("ConfigurationEditor",{currentSectionIndex:0,review:!1,inputManifest:k.types.maybe(ce.InputManifest),configuration:k.types.optional(k.types.map(k.types.union(k.types.null,k.types.undefined,k.types.integer,k.types.number,k.types.boolean,k.types.string)),{}),mode:k.types.optional(k.types.enumeration("Mode",["create","edit"]),"create")}).volatile((function(e){return{originalConfig:void 0,originalSectionConfig:void 0}})).actions((function(){return{runInAction:e=>e()}})).actions((function(e){var t=e.cleanup,n=function(t){var n={},r=t;return void 0===r||(e.inputManifest.getSectionFlattened(r)||[]).forEach((function(t){var r=t.name;e.configuration.has(r)&&(n[r]=S.a.cloneDeep(e.configuration.get(r)))})),n},r=function(){e.originalSectionConfig=n(e.inputManifestSection)};return{afterCreate(){e.originalConfig=Object(k.getSnapshot)(e.configuration),r()},cleanup(){t()},next(t){var o;e.configuration.merge((o=t.values(),S.a.transform(o,(function(e,t,n){e[n]=S.a.isObject(t)?JSON.stringify(t):t}),{})));var a=!S.a.isEqual(e.originalSectionConfig,n(e.inputManifestSection)),i=function(t){var r=S.a.slice(S.a.get(e.inputManifest,"sections",[]),Math.max(t+1,0)),o=[];return S.a.forEach(r,(function(e){var t=n(e),r=S.a.keys(t)||[];S.a.isEmpty(r)||o.push.apply(o,Object(ve.a)(r))})),o}(e.currentSectionIndex),u=e.nextSectionIndex,c=e.currentSectionIndex;-1!==u&&(e.currentSectionIndex=u);var s=e.currentSectionIndex;r(),!e.isEditMode&&a&&S.a.forEach(i,(function(t){e.configuration.delete(t)})),e.review=c===s},previous(t){if(e.review)e.review=!1;else{var n=e.previousSectionIndex;-1!==n&&(e.currentSectionIndex=n),r()}},clearConfigs(){e.configuration.clear()},clearSectionConfigs(){if(e.empty)e.configuration.clear();else{var t=e.inputManifestSection;if(void 0!==t)(e.inputManifest.getSectionFlattened(t)||[]).forEach((function(t){e.configuration.delete(t.name)}))}},applyChanges(){e.originalConfig=Object(k.getSnapshot)(e.configuration)},cancel(){e.review=!1,e.currentSectionIndex=0,e.originalConfig&&Object(k.applySnapshot)(e.configuration,e.originalConfig),r()},restart(){e.cancel()}}})).views((function(e){return{get isEditMode(){return"edit"===e.mode},get inputManifestSection(){if(void 0!==e.inputManifest){var t=e.inputManifest.sections,n=e.currentSectionIndex;if(!(n>e.totalSections)&&!(n>=t.length))return t[n]}},get definedConfigList(){if(void 0===e.inputManifest)return[];var t=e.inputManifest.flattened,n=e.configuration,r=[];return S.a.forEach(t,(function(e){var t=n.get(e.name);S.a.isUndefined(t)&&(t=e.value),S.a.isUndefined(t)||r.push(Object(Oe.a)(Object(Oe.a)({},e),{},{value:t}))})),r},get merged(){var t=e.inputManifest.flattened,n={};S.a.forEach(t,(function(e){n[e.name]=e.value}));var r,o=Object(pe.a)(e.configuration.entries());try{for(o.s();!(r=o.n()).done;){var a=Object(ke.a)(r.value,2),i=a[0],u=a[1];n[i]=u}}catch(c){o.e(c)}finally{o.f()}return n},get formFields(){var t=e.currentSectionIndex;if(e.totalSections<t)return[];var n=e.inputManifestSection;return S.a.isUndefined(n)?[]:Object(ce.toMobxFormFields)(n.children,e.merged)},get form(){return Object(ye.createForm)(e.formFields)},get totalSections(){return void 0===e.inputManifest?0:e.inputManifest.sections.length},get hasNext(){return-1!==e.nextSectionIndex&&!e.review},get hasPrevious(){return-1!==e.previousSectionIndex||e.review},get nextSectionIndex(){if(e.totalSections<e.currentSectionIndex)return-1;if(void 0===e.inputManifest)return-1;for(var t=e.inputManifest.sections,n=e.merged,r=!1,o=e.currentSectionIndex+1;!r&&o<e.totalSections;){var a=t[o];(r=Object(ce.isConditionTrue)(a.condition,n))||(o+=1)}return r?o:-1},get previousSectionIndex(){if(0===e.currentSectionIndex)return-1;for(var t=e.inputManifest.sections,n=e.merged,r=!1,o=e.currentSectionIndex-1;!r&&o>=0;){var a=t[o];(r=Object(ce.isConditionTrue)(a.condition,n))||(o-=1)}return r?o:-1},get sectionsTitles(){var t=e.inputManifest.sections;return S.a.map(t,(function(e){return e.title}))},get empty(){return void 0===e.inputManifest||e.inputManifest.empty}}})),Pe=k.types.model("WorkflowTemplateStepEditor",{stepId:"",contentExpanded:!1,configEdit:!1,configOverrideEdit:!1,descEdit:!1,propsEdit:!1,propsOverrideEdit:!1}).volatile((function(e){return{configurationEditor:void 0,stepDescForm:void 0,stepConfigOverrideForm:void 0,stepPropsForm:void 0,stepPropsOverrideForm:void 0}})).actions((function(e){return{runInAction:e=>e(),afterAttach(){if(void 0===e.configurationEditor){var t=e.step,n=S.a.get(t,"stepTemplate.adminInputManifest"),r=Object(k.getSnapshot)(t.defaults);e.configurationEditor=Ce.create({inputManifest:S.a.isUndefined(n)?void 0:Object(k.clone)(n),configuration:r},Object(k.getEnv)(e)),e.stepConfigOverrideForm=Ee(t),e.stepDescForm=ge(t),e.stepPropsForm=be(t),e.stepPropsOverrideForm=Se(t)}},setContentExpanded(t){e.contentExpanded=!!t},setConfigEdit(t){e.configEdit=t},setConfigOverrideEdit(t){e.configOverrideEdit=t},setDescEdit(t){e.descEdit=t},setPropsEdit(t){e.propsEdit=t},setPropsOverrideEdit(t){e.propsOverrideEdit=t},applyDefaults(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.step.setDefaults(t)},applyConfigOverrides(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.step.setConfigOverrideOption({allowed:t}),e.stepConfigOverrideForm=Ee(e.step)},applyPropsOverrides(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.step.setPropsOverrideOption({allowed:t}),e.stepPropsOverrideForm=Se(e.step)},applyDescAndTitle(t,n){e.step.setDesc(t),e.step.setTitle(n),e.stepDescForm=ge(e.step)},applySkippable(t){e.step.setSkippable(t),e.stepPropsForm=be(e.step)}}})).views((function(e){return{get step(){return e.version.getStep(e.stepId)},get version(){return Object(k.getParent)(e,2).version},get configOverrideForm(){return e.stepConfigOverrideForm},get descForm(){return e.stepDescForm},get propsForm(){return e.stepPropsForm},get propsOverrideForm(){return e.stepPropsOverrideForm},get editing(){return e.configEdit||e.descEdit||e.propsEdit||e.configOverrideEdit||e.propsOverrideEdit}}})),Ae=k.types.model("WorkflowTemplateDraftEditor",{draftId:"",currentPage:0,numPages:3,stepEditors:k.types.optional(k.types.map(Pe),{})}).volatile((function(e){return{draftCopy:void 0,draftMetaForm:void 0}})).actions((function(e){function t(){e.runInAction((function(){var t=e.originalDraft;e.draftCopy=Object(k.clone)(t),e.draftMetaForm=he(e.draftCopy.template)}))}return{runInAction:e=>e(),afterCreate(){t()},nextPage:()=>(e.currentPage<e.numPages-1?e.currentPage+=1:e.currentPage=e.numPages-1,e.currentPage),previousPage:()=>(e.currentPage>0?e.currentPage-=1:e.currentPage=0,e.currentPage),cancel(){t(),e.currentPage=0},getStepEditor(t){var n=t.id,r=e.stepEditors.get(n)||Pe.create({stepId:n},Object(k.getEnv)(e));return e.stepEditors.set(n,r),r},removeStepEditor(t){e.stepEditors.delete(t)},addStep(t){e.draft.template.addStep(t)},update:t=>Object(E.a)(b.a.mark((function n(){var r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.workflowTemplateDraftsStore.updateDraft(t);case 2:r=n.sent,e.draft.setRev(r.rev);case 4:case"end":return n.stop()}}),n)})))(),publish:t=>Object(E.a)(b.a.mark((function n(){var r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.workflowTemplateDraftsStore.publishDraft(t);case 2:if((r=n.sent).hasErrors){n.next=6;break}return n.next=6,me.uiEventBus.fireEvent("workflowTemplateDraftDeleted",t);case 6:return n.abrupt("return",r);case 7:case"end":return n.stop()}}),n)})))()}})).views((function(e){return{get workflowTemplateDraftsStore(){return Object(k.getEnv)(e).workflowTemplateDraftsStore},get hasNextPage(){return e.currentPage<e.numPages-1},get hasPreviousPage(){return e.currentPage>0},get originalDraft(){return e.workflowTemplateDraftsStore.getDraft(e.draftId)},get draft(){return e.draftCopy},get version(){return e.draft.template},get metaForm(){return e.draftMetaForm},get stepEditorsEditing(){var t,n=!1,r=Object(pe.a)(e.stepEditors.values());try{for(r.s();!(t=r.n()).done;){if(t.value.editing){n=!0;break}}}catch(o){r.e(o)}finally{r.f()}return n}}}));function je(e){return"WorkflowTemplateDraftEditor-".concat(e)}function Ie(e){var t=we.sessionStore,n=je(e);t.removeStartsWith(n)}var xe=n(27),Te="Title",Ne="Description",_e="Skip this step if pervious steps failed",De=["title","desc","skippable"],Re=k.types.model("PropsOverrideOption",{allowed:k.types.optional(k.types.array(k.types.string),[])}).actions((function(e){return{setAllowed(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.allowed.replace(t)}}})).views((function(e){return{get overrideSummaryRows(){var t=function(t){return e.allowed.includes(t)},n=[{title:Te,allowed:t("title"),name:"title"},{title:Ne,allowed:t("desc"),name:"desc"},{title:_e,allowed:t("skippable"),name:"skippable"}];return S.a.forEach(e.allowed,(function(e,t){De.includes(e)||n.push({title:e,allowed:!0,name:"".concat(t,"-").concat(e)})})),n}}})),Me=k.types.model("ConfigOverrideOption",{allowed:k.types.optional(k.types.array(k.types.string),[])}).actions((function(e){return{setAllowed(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.allowed.replace(t)}}})).views((function(e){return{get overrideSummaryRows(){var t=S.a.cloneDeep(Object(k.getParent)(e).configSummaryRows||[]),n=S.a.keyBy(t,"name");return e.allowed.forEach((function(e){var r=n[e];void 0!==r?r.allowed=!0:t.push({name:e,allowed:!0})})),t}}})),Be=k.types.model("WorkflowTemplateStep",{id:"",stepTemplateId:"",stepTemplateVer:k.types.maybeNull(k.types.number),title:k.types.maybe(k.types.string),desc:k.types.maybe(k.types.string),propsOverrideOption:k.types.optional(Re,{}),configOverrideOption:k.types.optional(Me,{}),stepTemplate:se,skippable:k.types.maybe(k.types.boolean),defaults:k.types.optional(k.types.map(k.types.union(k.types.null,k.types.undefined,k.types.integer,k.types.number,k.types.boolean,k.types.string)),{})}).actions((function(e){return{afterCreate(){S.a.isEmpty(e.id)&&console.warn("There is no id provided for this workflow template step",Object(k.getSnapshot)(e))},setDesc(t){t===e.stepTemplate.desc?e.desc=void 0:e.desc=t},setTitle(t){t===e.stepTemplate.title?e.title=void 0:e.title=t},setDefaults(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.defaults.replace(t)},setSkippable(t){e.skippable=t},setConfigOverrideOption(t){Object(k.applySnapshot)(e.configOverrideOption,t)},setPropsOverrideOption(t){Object(k.applySnapshot)(e.propsOverrideOption,t)}}})).views((function(e){return{get templateId(){return e.stepTemplateId},get templateVer(){return e.stepTemplateVer},get derivedTitle(){return e.title||e.stepTemplate.title},get derivedDesc(){return e.desc||e.stepTemplate.desc},get descHtml(){return Object(k.getEnv)(e).showdown.convert(e.derivedDesc,e.assets)},get propertyOverrideSummaryRows(){return S.a.isNil(e.propsOverrideOption)?[]:e.propsOverrideOption.overrideSummaryRows},get propertySummaryRows(){return[{title:_e,value:e.skippable}]},get configSummaryRows(){var t=e.stepTemplate.inputManifest,n=[],r=[],o={};t&&(r=S.a.cloneDeep(t.flattened||[]),o=S.a.keyBy(r,"name"));var a,i=Object(pe.a)(e.defaults);try{for(i.s();!(a=i.n()).done;){var u=Object(ke.a)(a.value,2),c=u[0],s=u[1],l=o[c];void 0===l&&(l={name:c},n.push(l)),l.value=s,o[c]=l}}catch(f){i.e(f)}finally{i.f()}return[].concat(Object(ve.a)(r),n)},get configOverrideSummaryRows(){return S.a.isNil(e.configOverrideOption)?[]:e.configOverrideOption.overrideSummaryRows}}})),Fe={instanceTtl:"Time to Live (TTL) for instances of the workflow",runSpecSize:"Runtime lambda size",runSpecTarget:"Runtime target",title:"Title",desc:"Description",steps:"Add, remove, and rearrange steps"},Ue=["runSpecSize","runSpecTarget","instanceTtl","title","desc","steps"],Le=k.types.model("PropsOverrideOption",{allowed:k.types.optional(k.types.array(k.types.string),[])}).views((function(e){return{get overrideSummaryRows(){var t=function(t){return e.allowed.includes(t)},n=[{title:Fe.steps,allowed:t("steps"),name:"steps"},{title:Fe.instanceTtl,allowed:t("instanceTtl"),name:"instanceTtl"},{title:Fe.runSpecSize,allowed:t("runSpecSize"),name:"runSpecSize"},{title:Fe.runSpecTarget,allowed:t("runSpecTarget"),name:"runSpecTarget"},{title:Fe.title,allowed:t("title"),name:"title"},{title:Fe.desc,allowed:t("desc"),name:"desc"}];return S.a.forEach(e.allowed,(function(e){Ue.includes(e)||n.push({title:e,allowed:!0})})),n},canOverride:t=>e.allowed.includes(t)}})),We=k.types.model("RunSpec",{size:"",target:""}).views((function(e){return{get propertySummaryRows(){return[{title:Fe.runSpecSize,value:e.size},{title:Fe.runSpecTarget,value:e.target}]}}})),He=k.types.model("WorkflowTemplateVersion",{id:"",v:k.types.number,rev:k.types.maybeNull(k.types.number),createdAt:"",createdBy:"",updatedAt:"",updatedBy:"",title:"",desc:"",instanceTtl:k.types.maybeNull(k.types.number),runSpec:We,propsOverrideOption:k.types.maybe(Le),selectedSteps:k.types.optional(k.types.array(Be),[])}).actions((function(e){return{setWorkflowTemplateVersion(t){Object(k.applySnapshot)(e,t)},setTitle(t){e.title=t},setDescription(t){e.desc=t},setInstanceTtl(t){var n=null;if(S.a.isString(t)){var r=parseInt(t,10);n=S.a.isNaN(r)?null:r}else S.a.isNumber(t)&&(n=t);e.instanceTtl=n},setRunSpec(t){Object(k.applySnapshot)(e.runSpec,t)},setPropsOverrideOption(t){Object(k.applySnapshot)(e.propsOverrideOption,t)},reinsertStep(t,n){var r=e.selectedSteps[t];Object(k.detach)(r),e.selectedSteps.splice(n,0,r)},removeStep(t){var n=S.a.isString(t)?e.getStep(t):t;e.selectedSteps.remove(n)},addStep(t){var n=t.id,r=t.v,o=t.skippable,a=t.title,i=t.desc,u=Be.create({id:Object(xe.generateId)("wt-step"),stepTemplateId:n,stepTemplateVer:r,title:a,desc:i,skippable:o,stepTemplate:Object(k.clone)(t)},Object(k.getEnv)(e));return e.selectedSteps.push(u),u}}})).views((function(e){return{getStep:t=>S.a.find(e.selectedSteps,(function(e){return e.id===t})),get descHtml(){return Object(k.getEnv)(e).showdown.convert(e.desc,e.assets)},get system(){return"_system_"===e.createdBy},get propertySummaryRows(){return[{title:Fe.instanceTtl,value:e.instanceTtl}].concat(Object(ve.a)(e.runSpec.propertySummaryRows))},get propertyOverrideSummaryRows(){return S.a.isNil(e.propsOverrideOption)?[]:e.propsOverrideOption.overrideSummaryRows},get canRearrangeSteps(){return!0},get canWorkflowRearrangeSteps(){return e.canWorkflowOverrideProp("steps")},canWorkflowOverrideProp:t=>e.propsOverrideOption.canOverride(t)}})),ze=k.types.model("WorkflowTemplate",{id:k.types.identifier,versions:k.types.optional(k.types.array(He),[])}).actions((function(e){return{setWorkflowTemplate(t){var n=S.a.keyBy(e.versions,(function(e){return e.v.toString()})),r=[];S.a.forEach(t.versions,(function(e){var t=n[e.v];t?(t.setWorkflowTemplateVersion(e),r.push(t)):r.push(He.create(e))})),e.versions.replace(r)}}})).views((function(e){return{get latest(){var t=e.versions[0];return S.a.forEach(e.versions,(function(e){e.v>t.v&&(t=e)})),t},getVersion:t=>S.a.find(e.versions,["v",t]),get versionNumbers(){return S.a.map(e.versions,(function(e){return e.v}))}}})),Qe=k.types.model("WorkflowTemplateDraft",{id:k.types.identifier,rev:k.types.maybe(k.types.number),uid:"",username:k.types.maybeNull(k.types.optional(k.types.string,"")),createdAt:"",createdBy:"",updatedAt:"",updatedBy:"",templateId:"",template:He}).actions((function(e){return{setWorkflowTemplateDraft(t){Object(k.applySnapshot)(e,t)},setRev(t){e.rev=t}}})).views((function(e){return{}})),Ve=O.BaseStore.named("WorkflowTemplateDraftsStore").props({drafts:k.types.optional(k.types.map(Qe),{}),tickPeriod:9e5}).actions((function(e){var t=e.cleanup;function n(e){var t=S.a.cloneDeep(Object(k.getSnapshot)(e));return S.a.forEach(t.template.selectedSteps,(function(e){delete e.stepTemplate})),t}return{doLoad:()=>Object(E.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j();case 2:n=t.sent,e.runInAction((function(){var t={};e.drafts.forEach((function(e,n){t[n]=!0})),n.forEach((function(n){var r=n.id,o=e.drafts.has(r);e.addDraft(n),o&&delete t[r]})),S.a.forEach(t,(function(t,n){e.drafts.delete(n)}))}));case 4:case"end":return t.stop()}}),t)})))(),addDraft(t){var n=t.id,r=e.drafts.get(n);r?r.setWorkflowTemplateDraft(t):e.drafts.put(t)},updateDraft:t=>Object(E.a)(b.a.mark((function r(){var o,a,i;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t.id,void 0!==(a=e.drafts.get(o))){r.next=4;break}throw new Error('Workflow Template Draft "'.concat(o,'" does not exist'));case 4:return r.next=6,N(n(t));case 6:return i=r.sent,a.setWorkflowTemplateDraft(i),r.abrupt("return",a);case 9:case"end":return r.stop()}}),r)})))(),createDraft:t=>Object(E.a)(b.a.mark((function n(){var r,o,a,i;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.isNewTemplate,o=t.templateId,a=t.templateTitle,n.next=3,x({isNewTemplate:r,templateId:o,templateTitle:a});case 3:return i=n.sent,e.addDraft(i),n.abrupt("return",i);case 6:case"end":return n.stop()}}),n)})))(),publishDraft:t=>Object(E.a)(b.a.mark((function r(){var o,a;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t.id,void 0!==e.drafts.get(o)){r.next=4;break}throw new Error('Workflow Template Draft "'.concat(o,'" does not exist'));case 4:return r.next=6,D(n(t));case 6:return a=r.sent,e.runInAction((function(){a.hasErrors||e.drafts.delete(o)})),r.abrupt("return",a);case 9:case"end":return r.stop()}}),r)})))(),deleteDraft:t=>Object(E.a)(b.a.mark((function n(){var r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=Object(k.getEnv)(e).uiEventBus,n.next=3,M(t);case 3:return n.next=5,r.fireEvent("workflowTemplateDraftDeleted",t);case 5:e.runInAction((function(){e.drafts.delete(t.id)}));case 6:case"end":return n.stop()}}),n)})))(),cleanup:function(){e.drafts.clear(),t()}}})).views((function(e){return{get empty(){return 0===e.drafts.size},get total(){return e.drafts.size},get list(){var t=[];return e.drafts.forEach((function(e){return t.push(e)})),S.a.reverse(S.a.sortBy(t,["createdAt","title"]))},hasTemplate(t){var n,r=!1,o=Object(pe.a)(e.drafts.values());try{for(o.s();!(n=o.n()).done;){if(n.value.template.id===t){r=!0;break}}}catch(a){o.e(a)}finally{o.f()}return r},hasDraft:t=>e.drafts.has(t),getDraft:t=>e.drafts.get(t)}}));var Ge=O.BaseStore.named("WorkflowTemplatesStore").props({templates:k.types.optional(k.types.map(ze),{}),tickPeriod:9e5}).actions((function(e){var t=e.cleanup;return{doLoad:()=>Object(E.a)(b.a.mark((function t(){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P();case 2:n=t.sent,r=Ke(n),e.runInAction((function(){var t={};e.templates.forEach((function(e,n){t[n]=!0})),r.forEach((function(n){var r=n.id,o=e.templates.has(r);e.addTemplate(n),o&&delete t[r]})),S.a.forEach(t,(function(t,n){e.templates.delete(n)}))}));case 5:case"end":return t.stop()}}),t)})))(),addTemplate(t){var n=t.id,r=e.templates.get(n);r?r.setWorkflowTemplate(t):e.templates.put(t)},cleanup:function(){e.templates.clear(),t()}}})).views((function(e){return{get empty(){return 0===e.templates.size},get total(){return e.templates.size},get list(){var t=[];return e.templates.forEach((function(e){return t.push(e)})),S.a.reverse(S.a.sortBy(t,["latest.createdAt","title"]))},getTemplate:t=>e.templates.get(t)}}));function Ke(e){var t={};return S.a.forEach(e,(function(e){var n=e.id,r=t[n]||{id:n,versions:[]};r.versions.push(e),t[n]=r})),S.a.values(t)}var qe=function(e){var t=function(e){var t=e.title,n=void 0===t?"":t,r=e.desc,o=void 0===r?"":r,a=e.instanceTtl,i=e.runSpec,u=void 0===i?{}:i,c="The workflow template used by this workflow does not allow you to modify this field",s=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;return e.canOverrideProp(t)?void 0:n},l=function(t){return e.canOverrideProp(t)},f=[{name:"title",label:"Workflow Title",placeholder:"Type a title for the workflow",extra:{explain:"This is a required field and the number of characters must be between 3 and 255.\n      The title is shown in many places in the UI.",warn:s("title")},value:n,rules:"required|string|between:3,255",disabled:!l("title")},{name:"desc",label:"Workflow Description",placeholder:"Type a description for the workflow",extra:{explain:"The description can be written in markdown but must be between 3 and 4000 characters.",warn:s("desc")},value:o,rules:"required|string|between:3,4000",disabled:!l("desc")},{name:"instanceTtl",label:"Time to Live (TTL) for instances of the workflow",placeholder:"Type the number of days",extra:{explain:"The number of days for which a record of a workflow instance is kept in the database.\n      Leave it empty or type -1 if you don't want to have a time limit on the record.",warn:s("instanceTtl")},value:a,rules:"integer",disabled:!l("instanceTtl")},{name:"runSpecSize",label:"Runtime lambda size",extra:{warn:s("runSpecSize"),options:[{value:"small",text:"Small"},{value:"medium",text:"Medium"},{value:"large",text:"Large"}]},value:u.size||"small",rules:"required|in:small,medium,large",disabled:!l("runSpecSize")},{name:"runSpecTarget",label:"Runtime target",extra:{warn:s("runSpecTarget"),options:[{value:"stepFunctions",text:"Step Functions"},{value:"workerLambda",text:"Worker Lambda"},{value:"inPlace",text:"In Place"}]},value:u.target||"stepFunctions",rules:"required|in:stepFunctions,workerLambda,inPlace",disabled:!l("runSpecTarget")}];return[].concat(f)}(e);return Object(ye.createForm)(t)};function Ye(e,t){var n=t.allowed,r=void 0===n?[]:n,o=t.defaults;if(S.a.isEmpty(e))return e;var a=e.names,i=S.a.cloneDeep(Object(k.getSnapshot)(e)),u=o?Object(k.getSnapshot)(o):{},c=function(e){if(e.name){var t=e.name;if(a.includes(t))return r.includes(t)||(e.disabled=!0,S.a.set(e,"extra.warn","The workflow template used by this workflow does not allow you to modify this field")),S.a.has(u,t)&&(e.default=u[t]),e}};return S.a.forEach(i.sections,(function(e){Object(ce.visit)(e.children,c)})),i}var $e,Ze=k.types.model("WorkflowStepEditor",{stepId:"",contentExpanded:!1,configEdit:!1,descEdit:!1,propsEdit:!1}).volatile((function(e){return{configurationEditor:void 0,stepDescForm:void 0,stepPropsForm:void 0}})).actions((function(e){return{runInAction:e=>e(),afterAttach(){if(void 0===e.configurationEditor){var t=e.step,n=S.a.get(t,"stepTemplate.inputManifest"),r=Object(k.getSnapshot)(t.configs),o=t.configOverrideOption.allowed,a=e.defaults;e.configurationEditor=Ce.create({inputManifest:S.a.isUndefined(n)?void 0:Ye(n,{allowed:o,defaults:a}),configuration:r},Object(k.getEnv)(e)),e.stepDescForm=ge(t,{isTemplate:!1}),e.stepPropsForm=be(t,{isTemplate:!1})}},setContentExpanded(t){e.contentExpanded=!!t},setConfigEdit(t){e.configEdit=t},setDescEdit(t){e.descEdit=t},setPropsEdit(t){e.propsEdit=t},applyConfigs(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.step.setConfigs(t)},applyDescAndTitle(t,n){e.step.setDesc(t),e.step.setTitle(n),e.stepDescForm=ge(e.step,{isTemplate:!1})},applySkippable(t){e.step.setSkippable(t),e.stepPropsForm=be(e.step,{isTemplate:!1})}}})).views((function(e){return{get step(){return e.version.getStep(e.stepId)},get version(){return Object(k.getParent)(e,2).version},get defaults(){var t=e.version;if(t){var n=t.template;if(n){var r=n.getStep(e.stepId);if(r)return r.defaults}}},get descForm(){return e.stepDescForm},get propsForm(){return e.stepPropsForm},get editing(){return e.configEdit||e.descEdit||e.propsEdit}}})),Je=k.types.model("WorkflowDraftEditor",{draftId:"",currentPage:0,numPages:3,stepEditors:k.types.optional(k.types.map(Ze),{})}).volatile((function(e){return{draftCopy:void 0,draftMetaForm:void 0}})).actions((function(e){function t(){e.runInAction((function(){var t=e.originalDraft;e.draftCopy=Object(k.clone)(t),e.draftMetaForm=qe(e.draftCopy.workflow)}))}return{runInAction:e=>e(),afterCreate(){t()},nextPage:()=>(e.currentPage<e.numPages-1?e.currentPage+=1:e.currentPage=e.numPages-1,e.currentPage),previousPage:()=>(e.currentPage>0?e.currentPage-=1:e.currentPage=0,e.currentPage),cancel(){t(),e.currentPage=0},getStepEditor(t){var n=t.id,r=e.stepEditors.get(n)||Ze.create({stepId:n},Object(k.getEnv)(e));return e.stepEditors.set(n,r),r},removeStepEditor(t){e.stepEditors.delete(t)},addStep(t){e.version.addStep(t)},update:t=>Object(E.a)(b.a.mark((function n(){var r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.workflowDraftsStore.updateDraft(t);case 2:r=n.sent,e.draft.setRev(r.rev);case 4:case"end":return n.stop()}}),n)})))(),publish:t=>Object(E.a)(b.a.mark((function n(){var r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.workflowDraftsStore.publishDraft(t);case 2:if((r=n.sent).hasErrors){n.next=6;break}return n.next=6,me.uiEventBus.fireEvent("workflowDraftDeleted",t);case 6:return n.abrupt("return",r);case 7:case"end":return n.stop()}}),n)})))()}})).views((function(e){return{get workflowDraftsStore(){return Object(k.getEnv)(e).workflowDraftsStore},get hasNextPage(){return e.currentPage<e.numPages-1},get hasPreviousPage(){return e.currentPage>0},get originalDraft(){return e.workflowDraftsStore.getDraft(e.draftId)},get draft(){return e.draftCopy},get version(){return e.draft.workflow},get metaForm(){return e.draftMetaForm},get stepEditorsEditing(){var t,n=!1,r=Object(pe.a)(e.stepEditors.values());try{for(r.s();!(t=r.n()).done;){if(t.value.editing){n=!0;break}}}catch(o){r.e(o)}finally{r.f()}return n}}}));function Xe(e){return"WorkflowDraftEditor-".concat(e)}function et(e){var t=$e.sessionStore,n=Xe(e);t.removeStartsWith(n)}var tt="Skip this step if pervious steps failed",nt=k.types.model("WorkflowStep",{id:"",stepTemplateId:"",stepTemplateVer:k.types.maybeNull(k.types.number),title:k.types.maybe(k.types.string),desc:k.types.maybe(k.types.string),propsOverrideOption:k.types.optional(Re,{}),configOverrideOption:k.types.optional(Me,{}),skippable:k.types.maybe(k.types.boolean),configs:k.types.optional(k.types.map(k.types.union(k.types.null,k.types.undefined,k.types.integer,k.types.number,k.types.boolean,k.types.string)),{})}).actions((function(e){return{afterCreate(){S.a.isEmpty(e.id)&&console.warn("There is no id provided for this workflow step",Object(k.getSnapshot)(e))},setDesc(t){e.desc=t},setTitle(t){e.title=t},setConfigs(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.configs.replace(t)},setSkippable(t){e.skippable=t},makeNew(){e.propsOverrideOption.setAllowed(S.a.slice(De));var t=e.stepTemplate;if(t){var n=t.inputManifest;if(n){var r=n.names;e.configOverrideOption.setAllowed(r)}}}}})).views((function(e){return{get templateId(){return e.stepTemplateId},get templateVer(){return e.stepTemplateVer},get descHtml(){return Object(k.getEnv)(e).showdown.convert(e.desc,e.assets)},get stepTemplate(){var t=e.stepTemplateId,n=e.stepTemplateVer,r=Object(k.getEnv)(e).stepTemplatesStore;if(r){var o=r.getTemplate(t);if(o)return o.getVersion(n)}},get propertySummaryRows(){return[{title:tt,value:e.skippable}]},get configSummaryRows(){var t=e.stepTemplate;if(void 0===t)return[];var n=t.inputManifest,r=[],o=[],a={};n&&(o=S.a.cloneDeep(n.flattened||[]),a=S.a.keyBy(o,"name"));var i,u=Object(pe.a)(e.configs);try{for(u.s();!(i=u.n()).done;){var c=Object(ke.a)(i.value,2),s=c[0],l=c[1],f=a[s];void 0===f&&(f={name:s},r.push(f)),f.value=l,a[s]=f}}catch(d){u.e(d)}finally{u.f()}return[].concat(Object(ve.a)(o),r)}}})),rt={instanceTtl:"Time to Live (TTL) for instances of the workflow",runSpecSize:"Runtime lambda size",runSpecTarget:"Runtime target",title:"Title",desc:"Description",steps:"Add, remove, and rearrange steps"},ot={in_progress:"orange",error:"red",done:"green"},at=k.types.model("WorkflowAssignment",{id:"",wf:"",rev:k.types.number,createdAt:"",createdBy:"",updatedAt:"",updatedBy:"",triggerType:"",triggerTypeData:""}).actions((function(e){return{setWorkflowAssignment(t){Object(k.applySnapshot)(e,t)}}})).views((function(e){return{get system(){return"_system_"===e.createdBy.username}}})),it=k.types.model("WorkflowInstance",{id:k.types.identifier,wfId:"",wfVer:k.types.number,ttl:k.types.maybeNull(k.types.number),createdAt:"",createdBy:"",updatedAt:"",updatedBy:"",msg:"",wfStatus:"",stStatuses:k.types.optional(k.types.frozen(),[]),runSpec:We,input:k.types.optional(k.types.frozen(),{}),workflow:k.types.optional(k.types.frozen(),{})}).actions((function(e){return{setWorkflowInstance(t){Object(k.applySnapshot)(e,t)}}})).views((function(e){return{get system(){return"_system_"===e.createdBy.username},get version(){var t=Object(k.getEnv)(e).workflowsStore.getWorkflow(e.wfId);if(t)return t.getVersion(e.wfVer)},get pending(){return"not_started"===e.wfStatus||"in_progress"===e.wfStatus},get statusSummary(){var t=function(t){return{count:S.a.size(S.a.filter(e.stStatuses,(function(e){return e.status===t}))),statusLabel:S.a.startCase(t),statusColor:ot[t]}},n=function(t){return e.wfStatus===t},r={success:n("done"),error:n("error"),warning:n("in_progress")};return{statusMsg:e.msg,statusLabel:S.a.startCase(e.wfStatus),statusColor:ot[e.wfStatus],stepsSummary:[t("done"),t("error"),t("in_progress"),t("skipped"),t("not_started")],msgSpread:r}},get steps(){var t=e.workflow.selectedSteps||[],n=function(e,t,n){return S.a.startsWith(t,e)?{match:!0,parsed:t.substring(e.length),color:n}:{match:!1,parsed:t}},r=[];return S.a.forEach(e.stStatuses,(function(e,o){var a=function(e){return S.a.nth(t,e)}(o)||{},i=function(e){if(S.a.isEmpty(e))return{};var t=n("WARN|||",e,"orange");return t.match||(t=n("ERR|||",e,"red")).match||(t=n("INFO|||",e,"green")),t}(e.msg);r.push({statusMsg:i.parsed,statusLabel:S.a.startCase(e.status),statusColor:i.color||ot[e.status],stepTemplateId:a.stepTemplateId||"unknown",stepTemplateVer:a.stepTemplateVer,title:a.title||"Not available",startTime:e.startTime,endTime:e.endTime})})),r}}})),ut=k.types.model("WorkflowVersion",{id:"",v:k.types.number,rev:k.types.maybe(k.types.number),createdAt:"",createdBy:"",updatedAt:"",updatedBy:"",title:"",desc:"",instanceTtl:k.types.maybeNull(k.types.number),runSpec:We,stepsOrderChanged:k.types.boolean,selectedSteps:k.types.optional(k.types.array(nt),[]),instancesMap:k.types.optional(k.types.map(it),{}),workflowTemplateId:"",workflowTemplateVer:k.types.maybe(k.types.number)}).actions((function(e){return{setWorkflowVersion(t){var n=Object(k.detach)(e.instancesMap);Object(k.applySnapshot)(e,t),e.instancesMap=n},setInstances(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(xe.consolidateToMap)(e.instancesMap,t,(function(e,t){e.setWorkflowInstance(t)}))},setInstance(t){e.instancesMap.put(t)},setTitle(t){e.title=t},setDescription(t){e.desc=t},setInstanceTtl(t){var n=null;if(S.a.isString(t)){var r=parseInt(t,10);n=S.a.isNaN(r)?null:r}else S.a.isNumber(t)&&(n=t);e.instanceTtl=n},setRunSpec(t){Object(k.applySnapshot)(e.runSpec,t)},reinsertStep(t,n){var r=e.selectedSteps[t];Object(k.detach)(r),e.selectedSteps.splice(n,0,r)},removeStep(t){var n=S.a.isString(t)?e.getStep(t):t;e.selectedSteps.remove(n)},addStep(t){var n=t.id,r=t.v,o=t.skippable,a=t.title,i=t.desc,u=nt.create({id:Object(xe.generateId)("wf-step"),stepTemplateId:n,stepTemplateVer:r,title:a,desc:i,skippable:o},Object(k.getEnv)(e));return u.makeNew(),e.selectedSteps.push(u),u}}})).views((function(e){return{getStep:t=>S.a.find(e.selectedSteps,(function(e){return e.id===t})),get instances(){var t=[];return e.instancesMap.forEach((function(e){t.push(e)})),t},getInstance:t=>e.instancesMap.get(t),get descHtml(){return Object(k.getEnv)(e).showdown.convert(e.desc,e.assets)},get system(){return"_system_"===e.createdBy.username},get propertySummaryRows(){return[{title:rt.instanceTtl,value:e.instanceTtl}].concat(Object(ve.a)(e.runSpec.propertySummaryRows))},get template(){var t=Object(k.getEnv)(e).workflowTemplatesStore.getTemplate(e.workflowTemplateId);if(t)return t.getVersion(e.workflowTemplateVer)},get canRearrangeSteps(){var t=e.template;return!!t&&t.canWorkflowRearrangeSteps},canOverrideProp(t){var n=e.template;return!!n&&n.canWorkflowOverrideProp(t)},get hasPendingInstances(){return S.a.some(e.instances,["pending",!0])}}})),ct=k.types.model("Workflow",{id:k.types.identifier,versions:k.types.optional(k.types.array(ut),[]),assignments:k.types.optional(k.types.array(at),[])}).actions((function(e){return{setWorkflow(t){var n=S.a.keyBy(e.versions,(function(e){return e.v.toString()})),r=[];S.a.forEach(t.versions,(function(e){var t=n[e.v];t?(t.setWorkflowVersion(e),r.push(t)):r.push(ut.create(e))})),e.versions.replace(r)},setAssignments(t){var n=S.a.keyBy(e.assignments,"id"),r=[];S.a.forEach(t,(function(e){var t=n[e.id];t?(t.setWorkflowAssignment(e),r.push(t)):r.push(at.create(e))})),e.assignments.replace(r)}}})).views((function(e){return{get latest(){var t=e.versions[0];return S.a.forEach(e.versions,(function(e){e.v>t.v&&(t=e)})),t},getVersion:t=>S.a.find(e.versions,["v",t]),get versionNumbers(){return S.a.map(e.versions,(function(e){return e.v}))}}}));function st(e){var t={};return S.a.forEach(e,(function(e){var n=e.id,r=t[n]||{id:n,versions:[]};r.versions.push(e),t[n]=r})),S.a.values(t)}var lt=k.types.model("WorkflowDraft",{id:k.types.identifier,rev:k.types.maybe(k.types.number),uid:"",username:k.types.maybeNull(k.types.optional(k.types.string,"")),createdAt:"",createdBy:"",updatedAt:"",updatedBy:"",workflowId:"",workflowVer:k.types.maybe(k.types.number),templateId:"",templateVer:k.types.maybe(k.types.number),workflow:ut}).actions((function(e){return{setWorkflowDraft(t){Object(k.applySnapshot)(e,t)},setRev(t){e.rev=t}}})).views((function(e){return{}})),ft=O.BaseStore.named("WorkflowDraftsStore").props({drafts:k.types.optional(k.types.map(lt),{}),tickPeriod:9e5}).actions((function(e){var t=e.cleanup;function n(e){var t=S.a.cloneDeep(Object(k.getSnapshot)(e));return S.a.forEach(t.workflow.selectedSteps,(function(e){delete e.stepTemplate,delete e.configOverrideOption,delete e.propsOverrideOption})),delete t.workflow.stepsOrderChanged,delete t.workflow.instancesMap,t}return{doLoad:()=>Object(E.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H();case 2:n=t.sent,e.runInAction((function(){var t={};e.drafts.forEach((function(e,n){t[n]=!0})),n.forEach((function(n){var r=n.id,o=e.drafts.has(r);e.addDraft(n),o&&delete t[r]})),S.a.forEach(t,(function(t,n){e.drafts.delete(n)}))}));case 4:case"end":return t.stop()}}),t)})))(),addDraft(t){var n=t.id,r=e.drafts.get(n);r?r.setWorkflowDraft(t):e.drafts.put(t)},updateDraft:t=>Object(E.a)(b.a.mark((function r(){var o,a,i;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t.id,void 0!==(a=e.drafts.get(o))){r.next=4;break}throw new Error('Workflow Draft "'.concat(o,'" does not exist'));case 4:return r.next=6,G(n(t));case 6:return i=r.sent,a.setWorkflowDraft(i),r.abrupt("return",a);case 9:case"end":return r.stop()}}),r)})))(),createDraft:t=>Object(E.a)(b.a.mark((function n(){var r,o,a,i;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.isNewWorkflow,o=t.workflowId,a=t.templateId,n.next=3,Q({isNewWorkflow:r,workflowId:o,templateId:a});case 3:return i=n.sent,e.addDraft(i),n.abrupt("return",i);case 6:case"end":return n.stop()}}),n)})))(),publishDraft:t=>Object(E.a)(b.a.mark((function r(){var o,a;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t.id,void 0!==e.drafts.get(o)){r.next=4;break}throw new Error('Workflow Draft "'.concat(o,'" does not exist'));case 4:return r.next=6,q(n(t));case 6:return a=r.sent,e.runInAction((function(){a.hasErrors||e.drafts.delete(o)})),r.abrupt("return",a);case 9:case"end":return r.stop()}}),r)})))(),deleteDraft:t=>Object(E.a)(b.a.mark((function n(){var r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=Object(k.getEnv)(e).uiEventBus,n.next=3,$(t);case 3:return n.next=5,r.fireEvent("workflowDraftDeleted",t);case 5:e.runInAction((function(){e.drafts.delete(t.id)}));case 6:case"end":return n.stop()}}),n)})))(),cleanup:function(){e.drafts.clear(),t()}}})).views((function(e){return{get empty(){return 0===e.drafts.size},get total(){return e.drafts.size},get list(){var t=[];return e.drafts.forEach((function(e){return t.push(e)})),S.a.reverse(S.a.sortBy(t,["createdAt","title"]))},hasWorkflow(t){var n,r=!1,o=Object(pe.a)(e.drafts.values());try{for(o.s();!(n=o.n()).done;){if(n.value.workflow.id===t){r=!0;break}}}catch(a){o.e(a)}finally{o.f()}return r},hasDraft:t=>e.drafts.has(t),getDraft:t=>e.drafts.get(t)}}));var dt=O.BaseStore.named("WorkflowInstancesStore").props({workflowId:"",workflowVer:k.types.number,tickPeriod:3e5}).actions((function(e){var t=e.cleanup;return{doLoad:()=>Object(E.a)(b.a.mark((function t(){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Object(k.getParent)(e,2),Object(O.isStoreReady)(n)){t.next=4;break}return t.next=4,n.load();case 4:return t.next=6,ee(e.workflowId,e.workflowVer);case 6:r=t.sent,e.runInAction((function(){var t=e.version;if(!t)throw new Error('Workflow "'.concat(e.workflowId,'" v').concat(e.workflowVer," does not exist"));t.setInstances(r),t.hasPendingInstances?e.setFastTickPeriod():e.setSlowTickPeriod()}));case 8:case"end":return t.stop()}}),t)})))(),triggerWorkflow:t=>Object(E.a)(b.a.mark((function n(){var r,o;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.input,n.next=3,oe(e.workflowId,e.workflowVer,{input:r});case 3:return o=n.sent,e.runInAction((function(){var t=e.version;if(!t)throw new Error('Workflow "'.concat(e.workflowId,'" v').concat(e.workflowVer," does not exist"));t.setInstance(o.instance),t.hasPendingInstances?e.setFastTickPeriod():e.setSlowTickPeriod()})),n.abrupt("return",o);case 6:case"end":return n.stop()}}),n)})))(),setSlowTickPeriod(){e.changeTickPeriod(3e5)},setFastTickPeriod(){e.changeTickPeriod(5e3)},cleanup:function(){t()}}})).views((function(e){return{get instances(){var t=e.version;return t?t.instances:[]},get version(){var t=Object(k.getParent)(e,2).workflow;if(t)return t.getVersion(e.workflowVer)},get empty(){return 0===e.instances.length},get total(){return e.instances.length},get list(){var t=e.instances.slice();return S.a.reverse(S.a.sortBy(t,["createdAt"]))},getInstance:t=>e.instancesMap.get(t),hasInstance:t=>e.instancesMap.has(t)}})),pt=O.BaseStore.named("WorkflowInstanceStore").props({workflowId:"",workflowVer:k.types.number,instanceId:"",tickPeriod:3e5}).actions((function(e){var t=e.cleanup;return{doLoad:()=>Object(E.a)(b.a.mark((function t(){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Object(k.getParent)(e,2),Object(O.isStoreReady)(n)){t.next=4;break}return t.next=4,n.load();case 4:return t.next=6,ne(e.workflowId,e.workflowVer,e.instanceId);case 6:r=t.sent,e.runInAction((function(){var t=e.version;if(!t)throw new Error('Workflow "'.concat(e.workflowId,'" v').concat(e.workflowVer," does not exist"));t.setInstance(r);var n=t.getInstance(e.instanceId);n&&n.pending?e.setFastTickPeriod():e.setSlowTickPeriod()}));case 8:case"end":return t.stop()}}),t)})))(),setSlowTickPeriod(){e.changeTickPeriod(3e5)},setFastTickPeriod(){e.changeTickPeriod(5e3)},cleanup:function(){t()}}})).views((function(e){return{get version(){var t=Object(k.getParent)(e,2).workflow;if(t)return t.getVersion(e.workflowVer)}}})),mt=O.BaseStore.named("WorkflowAssignmentsStore").props({workflowId:"",tickPeriod:3e5}).actions((function(e){var t=e.cleanup;return{doLoad:()=>Object(E.a)(b.a.mark((function t(){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Object(k.getParent)(e,2),Object(O.isStoreReady)(n)){t.next=4;break}return t.next=4,n.load();case 4:return t.next=6,ie(e.workflowId);case 6:r=t.sent,e.runInAction((function(){var t=e.workflow;if(!t)throw new Error('Workflow "'.concat(e.workflowId,'" does not exist'));t.setAssignments(r)}));case 8:case"end":return t.stop()}}),t)})))(),cleanup:function(){t()}}})).views((function(e){return{get assignments(){var t=e.workflow;return t?t.assignments:[]},get workflow(){return Object(k.getParent)(e,2).workflow},get empty(){return 0===e.assignments.length},get total(){return e.assignments.length},get list(){var t=e.assignments.slice();return S.a.reverse(S.a.sortBy(t,["createdAt"]))}}})),vt=O.BaseStore.named("WorkflowStore").props({workflowId:"",instancesStores:k.types.optional(k.types.map(dt),{}),instanceStores:k.types.optional(k.types.map(pt),{}),assignmentsStore:k.types.optional(k.types.map(mt),{}),tickPeriod:3e5}).actions((function(e){var t=e.cleanup;return{doLoad:()=>Object(E.a)(b.a.mark((function t(){var n,r,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(k.getParent)(e,2),t.next=3,J(e.workflowId);case 3:r=t.sent,o=S.a.first(st(r)),n.addWorkflow(o);case 6:case"end":return t.stop()}}),t)})))(),getInstancesStore:function(t,n){var r="".concat(t,"__").concat(n),o=e.instancesStores.get(r);return o||(e.instancesStores.set(r,dt.create({workflowId:t,workflowVer:n})),o=e.instancesStores.get(r)),o},getInstanceStore:function(t,n){var r=e.workflowId,o="".concat(r,"__").concat(t,"__").concat(n),a=e.instanceStores.get(o);return a||(e.instanceStores.set(o,pt.create({workflowId:r,workflowVer:t,instanceId:n})),a=e.instanceStores.get(o)),a},getAssignmentsStore:function(){var t=e.workflowId,n=e.assignmentsStore.get(t);return n||(e.assignmentsStore.set(t,mt.create({workflowId:t})),n=e.assignmentsStore.get(t)),n},cleanup:function(){e.instancesStores.clear(),e.instanceStores.clear(),e.assignmentsStore.clear(),t()}}})).views((function(e){return{get workflow(){return Object(k.getParent)(e,2).getWorkflow(e.workflowId)}}})),yt=O.BaseStore.named("WorkflowsStore").props({workflows:k.types.optional(k.types.map(ct),{}),workflowStores:k.types.optional(k.types.map(vt),{}),tickPeriod:9e5}).actions((function(e){var t=e.cleanup;return{doLoad:()=>Object(E.a)(b.a.mark((function t(){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L();case 2:n=t.sent,r=st(n),e.runInAction((function(){var t={};e.workflows.forEach((function(e,n){t[n]=!0})),r.forEach((function(n){var r=n.id,o=e.workflows.has(r);e.addWorkflow(n),o&&delete t[r]})),S.a.forEach(t,(function(t,n){e.workflows.delete(n)}))}));case 5:case"end":return t.stop()}}),t)})))(),addWorkflow(t){if(t){var n=t.id,r=e.workflows.get(n);r?r.setWorkflow(t):e.workflows.put(t)}},getWorkflowStore:function(t){var n=e.workflowStores.get(t);return n||(e.workflowStores.set(t,vt.create({workflowId:t})),n=e.workflowStores.get(t)),n},cleanup:function(){e.workflows.clear(),e.workflowStores.clear(),t()}}})).views((function(e){return{get empty(){return 0===e.workflows.size},get total(){return e.workflows.size},get list(){var t=[];return e.workflows.forEach((function(e){return t.push(e)})),S.a.reverse(S.a.sortBy(t,["latest.createdAt","title"]))},getWorkflow:t=>e.workflows.get(t),hasWorkflow:t=>e.workflows.has(t),asDropDownOptions(){var t=[];return e.workflows.forEach((function(e){var n=e.latest.v;e.versions.forEach((function(r){t.push({key:e.id,value:JSON.stringify({wid:e.id,wrv:r.v}),text:r.v===n?"".concat(e.id," (latest)"):"".concat(e.id," (v").concat(r.v,")")})}))})),t}}}));var ht={registerAppContextItems:function(e){!function(e){e.stepTemplatesStore=fe.create({},e)}(e),function(e){we=e,me.uiEventBus.listenTo("workflowTemplateDraftDeleted",{id:"WorkflowTemplateDraftEditor",listener:function(){var e=Object(E.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ie(t.id);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}(e),function(e){e.workflowTemplateDraftsStore=Ve.create({},e)}(e),function(e){e.workflowTemplatesStore=Ge.create({},e),me.uiEventBus.listenTo("workflowTemplatePublished",{id:"WorkflowTemplatesStore",listener:function(){var t=Object(E.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.workflowTemplatesStore.cleanup();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})}(e),function(e){$e=e,me.uiEventBus.listenTo("workflowDraftDeleted",{id:"WorkflowDraftEditor",listener:function(){var e=Object(E.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:et(t.id);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}(e),function(e){e.workflowDraftsStore=ft.create({},e)}(e),function(e){e.workflowsStore=yt.create({},e),me.uiEventBus.listenTo("workflowPublished",{id:"WorkflowsStore",listener:function(){var t=Object(E.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.workflowsStore.cleanup();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})}(e)},postRegisterAppContextItems:function(e){}};var gt={registerMenuItems:function(e,t){t.location;var n=t.appContext,r=S.a.get(n,"userStore.user.isAdmin");return new Map([].concat(Object(ve.a)(e),[["/workflows/published",{title:"Workflows",icon:"fork",shouldShow:r}]]))}},bt=n(85),Et=n.n(bt),wt=n(34),St=n(35),kt=n(37),Ot=n(36),Ct=n(0),Pt=n.n(Ct),At=n(12),jt=n(149),It=n(2199),xt=n(444),Tt=n(2201),Nt=n(72),_t=n(38),Dt=n(39),Rt=n.n(Dt),Mt=n(3),Bt=n(57),Ft=n.n(Bt),Ut=n(150),Lt=n(207),Wt=n(33),Ht=k.types.model("WorkflowCommonUIState",{versionNumber:-1,mainTabIndex:0}).actions((function(e){return{setVersionNumber(t){e.versionNumber=t},setMainTabIndex(t){e.mainTabIndex=t}}}));me.uiEventBus.listenTo("workflowTemplatePublished",{id:"WorkflowCommonUIState",listener:function(){var e=Object(E.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:me.sessionStore.removeStartsWith("WorkflowCommonUIState-".concat(t.id));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),me.uiEventBus.listenTo("workflowPublished",{id:"WorkflowCommonUIState",listener:function(){var e=Object(E.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:me.sessionStore.removeStartsWith("WorkflowCommonUIState-".concat(t.id));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});var zt=function(e){var t="WorkflowCommonUIState-".concat(e),n=me.sessionStore.map.get(t)||Ht.create();return me.sessionStore.map.set(t,n),n},Qt=n(84),Vt=n(2205),Gt=n(730),Kt=n(2198);var qt=Object(At.observer)((function(e){var t=e.rows,n=void 0===t?[]:t,r=e.className,o=void 0===r?"":r;return 0===n.length?null:Pt.a.createElement(Kt.a,{basic:"very",className:"animated ".concat(o)},Pt.a.createElement(Kt.a.Header,null,Pt.a.createElement(Kt.a.Row,null,Pt.a.createElement(Kt.a.HeaderCell,{width:10},"Property"),Pt.a.createElement(Kt.a.HeaderCell,{width:6},"Value"))),Pt.a.createElement(Kt.a.Body,null,S.a.map(n,(function(e,t){return Pt.a.createElement(Kt.a.Row,{key:t},Pt.a.createElement(Kt.a.Cell,{width:10},e.title),Pt.a.createElement(Kt.a.Cell,{width:6},(n=e.value,S.a.isNil(n)?"Not Provided":n.toString())));var n}))))})),Yt=n(6),$t=n.n(Yt),Zt=n(200),Jt=n.n(Zt);var Xt=Object(At.observer)((function(e){var t=e.rows,n=void 0===t?[]:t,r=e.className,o=void 0===r?"":r,a=e.editable,i=void 0!==a&&a,u=e.processing,c=void 0!==u&&u;if(0===n.length)return null;var s=function(e){return i?e.label:e.title};return Pt.a.createElement(Kt.a,{basic:"very",className:$t()("animated",o)},Pt.a.createElement(Kt.a.Header,null,Pt.a.createElement(Kt.a.Row,null,Pt.a.createElement(Kt.a.HeaderCell,{width:10},"Property"),Pt.a.createElement(Kt.a.HeaderCell,{width:6},"Can be changed?"))),Pt.a.createElement(Kt.a.Body,null,S.a.map(n,(function(e,t){return Pt.a.createElement(Kt.a.Row,{key:"".concat(t,"-").concat(s(e))},Pt.a.createElement(Kt.a.Cell,null,s(e)),Pt.a.createElement(Kt.a.Cell,null,!i&&(e.allowed?Pt.a.createElement("span",{className:"op-3"},Pt.a.createElement(Nt.a,{name:"toggle on",color:"blue",size:"large",className:"mr1"}),"Yes"):Pt.a.createElement("span",{className:"op-3"},Pt.a.createElement(Nt.a,{name:"toggle off",size:"large",color:"grey",className:"mr1"}),"No")),i&&Pt.a.createElement(Jt.a,{field:e,disabled:c,show:"toggleOnly",className:"mb0"})))}))))})),en=Object(At.observer)((function(e){var t=e.model,n=void 0===t?{}:t,r=e.className,o=void 0===r?"":r,a=e.message,i=void 0===a?"No properties are available":a,u=n.propertySummaryRows||[],c=u.length>0,s=n.propertyOverrideSummaryRows||[],l=s.length>0,f=!c&&!l;return Pt.a.createElement(Pt.a.Fragment,null,c&&Pt.a.createElement(xt.a,{padded:!0},Pt.a.createElement(qt,{rows:u})),l&&Pt.a.createElement(xt.a,{padded:!0},Pt.a.createElement(Xt,{rows:s})),f&&Pt.a.createElement("div",{className:"".concat(o)},i))})),tn=n(518),nn=n(2200),rn=n(265),on=n.n(rn);var an=Object(At.observer)((function(e){var t=e.rows,n=void 0===t?[]:t,r=e.className,o=void 0===r?"":r,a=e.editable,i=void 0!==a&&a,u=e.processing,c=void 0!==u&&u;if(0===n.length)return null;var s=function(e){return i?e.label:e.title};return Pt.a.createElement(Kt.a,{basic:"very",className:$t()("animated",o)},Pt.a.createElement(Kt.a.Header,null,Pt.a.createElement(Kt.a.Row,null,Pt.a.createElement(Kt.a.HeaderCell,{width:10},"Key"),Pt.a.createElement(Kt.a.HeaderCell,{width:6},"Can be changed?"))),Pt.a.createElement(Kt.a.Body,null,S.a.map(n,(function(e,t){return Pt.a.createElement(Kt.a.Row,{key:"".concat(t,"-").concat(s(e))},Pt.a.createElement(Kt.a.Cell,null,function(e){var t=e.title,n=void 0===t?"":t,r=e.name;if(!S.a.isEmpty(n))return Pt.a.createElement(Pt.a.Fragment,null,Pt.a.createElement("div",null,n),Pt.a.createElement("div",{className:"fs-7 color-grey"},r));return Pt.a.createElement("div",null,r)}({name:e.name,title:s(e)})),Pt.a.createElement(Kt.a.Cell,null,!i&&(e.allowed?Pt.a.createElement("span",{className:"op-3"},Pt.a.createElement(Nt.a,{name:"toggle on",color:"blue",size:"large",className:"mr1"}),"Yes"):Pt.a.createElement("span",{className:"op-3"},Pt.a.createElement(Nt.a,{name:"toggle off",size:"large",color:"grey",className:"mr1"}),"No")),i&&Pt.a.createElement(Jt.a,{field:e,disabled:c,show:"toggleOnly",className:"mb0"})))}))))})),un=Object(At.observer)((function(e){var t=e.model,n=void 0===t?{}:t,r=e.className,o=void 0===r?"":r,a=e.message,i=void 0===a?"No configuration entries are available":a,u=n.configSummaryRows||[],c=u.length>0,s=n.configOverrideSummaryRows||[],l=s.length>0,f=!c&&!l;return Pt.a.createElement(Pt.a.Fragment,null,c&&Pt.a.createElement(xt.a,{padded:!0},Pt.a.createElement(on.a,{rows:u})),l&&Pt.a.createElement(xt.a,{padded:!0},Pt.a.createElement(an,{rows:s})),f&&Pt.a.createElement("div",{className:"".concat(o)},i))})),cn=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(e){var r;return Object(wt.a)(this,n),(r=t.call(this,e)).handleOnExpand=function(){r.expanded=!r.expanded},Object(Mt.runInAction)((function(){r.expanded=!1})),r}return Object(St.a)(n,[{key:"getWorkflowTemplateStep",value:function(){return this.props.step}},{key:"getStepTemplate",value:function(){return this.getWorkflowTemplateStep().stepTemplate}},{key:"render",value:function(){var e=this.getWorkflowTemplateStep(),t=this.expanded;return Pt.a.createElement(tn.a,{className:"flex-auto overflow-hidden pr1"},Pt.a.createElement(tn.a.Title,{active:t,index:0,onClick:this.handleOnExpand},Pt.a.createElement("div",{className:"flex mt1 mb1"},Pt.a.createElement(Nt.a,{name:"dropdown",className:"inline-block",style:{marginTop:"3px"}}),Pt.a.createElement("div",{className:"ellipsis flex-auto"},e.derivedTitle||e.title),Pt.a.createElement("div",{className:"ellipsis pl1 pr1 breakout fs-9 color-grey"},e.templateId," v",e.templateVer))),Pt.a.createElement(tn.a.Content,{active:t,className:"animated pt3 pl2 pr2 pb2 mb2"},this.renderDescriptionSection(e),this.renderConfigurationSection(e),this.renderPropertiesSection(e)))}},{key:"renderDescriptionSection",value:function(e){return Pt.a.createElement(Pt.a.Fragment,null,Pt.a.createElement(Nt.a,{name:"file alternate outline",className:"mr1 color-grey"}),Pt.a.createElement("b",null,"Description"),Pt.a.createElement(nn.a,{className:"mt1"}),Pt.a.createElement("div",{className:"mb4",dangerouslySetInnerHTML:{__html:e.descHtml}}))}},{key:"renderConfigurationSection",value:function(e){return Pt.a.createElement("div",{className:"mb4"},Pt.a.createElement(Nt.a,{name:"cog",className:"mr1 color-grey"}),Pt.a.createElement("b",null,"Configuration"),Pt.a.createElement(nn.a,{className:"mt1 mb3"}),Pt.a.createElement(un,{model:e}))}},{key:"renderPropertiesSection",value:function(e){return Pt.a.createElement(Pt.a.Fragment,null,Pt.a.createElement(Nt.a,{name:"list alternate outline",className:"mr1 color-grey"}),Pt.a.createElement("b",null,"Properties"),Pt.a.createElement(nn.a,{className:"mt1 mb3"}),Pt.a.createElement(en,{model:e}))}}]),n}(Pt.a.Component);Object(Mt.decorate)(cn,{expanded:Mt.observable,handleOnExpand:Mt.action});var sn=Object(At.inject)()(Object(jt.o)(Object(At.observer)(cn))),ln=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(){var e;Object(wt.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleOnTabChange=function(t,n){e.getState().setMainTabIndex(n.activeIndex)},e}return Object(St.a)(n,[{key:"getState",value:function(){return this.props.uiState}},{key:"selectedMainTabIndex",value:function(){return this.getState().mainTabIndex}},{key:"getTemplate",value:function(){return this.props.template}},{key:"render",value:function(){var e=this,t=this.props.className||"mt0",n=this.getTemplate(),r=this.selectedMainTabIndex(),o=[{menuItem:"Description",render:function(){return Pt.a.createElement(Vt.a.Pane,{basic:!0,attached:!1},Pt.a.createElement(Qt.a,null,(function(){return Pt.a.createElement("div",{className:"animated",dangerouslySetInnerHTML:{__html:n.descHtml}})})))}},{menuItem:"Steps",render:function(){return Pt.a.createElement(Vt.a.Pane,{basic:!0,attached:!1},Pt.a.createElement(Qt.a,null,(function(){return e.renderSteps(n)})))}},{menuItem:"Properties",render:function(){return Pt.a.createElement(Vt.a.Pane,{basic:!0,attached:!1},Pt.a.createElement(en,{model:n}))}}];return Pt.a.createElement(Vt.a,{className:t,activeIndex:r,menu:{secondary:!0,pointing:!0},panes:o,onTabChange:this.handleOnTabChange})}},{key:"renderSteps",value:function(e){var t=e.selectedSteps||[];return 0===t.length?Pt.a.createElement("span",null,"No steps are provided"):Pt.a.createElement(Gt.a,{padded:!1,className:"animated"},S.a.map(t,(function(e,t){return Pt.a.createElement(Gt.a.Row,{key:t,className:"pb0"},Pt.a.createElement(Gt.a.Column,{width:1},Pt.a.createElement(Ut.a,{circular:!0,className:"mt1 mb1"},t+1)),Pt.a.createElement(Gt.a.Column,{width:15},Pt.a.createElement(xt.a,{className:"p0 pl1 flex"},Pt.a.createElement(sn,{step:e}))))})))}}]),n}(Pt.a.Component);Object(Mt.decorate)(ln,{handleOnTabChange:Mt.action});var fn=Object(At.inject)()(Object(At.observer)(ln)),dn=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(e){var r;return Object(wt.a)(this,n),(r=t.call(this,e)).handleOnVersionChange=function(e){var t=e.value,n=void 0===t?1:t;r.getState().setVersionNumber(n)},Object(Mt.runInAction)((function(){var e,t=r.getState();e=!S.a.isNil(r.props.v)?r.props.v:-1===t.versionNumber?r.props.template.latest.v:t.versionNumber,t.setVersionNumber(e)})),r}return Object(St.a)(n,[{key:"getState",value:function(){return zt(this.getTemplate().id)}},{key:"selectedVersionNumber",value:function(){return this.getState().versionNumber}},{key:"getTemplate",value:function(){return this.props.template}},{key:"getTemplateVersion",value:function(){var e=this.getTemplate(),t=this.selectedVersionNumber(),n=e.getVersion(t);return S.a.isEmpty(n)?(Object(Wt.displayError)("Version ".concat(t," of this workflow template is not valid")),{}):n}},{key:"getUserDisplayName",value:function(){return this.props.userDisplayName}},{key:"render",value:function(){var e=this.getTemplateVersion(),t=e.id,n=e.v,r=e.title,o=e.createdAt,a=e.createdBy,i=this.getUserDisplayName(),u=i.isSystem({uid:a});return Pt.a.createElement(Pt.a.Fragment,null,Pt.a.createElement(Ut.a,{attached:"top left"},"Template"),Pt.a.createElement("div",{className:"flex mb1"},Pt.a.createElement(Tt.a,{as:"h3",color:"grey",className:"mt0 flex-auto ellipsis"},r,Pt.a.createElement(Tt.a.Subheader,{className:"fs-9"},"created ",Pt.a.createElement(Ft.a,{date:o})," ",u?"":Pt.a.createElement("span",{className:"ml1"},"by ",i.getDisplayName({uid:a})))),Pt.a.createElement("div",{className:"ml1"},Pt.a.createElement("span",{className:"ellipsis pr1 fs-9 breakout color-grey"},t)," ",this.renderVersionDropdown(n))),this.renderMainTabs(e))}},{key:"renderVersionDropdown",value:function(e){var t=this,n=this.getTemplate(),r=n.versionNumbers,o=S.a.map(r,(function(e){return{text:"v".concat(e),value:e}}));return 1===r.length?Pt.a.createElement("span",{className:"bold color-grey pr2"},"v",n.latest.v):Pt.a.createElement(Lt.a,{className:"color-grey",inline:!0,options:o,value:e,onChange:function(e,n){return t.handleOnVersionChange(n)}})}},{key:"renderMainTabs",value:function(e){var t=this.getState();return Pt.a.createElement(fn,{template:e,uiState:t})}}]),n}(Pt.a.Component);Object(Mt.decorate)(dn,{handleOnVersionChange:Mt.action});var pn=Object(At.inject)("userDisplayName")(Object(jt.o)(Object(At.observer)(dn))),mn=n(2203),vn=function(e){var t=e.segmentCount,n=void 0===t?1:t;return S.a.map(S.a.times(n,String),(function(e){return function(e){return Pt.a.createElement(xt.a,{key:e,className:"p3 mb2"},Pt.a.createElement(mn.a,{fluid:!0},Pt.a.createElement(mn.a.Header,null,Pt.a.createElement(mn.a.Line,{length:"full"})),Pt.a.createElement(mn.a.Paragraph,null,Pt.a.createElement(mn.a.Line,{length:"short"}))),Pt.a.createElement(nn.a,{className:"mt3"}),Pt.a.createElement(mn.a,{fluid:!0},Pt.a.createElement(mn.a.Line,{length:"full"}),Pt.a.createElement(mn.a.Line,{length:"full"}),Pt.a.createElement(mn.a.Line,{length:"full"}),Pt.a.createElement(mn.a.Line,{length:"full"})))}(e)}))},yn=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(){return Object(wt.a)(this,n),t.apply(this,arguments)}return Object(St.a)(n,[{key:"componentDidMount",value:function(){var e=this.getStore();Object(xe.swallowError)(e.load()),e.startHeartbeat()}},{key:"componentWillUnmount",value:function(){this.getStore().stopHeartbeat()}},{key:"getStore",value:function(){return this.props.workflowTemplatesStore}},{key:"goto",value:function(e){var t=this.props.location,n=Object(_t.createLink)({location:t,pathname:e});this.props.history.push(n)}},{key:"render",value:function(){var e=this.getStore(),t=null;return t=Object(O.isStoreError)(e)?Pt.a.createElement(Rt.a,{error:e.error,className:"p0"}):Object(O.isStoreLoading)(e)?Pt.a.createElement(vn,{segmentCount:3}):Object(O.isStoreReady)(e)&&Object(O.isStoreEmpty)(e)?this.renderEmpty():Object(O.isStoreReady)(e)&&Object(O.isStoreNotEmpty)(e)?this.renderMain():null,Pt.a.createElement("div",{className:"mb4"},this.renderTitle(),t)}},{key:"renderEmpty",value:function(){return Pt.a.createElement(xt.a,{placeholder:!0},Pt.a.createElement(Tt.a,{icon:!0,className:"color-grey"},Pt.a.createElement(Nt.a,{name:"clipboard outline"}),"No published workflow templates",Pt.a.createElement(Tt.a.Subheader,null,"To create a workflow template, start by creating a draft and then publish the draft.")))}},{key:"renderTitle",value:function(){return Pt.a.createElement("div",{className:"mb3 flex"},Pt.a.createElement(Tt.a,{as:"h3",className:"color-grey mt1 mb0 flex-auto"},Pt.a.createElement(Nt.a,{name:"list alternate outline",className:"align-top"}),Pt.a.createElement(Tt.a.Content,{className:"left-align"},"Published Workflow Templates")))}},{key:"renderMain",value:function(){var e=this.getStore().list;return Pt.a.createElement("div",null,e.map((function(e){return Pt.a.createElement(xt.a,{className:"p3 mb2",clearing:!0,key:e.id},Pt.a.createElement(pn,{template:e}))})))}}]),n}(Pt.a.Component),hn=Object(At.inject)("workflowTemplatesStore")(Object(jt.o)(Object(At.observer)(yn))),gn=n(58),bn=n(172),En=n(2212),wn=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(e){var r;return Object(wt.a)(this,n),(r=t.call(this,e)).handleOnTabChange=function(e,t){r.getState().setMainTabIndex(t.activeIndex)},r.handleEditDraft=function(){var e=Object(E.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),t.stopPropagation(),n=r.getDraft(),!r.props.onEdit){e.next=5;break}return e.abrupt("return",r.props.onEdit(n));case 5:return e.abrupt("return",void 0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.showDeleteDialog=function(){r.shouldShowDeleteDialog=!0,r.deletingInProgress=!1},r.hideDeleteDialog=function(){r.deletingInProgress||(r.shouldShowDeleteDialog=!1)},r.handleDeleteDraft=Object(E.a)(b.a.mark((function e(){var t,n,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){Object(Mt.runInAction)((function(){r.shouldShowDeleteDialog=!1,r.deletingInProgress=!1}))},n=r.getDraft(),o=r.getDraftsStore(),e.prev=3,r.deletingInProgress=!0,e.next=7,o.deleteDraft(n);case 7:t(),Object(Wt.displaySuccess)("Draft deleted successfully"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),t(),Object(Wt.displayError)(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,11]])}))),Object(Mt.runInAction)((function(){r.shouldShowDeleteDialog=!1,r.deletingInProgress=!1})),r}return Object(St.a)(n,[{key:"getDraftsStore",value:function(){return this.props.draftsStore}},{key:"getState",value:function(){return zt(this.getDraft().id)}},{key:"selectedMainTabIndex",value:function(){return this.getState().mainTabIndex}},{key:"getDraft",value:function(){return this.props.draft}},{key:"getVersion",value:function(){var e=this.getDraft();return e.template||e.workflow}},{key:"getUserDisplayName",value:function(){return this.props.userDisplayName}},{key:"render",value:function(){var e=this.props.className,t=this.getDraft(),n=this.getVersion(),r=void 0!==t.template,o=n.id,a=n.title,i=t.createdAt,u=t.createdBy,c=this.getUserDisplayName();return Pt.a.createElement(Pt.a.Fragment,null,Pt.a.createElement(Ut.a,{attached:"top left"},r&&"Template "," Draft"),Pt.a.createElement("div",{className:$t()(e)},Pt.a.createElement("div",{className:"flex"},Pt.a.createElement(Tt.a,{as:"h3",color:"grey",className:"mt0 flex-auto ellipsis"},a,Pt.a.createElement(Tt.a.Subheader,{className:"fs-9 color-grey"},Pt.a.createElement("div",null,Pt.a.createElement("span",{className:"ellipsis breakout"},o)),Pt.a.createElement("div",null,"created ",Pt.a.createElement(Ft.a,{date:i})," ",Pt.a.createElement("span",{className:"ml1"},"by ",c.getDisplayName({uid:u}))))),Pt.a.createElement("div",null,this.renderActionButtons())),this.renderMainTabs(n)),this.renderDeleteDialog(n))}},{key:"renderDeleteDialog",value:function(e){var t=this.shouldShowDeleteDialog,n=e.id,r=this.deletingInProgress;return Pt.a.createElement(En.a,{open:t,size:"tiny",onClose:this.hideDeleteDialog,closeOnDimmerClick:!r},Pt.a.createElement(Tt.a,{content:"Delete Draft"}),Pt.a.createElement(En.a.Content,null,Pt.a.createElement("p",null,'Are you sure you want to delete draft "',n,'" ?')),Pt.a.createElement(En.a.Actions,null,Pt.a.createElement(bn.a,{disabled:r,onClick:this.hideDeleteDialog},"Cancel"),Pt.a.createElement(bn.a,{loading:r,disabled:r,color:"red",onClick:this.handleDeleteDraft},Pt.a.createElement(Nt.a,{name:"remove"})," Delete")))}},{key:"renderActionButtons",value:function(){return Pt.a.createElement(bn.a.Group,{basic:!0,size:"mini"},Pt.a.createElement(bn.a,{icon:"edit",onClick:this.handleEditDraft}),Pt.a.createElement(bn.a,{icon:"trash",onClick:this.showDeleteDialog}))}},{key:"renderMainTabs",value:function(e){return(S.a.isFunction(this.props.children)?this.props.children:S.a.noop)({uiState:this.getState(),version:e})}}]),n}(Pt.a.Component);Object(Mt.decorate)(wn,{showDeleteDialog:Mt.action,hideDeleteDialog:Mt.action,handleDeleteDraft:Mt.action,handleEditDraft:Mt.action,shouldShowDeleteDialog:Mt.observable,deletingInProgress:Mt.observable});var Sn=Object(At.inject)("userDisplayName")(Object(At.observer)(wn)),kn=n(49),On=n.n(kn),Cn=n(61),Pn=n.n(Cn),An=n(52),jn=n.n(An),In={templateId:{label:"Workflow Template Id",placeholder:"Type a unique id for this template",extra:{explain:"This is a required field and the number of characters must be between 3 and 50 and no spaces. Only\n      alpha-numeric characters and dashes are allowed. Once a draft is created you can not change the template id."},value:"tempValue",rules:"required|string|between:3,50|alpha_dash"},templateTitle:{label:"Workflow Template Title",placeholder:"Type a title for the workflow template",extra:{explain:"This is a required field and the number of characters must be between 3 and 255.\n      The title is shown in many places in the UI."},value:"tempValue",rules:"required|string|between:3,255"},draftFor:{label:"Draft For",placeholder:"Select one",extra:{explain:"Decide if you want to create a new workflow template or edit an existing one."},rules:"required|string"}};var xn=function(){return Object(ye.createForm)(In)},Tn=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(e){var r;return Object(wt.a)(this,n),(r=t.call(this,e)).handleSelectionChange=function(e){var t=r.form,n=t.$("templateId"),o=t.$("templateTitle"),a=function(){n.clear(),o.clear()};if("-1"===e)a();else{var i=r.getTemplatesStore().getTemplate(e);S.a.isNil(i)?(Object(Wt.displayError)('The template "'.concat(e,'" is no longer available.')),a()):function(e){n.set(e.id),o.set(e.latest.title)}(i)}},r.handleCancel=function(){(r.props.onCancel||S.a.noop)()},r.handleFormError=function(e,t){},r.handleFormSubmission=function(){var e=Object(E.a)(b.a.mark((function e(t){var n,o,a,i,u,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.values(),o="-1"===n.draftFor,a=n.templateId,i=o?n.templateTitle:void 0,u=r.getStore(),e.prev=5,e.next=8,u.createDraft({isNewTemplate:o,templateId:a,templateTitle:i});case 8:c=e.sent,t.clear(),r.goto("/workflow-templates/drafts/edit/".concat(encodeURIComponent(c.id))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),Object(Wt.displayError)(e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t){return e.apply(this,arguments)}}(),r.form=xn(),r}return Object(St.a)(n,[{key:"getStore",value:function(){return this.props.workflowTemplateDraftsStore}},{key:"getTemplatesStore",value:function(){return this.props.workflowTemplatesStore}},{key:"getDropdownOptions",value:function(){var e=this.getTemplatesStore(),t=this.getStore(),n=e.list,r=[];return S.a.forEach(n,(function(e){t.hasTemplate(e.id)||r.push({text:e.latest.title||"",value:e.id,content:Pt.a.createElement("div",null,Pt.a.createElement(Ut.a,{color:"teal",horizontal:!0,size:"mini"},"Existing")," ",e.latest.title," ",Pt.a.createElement("span",{className:"ml1 fs-7 color-grey"},e.id))})})),r.unshift({text:"New Workflow Template",value:"-1",content:Pt.a.createElement("div",null,Pt.a.createElement(Ut.a,{color:"blue",horizontal:!0,size:"mini"},"New")," ","Workflow Template")}),r}},{key:"goto",value:function(e){var t=this.props.location,n=Object(_t.createLink)({location:t,pathname:e});this.props.history.push(n)}},{key:"render",value:function(){var e=this.getStore();return Object(O.isStoreError)(e)?Pt.a.createElement(Rt.a,{error:e.error,className:"p0 mb3"}):Object(O.isStoreLoading)(e)?Pt.a.createElement(vn,null):Object(O.isStoreReady)(e)?this.renderMain():null}},{key:"renderMain",value:function(){var e=this,t=this.form,n=this.getDropdownOptions(),r=t.$("draftFor"),o=t.$("templateId"),a=t.$("templateTitle"),i="-1"===r.value;return Pt.a.createElement(xt.a,{clearing:!0,className:"p3"},Pt.a.createElement(On.a,{form:t,onCancel:this.handleCancel,onSuccess:this.handleFormSubmission,onError:this.handleFormError},(function(t){var u=t.processing,c=(t._onSubmit,t.onCancel);return Pt.a.createElement(Pt.a.Fragment,null,Pt.a.createElement(Pn.a,{field:r,options:n,fluid:!0,selection:!0,disabled:u,onChange:e.handleSelectionChange}),i&&Pt.a.createElement(Pt.a.Fragment,null,Pt.a.createElement(jn.a,{field:o,disabled:u}),Pt.a.createElement(jn.a,{field:a,disabled:u})),Pt.a.createElement("div",{className:"mt3"},Pt.a.createElement(bn.a,{floated:"right",color:"blue",icon:!0,disabled:u,className:"ml2",type:"submit"},"Create Draft"),Pt.a.createElement(bn.a,{floated:"right",disabled:u,onClick:c},"Cancel")))})))}}]),n}(Pt.a.Component);Object(Mt.decorate)(Tn,{handleCancel:Mt.action,handleFormSubmission:Mt.action,handleFormError:Mt.action});var Nn=Object(At.inject)("workflowTemplateDraftsStore","workflowTemplatesStore")(Object(jt.o)(Object(At.observer)(Tn))),_n=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(e){var r;return Object(wt.a)(this,n),(r=t.call(this,e)).handleEditDraft=function(){var e=Object(E.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(_t.gotoFn)(Object(gn.a)(r))("/workflow-templates/drafts/edit/".concat(encodeURIComponent(t.id)));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Object(Mt.runInAction)((function(){r.showCreateDraftWizard=!1})),r}return Object(St.a)(n,[{key:"componentDidMount",value:function(){var e=this.getStore();Object(xe.swallowError)(e.load()),e.startHeartbeat()}},{key:"componentWillUnmount",value:function(){this.getStore().stopHeartbeat()}},{key:"getStore",value:function(){return this.props.workflowTemplateDraftsStore}},{key:"handleCreateDraftClick",value:function(){this.showCreateDraftWizard=!0}},{key:"handleCreateDraftCancel",value:function(){this.showCreateDraftWizard=!1}},{key:"render",value:function(){var e=this.getStore(),t=null;return t=Object(O.isStoreError)(e)?Pt.a.createElement(Rt.a,{error:e.error,className:"p0"}):Object(O.isStoreLoading)(e)?Pt.a.createElement(vn,null):Object(O.isStoreReady)(e)&&Object(O.isStoreEmpty)(e)?this.renderEmpty():Object(O.isStoreReady)(e)&&Object(O.isStoreNotEmpty)(e)?this.renderMain():null,Pt.a.createElement("div",{className:"mb4"},this.renderTitle(),this.renderWizard(),t)}},{key:"renderEmpty",value:function(){return this.showCreateDraftWizard?null:Pt.a.createElement(xt.a,{placeholder:!0},Pt.a.createElement(Tt.a,{icon:!0,className:"color-grey"},Pt.a.createElement(Nt.a,{name:"edit outline"}),"No workflow template drafts"))}},{key:"renderTitle",value:function(){var e=this,t=this.showCreateDraftWizard;return Pt.a.createElement("div",{className:"mb3 flex"},Pt.a.createElement(Tt.a,{as:"h3",className:"color-grey mt1 mb0 flex-auto"},Pt.a.createElement(Nt.a,{name:"edit outline",className:"align-top"}),Pt.a.createElement(Tt.a.Content,{className:"left-align"},"Workflow Template Drafts")),Pt.a.createElement("div",null,Pt.a.createElement(bn.a,{basic:!0,color:"blue",disabled:t,onClick:function(){return e.handleCreateDraftClick()}},"Create Draft")))}},{key:"renderWizard",value:function(){var e=this;return this.showCreateDraftWizard?Pt.a.createElement(Nn,{onCancel:function(){return e.handleCreateDraftCancel()}}):null}},{key:"renderMain",value:function(){var e=this,t=this.getStore(),n=t.list;return Pt.a.createElement("div",null,S.a.map(n,(function(n){return Pt.a.createElement(xt.a,{className:"mb2",clearing:!0,key:n.id},Pt.a.createElement(Sn,{draft:n,draftsStore:t,onEdit:e.handleEditDraft,className:"pt0 pl2 pr2 pb2"},(function(e){var t=e.uiState,n=e.version;return Pt.a.createElement(fn,{template:n,uiState:t})})))})))}}]),n}(Pt.a.Component);Object(Mt.decorate)(_n,{handleCreateDraftClick:Mt.action,handleCreateDraftCancel:Mt.action,handleEditDraft:Mt.action,showCreateDraftWizard:Mt.observable});var Dn=Object(At.inject)("workflowTemplateDraftsStore")(Object(jt.o)(Object(At.observer)(_n))),Rn=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(){return Object(wt.a)(this,n),t.apply(this,arguments)}return Object(St.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){return Pt.a.createElement(It.a,{className:"mt3"},Pt.a.createElement(hn,null),Pt.a.createElement(Dn,null))}}]),n}(Pt.a.Component),Mn=Object(At.inject)()(Object(jt.o)(Object(At.observer)(Rn))),Bn=n(2195),Fn=n(68),Un=n.n(Fn),Ln=n(74),Wn=n.n(Ln),Hn=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(e){var r;return Object(wt.a)(this,n),(r=t.call(this,e)).handleCancel=function(){r.resetFlags(),(r.props.onCancel||S.a.noop)()},r.handlePrevious=function(e){r.resetFlags(),e.preventDefault(),e.stopPropagation(),r.getEditor().previousPage()},r.handleFormSubmission=function(){var e=Object(E.a)(b.a.mark((function e(t){var n,o,a,i,u,c,s,l,f,d,p;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.getEditor(),o=t.values(),a=o.templateTitle,i=o.templateDesc,u=o.instanceTtl,c=o.runSpecSize,s=o.runSpecTarget,l=n.draft,f=l.template,d=[],p=function(e,t){var n=e.replace(/^propsOverride_/,"");S.a.startsWith(e,"propsOverride_")&&!S.a.isEmpty(n)&&!0===t&&d.push(n)},S.a.forEach(t.values(),(function(e,t){return p(t,e)})),f.setTitle(a),f.setDescription(i),f.setInstanceTtl(u),f.setRunSpec({size:c,target:s}),f.setPropsOverrideOption({allowed:d}),e.prev=12,e.next=15,n.update(l);case 15:if(!r.clickedOnNext){e.next=18;break}return r.getEditor().nextPage(),e.abrupt("return");case 18:Object(Wt.displaySuccess)("The workflow template draft is saved successfully"),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(12),Object(Mt.runInAction)((function(){r.resetFlags()})),Object(Wt.displayError)(e.t0);case 25:case"end":return e.stop()}}),e,null,[[12,21]])})));return function(t){return e.apply(this,arguments)}}(),r.handleFormErrors=function(){window.scrollTo(0,0)},Object(Mt.runInAction)((function(){r.clickedOnNext=!1})),r}return Object(St.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"getEditor",value:function(){return this.props.editor}},{key:"getWorkflowTemplate",value:function(){return this.getEditor().draft.template}},{key:"getMetaForm",value:function(){return this.getEditor().metaForm}},{key:"resetFlags",value:function(){this.clickedOnNext=!1}},{key:"handleOnSubmitNext",value:function(e,t){e.preventDefault(),e.stopPropagation(),this.resetFlags(),this.clickedOnNext=!0,t(e)}},{key:"render",value:function(){var e=this,t=this.getEditor().hasPreviousPage,n=this.getMetaForm(),r=n.$("templateTitle"),o=n.$("templateDesc"),a=n.$("instanceTtl"),i=n.$("runSpecSize"),u=n.$("runSpecTarget"),c=this.getWorkflowTemplate().propertyOverrideSummaryRows||[],s=S.a.map(c,(function(e){return n.$("propsOverride_".concat(e.name))}));return Pt.a.createElement(On.a,{form:n,onCancel:this.handleCancel,onSuccess:this.handleFormSubmission,onError:this.handleFormErrors},(function(n){var c=n.processing,l=n.onSubmit,f=n.onCancel;return Pt.a.createElement(Pt.a.Fragment,null,Pt.a.createElement(jn.a,{field:r,disabled:c}),Pt.a.createElement(Wn.a,{field:o,rows:6,disabled:c}),Pt.a.createElement(nn.a,{horizontal:!0,className:"mb3"},Pt.a.createElement(Tt.a,{as:"h4",className:"color-grey"},Pt.a.createElement(Nt.a,{name:"list alternate outline",className:"color-grey"}),"Properties")),Pt.a.createElement(jn.a,{field:a,disabled:c}),Pt.a.createElement(Pn.a,{field:i,disabled:c,fluid:!1,selection:!0}),Pt.a.createElement(Pn.a,{field:u,disabled:c,fluid:!1,selection:!0}),Pt.a.createElement(nn.a,{horizontal:!0,className:"mb3"},Pt.a.createElement(Tt.a,{as:"h4",className:"color-grey"},Pt.a.createElement(Nt.a,{name:"list alternate outline",className:"color-grey"}),"Properties Override")),Pt.a.createElement(xt.a,{padded:!0},Pt.a.createElement(Xt,{rows:s,editable:!0,processing:c})),Pt.a.createElement("div",{className:"mt4"},Pt.a.createElement(bn.a,{floated:"right",color:"teal",icon:"right arrow",labelPosition:"right",disabled:c,className:"ml2",content:"Next",onClick:function(t){return e.handleOnSubmitNext(t,l)}}),t&&Pt.a.createElement(bn.a,{floated:"right",icon:"left arrow",labelPosition:"left",disabled:c,className:"ml3",content:"previous",onClick:e.handlePrevious}),Pt.a.createElement(bn.a,{floated:"right",color:"blue",icon:"save",labelPosition:"left",disabled:c,className:"ml2",content:"Save"}),Pt.a.createElement(bn.a,{floated:"left",disabled:c,onClick:f},"Cancel")))}))}}]),n}(Pt.a.Component);Object(Mt.decorate)(Hn,{handleCancel:Mt.action,handleOnSubmitNext:Mt.action,handleFormSubmission:Mt.action,handleFormErrors:Mt.action,handlePrevious:Mt.action,resetFlags:Mt.action,clickedOnNext:Mt.observable});var zn=Object(At.inject)()(Object(At.observer)(Hn)),Qn=n(2145),Vn=n(2202),Gn=n(2197),Kn=n(359),qn=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(e){var r;return Object(wt.a)(this,n),(r=t.call(this,e)).handleChange=function(e,t){var n=t.value;if(S.a.isEmpty(n))r.selectedStep=void 0;else{var o=r.getStore().getTemplate(n);r.selectedStep=void 0!==o?o.latest:void 0}},r.handleClose=function(e,t){var n=r.props.onSelected||S.a.noop,o=r.selectedStep;r.selectedStep=void 0,void 0!==e&&n(o)},Object(Mt.runInAction)((function(){r.selectedStep=void 0})),r}return Object(St.a)(n,[{key:"getStore",value:function(){return this.props.stepTemplatesStore}},{key:"getSelectedStep",value:function(){return this.selectedStep}},{key:"getStepDropDownOptions",value:function(){var e=this.getStore().list;return S.a.map(e,(function(e){return{text:e.latest.title,value:e.id}}))}},{key:"render",value:function(){var e=this.props.disabled||!1,t=this.props.className,n=this.getSelectedStep(),r=this.getStepDropDownOptions(),o=S.a.isEmpty(n),a=o?"Add Step":n.title,i=o?"":n.id;return Pt.a.createElement(Lt.a,{button:!0,className:$t()("icon",t),fluid:!0,labeled:!0,icon:"plus",options:r,search:!0,color:"blue",text:a,value:i,onChange:this.handleChange,onClose:this.handleClose,disabled:e})}}]),n}(Pt.a.Component);Object(Mt.decorate)(qn,{selectedStep:Mt.observable,handleChange:Mt.action,handleClose:Mt.action});var Yn=Object(At.inject)("stepTemplatesStore")(Object(At.observer)(qn));function $n(){return($n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Zn=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(e){var r;return Object(wt.a)(this,n),(r=t.call(this,e)).handleAddStep=function(e){e&&r.getEditor().addStep(e)},r.handleCancel=function(e){e.preventDefault(),e.stopPropagation(),r.clickedOnNext=!1,r.processing=!1,(r.props.onCancel||S.a.noop)()},r.handleDelete=function(e){var t=r.getEditor(),n=r.getVersion(),o=e.id;n.removeStep(e),setTimeout((function(){t.removeStepEditor(o)}),150)},r.handleNext=function(){var e=Object(E.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.clickedOnNext=!0,e.abrupt("return",r.handleSave(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handlePrevious=function(e){e.preventDefault(),e.stopPropagation(),r.clickedOnNext=!1,r.getEditor().previousPage()},r.handleSave=function(){var e=Object(E.a)(b.a.mark((function e(t){var n,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.stopPropagation(),n=r.getEditor(),o=n.draft,r.processing=!0,e.prev=5,e.next=8,n.update(o);case 8:if(Object(Mt.runInAction)((function(){r.processing=!1})),!r.clickedOnNext){e.next=12;break}return r.getEditor().nextPage(),e.abrupt("return");case 12:Object(Wt.displaySuccess)("Saved successfully"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(5),Object(Mt.runInAction)((function(){r.processing=!1,r.clickedOnNext=!1})),Object(Wt.displayError)(e.t0);case 19:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t){return e.apply(this,arguments)}}(),r.handleStepSave=Object(E.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.getEditor(),n=t.draft,r.processing=!0,e.prev=3,e.next=6,t.update(n);case 6:Object(Mt.runInAction)((function(){r.processing=!1})),Object(Wt.displaySuccess)("Saved successfully"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),Object(Mt.runInAction)((function(){r.processing=!1})),Object(Wt.displayError)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,10]])}))),r.onDragEnd=function(e){var t=r.getVersion();if(t.canRearrangeSteps){var n=e.draggableId,o=e.destination,a=e.source,i="selected-steps"===a.droppableId,u=o&&"selected-steps"===o.droppableId,c=!!t.getStep(n);o&&(o.droppableId===a.droppableId&&o.index===a.index||i&&u&&c&&t.reinsertStep(a.index,o.index))}},Object(Mt.runInAction)((function(){r.processing=!1,r.clickedOnNext=!1})),r}return Object(St.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"getEditor",value:function(){return this.props.editor}},{key:"getStepEditorComponent",value:function(){return this.props.stepEditor}},{key:"getVersion",value:function(){return this.getEditor().version}},{key:"getSelectedSteps",value:function(){return this.getVersion().selectedSteps}},{key:"render",value:function(){var e=this,t=this.processing,n=this.getEditor(),r=n.stepEditorsEditing,o=n.hasPreviousPage,a=this.getVersion().canRearrangeSteps;return Pt.a.createElement(Pt.a.Fragment,null,Pt.a.createElement(Qn.a.Dimmable,{dimmed:t},Pt.a.createElement(Qn.a,{active:t,inverted:!0},Pt.a.createElement(Vn.a,{inverted:!0},"Processing")),Pt.a.createElement(Tt.a,{as:"h3",color:"grey",className:"mt0"},"Steps"),!a&&Pt.a.createElement(Gn.a,{warning:!0},Pt.a.createElement("b",{className:"mr1"},"Warning")," The workflow template used by this workflow does ",Pt.a.createElement("b",null,"not")," allow for steps to be deleted, added or rearranged"),a&&Pt.a.createElement(Kn.a,{onDragEnd:this.onDragEnd},Pt.a.createElement(Kn.c,{droppableId:"selected-steps"},(function(t,n){return Pt.a.createElement(Qt.a,null,(function(){return Pt.a.createElement("div",$n({},t.droppableProps,{ref:t.innerRef,className:$t()("mb3",n.isDraggingOver?"bg-lightgreen":"")}),e.renderSelectedSteps(),t.placeholder)}))}))),!a&&Pt.a.createElement("div",{className:"mb3"},this.renderSelectedSteps()),Pt.a.createElement(Yn,{className:"mb3",onSelected:this.handleAddStep,disabled:!a})),!r&&Pt.a.createElement("div",null,Pt.a.createElement(bn.a,{floated:"right",color:"teal",icon:"right arrow",labelPosition:"right",disabled:t,className:"ml2",content:"Next",onClick:this.handleNext}),o&&Pt.a.createElement(bn.a,{floated:"right",icon:"left arrow",labelPosition:"left",disabled:t,className:"ml3",content:"previous",onClick:this.handlePrevious}),Pt.a.createElement(bn.a,{floated:"right",color:"blue",icon:"save",labelPosition:"left",disabled:t,className:"ml2",content:"Save",onClick:this.handleSave}),Pt.a.createElement(bn.a,{floated:"left",disabled:t,onClick:this.handleCancel},"Cancel")))}},{key:"renderSelectedSteps",value:function(){var e=this,t=this.getSelectedSteps();if(0===t.length)return null;var n=this.getVersion().canRearrangeSteps,r=this.getEditor(),o=function(e){return r.getStepEditor(e)},a=this.getStepEditorComponent();return n?S.a.map(t,(function(t,r){return Pt.a.createElement(Kn.b,{key:t.id,draggableId:t.id,index:r},(function(r,i){return Pt.a.createElement("div",$n({},r.dragHandleProps,{ref:r.innerRef},r.draggableProps,{className:"mb3"}),Pt.a.createElement(a,{stepEditor:o(t),onDelete:e.handleDelete,onSave:e.handleStepSave,canMove:n,canDelete:n}))}))})):S.a.map(t,(function(t){return Pt.a.createElement("div",{key:t.id,className:"mb3"},Pt.a.createElement(Qt.a,null,(function(){return Pt.a.createElement(a,{stepEditor:o(t),onDelete:e.handleDelete,onSave:e.handleStepSave,canMove:n,canDelete:n})})))}))}}]),n}(Pt.a.Component);Object(Mt.decorate)(Zn,{onDragEnd:Mt.action,handleAddStep:Mt.action,handleCancel:Mt.action,handleDelete:Mt.action,handleSave:Mt.action,handleStepSave:Mt.action,handleNext:Mt.action,handlePrevious:Mt.action,clickedOnNext:Mt.observable,processing:Mt.observable});var Jn=Object(At.inject)()(Object(At.observer)(Zn)),Xn=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(){var e;Object(wt.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleExpandContent=function(t){t.stopPropagation(),t.preventDefault(),e.getStepEditor().setContentExpanded(!e.contentExpanded)},e.handleDelete=function(t){t.stopPropagation(),(e.props.onDelete||S.a.noop)(e.getStep())},e}return Object(St.a)(n,[{key:"getStepEditor",value:function(){return this.props.stepEditor}},{key:"getStep",value:function(){return this.getStepEditor().step}},{key:"render",value:function(){var e=this.props.className||"p0 pl1",t=this.getStep();return Pt.a.createElement(xt.a,{size:"small",className:e,clearing:!0},this.renderContent(t))}},{key:"renderContent",value:function(e){var t=this.contentExpanded,n=this.canDelete,r=this.canMove;return Pt.a.createElement(tn.a,{className:"overflow-hidden pr1"},Pt.a.createElement(tn.a.Title,{active:t,index:0,onClick:this.handleExpandContent},Pt.a.createElement("div",{className:"flex"},r&&Pt.a.createElement("div",{className:"ml1 mr1 mt1 cursor-grab"},Pt.a.createElement(Nt.a,{name:"align justify",color:"grey"})),!r&&Pt.a.createElement("div",{className:"ml1 mr1 mt1"}),Pt.a.createElement(Nt.a,{name:"dropdown",className:"mt75"}),Pt.a.createElement("div",{className:"ellipsis flex-auto mt1"},Pt.a.createElement("div",{className:"ellipsis"},e.derivedTitle||e.title),Pt.a.createElement("div",{className:"ellipsis pr1 breakout fs-9 color-grey"},e.templateId," v",e.templateVer)),n&&Pt.a.createElement("div",{className:"pl1 pr1 pt1",onClick:this.handleDelete},Pt.a.createElement(Nt.a,{name:"trash alternate outline",className:"cursor-pointer"})))),Pt.a.createElement(tn.a.Content,{active:t,className:"p2 pt3 mb1 cursor-default"},this.props.children))}},{key:"contentExpanded",get:function(){return this.getStepEditor().contentExpanded}},{key:"canDelete",get:function(){return void 0===this.props.canDelete||this.props.canDelete}},{key:"canMove",get:function(){return void 0===this.props.canMove||this.props.canMove}}]),n}(Pt.a.Component);Object(Mt.decorate)(Xn,{contentExpanded:Mt.computed,canDelete:Mt.computed,canMove:Mt.computed,handleDelete:Mt.action,handleExpandContent:Mt.action});var er=Object(At.inject)()(Object(At.observer)(Xn)),tr=n(439),nr=n.n(tr),rr=n(440),or=n.n(rr),ar=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(){var e;Object(wt.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleEditOn=function(t){t.preventDefault(),t.stopPropagation(),e.getStepEditor().setConfigEdit(!0)},e.handleEditOff=function(){e.getStepEditor().setConfigEdit(!1)},e.handleSave=function(){var t=Object(E.a)(b.a.mark((function t(n){var r,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.onSave||S.a.noop,o=e.getStepEditor(),t.next=4,r(n);case 4:o.setConfigEdit(!1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(St.a)(n,[{key:"getStepEditor",value:function(){return this.props.stepEditor}},{key:"getStep",value:function(){return this.getStepEditor().step}},{key:"render",value:function(){var e=this.editing,t=(this.getStep().configSummaryRows||[]).length>0,n=!e&&t;return Pt.a.createElement("div",{className:this.props.className},!e&&Pt.a.createElement("div",{className:"flex animated"},Pt.a.createElement("div",{className:"flex-auto"},Pt.a.createElement(Nt.a,{name:"cog",className:"mr1 color-grey"}),Pt.a.createElement("b",null,"Configuration")),n&&Pt.a.createElement("div",{className:"pl1 pr0",onClick:this.handleEditOn},Pt.a.createElement(Nt.a,{name:"edit",color:"grey",className:"cursor-pointer"}))),Pt.a.createElement(nn.a,{className:"mt1 mb2"}),e&&this.renderConfigEditingContent(),!e&&this.renderConfigContent())}},{key:"renderConfigContent",value:function(){var e=this.getStep().configSummaryRows||[],t=e.length>0;return Pt.a.createElement(Pt.a.Fragment,null,t&&Pt.a.createElement(xt.a,{padded:!0,className:"animated"},Pt.a.createElement(on.a,{rows:e})),!t&&Pt.a.createElement("div",null,"No configuration entries are available"))}},{key:"renderConfigEditingContent",value:function(){var e=this.getStepEditor().configurationEditor;return e.review?Pt.a.createElement(Pt.a.Fragment,null,Pt.a.createElement(Tt.a,{textAlign:"center",as:"h2",color:"grey",className:"mt1 mb3"},"Review Configuration Changes"),Pt.a.createElement(or.a,{model:e,onCancel:this.handleEditOff,onSave:this.handleSave,dimmer:!1})):Pt.a.createElement(Pt.a.Fragment,null,Pt.a.createElement(Tt.a,{textAlign:"center",as:"h2",color:"grey",className:"mt1 mb3"},"Change Configuration"),Pt.a.createElement(nr.a,{model:e,onCancel:this.handleEditOff}))}},{key:"editing",get:function(){return this.getStepEditor().configEdit}}]),n}(Pt.a.Component);Object(Mt.decorate)(ar,{editing:Mt.computed,handleEditOn:Mt.action,handleEditOff:Mt.action,handleSave:Mt.action});var ir=Object(At.inject)()(Object(At.observer)(ar)),ur=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(){var e;Object(wt.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleEditOn=function(t){t.preventDefault(),t.stopPropagation(),e.getStepEditor().setDescEdit(!0)},e.handleEditOff=function(){e.getStepEditor().setDescEdit(!1)},e.handleSave=function(){var t=Object(E.a)(b.a.mark((function t(n){var r,o,a,i,u;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.onSave||S.a.noop,o=e.getStepEditor(),a=n.values(),i=a.stepTitle,u=a.stepDesc,o.applyDescAndTitle(u,i),t.next=6,r();case 6:o.setDescEdit(!1);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(St.a)(n,[{key:"getStepEditor",value:function(){return this.props.stepEditor}},{key:"getStep",value:function(){return this.getStepEditor().step}},{key:"getDescForm",value:function(){return this.getStepEditor().descForm}},{key:"render",value:function(){var e=this.editing,t=!e;return Pt.a.createElement("div",{className:this.props.className},!e&&Pt.a.createElement("div",{className:"flex animated"},Pt.a.createElement("div",{className:"flex-auto"},Pt.a.createElement(Nt.a,{name:"file alternate outline",className:"mr1 color-grey"}),Pt.a.createElement("b",null,"Description")),t&&Pt.a.createElement("div",{className:"pl1 pr0",onClick:this.handleEditOn},Pt.a.createElement(Nt.a,{name:"edit",color:"grey",className:"cursor-pointer"}))),Pt.a.createElement(nn.a,{className:"mt1 mb2"}),e&&this.renderEditingContent(),!e&&this.renderReadOnlyContent())}},{key:"renderReadOnlyContent",value:function(){var e=this.getStep();return Pt.a.createElement("div",{className:"animated",dangerouslySetInnerHTML:{__html:e.descHtml}})}},{key:"renderEditingContent",value:function(){var e=this.getDescForm(),t=e.$("stepTitle"),n=e.$("stepDesc");return Pt.a.createElement(Pt.a.Fragment,null,Pt.a.createElement(Tt.a,{textAlign:"center",as:"h2",color:"grey",className:"mt1 mb3"},"Change Title & Description"),Pt.a.createElement(On.a,{form:e,dimmer:!1,onCancel:this.handleEditOff,onSuccess:this.handleSave},(function(e){var r=e.processing,o=(e._onSubmit,e.onCancel);return Pt.a.createElement(Pt.a.Fragment,null,Pt.a.createElement(jn.a,{field:t,disabled:r}),Pt.a.createElement(Wn.a,{field:n,rows:6,disabled:r}),Pt.a.createElement("div",{className:"mt3 clearfix"},Pt.a.createElement(bn.a,{floated:"right",color:"blue",icon:"save",labelPosition:"left",disabled:r,className:"ml2",type:"submit",content:"Save"}),Pt.a.createElement(bn.a,{floated:"left",disabled:r,onClick:o},"Cancel")))})))}},{key:"editing",get:function(){return this.getStepEditor().descEdit}}]),n}(Pt.a.Component);Object(Mt.decorate)(ur,{editing:Mt.computed,handleEditOn:Mt.action,handleEditOff:Mt.action,handleSave:Mt.action});var cr=Object(At.inject)()(Object(At.observer)(ur)),sr=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(){var e;Object(wt.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleEditOn=function(t){t.preventDefault(),t.stopPropagation(),e.getStepEditor().setPropsEdit(!0)},e.handleEditOff=function(){e.getStepEditor().setPropsEdit(!1)},e.handleSave=function(){var t=Object(E.a)(b.a.mark((function t(n){var r,o,a,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.onSave||S.a.noop,o=e.getStepEditor(),a=n.values(),i=a.skippable,o.applySkippable(i),t.next=6,r();case 6:o.setPropsEdit(!1);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(St.a)(n,[{key:"getStepEditor",value:function(){return this.props.stepEditor}},{key:"getStep",value:function(){return this.getStepEditor().step}},{key:"getPropsForm",value:function(){return this.getStepEditor().propsForm}},{key:"render",value:function(){var e=this.editing,t=!e;return Pt.a.createElement("div",{className:this.props.className},!e&&Pt.a.createElement("div",{className:"flex animated"},Pt.a.createElement("div",{className:"flex-auto"},Pt.a.createElement(Nt.a,{name:"file alternate outline",className:"mr1 color-grey"}),Pt.a.createElement("b",null,"Properties")),t&&Pt.a.createElement("div",{className:"pl1 pr0",onClick:this.handleEditOn},Pt.a.createElement(Nt.a,{name:"edit",color:"grey",className:"cursor-pointer"}))),Pt.a.createElement(nn.a,{className:"mt1 mb2"}),e&&this.renderEditingContent(),!e&&this.renderReadOnlyContent())}},{key:"renderReadOnlyContent",value:function(){var e=this.getStep().propertySummaryRows||[];return Pt.a.createElement(xt.a,{padded:!0,className:"animated"},Pt.a.createElement(qt,{rows:e}))}},{key:"renderEditingContent",value:function(){var e=this.getPropsForm(),t=e.$("skippable");return Pt.a.createElement(Pt.a.Fragment,null,Pt.a.createElement(Tt.a,{textAlign:"center",as:"h2",color:"grey",className:"mt1 mb3"},"Change Properties"),Pt.a.createElement(On.a,{form:e,dimmer:!1,onCancel:this.handleEditOff,onSuccess:this.handleSave},(function(e){var n=e.processing,r=(e._onSubmit,e.onCancel);return Pt.a.createElement("div",{className:"mt3"},Pt.a.createElement(Jt.a,{field:t,disabled:n}),Pt.a.createElement("div",{className:"mt3 clearfix"},Pt.a.createElement(bn.a,{floated:"right",color:"blue",icon:"save",labelPosition:"left",disabled:n,className:"ml2",type:"submit",content:"Save"}),Pt.a.createElement(bn.a,{floated:"left",disabled:n,onClick:r},"Cancel")))})))}},{key:"editing",get:function(){return this.getStepEditor().propsEdit}}]),n}(Pt.a.Component);Object(Mt.decorate)(sr,{editing:Mt.computed,handleEditOn:Mt.action,handleEditOff:Mt.action,handleSave:Mt.action});var lr=Object(At.inject)()(Object(At.observer)(sr)),fr=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(){var e;Object(wt.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleEditOn=function(t){t.preventDefault(),t.stopPropagation(),e.getStepEditor().setConfigOverrideEdit(!0)},e.handleEditOff=function(){e.getStepEditor().setConfigOverrideEdit(!1)},e.handleSave=function(){var t=Object(E.a)(b.a.mark((function t(n){var r,o,a,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.onSave||S.a.noop,o=e.getStepEditor(),a=n.values(),i=S.a.filter(S.a.keys(a),(function(e){return!0===a[e]})),o.applyConfigOverrides(i),t.next=7,r();case 7:o.setConfigOverrideEdit(!1);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(St.a)(n,[{key:"getStepEditor",value:function(){return this.props.stepEditor}},{key:"getStep",value:function(){return this.getStepEditor().step}},{key:"getConfigOverrideForm",value:function(){return this.getStepEditor().configOverrideForm}},{key:"render",value:function(){var e=this.editing,t=(this.getStep().configOverrideSummaryRows||[]).length>0,n=!e&&t;return Pt.a.createElement("div",{className:this.props.className},!e&&Pt.a.createElement("div",{className:"flex"},Pt.a.createElement("div",{className:"flex-auto"},Pt.a.createElement(Nt.a,{name:"cog",className:"mr1 color-grey"}),Pt.a.createElement("b",null,"Configuration Override")),n&&Pt.a.createElement("div",{className:"pl1 pr0",onClick:this.handleEditOn},Pt.a.createElement(Nt.a,{name:"edit",color:"grey",className:"cursor-pointer"}))),Pt.a.createElement(nn.a,{className:"mt1 mb2"}),e&&this.renderEditingContent(),!e&&this.renderReadOnlyContent())}},{key:"renderReadOnlyContent",value:function(){var e=this.getStep().configOverrideSummaryRows||[],t=e.length>0;return Pt.a.createElement(Pt.a.Fragment,null,t&&Pt.a.createElement(xt.a,{padded:!0},Pt.a.createElement(an,{rows:e})),!t&&Pt.a.createElement("div",null,"No configuration entries are available"))}},{key:"renderEditingContent",value:function(){var e=this.getConfigOverrideForm(),t=this.getStep().configOverrideSummaryRows||[],n=S.a.map(t,(function(t){return e.$(t.name)}));return Pt.a.createElement(Pt.a.Fragment,null,Pt.a.createElement(Tt.a,{textAlign:"center",as:"h2",color:"grey",className:"mt1 mb3"},"Change Configuration Override"),Pt.a.createElement(On.a,{form:e,dimmer:!1,onCancel:this.handleEditOff,onSuccess:this.handleSave},(function(e){var t=e.processing,r=(e._onSubmit,e.onCancel);return Pt.a.createElement("div",{className:"mt3"},Pt.a.createElement(xt.a,{padded:!0},Pt.a.createElement(an,{rows:n,editable:!0,processing:t})),Pt.a.createElement("div",{className:"mt3 clearfix"},Pt.a.createElement(bn.a,{floated:"right",color:"blue",icon:"save",labelPosition:"left",disabled:t,className:"ml2",type:"submit",content:"Save"}),Pt.a.createElement(bn.a,{floated:"left",disabled:t,onClick:r},"Cancel")))})))}},{key:"editing",get:function(){return this.getStepEditor().configOverrideEdit}}]),n}(Pt.a.Component);Object(Mt.decorate)(fr,{editing:Mt.computed,handleEditOn:Mt.action,handleEditOff:Mt.action,handleSave:Mt.action});var dr=Object(At.inject)()(Object(At.observer)(fr)),pr=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(){var e;Object(wt.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleEditOn=function(t){t.preventDefault(),t.stopPropagation(),e.getStepEditor().setPropsOverrideEdit(!0)},e.handleEditOff=function(){e.getStepEditor().setPropsOverrideEdit(!1)},e.handleSave=function(){var t=Object(E.a)(b.a.mark((function t(n){var r,o,a,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.onSave||S.a.noop,o=e.getStepEditor(),a=n.values(),i=S.a.filter(S.a.keys(a),(function(e){return!0===a[e]})),o.applyPropsOverrides(i),t.next=7,r();case 7:o.setPropsOverrideEdit(!1);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(St.a)(n,[{key:"getStepEditor",value:function(){return this.props.stepEditor}},{key:"getStep",value:function(){return this.getStepEditor().step}},{key:"getPropsOverrideForm",value:function(){return this.getStepEditor().propsOverrideForm}},{key:"render",value:function(){var e=this.editing,t=!e;return Pt.a.createElement("div",{className:this.props.className},!e&&Pt.a.createElement("div",{className:"flex"},Pt.a.createElement("div",{className:"flex-auto"},Pt.a.createElement(Nt.a,{name:"file alternate outline",className:"mr1 color-grey"}),Pt.a.createElement("b",null,"Properties Override")),t&&Pt.a.createElement("div",{className:"pl1 pr0",onClick:this.handleEditOn},Pt.a.createElement(Nt.a,{name:"edit",color:"grey",className:"cursor-pointer"}))),Pt.a.createElement(nn.a,{className:"mt1 mb2"}),e&&this.renderEditingContent(),!e&&this.renderReadOnlyContent())}},{key:"renderReadOnlyContent",value:function(){var e=this.getStep().propertyOverrideSummaryRows||[],t=e.length>0;return Pt.a.createElement(Pt.a.Fragment,null,t&&Pt.a.createElement(xt.a,{padded:!0},Pt.a.createElement(Xt,{rows:e})),!t&&Pt.a.createElement("div",null,"No properties are available to override"))}},{key:"renderEditingContent",value:function(){var e=this.getPropsOverrideForm(),t=this.getStep().propertyOverrideSummaryRows||[],n=S.a.map(t,(function(t){return e.$(t.name)}));return Pt.a.createElement(Pt.a.Fragment,null,Pt.a.createElement(Tt.a,{textAlign:"center",as:"h2",color:"grey",className:"mt1 mb3"},"Change Properties Override"),Pt.a.createElement(On.a,{form:e,dimmer:!1,onCancel:this.handleEditOff,onSuccess:this.handleSave},(function(e){var t=e.processing,r=(e._onSubmit,e.onCancel);return Pt.a.createElement("div",{className:"mt3"},Pt.a.createElement(xt.a,{padded:!0},Pt.a.createElement(Xt,{rows:n,editable:!0,processing:t})),Pt.a.createElement("div",{className:"mt3 clearfix"},Pt.a.createElement(bn.a,{floated:"right",color:"blue",icon:"save",labelPosition:"left",disabled:t,className:"ml2",type:"submit",content:"Save"}),Pt.a.createElement(bn.a,{floated:"left",disabled:t,onClick:r},"Cancel")))})))}},{key:"editing",get:function(){return this.getStepEditor().propsOverrideEdit}}]),n}(Pt.a.Component);Object(Mt.decorate)(pr,{editing:Mt.computed,handleEditOn:Mt.action,handleEditOff:Mt.action,handleSave:Mt.action});var mr=Object(At.inject)()(Object(At.observer)(pr)),vr=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(){var e;Object(wt.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleDelete=function(t){(e.props.onDelete||S.a.noop)(t)},e.handleSave=Object(E.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.onSave||S.a.noop,t.abrupt("return",n());case 2:case"end":return t.stop()}}),t)}))),e.handleConfigSave=function(){var t=Object(E.a)(b.a.mark((function t(n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.onSave||S.a.noop,e.getStepEditor().applyDefaults(n),t.abrupt("return",r());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(St.a)(n,[{key:"getStepEditor",value:function(){return this.props.stepEditor}},{key:"getStep",value:function(){return this.getStepEditor().step}},{key:"render",value:function(){var e=this.props.className,t=this.getStepEditor(),n=this.canDelete,r=this.canMove;return Pt.a.createElement(er,{stepEditor:t,canDelete:n,canMove:r,className:e,onDelete:this.handleDelete},Pt.a.createElement(Pt.a.Fragment,null,this.renderDescription(),this.renderConfiguration(),this.renderConfigOverride(),this.renderProps(),this.renderPropsOverride()))}},{key:"renderDescription",value:function(){var e=this.getStepEditor();return Pt.a.createElement(cr,{stepEditor:e,onSave:this.handleSave,className:"mb4"})}},{key:"renderConfiguration",value:function(){var e=this.getStepEditor();return Pt.a.createElement(ir,{stepEditor:e,onSave:this.handleConfigSave,className:"mb4"})}},{key:"renderConfigOverride",value:function(){var e=this.getStepEditor();return Pt.a.createElement(dr,{stepEditor:e,onSave:this.handleSave,className:"mb4"})}},{key:"renderProps",value:function(){var e=this.getStepEditor();return Pt.a.createElement(lr,{stepEditor:e,onSave:this.handleSave,className:"mb4"})}},{key:"renderPropsOverride",value:function(){var e=this.getStepEditor();return Pt.a.createElement(mr,{stepEditor:e,onSave:this.handleSave})}},{key:"canDelete",get:function(){return void 0===this.props.canDelete||this.props.canDelete}},{key:"canMove",get:function(){return void 0===this.props.canMove||this.props.canMove}}]),n}(Pt.a.Component);Object(Mt.decorate)(vr,{canDelete:Mt.computed,canMove:Mt.computed,handleDelete:Mt.action,handleSave:Mt.action,handleConfigSave:Mt.action});var yr=Object(At.inject)()(Object(At.observer)(vr)),hr=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(e){var r;return Object(wt.a)(this,n),(r=t.call(this,e)).handleCancel=function(e){e.preventDefault(),e.stopPropagation(),r.processing=!1,(r.props.onCancel||S.a.noop)()},r.handlePrevious=function(e){e.preventDefault(),e.stopPropagation(),r.processing=!1,r.getEditor().previousPage()},r.handlePublish=function(){var e=Object(E.a)(b.a.mark((function e(t){var n,o,a,i,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.stopPropagation(),n=r.getEditor(),o=n.draft,a=Object(_t.gotoFn)(Object(gn.a)(r)),r.processing=!0,e.prev=6,e.next=9,n.publish(o);case 9:if(i=e.sent,Object(Mt.runInAction)((function(){r.processing=!1})),!i.hasErrors){e.next=13;break}throw new Error("There were validation errors in your submission");case 13:return u=r.getUiEventBus(),e.next=16,u.fireEvent("workflowTemplatePublished",i.template);case 16:return Object(Wt.displaySuccess)("The workflow template draft is published successfully"),a("/workflow-templates/published"),e.abrupt("return");case 21:e.prev=21,e.t0=e.catch(6),Object(Mt.runInAction)((function(){r.processing=!1})),Object(Wt.displayError)(e.t0);case 25:case"end":return e.stop()}}),e,null,[[6,21]])})));return function(t){return e.apply(this,arguments)}}(),Object(Mt.runInAction)((function(){r.processing=!1})),r}return Object(St.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"getUiEventBus",value:function(){return this.props.uiEventBus}},{key:"getState",value:function(){var e=this.getWorkflowTemplate();return zt("".concat(e.id,"-draft-publish-page"))}},{key:"getEditor",value:function(){return this.props.editor}},{key:"getWorkflowTemplate",value:function(){return this.getEditor().draft.template}},{key:"render",value:function(){var e=this.processing,t=this.getWorkflowTemplate(),n=this.getState();return Pt.a.createElement(Pt.a.Fragment,null,Pt.a.createElement(Qn.a.Dimmable,{dimmed:e},Pt.a.createElement(Qn.a,{active:e,inverted:!0},Pt.a.createElement(Vn.a,{inverted:!0},"Processing")),Pt.a.createElement(Tt.a,{as:"h3",color:"grey",className:"mt0 mb3"},"Review & Publish"),Pt.a.createElement(fn,{template:t,uiState:n,className:"mb4 mt0"})),Pt.a.createElement("div",null,Pt.a.createElement(bn.a,{floated:"right",color:"teal",disabled:e,className:"ml2",content:"Publish",onClick:this.handlePublish}),Pt.a.createElement(bn.a,{floated:"right",icon:"left arrow",labelPosition:"left",disabled:e,className:"ml3",content:"previous",onClick:this.handlePrevious}),Pt.a.createElement(bn.a,{floated:"left",disabled:e,onClick:this.handleCancel},"Cancel")))}}]),n}(Pt.a.Component);Object(Mt.decorate)(hr,{handleCancel:Mt.action,handlePublish:Mt.action,handlePrevious:Mt.action,processing:Mt.observable});var gr=Object(At.inject)("uiEventBus")(Object(jt.o)(Object(At.observer)(hr))),br=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(e){var r;return Object(wt.a)(this,n),(r=t.call(this,e)).handleCancel=function(){r.getDraftEditor().cancel(),Object(_t.gotoFn)(Object(gn.a)(r))("/workflow-templates/published")},Object(Mt.runInAction)((function(){r.stores=new Un.a([r.getStore(),r.props.stepTemplatesStore])})),r}return Object(St.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.stores.load()}},{key:"getStore",value:function(){return this.props.workflowTemplateDraftsStore}},{key:"getStores",value:function(){return this.stores}},{key:"getDraftEditor",value:function(){return function(e){var t=we.sessionStore,n=je(e),r=t.map.get(n)||Ae.create({draftId:e},we);return t.map.set(n,r),r}(this.getDraft().id)}},{key:"getDraftId",value:function(){return decodeURIComponent((this.props.match.params||{}).draftId)}},{key:"getDraft",value:function(){var e=this.getStore();if(!Object(O.isStoreReady)(e))return{};var t=this.getDraftId();return S.a.isNil(t)?{}:e.getDraft(t)||{}}},{key:"getTemplateVersion",value:function(){return this.getDraft().template||{}}},{key:"getUserDisplayName",value:function(){return this.props.userDisplayName}},{key:"hasDraft",value:function(){var e=this.getStore(),t=this.getDraft();return e.hasDraft(t.id)}},{key:"render",value:function(){var e=this.getStores(),t=this.getStore(),n=null;return n=e.hasError?Pt.a.createElement(Rt.a,{error:e.error,className:"p0"}):e.loading?Pt.a.createElement(vn,null):e.ready&&Object(O.isStoreEmpty)(t)?Pt.a.createElement(Rt.a,{error:"The workflow template draft does not exist or is no longer available",className:"p0"}):e.ready&&Object(O.isStoreNotEmpty)(t)?this.renderMain():null,Pt.a.createElement(It.a,{className:"mt3"},this.renderBreadcrumb(),n)}},{key:"renderBreadcrumb",value:function(){var e=this.getDraftId(),t=Object(_t.gotoFn)(this);return Pt.a.createElement(Bn.a,{className:"block mb3"},Pt.a.createElement(Bn.a.Section,{link:!0,onClick:function(){return t("/workflow-templates/published")}},"Workflow Template Drafts"),Pt.a.createElement(Bn.a.Divider,{icon:"right angle"}),Pt.a.createElement(Bn.a.Section,{active:!0},e))}},{key:"renderMain",value:function(){var e=this.hasDraft(),t=this.getDraftId(),n=this.props.className,r=this.getDraft(),o=this.getTemplateVersion(),a=o.id,i=o.title,u=r.createdAt,c=r.createdBy,s=this.getUserDisplayName();return e?Pt.a.createElement("div",{className:$t()(n)},Pt.a.createElement("div",{className:"flex mb2"},Pt.a.createElement(Tt.a,{as:"h3",color:"grey",className:"mt0 flex-auto ellipsis"},Pt.a.createElement(Ut.a,{color:"teal",className:"ml0 mr1"},"Draft"),i,Pt.a.createElement(Tt.a.Subheader,{className:"fs-9 color-grey mt1"},Pt.a.createElement("div",null,Pt.a.createElement("span",{className:"ellipsis breakout"},a)),Pt.a.createElement("div",null,"created ",Pt.a.createElement(Ft.a,{date:u})," ",Pt.a.createElement("span",{className:"ml1"},"by ",s.getDisplayName({uid:c})))))),Pt.a.createElement(xt.a,{clearing:!0,className:"p3"},this.renderContent())):Pt.a.createElement(Rt.a,{error:'The workflow template draft "'.concat(t,'" is not available'),className:"p0"})}},{key:"renderContent",value:function(){var e=this.getDraftEditor(),t=e.currentPage;return 0===t?this.renderMetaContent(e):1===t?this.renderStepsContent(e):2===t?this.renderPublishContent(e):""}},{key:"renderMetaContent",value:function(e){return Pt.a.createElement(zn,{editor:e,onCancel:this.handleCancel})}},{key:"renderStepsContent",value:function(e){return Pt.a.createElement(Jn,{editor:e,stepEditor:yr,onCancel:this.handleCancel})}},{key:"renderPublishContent",value:function(e){return Pt.a.createElement(gr,{editor:e,onCancel:this.handleCancel})}}]),n}(Pt.a.Component);Object(Mt.decorate)(br,{handleCancel:Mt.action,stores:Mt.observable});var Er=Object(At.inject)("userDisplayName","workflowTemplateDraftsStore","stepTemplatesStore")(Object(jt.o)(Object(At.observer)(br))),wr=n(750),Sr=n.n(wr),kr=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(e){var r;return Object(wt.a)(this,n),(r=t.call(this,e)).handleWorkflowClick=function(e){e.preventDefault(),e.stopPropagation();var t=e.currentTarget.dataset.workflow,n=e.currentTarget.dataset.version;Object(_t.gotoFn)(Object(gn.a)(r))("/workflows/published/id/".concat(t,"/v/").concat(n))},Object(Mt.runInAction)((function(){r.stores=new Un.a([r.getStore()])})),r}return Object(St.a)(n,[{key:"componentDidMount",value:function(){this.getStores().load({forceLoad:!0}),this.getStore().startHeartbeat()}},{key:"componentWillUnmount",value:function(){this.getStore().stopHeartbeat()}},{key:"getStores",value:function(){return this.stores}},{key:"getStore",value:function(){return this.props.workflowsStore}},{key:"getUserDisplayName",value:function(){return this.props.userDisplayName}},{key:"render",value:function(){var e=this.getStores(),t=this.getStore(),n=null;return n=e.hasError?Pt.a.createElement(Rt.a,{error:e.error,className:"p0"}):e.loading?Pt.a.createElement(vn,null):e.ready&&Object(O.isStoreEmpty)(t)?this.renderEmpty():e.ready&&Object(O.isStoreNotEmpty)(t)?this.renderTable():null,Pt.a.createElement("div",{className:"mb4"},this.renderTitle(),n)}},{key:"renderEmpty",value:function(){return this.showCreateDraftWizard?null:Pt.a.createElement(xt.a,{placeholder:!0},Pt.a.createElement(Tt.a,{icon:!0,className:"color-grey"},Pt.a.createElement(Nt.a,{name:"fork"}),"No workflows",Pt.a.createElement(Tt.a.Subheader,null,"To create a workflow, start by creating a draft and then publish the draft.")))}},{key:"renderTitle",value:function(){return Pt.a.createElement("div",{className:"mb3 flex"},Pt.a.createElement(Tt.a,{as:"h3",className:"color-grey mt1 mb0 flex-auto"},Pt.a.createElement(Nt.a,{name:"fork",className:"align-top"}),Pt.a.createElement(Tt.a.Content,{className:"left-align"},"Workflows")))}},{key:"renderTable",value:function(){var e=this,t=this.getStore().list;return Pt.a.createElement(Kt.a,{selectable:!0,padded:!0},Pt.a.createElement(Kt.a.Header,null,Pt.a.createElement(Kt.a.Row,null,Pt.a.createElement(Kt.a.HeaderCell,{singleLine:!0},"Workflow"),Pt.a.createElement(Kt.a.HeaderCell,null,"Updated"))),Pt.a.createElement(Kt.a.Body,null,S.a.map(t,(function(t){return e.renderWorkflowRow(t)}))))}},{key:"renderWorkflowRow",value:function(e){var t=e.latest;if(!t)return Pt.a.createElement(Kt.a.Row,null,Pt.a.createElement(Kt.a.Cell,{colSpan:"2"},Pt.a.createElement(Gn.a,{warning:!0},Pt.a.createElement("p",null,'Workflow "',e.id,'" does not have any version!'))));var n=t.id,r=t.v,o=t.title,a=t.updatedAt,i=t.updatedBy,u=this.getUserDisplayName(),c=u.isSystem({uid:i});return Pt.a.createElement(Kt.a.Row,{className:"cursor-pointer",key:e.id,"data-workflow":e.id,"data-version":e.latest.v,onClick:this.handleWorkflowClick},Pt.a.createElement(Kt.a.Cell,null,Pt.a.createElement(Tt.a,{as:"h4",color:"grey"},o,Pt.a.createElement(Tt.a.Subheader,{className:"fs-9"},Pt.a.createElement("div",null,Pt.a.createElement("span",{className:"ellipsis breakout color-grey"},n," v",r))))),Pt.a.createElement(Kt.a.Cell,{collapsing:!0},Pt.a.createElement("div",null,c?"":Pt.a.createElement("span",null,u.getDisplayName({uid:i}))),Pt.a.createElement(Ft.a,{date:a})))}},{key:"renderDescription",value:function(e){return Pt.a.createElement(Pt.a.Fragment,null,Pt.a.createElement("div",{className:"overflow-hidden height-60-px"},Pt.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.descHtml}})),Pt.a.createElement("img",{src:Sr.a,alt:"",className:"absolute height-50-px",style:{bottom:"0",maxWidth:"100%"}}))}}]),n}(Pt.a.Component);Object(Mt.decorate)(kr,{handleWorkflowClick:Mt.action});var Or=Object(At.inject)("workflowsStore","userDisplayName")(Object(jt.o)(Object(At.observer)(kr))),Cr=[{name:"draftFor",label:"Draft For",placeholder:"Select one",rules:"required|in:newWorkflow,existingWorkflow"},{name:"templateId",label:"Workflow Template",placeholder:"Select a workflow template to start from",extra:{explain:"To create a workflow, you need to select an existing workflow template as a starting point."},rules:"required|string|between:3,150|alpha_dash"},{name:"workflowId",label:"Workflow Id",placeholder:"Type a unique id for this workflow",extra:{explain:"This is a required field and the number of characters must be between 3 and 100 and no spaces. Only\n    alpha-numeric characters and dashes are allowed. Once a draft is created you can not change the workflow id."},rules:"required|string|between:3,100|alpha_dash"}];var Pr=function(){return Object(ye.createForm)(Cr)},Ar=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(e){var r;return Object(wt.a)(this,n),(r=t.call(this,e)).handleDraftForSelectionChange=function(e){var t=r.form,n=t.$("templateId"),o=t.$("workflowId");n.clear(),o.clear(),"existingWorkflow"===e&&n.set("__DO_NOT_USE__")},r.handleCancel=function(){(r.props.onCancel||S.a.noop)()},r.handleFormError=function(e,t){},r.handleFormSubmission=function(){var e=Object(E.a)(b.a.mark((function e(t){var n,o,a,i,u,c,s,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.values(),o=n.draftFor,i=(a="newWorkflow"===o)?n.templateId:void 0,u=n.workflowId,c=r.getDraftsStore(),s=Object(_t.gotoFn)(Object(gn.a)(r)),e.prev=7,e.next=10,c.createDraft({isNewWorkflow:a,workflowId:u,templateId:i});case 10:l=e.sent,t.clear(),r.handleCancel(),s("/workflows/drafts/edit/".concat(encodeURIComponent(l.id))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(7),Object(Wt.displayError)(e.t0);case 19:case"end":return e.stop()}}),e,null,[[7,16]])})));return function(t){return e.apply(this,arguments)}}(),r.form=Pr(),Object(Mt.runInAction)((function(){r.stores=new Un.a([r.getWorkflowsStore(),r.getDraftsStore(),r.getTemplatesStore()])})),r}return Object(St.a)(n,[{key:"componentDidMount",value:function(){this.getStores().load()}},{key:"getStores",value:function(){return this.stores}},{key:"getWorkflowsStore",value:function(){return this.props.workflowsStore}},{key:"getDraftsStore",value:function(){return this.props.workflowDraftsStore}},{key:"getTemplatesStore",value:function(){return this.props.workflowTemplatesStore}},{key:"getDraftForDropDownOptions",value:function(){var e=!this.emptyWorkflows,t=!this.emptyWorkflowTemplates,n=[];return e&&n.push({value:"existingWorkflow",text:"An existing workflow",content:Pt.a.createElement("div",null,Pt.a.createElement(Ut.a,{color:"teal",horizontal:!0,size:"mini"},"Existing")," ","An existing workflow")}),t&&n.push({value:"newWorkflow",text:"A new workflow",content:Pt.a.createElement("div",null,Pt.a.createElement(Ut.a,{color:"blue",horizontal:!0,size:"mini"},"New")," ","An new workflow")}),n}},{key:"getWorkflowDropDownOptions",value:function(){var e=this.getWorkflowsStore(),t=this.getDraftsStore(),n=e.list,r=[];return S.a.forEach(n,(function(e){t.hasWorkflow(e.id)||r.push({text:e.latest.title||"",value:e.id,content:Pt.a.createElement("div",null,Pt.a.createElement(Ut.a,{color:"teal",horizontal:!0,size:"mini"},"Existing")," ",e.latest.title," ",Pt.a.createElement("span",{className:"ml1 fs-7 color-grey"},e.id))})})),r}},{key:"getWorkflowTemplatesDropDownOptions",value:function(){var e=this.getTemplatesStore().list,t=[];return S.a.forEach(e,(function(e){t.push({text:e.latest.title||"",value:e.id,content:Pt.a.createElement("div",null,Pt.a.createElement(Ut.a,{color:"teal",horizontal:!0,size:"mini"},"Template")," ",e.latest.title," ",Pt.a.createElement("span",{className:"ml1 fs-7 color-grey"},e.id))})})),t}},{key:"render",value:function(){var e=this.getStores();return e.hasError?Pt.a.createElement(Rt.a,{error:e.error,className:"p0 mb3"}):e.loading?Pt.a.createElement(vn,null):e.ready?this.renderMain():null}},{key:"renderMain",value:function(){var e=this,t=this.form,n=this.getDraftForDropDownOptions(),r=this.getWorkflowDropDownOptions(),o=this.getWorkflowTemplatesDropDownOptions(),a=t.$("draftFor"),i=t.$("templateId"),u=t.$("workflowId"),c=a.value,s="newWorkflow"===c,l="existingWorkflow"===c,f=this.emptyWorkflowTemplates&&this.emptyWorkflows;return Pt.a.createElement(xt.a,{clearing:!0,className:"p3"},Pt.a.createElement(On.a,{form:t,onCancel:this.handleCancel,onSuccess:this.handleFormSubmission,onError:this.handleFormError},(function(t){var c=t.processing,d=(t._onSubmit,t.onCancel);return Pt.a.createElement(Pt.a.Fragment,null,f&&e.renderEmptyMessage(),Pt.a.createElement(Pn.a,{field:a,options:n,selection:!0,fluid:!0,disabled:c,onChange:e.handleDraftForSelectionChange}),!f&&s&&Pt.a.createElement(Pt.a.Fragment,null,Pt.a.createElement(Pn.a,{field:i,options:o,selection:!0,fluid:!0,disabled:c}),Pt.a.createElement(jn.a,{field:u,disabled:c})),!f&&l&&Pt.a.createElement(Pn.a,{field:u,options:r,selection:!0,fluid:!0,disabled:c}),Pt.a.createElement("div",{className:"mt3"},Pt.a.createElement(bn.a,{floated:"right",color:"blue",icon:!0,disabled:c||f,className:"ml2",type:"submit"},"Create Draft"),Pt.a.createElement(bn.a,{floated:"right",disabled:c,onClick:d},"Cancel")))})))}},{key:"renderEmptyMessage",value:function(){return Pt.a.createElement(Gn.a,{warning:!0,style:{display:"block"}},Pt.a.createElement(Gn.a.Header,null,"Brand new system"),Pt.a.createElement("p",null,"This is a brand new installation of the data lake. There are no workflow templates or workflows to create a draft from. At least one workflow template needs to be created before you can create a workflow draft."))}},{key:"emptyWorkflows",get:function(){var e=this.getWorkflowsStore();return Object(O.isStoreEmpty)(e)}},{key:"emptyWorkflowTemplates",get:function(){var e=this.getTemplatesStore();return Object(O.isStoreEmpty)(e)}}]),n}(Pt.a.Component);Object(Mt.decorate)(Ar,{emptyWorkflows:Mt.computed,emptyWorkflowTemplates:Mt.computed,handleDraftForSelectionChange:Mt.action,handleCancel:Mt.action,handleFormSubmission:Mt.action,handleFormError:Mt.action});var jr=Object(At.inject)("workflowsStore","workflowDraftsStore","workflowTemplatesStore")(Object(jt.o)(Object(At.observer)(Ar))),Ir=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(e){var r;return Object(wt.a)(this,n),(r=t.call(this,e)).handleEditDraft=function(){var e=Object(E.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(_t.gotoFn)(Object(gn.a)(r))("/workflows/drafts/edit/".concat(encodeURIComponent(t.id)));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Object(Mt.runInAction)((function(){r.showCreateDraftWizard=!1,r.stores=new Un.a([r.getStore(),r.props.stepTemplatesStore])})),r}return Object(St.a)(n,[{key:"componentDidMount",value:function(){this.getStores().load();var e=this.getStore();Object(xe.swallowError)(e.load()),e.startHeartbeat()}},{key:"componentWillUnmount",value:function(){this.getStore().stopHeartbeat()}},{key:"getStores",value:function(){return this.stores}},{key:"getStore",value:function(){return this.props.workflowDraftsStore}},{key:"handleCreateDraftClick",value:function(){this.showCreateDraftWizard=!0}},{key:"handleCreateDraftCancel",value:function(){this.showCreateDraftWizard=!1}},{key:"render",value:function(){var e=this.getStores(),t=this.getStore(),n=null;return n=e.hasError?Pt.a.createElement(Rt.a,{error:e.error,className:"p0"}):e.loading?Pt.a.createElement(vn,null):e.ready&&Object(O.isStoreEmpty)(t)?this.renderEmpty():e.ready&&Object(O.isStoreNotEmpty)(t)?this.renderMain():null,Pt.a.createElement("div",{className:"mb4"},this.renderTitle(),this.renderWizard(),n)}},{key:"renderEmpty",value:function(){return this.showCreateDraftWizard?null:Pt.a.createElement(xt.a,{placeholder:!0},Pt.a.createElement(Tt.a,{icon:!0,className:"color-grey"},Pt.a.createElement(Nt.a,{name:"edit outline"}),"No workflow drafts"))}},{key:"renderTitle",value:function(){var e=this,t=this.showCreateDraftWizard;return Pt.a.createElement("div",{className:"mb3 flex"},Pt.a.createElement(Tt.a,{as:"h3",className:"color-grey mt1 mb0 flex-auto"},Pt.a.createElement(Nt.a,{name:"edit outline",className:"align-top"}),Pt.a.createElement(Tt.a.Content,{className:"left-align"},"Workflow Drafts")),Pt.a.createElement("div",null,Pt.a.createElement(bn.a,{basic:!0,color:"blue",disabled:t,onClick:function(){return e.handleCreateDraftClick()}},"Create Draft")))}},{key:"renderWizard",value:function(){var e=this;return this.showCreateDraftWizard?Pt.a.createElement(jr,{onCancel:function(){return e.handleCreateDraftCancel()}}):null}},{key:"renderMain",value:function(){var e=this,t=this.getStore(),n=t.list;return Pt.a.createElement("div",null,S.a.map(n,(function(n){return Pt.a.createElement(xt.a,{className:"mb2",clearing:!0,key:n.id},Pt.a.createElement(Sn,{draft:n,draftsStore:t,onEdit:e.handleEditDraft,className:"pt0 pl2 pr2 pb2"},(function(e){var t=e.uiState,n=e.version;return Pt.a.createElement(fn,{template:n,uiState:t})})))})))}}]),n}(Pt.a.Component);Object(Mt.decorate)(Ir,{handleCreateDraftClick:Mt.action,handleCreateDraftCancel:Mt.action,handleEditDraft:Mt.action,showCreateDraftWizard:Mt.observable});var xr=Object(At.inject)("workflowDraftsStore","stepTemplatesStore")(Object(jt.o)(Object(At.observer)(Ir))),Tr=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(){return Object(wt.a)(this,n),t.apply(this,arguments)}return Object(St.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){return Pt.a.createElement(It.a,{className:"mt3"},Pt.a.createElement(Or,null),Pt.a.createElement(xr,null))}}]),n}(Pt.a.Component),Nr=Object(At.inject)()(Object(jt.o)(Object(At.observer)(Tr))),_r=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(){var e;Object(wt.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleDelete=function(t){(e.props.onDelete||S.a.noop)(t)},e.handleSave=Object(E.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.onSave||S.a.noop,t.abrupt("return",n());case 2:case"end":return t.stop()}}),t)}))),e.handleConfigSave=function(){var t=Object(E.a)(b.a.mark((function t(n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.onSave||S.a.noop,e.getStepEditor().applyConfigs(n),t.abrupt("return",r());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(St.a)(n,[{key:"getStepEditor",value:function(){return this.props.stepEditor}},{key:"getStep",value:function(){return this.getStepEditor().step}},{key:"render",value:function(){var e=this.props.className,t=this.getStepEditor(),n=this.canDelete,r=this.canMove;return Pt.a.createElement(er,{stepEditor:t,canDelete:n,canMove:r,className:e,onDelete:this.handleDelete},Pt.a.createElement(Pt.a.Fragment,null,this.renderDescription(),this.renderConfiguration(),this.renderProps()))}},{key:"renderDescription",value:function(){var e=this.getStepEditor();return Pt.a.createElement(cr,{stepEditor:e,onSave:this.handleSave,className:"mb4"})}},{key:"renderConfiguration",value:function(){var e=this.getStepEditor();return Pt.a.createElement(ir,{stepEditor:e,onSave:this.handleConfigSave,className:"mb4"})}},{key:"renderProps",value:function(){var e=this.getStepEditor();return Pt.a.createElement(lr,{stepEditor:e,onSave:this.handleSave,className:"mb2"})}},{key:"canDelete",get:function(){return void 0===this.props.canDelete||this.props.canDelete}},{key:"canMove",get:function(){return void 0===this.props.canMove||this.props.canMove}}]),n}(Pt.a.Component);Object(Mt.decorate)(_r,{canDelete:Mt.computed,canMove:Mt.computed,handleDelete:Mt.action,handleSave:Mt.action,handleConfigSave:Mt.action});var Dr=Object(At.inject)()(Object(At.observer)(_r)),Rr=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(e){var r;return Object(wt.a)(this,n),(r=t.call(this,e)).handleCancel=function(){r.resetFlags(),(r.props.onCancel||S.a.noop)()},r.handlePrevious=function(e){r.resetFlags(),e.preventDefault(),e.stopPropagation(),r.getEditor().previousPage()},r.handleFormSubmission=function(){var e=Object(E.a)(b.a.mark((function e(t){var n,o,a,i,u,c,s,l,f;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.getEditor(),o=t.values(),a=o.title,i=o.desc,u=o.instanceTtl,c=o.runSpecSize,s=o.runSpecTarget,l=n.draft,(f=n.version).setTitle(a),f.setDescription(i),f.setInstanceTtl(u),f.setRunSpec({size:c,target:s}),e.prev=8,e.next=11,n.update(l);case 11:if(!r.clickedOnNext){e.next=14;break}return r.getEditor().nextPage(),e.abrupt("return");case 14:Object(Wt.displaySuccess)("The workflow draft is saved successfully"),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(8),Object(Mt.runInAction)((function(){r.resetFlags()})),Object(Wt.displayError)(e.t0);case 21:case"end":return e.stop()}}),e,null,[[8,17]])})));return function(t){return e.apply(this,arguments)}}(),r.handleFormErrors=function(){window.scrollTo(0,0)},Object(Mt.runInAction)((function(){r.clickedOnNext=!1})),r}return Object(St.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"getEditor",value:function(){return this.props.editor}},{key:"getVersion",value:function(){return this.getEditor().version}},{key:"getMetaForm",value:function(){return this.getEditor().metaForm}},{key:"resetFlags",value:function(){this.clickedOnNext=!1}},{key:"handleOnSubmitNext",value:function(e,t){e.preventDefault(),e.stopPropagation(),this.resetFlags(),this.clickedOnNext=!0,t(e)}},{key:"render",value:function(){var e=this,t=this.getEditor().hasPreviousPage,n=this.getMetaForm(),r=n.$("title"),o=n.$("desc"),a=n.$("instanceTtl"),i=n.$("runSpecSize"),u=n.$("runSpecTarget");return Pt.a.createElement(On.a,{form:n,onCancel:this.handleCancel,onSuccess:this.handleFormSubmission,onError:this.handleFormErrors},(function(n){var c=n.processing,s=n.onSubmit,l=n.onCancel;return Pt.a.createElement(Pt.a.Fragment,null,Pt.a.createElement(jn.a,{field:r,disabled:c}),Pt.a.createElement(Wn.a,{field:o,rows:6,disabled:c}),Pt.a.createElement(nn.a,{horizontal:!0,className:"mb3"},Pt.a.createElement(Tt.a,{as:"h4",className:"color-grey"},Pt.a.createElement(Nt.a,{name:"list alternate outline",className:"color-grey"}),"Properties")),Pt.a.createElement(jn.a,{field:a,disabled:c}),Pt.a.createElement(Pn.a,{field:i,disabled:c,fluid:!1,selection:!0}),Pt.a.createElement(Pn.a,{field:u,disabled:c,fluid:!1,selection:!0}),Pt.a.createElement("div",{className:"mt4"},Pt.a.createElement(bn.a,{floated:"right",color:"teal",icon:"right arrow",labelPosition:"right",disabled:c,className:"ml2",content:"Next",onClick:function(t){return e.handleOnSubmitNext(t,s)}}),t&&Pt.a.createElement(bn.a,{floated:"right",icon:"left arrow",labelPosition:"left",disabled:c,className:"ml3",content:"previous",onClick:e.handlePrevious}),Pt.a.createElement(bn.a,{floated:"right",color:"blue",icon:"save",labelPosition:"left",disabled:c,className:"ml2",content:"Save"}),Pt.a.createElement(bn.a,{floated:"left",disabled:c,onClick:l},"Cancel")))}))}}]),n}(Pt.a.Component);Object(Mt.decorate)(Rr,{handleCancel:Mt.action,handleOnSubmitNext:Mt.action,handleFormSubmission:Mt.action,handleFormErrors:Mt.action,handlePrevious:Mt.action,resetFlags:Mt.action,clickedOnNext:Mt.observable});var Mr=Object(At.inject)()(Object(At.observer)(Rr)),Br=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(e){var r;return Object(wt.a)(this,n),(r=t.call(this,e)).handleCancel=function(e){e.preventDefault(),e.stopPropagation(),r.processing=!1,(r.props.onCancel||S.a.noop)()},r.handlePrevious=function(e){e.preventDefault(),e.stopPropagation(),r.processing=!1,r.getEditor().previousPage()},r.handlePublish=function(){var e=Object(E.a)(b.a.mark((function e(t){var n,o,a,i,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.stopPropagation(),n=r.getEditor(),o=n.draft,a=Object(_t.gotoFn)(Object(gn.a)(r)),r.processing=!0,e.prev=6,e.next=9,n.publish(o);case 9:if(i=e.sent,Object(Mt.runInAction)((function(){r.processing=!1})),!i.hasErrors){e.next=13;break}throw new Error("There were validation errors in your submission");case 13:return u=r.getUiEventBus(),e.next=16,u.fireEvent("workflowPublished",i.workflow);case 16:return Object(Wt.displaySuccess)("The workflow draft is published successfully"),a("/workflows/published"),e.abrupt("return");case 21:e.prev=21,e.t0=e.catch(6),Object(Mt.runInAction)((function(){r.processing=!1})),Object(Wt.displayError)(e.t0);case 25:case"end":return e.stop()}}),e,null,[[6,21]])})));return function(t){return e.apply(this,arguments)}}(),Object(Mt.runInAction)((function(){r.processing=!1})),r}return Object(St.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"getUiEventBus",value:function(){return this.props.uiEventBus}},{key:"getState",value:function(){var e=this.getVersion();return zt("".concat(e.id,"-workflow-draft-publish-page"))}},{key:"getEditor",value:function(){return this.props.editor}},{key:"getVersion",value:function(){return this.getEditor().version}},{key:"render",value:function(){var e=this.processing,t=this.getVersion(),n=this.getState();return Pt.a.createElement(Pt.a.Fragment,null,Pt.a.createElement(Qn.a.Dimmable,{dimmed:e},Pt.a.createElement(Qn.a,{active:e,inverted:!0},Pt.a.createElement(Vn.a,{inverted:!0},"Processing")),Pt.a.createElement(Tt.a,{as:"h3",color:"grey",className:"mt0 mb3"},"Review & Publish"),Pt.a.createElement(fn,{template:t,uiState:n,className:"mb4 mt0"})),Pt.a.createElement("div",null,Pt.a.createElement(bn.a,{floated:"right",color:"teal",disabled:e,className:"ml2",content:"Publish",onClick:this.handlePublish}),Pt.a.createElement(bn.a,{floated:"right",icon:"left arrow",labelPosition:"left",disabled:e,className:"ml3",content:"previous",onClick:this.handlePrevious}),Pt.a.createElement(bn.a,{floated:"left",disabled:e,onClick:this.handleCancel},"Cancel")))}}]),n}(Pt.a.Component);Object(Mt.decorate)(Br,{handleCancel:Mt.action,handlePublish:Mt.action,handlePrevious:Mt.action,processing:Mt.observable});var Fr=Object(At.inject)("uiEventBus")(Object(jt.o)(Object(At.observer)(Br))),Ur=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(e){var r;return Object(wt.a)(this,n),(r=t.call(this,e)).handleCancel=function(){var e=r.getWorkflowDraftEditor(),t=Object(_t.gotoFn)(Object(gn.a)(r));e.cancel(),t("/workflows/published")},Object(Mt.runInAction)((function(){r.stores=new Un.a([r.getStore(),r.props.workflowTemplatesStore,r.props.stepTemplatesStore])})),r}return Object(St.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.stores.load()}},{key:"getStore",value:function(){return this.props.workflowDraftsStore}},{key:"getStores",value:function(){return this.stores}},{key:"getUserDisplayName",value:function(){return this.props.userDisplayName}},{key:"getWorkflowDraftEditor",value:function(){return function(e){var t=$e.sessionStore,n=Xe(e),r=t.map.get(n)||Je.create({draftId:e},$e);return t.map.set(n,r),r}(this.getDraft().id)}},{key:"getDraftId",value:function(){return decodeURIComponent((this.props.match.params||{}).draftId)}},{key:"getDraft",value:function(){var e=this.getStore();if(!Object(O.isStoreReady)(e))return{};var t=this.getDraftId();return S.a.isNil(t)?{}:e.getDraft(t)||{}}},{key:"getVersion",value:function(){return this.getWorkflowDraftEditor().version}},{key:"hasDraft",value:function(){var e=this.getStore(),t=this.getDraft();return e.hasDraft(t.id)}},{key:"render",value:function(){var e=this.getStores(),t=this.getStore(),n=null;return n=e.hasError?Pt.a.createElement(Rt.a,{error:e.error,className:"p0"}):e.loading?Pt.a.createElement(vn,null):e.ready&&Object(O.isStoreEmpty)(t)||e.ready&&Object(O.isStoreNotEmpty)(t)&&!this.hasDraft()?Pt.a.createElement(Rt.a,{error:"The workflow draft does not exist or is no longer available",className:"p0"}):e.ready&&Object(O.isStoreNotEmpty)(t)&&this.hasDraft()?this.renderMain():null,Pt.a.createElement(It.a,{className:"mt3"},this.renderBreadcrumb(),n)}},{key:"renderBreadcrumb",value:function(){var e=this.getDraftId(),t=Object(_t.gotoFn)(this);return Pt.a.createElement(Bn.a,{className:"block mb3"},Pt.a.createElement(Bn.a.Section,{link:!0,onClick:function(){return t("/workflows/published")}},"Workflow Drafts"),Pt.a.createElement(Bn.a.Divider,{icon:"right angle"}),Pt.a.createElement(Bn.a.Section,{active:!0},e))}},{key:"renderMain",value:function(){var e=this.hasDraft(),t=this.getDraftId(),n=this.props.className,r=this.getDraft(),o=this.getVersion(),a=o.id,i=o.title,u=r.createdAt,c=r.createdBy,s=this.getUserDisplayName();return e?Pt.a.createElement("div",{className:$t()(n)},Pt.a.createElement("div",{className:"flex mb2"},Pt.a.createElement(Tt.a,{as:"h3",color:"grey",className:"mt0 flex-auto ellipsis"},Pt.a.createElement(Ut.a,{color:"teal",className:"ml0 mr1"},"Draft"),i,Pt.a.createElement(Tt.a.Subheader,{className:"fs-9 color-grey mt1"},Pt.a.createElement("div",null,Pt.a.createElement("span",{className:"ellipsis breakout"},a)),Pt.a.createElement("div",null,"created ",Pt.a.createElement(Ft.a,{date:u})," ",Pt.a.createElement("span",{className:"ml1"},"by ",s.getDisplayName({uid:c})))))),Pt.a.createElement(xt.a,{clearing:!0,className:"p3"},this.renderContent())):Pt.a.createElement(Rt.a,{error:'The workflow template draft "'.concat(t,'" is not available'),className:"p0"})}},{key:"renderContent",value:function(){var e=this.getWorkflowDraftEditor(),t=e.currentPage;return 0===t?this.renderMetaContent(e):1===t?this.renderStepsContent(e):2===t?this.renderPublishContent(e):""}},{key:"renderMetaContent",value:function(e){return Pt.a.createElement(Mr,{editor:e,onCancel:this.handleCancel})}},{key:"renderStepsContent",value:function(e){return Pt.a.createElement(Jn,{editor:e,stepEditor:Dr,onCancel:this.handleCancel})}},{key:"renderPublishContent",value:function(e){return Pt.a.createElement(Fr,{editor:e,onCancel:this.handleCancel})}}]),n}(Pt.a.Component);Object(Mt.decorate)(Ur,{handleCancel:Mt.action,stores:Mt.observable});var Lr=Object(At.inject)("userDisplayName","workflowDraftsStore","workflowTemplatesStore","stepTemplatesStore")(Object(jt.o)(Object(At.observer)(Ur))),Wr=n(738),Hr=[{name:"workflowInput",label:"Workflow Input",placeholder:"Provide a JSON input",extra:{explain:"This is an advance operation. You will need to provide an input in the form of a json object."},rules:"string"}];var zr=function(){return Object(ye.createForm)(Hr)},Qr=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(e){var r;return Object(wt.a)(this,n),(r=t.call(this,e)).cancelTriggerDialog=function(){r.triggerDialogShown=!1},r.showTriggerDialog=function(){r.triggerDialogShown=!0},r.handleFormSubmission=function(){var e=Object(E.a)(b.a.mark((function e(t){var n,o,a,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.values(),o=n.workflowInput,e.prev=2,a=r.getInstancesStore(),i=JSON.parse(o),e.next=7,a.triggerWorkflow({input:i});case 7:t.clear(),r.cancelTriggerDialog(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),e.t0 instanceof SyntaxError?Object(Wt.displayError)("Incorrect workflow input. Make sure the workflow input is a well-formed JSON."):Object(Wt.displayError)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),r.handleInstanceClick=function(e){e.preventDefault(),e.stopPropagation();var t=e.currentTarget.dataset.instance,n=Object(_t.gotoFn)(Object(gn.a)(r)),o=r.getWorkflowVersion(),a=o.id,i=o.v;n("/workflows/published/id/".concat(a,"/v/").concat(i,"/instances/id/").concat(t))},r.form=zr(),Object(Mt.runInAction)((function(){r.triggerDialogShown=!1})),r}return Object(St.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.disposer&&this.disposer(),this.disposer=Object(Mt.autorun)((function(){var t=e.getInstancesStore();Object(O.isStoreReady)(t)||Object(xe.swallowError)(t.load())})),this.getInstancesStore().startHeartbeat()}},{key:"componentWillUnmount",value:function(){this.getInstancesStore().stopHeartbeat(),this.disposer&&this.disposer()}},{key:"getWorkflowVersion",value:function(){return this.props.workflowVersion}},{key:"getWorkflowStore",value:function(){var e=this.getWorkflowVersion();return this.props.workflowsStore.getWorkflowStore(e.id)}},{key:"getInstancesStore",value:function(){var e=this.getWorkflowStore(),t=this.getWorkflowVersion();return e.getInstancesStore(t.id,t.v)}},{key:"getUserDisplayName",value:function(){return this.props.userDisplayName}},{key:"render",value:function(){var e=this.getInstancesStore(),t=null;return t=Object(O.isStoreError)(e)?Pt.a.createElement(Rt.a,{error:e.error,className:"p0"}):Object(O.isStoreLoading)(e)?Pt.a.createElement(vn,null):Object(O.isStoreReady)(e)&&Object(O.isStoreEmpty)(e)?this.renderEmptyInstances():Object(O.isStoreReady)(e)&&!Object(O.isStoreEmpty)(e)?this.renderMain():null,Pt.a.createElement(Pt.a.Fragment,null,this.renderTriggerDialog(),t)}},{key:"renderMain",value:function(){var e=this,t=this.getInstancesStore().list;return S.a.map(t,(function(t){return e.renderRow(t)}))}},{key:"renderRow",value:function(e){var t=e.id,n=e.createdAt,r=e.createdBy,o=e.statusSummary,a=this.getUserDisplayName(),i=o.statusLabel,u=o.statusColor,c=o.stepsSummary;return Pt.a.createElement(xt.a,{clearing:!0,padded:!0,key:t,className:"mb3 cursor-pointer","data-instance":t,onClick:this.handleInstanceClick},Pt.a.createElement(Gt.a,{celled:"internally",stackable:!0},Pt.a.createElement(Gt.a.Row,{stretched:!0},Pt.a.createElement(Gt.a.Column,{width:3,className:"center pr3"},Pt.a.createElement(Ut.a,{color:u,className:"fluid center mb1"},i),Pt.a.createElement("div",{className:"mb1"},"id ",Pt.a.createElement("b",null,t)),Pt.a.createElement(Ft.a,{date:n}),Pt.a.createElement("span",null,a.getDisplayName({uid:r}))),Pt.a.createElement(Gt.a.Column,{width:13},Pt.a.createElement("div",{className:"mb2 center"},"Steps"),Pt.a.createElement(Wr.a.Group,{widths:"five",size:"tiny"},S.a.map(c,(function(e){return Pt.a.createElement(Wr.a,{key:e.statusLabel,color:e.statusColor},Pt.a.createElement(Wr.a.Value,null,Object(xe.niceNumber)(e.count)),Pt.a.createElement(Wr.a.Label,null,e.statusLabel))})))))))}},{key:"renderEmptyInstances",value:function(){return Pt.a.createElement(xt.a,{placeholder:!0},Pt.a.createElement(Tt.a,{icon:!0,className:"color-grey"},Pt.a.createElement(Nt.a,{name:"copy outline"}),"No instances",Pt.a.createElement(Tt.a.Subheader,null,"Once the workflow is triggered at least once, you will start seeing information about the instances in this area.")))}},{key:"renderTriggerDialog",value:function(){var e=this.triggerDialogShown;return Pt.a.createElement(Pt.a.Fragment,null,!e&&Pt.a.createElement("div",{className:"clearfix mb2"},Pt.a.createElement(bn.a,{basic:!0,color:"blue",floated:"right",onClick:this.showTriggerDialog},"Trigger")),e&&this.renderTriggerDialogContent())}},{key:"renderTriggerDialogContent",value:function(){var e=this.form,t=e.$("workflowInput");return Pt.a.createElement(xt.a,{clearing:!0,className:"p3 mb3 mt3"},Pt.a.createElement(On.a,{form:e,onCancel:this.cancelTriggerDialog,onSuccess:this.handleFormSubmission,onError:this.handleFormError},(function(e){var n=e.processing,r=(e._onSubmit,e.onCancel);return Pt.a.createElement(Pt.a.Fragment,null,Pt.a.createElement(Wn.a,{field:t,disabled:n}),Pt.a.createElement("div",{className:"mt0"},Pt.a.createElement(bn.a,{floated:"right",color:"blue",icon:!0,disabled:n,className:"ml2",type:"submit"},"Trigger"),Pt.a.createElement(bn.a,{floated:"right",disabled:n,onClick:r},"Cancel")))})))}}]),n}(Pt.a.Component);Object(Mt.decorate)(Qr,{triggerDialogShown:Mt.observable,handleInstanceClick:Mt.action,showTriggerDialog:Mt.action,cancelTriggerDialog:Mt.action,handleFormSubmission:Mt.action});var Vr=Object(At.inject)("workflowsStore","userDisplayName")(Object(jt.o)(Object(At.observer)(Qr))),Gr=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(){return Object(wt.a)(this,n),t.apply(this,arguments)}return Object(St.a)(n,[{key:"componentDidMount",value:function(){var e=this.getAssignmentsStore();Object(xe.swallowError)(e.load()),e.startHeartbeat()}},{key:"componentWillUnmount",value:function(){this.getAssignmentsStore().stopHeartbeat()}},{key:"getWorkflowVersion",value:function(){return this.props.workflowVersion}},{key:"getWorkflowStore",value:function(){var e=this.getWorkflowVersion();return this.props.workflowsStore.getWorkflowStore(e.id)}},{key:"getAssignmentsStore",value:function(){return this.getWorkflowStore().getAssignmentsStore()}},{key:"getUserDisplayName",value:function(){return this.props.userDisplayName}},{key:"render",value:function(){var e=this.getAssignmentsStore(),t=null;return t=Object(O.isStoreError)(e)?Pt.a.createElement(Rt.a,{error:e.error,className:"p0"}):Object(O.isStoreLoading)(e)?Pt.a.createElement(vn,null):Object(O.isStoreReady)(e)&&Object(O.isStoreEmpty)(e)?this.renderEmptyAssignments():Object(O.isStoreReady)(e)&&!Object(O.isStoreEmpty)(e)?this.renderMain():null,Pt.a.createElement(Pt.a.Fragment,null,t)}},{key:"renderMain",value:function(){var e=this.getAssignmentsStore().list;return Pt.a.createElement(xt.a,{padded:!0},this.renderAssignmentsTable(e))}},{key:"renderAssignmentsTable",value:function(e){var t=this;return Pt.a.createElement(Kt.a,{basic:"very",className:"animated"},Pt.a.createElement(Kt.a.Header,null,Pt.a.createElement(Kt.a.Row,null,Pt.a.createElement(Kt.a.HeaderCell,{width:1},"Id"),Pt.a.createElement(Kt.a.HeaderCell,{width:4},"Trigger"),Pt.a.createElement(Kt.a.HeaderCell,{width:8},"Configuration"),Pt.a.createElement(Kt.a.HeaderCell,{width:3},"Updated"))),Pt.a.createElement(Kt.a.Body,null,S.a.map(e,(function(e){return t.renderAssignmentRow(e)}))))}},{key:"renderAssignmentRow",value:function(e){var t=e.id,n=e.updatedAt,r=e.updatedBy,o=e.triggerType,a=e.triggerTypeData,i=this.getUserDisplayName(),u=i.isSystem({uid:r});return Pt.a.createElement(Kt.a.Row,{key:t},Pt.a.createElement(Kt.a.Cell,null,t),Pt.a.createElement(Kt.a.Cell,null,o),Pt.a.createElement(Kt.a.Cell,null,a),Pt.a.createElement(Kt.a.Cell,null,Pt.a.createElement(Ft.a,{date:n}),Pt.a.createElement("div",null,u?"":Pt.a.createElement("span",null,"by ",i.getDisplayName({uid:r})),"\xa0")))}},{key:"renderEmptyAssignments",value:function(){return Pt.a.createElement(xt.a,{placeholder:!0},Pt.a.createElement(Tt.a,{icon:!0,className:"color-grey"},Pt.a.createElement(Nt.a,{name:"chain"}),"No assignments",Pt.a.createElement(Tt.a.Subheader,null,"Assignments allow you to configure the workflow to be triggered based on different criteria, try it out!")))}}]),n}(Pt.a.Component);Object(Mt.decorate)(Gr,{});var Kr=Object(At.inject)("workflowsStore","userDisplayName")(Object(jt.o)(Object(At.observer)(Gr))),qr=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(){var e;Object(wt.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleTabChange=function(t,n){e.getState().setMainTabIndex(n.activeIndex)},e}return Object(St.a)(n,[{key:"getState",value:function(){return this.props.uiState}},{key:"selectedMainTabIndex",value:function(){return this.getState().mainTabIndex}},{key:"getVersion",value:function(){return this.props.workflow}},{key:"render",value:function(){var e=this,t=this.props.className||"mt0",n=this.getVersion(),r=n.id,o=n.v,a=this.selectedMainTabIndex(),i=[{menuItem:"Instances",render:function(){return Pt.a.createElement(Vt.a.Pane,{basic:!0,attached:!1,className:"mt0 pt0"},Pt.a.createElement(Vr,{workflowVersion:n,id:r,v:o}))}},{menuItem:"Assignment",render:function(){return Pt.a.createElement(Vt.a.Pane,{basic:!0,attached:!1},Pt.a.createElement(Kr,{workflowVersion:n}))}},{menuItem:"Steps",render:function(){return Pt.a.createElement(Vt.a.Pane,{basic:!0,attached:!1},Pt.a.createElement(Qt.a,null,(function(){return e.renderSteps(n)})))}},{menuItem:"Properties",render:function(){return Pt.a.createElement(Vt.a.Pane,{basic:!0,attached:!1},Pt.a.createElement(en,{model:n}))}}];return Pt.a.createElement(Vt.a,{className:t,activeIndex:a,menu:{secondary:!0,pointing:!0},panes:i,onTabChange:this.handleTabChange})}},{key:"renderSteps",value:function(e){var t=e.selectedSteps||[];return 0===t.length?Pt.a.createElement("span",null,"No steps are provided"):Pt.a.createElement(Gt.a,{padded:!1,className:"animated"},S.a.map(t,(function(e,t){return Pt.a.createElement(Gt.a.Row,{key:t,className:"pb0"},Pt.a.createElement(Gt.a.Column,{width:1},Pt.a.createElement(Ut.a,{circular:!0,className:"mt1 mb1"},t+1)),Pt.a.createElement(Gt.a.Column,{width:15},Pt.a.createElement(xt.a,{className:"p0 pl1 flex"},Pt.a.createElement(sn,{step:e}))))})))}}]),n}(Pt.a.Component);Object(Mt.decorate)(qr,{handleTabChange:Mt.action});var Yr=Object(At.inject)()(Object(At.observer)(qr)),$r=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(){var e;Object(wt.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleVersionChange=function(t){var n=t.value,r=void 0===n?"":n,o=Object(_t.gotoFn)(Object(gn.a)(e)),a=e.getWorkflowId();o("/workflows/published/id/".concat(a,"/v/").concat(r))},e}return Object(St.a)(n,[{key:"componentDidMount",value:function(){var e=this.getStore();Object(xe.swallowError)(e.load()),e.startHeartbeat()}},{key:"componentWillUnmount",value:function(){this.getStore().stopHeartbeat()}},{key:"getState",value:function(){return zt("wf-".concat(this.getWorkflowId()))}},{key:"getStore",value:function(){var e=this.getWorkflowId();return this.props.workflowsStore.getWorkflowStore(e)}},{key:"getUserDisplayName",value:function(){return this.props.userDisplayName}},{key:"getWorkflowId",value:function(){return(this.props.match.params||{}).workflowId}},{key:"getVersionNumber",value:function(){return parseInt((this.props.match.params||{}).version,10)}},{key:"getWorkflow",value:function(){var e=this.getStore();return Object(O.isStoreReady)(e)?e.workflow:{}}},{key:"getVersion",value:function(){var e=this.getWorkflow(),t=this.getVersionNumber();return e.getVersion(t)}},{key:"render",value:function(){var e=this.getStore(),t=null;return t=Object(O.isStoreError)(e)?Pt.a.createElement(Rt.a,{error:e.error,className:"p0"}):Object(O.isStoreLoading)(e)?Pt.a.createElement(vn,null):Object(O.isStoreReady)(e)?this.renderMain():null,Pt.a.createElement(It.a,{className:"mt3"},this.renderBreadcrumb(),t)}},{key:"renderBreadcrumb",value:function(){var e=this.getWorkflowId(),t=Object(_t.gotoFn)(this);return Pt.a.createElement(Bn.a,{className:"block mb3"},Pt.a.createElement(Bn.a.Section,{link:!0,onClick:function(){return t("/workflows/published")}},"Workflows"),Pt.a.createElement(Bn.a.Divider,{icon:"right angle"}),Pt.a.createElement(Bn.a.Section,{active:!0},e))}},{key:"renderMain",value:function(){var e=this.getVersion(),t=e.id,n=e.title,r=e.updatedAt,o=e.updatedBy,a=e.descHtml,i=this.getUserDisplayName(),u=i.isSystem({uid:o}),c=this.getState();return Pt.a.createElement(Pt.a.Fragment,null,Pt.a.createElement("div",{className:"flex mb2"},Pt.a.createElement(Tt.a,{as:"h3",color:"grey",className:"mt0 flex-auto ellipsis"},Pt.a.createElement(Ut.a,{color:"teal",className:"ml0 mr1"},"Workflow"),n,Pt.a.createElement(Tt.a.Subheader,{className:"fs-9 color-grey mt1"},Pt.a.createElement("div",null,"updated ",Pt.a.createElement(Ft.a,{date:r})," ",u?"":Pt.a.createElement("span",{className:"ml1"},"by ",i.getDisplayName({uid:o}))))),Pt.a.createElement("div",{className:"ml1"},Pt.a.createElement("span",{className:"ellipsis pr1 fs-9 breakout color-grey"},t)," ",this.renderVersionDropdown())),Pt.a.createElement("div",{className:"mb3"},Pt.a.createElement("div",{dangerouslySetInnerHTML:{__html:a}})),Pt.a.createElement(Yr,{uiState:c,workflow:e}))}},{key:"renderVersionDropdown",value:function(){var e=this,t=this.getWorkflow().versionNumbers,n=this.getVersionNumber(),r=S.a.map(t,(function(e){return{text:"v".concat(e),value:e}}));return 1===t.length?Pt.a.createElement("span",{className:"bold color-grey pr2"},"v",n):Pt.a.createElement(Lt.a,{className:"color-grey",inline:!0,options:r,value:n,onChange:function(t,n){return e.handleVersionChange(n)}})}}]),n}(Pt.a.Component);Object(Mt.decorate)($r,{handleVersionChange:Mt.action});var Zr=Object(At.inject)("workflowsStore","userDisplayName")(Object(jt.o)(Object(At.observer)($r))),Jr=n(2204),Xr=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(){return Object(wt.a)(this,n),t.apply(this,arguments)}return Object(St.a)(n,[{key:"componentDidMount",value:function(){var e=this.getInstanceStore();Object(xe.swallowError)(e.load()),e.startHeartbeat()}},{key:"componentWillUnmount",value:function(){this.getInstanceStore().stopHeartbeat()}},{key:"getInstanceStore",value:function(){var e=this.getWorkflowStore(),t=this.getVersionNumber(),n=this.getInstanceId();return e.getInstanceStore(t,n)}},{key:"getWorkflowStore",value:function(){var e=this.getWorkflowId();return this.props.workflowsStore.getWorkflowStore(e)}},{key:"getUserDisplayName",value:function(){return this.props.userDisplayName}},{key:"getInstanceId",value:function(){return(this.props.match.params||{}).instanceId}},{key:"getWorkflowId",value:function(){return(this.props.match.params||{}).workflowId}},{key:"getVersionNumber",value:function(){return parseInt((this.props.match.params||{}).version,10)}},{key:"getWorkflow",value:function(){var e=this.getWorkflowStore();return Object(O.isStoreReady)(e)?e.workflow:{}}},{key:"getVersion",value:function(){var e=this.getWorkflow(),t=this.getVersionNumber();return e.getVersion(t)}},{key:"getInstance",value:function(){var e=this.getInstanceId();return this.getVersion().getInstance(e)}},{key:"render",value:function(){var e=this.getInstanceStore(),t=null;return t=Object(O.isStoreError)(e)?Pt.a.createElement(Rt.a,{error:e.error,className:"p0"}):Object(O.isStoreLoading)(e)?Pt.a.createElement(vn,null):Object(O.isStoreReady)(e)?this.renderMain():null,Pt.a.createElement(It.a,{className:"mt3"},this.renderBreadcrumb(),t)}},{key:"renderBreadcrumb",value:function(){var e=this.getWorkflowId(),t=this.getVersionNumber(),n=this.getInstanceId(),r=Object(_t.gotoFn)(this);return Pt.a.createElement(Bn.a,{className:"block mb3"},Pt.a.createElement(Bn.a.Section,{link:!0,onClick:function(){return r("/workflows/published")}},"Workflows"),Pt.a.createElement(Bn.a.Divider,{icon:"right angle"}),Pt.a.createElement(Bn.a.Section,{link:!0,onClick:function(){return r("/workflows/published/id/".concat(e,"/v/").concat(t))}},e),Pt.a.createElement(Bn.a.Divider,{icon:"right angle"}),Pt.a.createElement(Bn.a.Section,{active:!0},n))}},{key:"renderMain",value:function(){var e=this.getVersion(),t=this.getInstance(),n=e.id,r=e.title,o=e.descHtml,a=t.updatedAt,i=t.updatedBy,u=t.statusSummary,c=u.statusMsg,s=u.statusLabel,l=u.statusColor,f=u.msgSpread,d=this.getUserDisplayName(),p=d.isSystem({uid:i});return Pt.a.createElement(Pt.a.Fragment,null,Pt.a.createElement("div",{className:"flex mb2"},Pt.a.createElement(Tt.a,{as:"h3",color:"grey",className:"mt0 flex-auto ellipsis"},Pt.a.createElement(Ut.a,{color:l,className:"ml0 mr1"},s),Pt.a.createElement(Ut.a,{color:"blue",className:"ml0 mr1"},"Workflow Instance"),r," - ",t.id,Pt.a.createElement(Tt.a.Subheader,{className:"fs-9 color-grey mt1"},Pt.a.createElement("div",null,"updated ",Pt.a.createElement(Ft.a,{date:a})," ",p?"":Pt.a.createElement("span",{className:"ml1"},"by ",d.getDisplayName({uid:i}))))),Pt.a.createElement("div",{className:"ml1"},Pt.a.createElement("span",{className:"ellipsis pr1 fs-9 breakout color-grey"},n),Pt.a.createElement("span",{className:"fs-9 color-grey"},e.v))),Pt.a.createElement("div",{className:"mb3"},Pt.a.createElement("div",{dangerouslySetInnerHTML:{__html:o}})),this.displayInstanceStatusMsg(c,f),Pt.a.createElement(Jr.a,{percent:100,size:"tiny",color:l}),this.renderSteps(t.steps))}},{key:"displayInstanceStatusMsg",value:function(e,t){return e?Pt.a.createElement(Gn.a,t,e):null}},{key:"renderSteps",value:function(e){return S.a.isEmpty(e)?"This workflow instance does not have any steps":Pt.a.createElement(Kt.a,{basic:"very",celled:!0,striped:!0,stackable:!0},Pt.a.createElement(Kt.a.Header,null,Pt.a.createElement(Kt.a.Row,null,Pt.a.createElement(Kt.a.HeaderCell,null,"Step"),Pt.a.createElement(Kt.a.HeaderCell,null,"Status"))),Pt.a.createElement(Kt.a.Body,null,S.a.map(e,(function(e,t){return Pt.a.createElement(Kt.a.Row,{key:t},Pt.a.createElement(Kt.a.Cell,{textAlign:"left",className:"fs-9"},Pt.a.createElement("div",null,Pt.a.createElement("span",{className:"mr2 bold"},t+1)," ",e.title),e.statusMsg&&Pt.a.createElement("div",{className:"color-".concat(e.statusColor||"grey"," breakout ml3 mt2")},e.statusMsg)),Pt.a.createElement(Kt.a.Cell,{collapsing:!0,textAlign:"center",className:"fs-9"},Pt.a.createElement(Ut.a,{size:"tiny",color:e.statusColor},e.statusLabel)))}))))}}]),n}(Pt.a.Component);Object(Mt.decorate)(Xr,{});var eo=Object(At.inject)("workflowsStore","userDisplayName")(Object(jt.o)(Object(At.observer)(Xr)));var to={registerRoutes:function(e,t){return t.location,t.appContext,new Map([].concat(Object(ve.a)(e),[["/workflow-templates/drafts/edit/:draftId",Et()(Er)],["/workflow-templates",Et()(Mn)],["/workflows/drafts/edit/:draftId",Et()(Lr)],["/workflows/published/id/:workflowId/v/:version/instances/id/:instanceId",Et()(eo)],["/workflows/published/id/:workflowId/v/:version",Et()(Zr)],["/workflows",Et()(Nr)]]))}},no=n(751),ro=n.n(no),oo=n(752),ao=n.n(oo),io=n(753),uo=n.n(io),co=n(754),so=n.n(co),lo=n(755),fo=n.n(lo),po=n(765),mo=n.n(po),vo=n(766),yo=n.n(vo),ho=n(767),go=n.n(ho),bo=n(768),Eo=n.n(bo);function wo(e){return Object(C.httpApiPost)("api/key-pairs/",{data:e})}function So(e){return Object(C.httpApiDelete)("api/key-pairs/".concat(e))}var ko={active:{color:"green",display:"Active",tip:"You can use this key when connecting to your workspaces."},inactive:{color:"grey",display:"Inactive",tip:"You can not use this key when connecting to your workspaces."}},Oo=k.types.model("KeyPair",{id:k.types.identifier,rev:k.types.maybe(k.types.number),owner:"",name:"",status:"",publicKey:"",desc:k.types.maybeNull(k.types.string),updatedAt:"",updatedBy:"",createdAt:"",createdBy:"",privateKey:""}).actions((function(e){return{setKeyPair(t){Object(k.applySnapshot)(e,t)}}})).views((function(e){return{get statusInfo(){return ko[e.status]||{color:"grey",display:"Unknown",tip:"Something not right"}}}})),Co=O.BaseStore.named("KeyPairsStore").props({keyPairs:k.types.optional(k.types.map(Oo),{}),tickPeriod:3e4}).actions((function(e){var t=e.cleanup;return{doLoad:()=>Object(E.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(C.httpApiGet)("api/key-pairs/");case 2:n=t.sent,e.runInAction((function(){Object(xe.consolidateToMap)(e.keyPairs,n,(function(e,t){e.setKeyPair(t)}))}));case 4:case"end":return t.stop()}}),t)})))(),addKeyPair(t){var n=t.id,r=e.keyPairs.get(n);r?r.setKeyPair(t):e.keyPairs.put(t)},createKetPair:t=>Object(E.a)(b.a.mark((function n(){var r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,wo(t);case 2:return r=n.sent,e.addKeyPair(r),n.abrupt("return",e.getKeyPair(r.id));case 5:case"end":return n.stop()}}),n)})))(),deleteKeyPair:t=>Object(E.a)(b.a.mark((function n(){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,So(t);case 2:e.runInAction((function(){e.keyPairs.delete(t)}));case 3:case"end":return n.stop()}}),n)})))(),cleanup:function(){e.keyPairs.clear(),t()}}})).views((function(e){return{get empty(){return 0===e.keyPairs.size},get total(){return e.keyPairs.size},get list(){return S.a.orderBy(Object(Mt.values)(e.keyPairs),["createdAt","name"],["desc","asc"])},get listActive(){return S.a.filter(e.list,(function(e){return"active"===e.status}))},getKeyPair:t=>e.keyPairs.get(t)}}));var Po={registerAppContextItems:function(e){!function(e){e.keyPairsStore=Co.create({},e)}(e)}};var Ao={registerMenuItems:function(e,t){return t.location,t.appContext,new Map([].concat(Object(ve.a)(e),[["/key-pair-management",{title:"SSH Keys",icon:"terminal",shouldShow:!0}]]))}},jo=n(44),Io=n.n(jo),xo=n(2196),To=n(2149),No=n(2209),_o=n(345),Do=n(769),Ro=n.n(Do),Mo=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(e){var r;return Object(wt.a)(this,n),(r=t.call(this,e)).handleDelete=Object(E.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.processingButton="delete",e.prev=1,t=r.keyPair.name,n=r.keyPairsStore,e.next=6,n.deleteKeyPair(r.keyPair.id);case 6:Object(Wt.displaySuccess)('The key "'.concat(t,'" was successfully deleted')),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),Object(Wt.displayError)(e.t0);case 12:return e.prev=12,Object(Mt.runInAction)((function(){r.processingButton=""})),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])}))),Object(Mt.runInAction)((function(){r.processingButton=""})),r}return Object(St.a)(n,[{key:"render",value:function(){var e=!!this.processingButton;return Pt.a.createElement("div",null,Pt.a.createElement(En.a,{trigger:Pt.a.createElement(bn.a,{floated:"right",basic:!0,color:"red",size:"mini",className:"mt1 mb1",loading:e},"Delete"),header:"Are you sure?",content:"This action can not be reverted.",actions:["Cancel",{key:"delete",content:"Delete",negative:!0,onClick:this.handleDelete}],size:"mini"}))}},{key:"keyPair",get:function(){return this.props.keyPair}},{key:"keyPairsStore",get:function(){return this.props.keyPairsStore}}]),n}(Pt.a.Component);Object(Mt.decorate)(Mo,{keyPair:Mt.computed,keyPairsStore:Mt.computed,processingButton:Mt.observable,handleDelete:Mt.action});var Bo=Object(At.inject)("keyPairsStore")(Object(jt.o)(Object(At.observer)(Mo))),Fo=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(){return Object(wt.a)(this,n),t.apply(this,arguments)}return Object(St.a)(n,[{key:"render",value:function(){return Pt.a.createElement(Pt.a.Fragment,null,this.props.children)}}]),n}(Pt.a.Component),Uo=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(){return Object(wt.a)(this,n),t.apply(this,arguments)}return Object(St.a)(n,[{key:"render",value:function(){var e=this.keyPair;return Pt.a.createElement(Pt.a.Fragment,null,this.renderStatus(e),this.renderTitle(e),e.desc||"No description was provided.",this.renderTabs(e))}},{key:"renderButtons",value:function(e){return Pt.a.createElement(Bo,{keyPair:e})}},{key:"renderTabs",value:function(e){var t=this,n=[{menuItem:"Public Key",render:function(){return Pt.a.createElement(Vt.a.Pane,{attached:!1,key:"public-key",as:Fo},Pt.a.createElement(Qt.a,null,(function(){return t.renderPublicKey(e)})))}},{menuItem:"Private Key",render:function(){return Pt.a.createElement(Vt.a.Pane,{attached:!1,key:"private-key",as:Fo},Pt.a.createElement(Qt.a,null,(function(){return t.renderPrivateKey()})))}}];return Pt.a.createElement(Vt.a,{className:"mt2",menu:{secondary:!0,pointing:!0},renderActiveOnly:!0,panes:n})}},{key:"renderDesc",value:function(e){return Pt.a.createElement("p",null,e.desc||"No description was provided.")}},{key:"renderPublicKey",value:function(e){return Pt.a.createElement("div",{className:"mt2"},Pt.a.createElement(xo.a,{className:"flex"},Pt.a.createElement(To.a,{className:"flex-auto",rows:10,value:e.publicKey}),Pt.a.createElement(No.a,{content:"Copy",trigger:Pt.a.createElement(_o.CopyToClipboard,{className:"ml2 mr0 mt2",text:e.publicKey,style:{cursor:"pointer"},onCopy:function(){return Object(Wt.displaySuccess)("Copied to clipboard","Done")}},Pt.a.createElement(Nt.a,{name:"copy outline",size:"large"}))})))}},{key:"renderPrivateKey",value:function(){return Pt.a.createElement(xt.a,{placeholder:!0},Pt.a.createElement(Tt.a,{icon:!0,className:"color-grey"},Pt.a.createElement(Nt.a,{name:"key"}),"Not Available",Pt.a.createElement(Tt.a.Subheader,null,"The private key is only available for download at the time of creating a key. This application does not store the private key.")))}},{key:"renderStatus",value:function(e){var t=e.statusInfo;return Pt.a.createElement("div",{style:{cursor:"default"}},Pt.a.createElement(No.a,{trigger:Pt.a.createElement(Ut.a,{attached:"top left",size:"mini",color:t.color},t.display)},t.tip))}},{key:"renderTitle",value:function(e){return Pt.a.createElement("div",{className:"clearfix flex"},Pt.a.createElement(Tt.a,{as:"h3",className:"mt1 flex-auto"},e.name,Pt.a.createElement(Tt.a.Subheader,null,Pt.a.createElement("span",{className:"fs-8 color-grey"},"Created ",Pt.a.createElement(Ft.a,{date:e.createdAt,className:"mr2"})," ",Pt.a.createElement(Ro.a,{uid:e.createdBy,className:"mr2"})),Pt.a.createElement("span",{className:"fs-8 color-grey mr2"}," ",e.id))),Pt.a.createElement(Bo,{keyPair:e}))}},{key:"keyPair",get:function(){return this.props.keyPair}}]),n}(Pt.a.Component);Object(Mt.decorate)(Uo,{keyPair:Mt.computed});var Lo=Object(At.inject)()(Object(jt.o)(Object(At.observer)(Uo))),Wo=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(){var e;Object(wt.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleCreateKeyPair=function(t){t.preventDefault(),t.stopPropagation(),Object(_t.gotoFn)(Object(gn.a)(e))("/key-pair-management/create")},e}return Object(St.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0);var e=this.keyPairsStore;Object(xe.swallowError)(e.load())}},{key:"render",value:function(){var e=this.keyPairsStore,t=null;return t=Object(O.isStoreError)(e)?Pt.a.createElement(Rt.a,{error:e.error,className:"p0"}):Object(O.isStoreLoading)(e)?Pt.a.createElement(Io.a,{segmentCount:1}):Object(O.isStoreEmpty)(e)?this.renderEmpty():Object(O.isStoreNotEmpty)(e)?this.renderMain():null,Pt.a.createElement(It.a,{className:"mt3 animated fadeIn"},this.renderTitle(),t)}},{key:"renderMain",value:function(){var e=this.keyPairsStore.list;return Pt.a.createElement("div",null,S.a.map(e,(function(e){return Pt.a.createElement(xt.a,{className:"p3 mb4",clearing:!0,key:e.id},Pt.a.createElement(Lo,{keyPair:e}))})))}},{key:"renderEmpty",value:function(){return Pt.a.createElement(xt.a,{placeholder:!0},Pt.a.createElement(Tt.a,{icon:!0,className:"color-grey"},Pt.a.createElement(Nt.a,{name:"terminal"}),"No SSH Keys",Pt.a.createElement(Tt.a.Subheader,null,"To create an SSH key, click Create Key.")))}},{key:"renderTitle",value:function(){return Pt.a.createElement("div",{className:"mb3 flex"},Pt.a.createElement(Tt.a,{as:"h3",className:"color-grey mt1 mb0 flex-auto"},Pt.a.createElement(Nt.a,{name:"key",className:"align-top"}),Pt.a.createElement(Tt.a.Content,{className:"left-align"},"SSH Keys ",this.renderTotal())),Pt.a.createElement("div",null,Pt.a.createElement(bn.a,{color:"blue",size:"medium",basic:!0,onClick:this.handleCreateKeyPair},"Create Key")))}},{key:"renderTotal",value:function(){var e=this.keyPairsStore;return Object(O.isStoreError)(e)||Object(O.isStoreLoading)(e)?null:Pt.a.createElement(Ut.a,{circular:!0},e.total)}},{key:"keyPairsStore",get:function(){return this.props.keyPairsStore}}]),n}(Pt.a.Component);Object(Mt.decorate)(Wo,{keyPairsStore:Mt.computed,handleCreateKeyPair:Mt.action});var Ho=Object(At.inject)("keyPairsStore")(Object(jt.o)(Object(At.observer)(Wo))),zo=n(443),Qo=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(){return Object(wt.a)(this,n),t.apply(this,arguments)}return Object(St.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){return Pt.a.createElement(It.a,{className:"mt3 animated fadeIn"},this.renderBreadcrumb(),this.renderForm())}},{key:"renderForm",value:function(){var e=Object(_t.gotoFn)(this);return Pt.a.createElement(xt.a,{clearing:!0,className:"p3 mb3"},Pt.a.createElement(zo.default,{onCancel:function(){return e("/key-pair-management")}}))}},{key:"renderBreadcrumb",value:function(){var e=Object(_t.gotoFn)(this);return Pt.a.createElement(Bn.a,{className:"block mb3"},Pt.a.createElement(Bn.a.Section,{link:!0,onClick:function(){return e("/key-pair-management")}},"SSH Keys"),Pt.a.createElement(Bn.a.Divider,{icon:"right angle"}),Pt.a.createElement(Bn.a.Section,{active:!0},"Create Key"))}}]),n}(Pt.a.Component);Object(Mt.decorate)(Qo,{});var Vo=Object(At.inject)()(Object(jt.o)(Object(At.observer)(Qo)));var Go={registerRoutes:function(e,t){return t.location,t.appContext,new Map([].concat(Object(ve.a)(e),[["/key-pair-management/create",Et()(Vo)],["/key-pair-management",Et()(Ho)]]))}},Ko=n(268),qo=n.n(Ko),Yo=n(269);var $o=Yo.a.model("Hello",{message:""}).actions((function(e){return{}})).views((function(e){return{}})),Zo=O.BaseStore.named("HelloStore").props({hellos:Yo.a.optional(Yo.a.array($o),[])}).actions((function(e){var t=e.cleanup;return{doLoad:()=>Object(E.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(C.httpApiGet)("api/hello");case 2:n=t.sent,e.runInAction((function(){e.hellos.replace(n)}));case 4:case"end":return t.stop()}}),t)})))(),cleanup(){e.hellos.clear(),t()}}})).views((function(e){return{get empty(){return 0===e.hellos.length},get total(){return e.hellos.length},get list(){return qo.a.sortBy(qo.a.slice(e.hellos),"message")}}}));var Jo={registerAppContextItems:function(e){!function(e){e.helloStore=Zo.create({},e)}(e)}};function Xo(){return(Xo=Object(E.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ea(){return(ea=Object(E.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ta={init:function(e,t){return Xo.apply(this,arguments)},postInit:function(e,t){return ea.apply(this,arguments)}};var na={registerMenuItems:function(e,t){return t.location,t.appContext,new Map(Object(ve.a)(e))}},ra=n(14),oa=n.n(ra),aa=n(28),ia=n(450),ua=n(2213),ca=n(2206),sa=n(2211),la=n(2207),fa=n(452),da=function(e){Object(kt.a)(n,e);var t=Object(Ot.a)(n);function n(){return Object(wt.a)(this,n),t.apply(this,arguments)}return Object(St.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0);var e=this.helloStore;Object(O.isStoreReady)(e)||Object(xe.swallowError)(e.load())}},{key:"goto",value:function(e){var t=Object(_t.gotoFn)(this);t(e)}},{key:"render",value:function(){var e,t=this.helloStore;return t?(e=Object(O.isStoreError)(t)?oa.a.createElement(Rt.a,{error:t.error,className:"mt3 mr0 ml0"}):Object(O.isStoreLoading)(t)?oa.a.createElement(Io.a,{segmentCount:1,className:"mt3 mr0 ml0"}):Object(O.isStoreEmpty)(t)?this.renderEmpty():this.renderContent(),oa.a.createElement(ca.a,{className:"mt3"},this.renderTitle(),e)):null}},{key:"renderContent",value:function(){var e=this.helloStore.list;return oa.a.createElement(sa.a.Group,{className:"mt3"},qo.a.map(e,(function(e,t){return oa.a.createElement(sa.a,{key:t},e.message)})))}},{key:"renderEmpty",value:function(){return oa.a.createElement(sa.a,{placeholder:!0,className:"mt3"},oa.a.createElement(la.a,{icon:!0,className:"color-grey"},oa.a.createElement(fa.a,{name:"coffee"}),"Hello",oa.a.createElement(la.a.Subheader,null,"Sorry, no hello messages to display")))}},{key:"renderTitle",value:function(){return oa.a.createElement("div",{className:"flex"},oa.a.createElement(la.a,{as:"h3",className:"color-grey mt1 mb0 flex-auto"},oa.a.createElement(fa.a,{name:"hand spock",className:"align-top"}),oa.a.createElement(la.a.Content,{className:"left-align"},"Hello")))}},{key:"helloStore",get:function(){return this.props.helloStore}}]),n}(oa.a.Component);Object(aa.n)(da,{helloStore:aa.k});var pa=Object(ia.a)("helloStore")(Object(ua.a)(Object(ia.b)(da)));var ma={registerRoutes:function(e,t){return t.location,t.appContext,new Map([].concat(Object(ve.a)(e),[["/hello",Et()(pa)]]))},getDefaultRouteLocation:function(e){e.location,e.appContext}},va={"app-context-items":[u.a,ht,Eo.a,Po,ro.a,Jo],initialization:[s.a,ao.a,ta],authentication:[f.a],"app-component":[p.a,uo.a],"menu-items":[v.a,gt,yo.a,Ao,so.a,na],routes:[h.a,to,go.a,Go,fo.a,ma],"env-type-management":[mo.a]};var ya={getPlugins:function(e){return va[e]}};n(2132),n(2133),n(2134),n(2135),n(2136),n(2137),n(2138);a()({renderAppContainer:r.renderAppContainer,renderError:r.renderError,renderProgress:r.renderProgress,pluginRegistry:ya})},228:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=f(n(5)),o=f(n(0)),a=n(12),i=n(16),u=f(n(6)),c=f(n(159)),s=f(n(160)),l=f(n(161));function f(e){return e&&e.__esModule?e:{default:e}}var d=(0,a.observer)((function(e){var t=e.field,n=e.disabled,a=void 0!==n&&n,f=e.size,d=void 0===f?"small":f,p=e.className,m=void 0===p?"mb4":p,v=e.onClick,y=t.id,h=t.value,g=t.sync,b=t.error,E=void 0===b?"":b,w=t.extra,S=void 0===w?{}:w,k=S.yesLabel,O=void 0===k?"Yes":k,C=S.noLabel,P=void 0===C?"No":C,A=S.yesValue,j=void 0===A||A,I=S.noValue,x=void 0!==I&&I,T=S.showHeader,N=void 0===T||T,_=!r.default.isEmpty(E),D=t.disabled||a,R=D?"disabled":"",M=_?"error":"",B=h===j,F=h===x,U=function(e){return function(n){n.preventDefault(),n.stopPropagation(),g(e),t.validate({showErrors:!0}),v&&v(e,t)}},L={onClick:U(j),disabled:D},W={onClick:U(x),disabled:D};return B&&(L.color="teal"),F&&(W.color="teal"),o.default.createElement("div",{className:(0,u.default)(m,M,R)},o.default.createElement("div",{className:"flex flex-wrap mb1"},N&&o.default.createElement(c.default,{field:t,className:"mt1 mb0 mr2"}),o.default.createElement("div",null,o.default.createElement(i.Button.Group,{id:y,size:d},o.default.createElement(i.Button,L,O),o.default.createElement(i.Button.Or,null),o.default.createElement(i.Button,W,P)))),o.default.createElement(s.default,{field:t}),o.default.createElement(l.default,{field:t}))}));t.default=d},229:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(5)),a=i(n(296));function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){u(a,r,o,i,c,"next",e)}function c(e){u(a,r,o,i,c,"throw",e)}i(void 0)}))}}function s(e){return o.default.transform(e,(function(e,t,n){return t.rules&&(e[n]=t.rules),e}),{})}function l(){return(l=c(r.mark((function e(t,n){var o,i;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=s(n))&&(i=new a.default(t,o)),e.abrupt("return",i);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f=function(e,t){return l.apply(this,arguments)};t.default=f},230:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={appIdToken:"appIdToken",pinToken:"pin",workspacesFilterName:"workspacesFilterName"};t.default=r},265:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(5)),o=u(n(0)),a=n(12),i=n(16);function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,a.observer)((function(e){var t=e.rows,n=void 0===t?[]:t,a=e.className,u=void 0===a?"":a;return 0===n.length?null:o.default.createElement(i.Table,{basic:"very",className:"animated fadeIn ".concat(u)},o.default.createElement(i.Table.Header,null,o.default.createElement(i.Table.Row,null,o.default.createElement(i.Table.HeaderCell,{width:10},"Key"),o.default.createElement(i.Table.HeaderCell,{width:6},"Value"))),o.default.createElement(i.Table.Body,null,r.default.map(n,(function(e,t){return o.default.createElement(i.Table.Row,{key:t},o.default.createElement(i.Table.Cell,{width:10},function(e){var t=e.title,n=void 0===t?"":t,a=e.name;if(!r.default.isEmpty(n))return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",null,n),o.default.createElement("div",{className:"fs-7 color-grey"},a));return o.default.createElement("div",null,a)}(e)),o.default.createElement(i.Table.Cell,{width:6},function(e){var t=e.value,n=r.default.isNil(t),o=r.default.isString(t)&&r.default.isEmpty(t);return n||o?"Not Provided":t.toString()}(e)))}))))}));t.default=c},27:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.mapToArray=function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t},t.parseError=function(e){var t=o.default.get(e,"message","Something went wrong"),n=o.default.get(e,"code"),r=o.default.get(e,"status"),a=o.default.get(e,"requestId"),i=new Error(t);return i.code=n,i.requestId=a,i.root=e,i.status=r,i},t.swallowError=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return{}};try{return Promise.resolve().then((function(){return e})).catch((function(e){return t(e)}))}catch(n){return t(n)}},t.delay=function(e){return new Promise((function(t){o.default.delay(t,1e3*e)}))},t.niceNumber=function(e){return o.default.isNil(e)||o.default.isString(e)&&o.default.isEmpty(e)?"N/A":(0,a.default)(e).format("0,0")},t.plural=function(e,t,n){return 1===n?e:t},t.getQueryParam=function(e,t){return new URL(e).searchParams.get(t)},t.removeQueryParams=function(e,t){var n=new URL(e),r=n.searchParams;t.forEach((function(e){r.delete(e)}));var o=n.origin+n.pathname;r.toString()&&(o+="?".concat(r.toString()));return o+=n.hash},t.addQueryParams=function(e,t){var n=new URL(e),r=n.searchParams;o.default.keys(t).forEach((function(e){r.append(e,t[e])}));var a=n.origin+n.pathname;r.toString()&&(a+="?".concat(r.toString()));return a+=n.hash},t.getFragmentParam=function(e,t){var n=o.default.get(e,"hash")||new URL(e).hash,r={},a=n.substring(1).split("&");a&&a.forEach((function(e){var t=e.split("="),n=t[0],o=t[1];o&&(r[n]=o)}));return r[t]},t.removeFragmentParams=function(e,t){var n=new URL(e),r=n.hash,a="#",i=r.substring(1).split("&");i&&i.forEach((function(e){var n=e.split("="),r=n[0],i=n[1];i&&o.default.indexOf(t,r)<0&&(a="".concat(a).concat(r,"=").concat(i))}));return"".concat(n.protocol,"//").concat(n.host).concat(n.search).concat("#"===a?"":a)},t.nicePrice=function(e){return o.default.isNil(e)||o.default.isString(e)&&o.default.isEmpty(e)?"N/A":(0,a.default)(e).format("0,0.00")},t.removeNulls=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t)return t;return Object.keys(t).forEach((function(n){null===t[n]&&delete t[n],o.default.isPlainObject(t[n])&&e(t[n])})),t},t.chopRight=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return o.default.endsWith(e,t)?e.substring(0,e.length-t.length):e},t.childrenArrayToMap=function(e){var t={};return e.forEach((function(e){var n=o.default.keys(e)[0];t[n]=e[n]})),t},t.isAbsoluteUrl=function(e){return/^https?:/.test(e)},t.generateId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f+=1,"".concat(e,"_").concat(f,"_").concat(Date.now(),"_").concat(o.default.random(0,1e3))},t.consolidateToMap=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"id",a={};e.forEach((function(e,t){a[t]=!0})),t.forEach((function(t){var o=t[r],i=e.has(o),u=e.get(o);u?n(u,t):e.set(t[r],t),i&&delete a[o]})),o.default.forEach(a,(function(t,n){e.delete(n)}))},t.flattenObject=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};function i(e,t){return o.default.isNil(t)?o.default.isNumber(e)?r?"".concat(r,"[").concat(e,"]"):"[".concat(e,"]"):r?"".concat(r,".").concat(e):e:r?"".concat(r,".").concat(e,"[").concat(t,"]"):"".concat(e,"[").concat(t,"]")}return o.default.transform(t,(function(t,r,a){if(n(t,r,a))if(o.default.isArray(r)){var u=0;o.default.forEach(r,(function(r){var c=i(a,u);o.default.isObject(r)?e(r,n,c,t):t[c]=r,++u}))}else{var c=i(a);o.default.isObject(r)?e(r,n,c,t):t[c]=r}return t}),a)},t.unFlattenObject=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};return o.default.transform(e,(function(e,n,r){return t(e,n,r)&&o.default.set(e,r,n),e}),{})},t.toUTCDate=function(e){return o.default.isEmpty(e)?e:o.default.isString(e)?o.default.endsWith(e,"Z")?e:"".concat(e,"Z"):e},t.getOptionsFromRules=function(e){var t=[];return e.forEach((function(e){"object"===s(e)&&"in"in e&&(t=e.in.map((function(e){return{key:e,text:e,value:e}})))})),t},t.validRegions=function(){return["us-east-2","us-east-1","us-west-1","us-west-2","ap-east-1","ap-south-1","ap-northeast-3","ap-northeast-2","ap-southeast-1","ap-southeast-2","ap-northeast-1","ca-central-1","cn-north-1","cn-northwest-1","eu-central-1","eu-west-1","eu-west-2","eu-west-3","eu-north-1","me-south-1","sa-east-1","us-gov-east-1","us-gov-west-1"].sort()},t.formatBytes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var n=1024,r=t<0?0:t,o=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],a=Math.floor(Math.log(e)/Math.log(n));return"".concat(parseFloat((e/Math.pow(n,a)).toFixed(r))," ").concat(o[a])},t.processInBatches=d,t.processSequentially=function(e,t){return m.apply(this,arguments)},t.isFloat=t.storage=void 0;var o=i(n(5)),a=i(n(969));function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){u(a,r,o,i,c,"next",e)}function c(e){u(a,r,o,i,c,"throw",e)}i(void 0)}))}}function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=(0,n(3).observable)({clear:function(){try{return localStorage?localStorage.clear():window.localStorage.clear()}catch(e){console.log(e);try{return sessionStorage?sessionStorage.clear():window.sessionStorage.clear()}catch(t){return console.log(t)}}},getItem:function(e){try{return localStorage?localStorage.getItem(e):window.localStorage.getItem(e)}catch(t){console.log(t);try{return sessionStorage?sessionStorage.getItem(e):window.sessionStorage.getItem(e)}catch(n){return console.log(n)}}},setItem:function(e,t){try{return localStorage?localStorage.setItem(e,t):window.localStorage.setItem(e,t)}catch(n){console.log(n);try{return sessionStorage?sessionStorage.setItem(e,t):window.sessionStorage.setItem(e,t)}catch(r){return console.log(r)}}},removeItem:function(e){try{return localStorage?localStorage.removeItem(e):window.localStorage.removeItem(e)}catch(t){console.log(t);try{return sessionStorage?sessionStorage.removeItem(e):window.sessionStorage.removeItem(e)}catch(n){return console.log(n)}}}});t.storage=l;t.isFloat=function(e){return e%1!==0};var f=0;function d(e,t,n){return p.apply(this,arguments)}function p(){return(p=c(r.mark((function e(t,n,a){var i,u,c,s,l;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=o.default.chunk(t,n),u=[],c=0;case 3:if(!(c<=i.length)){e.next=12;break}return s=i[c],e.next=7,Promise.all(o.default.map(s,a));case 7:l=e.sent,u=o.default.concat(u,l);case 9:c+=1,e.next=3;break;case 12:return e.abrupt("return",u);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=c(r.mark((function e(t,n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d(t,1,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},308:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toIdpOptions=function(e){var t=[];return o.default.forEach(e,(function(e){var n=e.config;o.default.isEmpty(n.federatedIdentityProviders)||o.default.forEach(n.federatedIdentityProviders,(function(n){t.push({key:n.id,text:n.name,value:JSON.stringify({authNProviderId:e.id,idpName:n.name})})}))})),t},t.toIdpFromValue=function(e){return JSON.parse(e)},t.toValueFromIdp=function(e){var t=e.authenticationProviderId,n=e.identityProviderName;return JSON.stringify({authNProviderId:t,idpName:n})};var r,o=(r=n(5))&&r.__esModule?r:{default:r}},310:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n(0)),a=n(12),i=n(3),u=n(31),c=s(n(6));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t,n,r,a=p(i);function i(){return l(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props.skipPrefix,t=this.uid,n=this.userDisplayName;return n.isSystem({uid:t})?"":o.default.createElement("span",{className:(0,c.default)(this.props.className)},e?"":"by ",n.getDisplayName({uid:t}))}},{key:"uid",get:function(){return this.props.uid}},{key:"userDisplayName",get:function(){return this.props.userDisplayName}}])&&f(t.prototype,n),r&&f(t,r),i}(o.default.Component);(0,i.decorate)(y,{});var h=(0,a.inject)("userDisplayName")((0,u.withRouter)((0,a.observer)(y)));t.default=h},311:function(e,t,n){"use strict";var r={notApproved:"not-approved",approved:"approved",isApproved:function(e){return e===r.approved},isNotApproved:function(e){return!e||e===r.notApproved},getValidStatuses:function(){return[r.notApproved,r.approved]}};e.exports=r},312:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=c(n(0)),a=n(3),i=n(16),u=c(n(49));function c(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(d,e);var t,n,r,c=f(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),t=c.call(this,e),(0,a.runInAction)((function(){t.form=e.form,t.wizard=e.wizard})),t}return t=d,(n=[{key:"render",value:function(){var e=this,t=this.props.form;return o.default.createElement(i.Segment,{clearing:!0,className:"mt3 p3"},o.default.createElement(u.default,{form:t,onCancel:this.props.onCancel,onSuccess:this.props.onSubmit},(function(n){var r=n.processing,a=n.onCancel;return o.default.createElement(o.default.Fragment,null,e.renderFormFields({form:t,processing:r,onCancel:a}),e.renderActionButtons({processing:r,onCancel:a}))})))}},{key:"renderActionButtons",value:function(e){var t=e.processing,n=e.onCancel,r=this.isEditAction(),a=r?"Save":this.props.wizardModel.hasNext?"Next":"Add";return o.default.createElement("div",null,o.default.createElement(i.Button,{className:"ml2 mb2",primary:!0,content:a,disabled:t,type:"submit",floated:"right"}),!r&&this.props.wizardModel.hasPrevious&&o.default.createElement(i.Button,{className:"ml2 mb2",primary:!0,content:"Previous",disabled:t,floated:"right",onClick:this.props.onPrevious}),o.default.createElement(i.Button,{basic:!0,color:"grey",disabled:t,onClick:n,floated:"left"},"Cancel"))}},{key:"isEditAction",value:function(){return"edit"===this.getAction()}},{key:"getAction",value:function(){return this.props.action}},{key:"getEnvTypeConfig",value:function(){return this.props.envTypeConfig}}])&&s(t.prototype,n),r&&s(t,r),d}(o.default.Component);t.default=m},313:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.getAllEnvTypeCandidatesNotImported=function(){return l.apply(this,arguments)},t.getLatestEnvTypeCandidatesNotImported=function(){return f.apply(this,arguments)},t.getAllEnvTypes=function(){return p.apply(this,arguments)},t.getApprovedEnvTypes=function(){return m.apply(this,arguments)},t.getNotApprovedEnvTypes=function(){return v.apply(this,arguments)},t.getEnvType=function(e){return d.apply(this,arguments)},t.createEnvType=function(e){return y.apply(this,arguments)},t.updateEnvType=function(e){return h.apply(this,arguments)},t.deleteEnvType=function(e){return g.apply(this,arguments)},t.approveEnvType=function(e,t){return b.apply(this,arguments)},t.revokeEnvType=function(e,t){return E.apply(this,arguments)},t.getEnvTypeConfigs=function(e){return w.apply(this,arguments)},t.getAllEnvTypeConfigs=function(e){return S.apply(this,arguments)},t.createEnvTypeConfig=function(e,t){return k.apply(this,arguments)},t.updateEnvTypeConfig=function(e,t){return O.apply(this,arguments)},t.deleteEnvTypeConfig=function(e,t){return C.apply(this,arguments)},t.getEnvTypeConfigVars=function(e){return P.apply(this,arguments)};var o,a=(o=n(5))&&o.__esModule?o:{default:o},i=n(43),u=n(27);function c(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){c(a,r,o,i,u,"next",e)}function u(e){c(a,r,o,i,u,"throw",e)}i(void 0)}))}}function l(){return(l=s(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u.removeNulls,e.next=3,(0,i.httpApiGet)("api/workspace-type-candidates",{params:{status:"not-imported",version:"*"}});case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=s(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u.removeNulls,e.next=3,(0,i.httpApiGet)("api/workspace-type-candidates",{params:{status:"not-imported"}});case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=s(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u.removeNulls,e.next=3,(0,i.httpApiGet)("api/workspace-types/".concat(t));case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=s(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u.removeNulls,e.next=3,(0,i.httpApiGet)("api/workspace-types",{params:{status:"*"}});case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=s(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u.removeNulls,e.next=3,(0,i.httpApiGet)("api/workspace-types",{params:{status:"approved"}});case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=s(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u.removeNulls,e.next=3,(0,i.httpApiGet)("api/workspace-types",{params:{status:"not-approved"}});case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=s(r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={id:t.id,name:t.name,desc:t.desc,status:t.status,product:{productId:t.product.productId},provisioningArtifact:{id:t.provisioningArtifact.id}},e.t0=u.removeNulls,e.next=4,(0,i.httpApiPost)("api/workspace-types",{data:n});case 4:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=s(r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={rev:t.rev,name:t.name,desc:t.desc,status:t.status},e.t0=u.removeNulls,e.next=4,(0,i.httpApiPut)("api/workspace-types/".concat(encodeURIComponent(t.id)),{data:n});case 4:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=s(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u.removeNulls,e.next=3,(0,i.httpApiDelete)("api/workspace-types/".concat(encodeURIComponent(t)));case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=s(r.mark((function e(t,n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u.removeNulls,e.next=3,(0,i.httpApiPut)("api/workspace-types/".concat(encodeURIComponent(t),"/approve"),{data:{rev:n}});case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=s(r.mark((function e(t,n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u.removeNulls,e.next=3,(0,i.httpApiPut)("api/workspace-types/".concat(encodeURIComponent(t),"/revoke"),{data:{rev:n}});case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=s(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u.removeNulls,e.next=3,(0,i.httpApiGet)("api/workspace-types/".concat(encodeURIComponent(t),"/configurations"));case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=s(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u.removeNulls,e.next=3,(0,i.httpApiGet)("api/workspace-types/".concat(encodeURIComponent(t),"/configurations?include=all"));case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=s(r.mark((function e(t,n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u.removeNulls,e.next=3,(0,i.httpApiPost)("api/workspace-types/".concat(encodeURIComponent(t),"/configurations"),{data:a.default.omit(n,["createdAt","createdBy","updatedAt","updatedBy","allowedToUse"])});case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=s(r.mark((function e(t,n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u.removeNulls,e.next=3,(0,i.httpApiPut)("api/workspace-types/".concat(encodeURIComponent(t),"/configurations/").concat(decodeURIComponent(n.id)),{data:a.default.omit(n,["createdAt","createdBy","updatedAt","updatedBy","allowedToUse"])});case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=s(r.mark((function e(t,n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u.removeNulls,e.next=3,(0,i.httpApiDelete)("api/workspace-types/".concat(encodeURIComponent(t),"/configurations/").concat(encodeURIComponent(n)));case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=s(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u.removeNulls,e.next=3,(0,i.httpApiGet)("api/workspace-types/".concat(encodeURIComponent(t),"/config-vars"));case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},33:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.displayError=s,t.displayWarning=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"20000";o.default.warning(l(e,t),"Warning!",u({},d,{timeOut:n})),t&&console.error(e,t);r.default.isError(e)&&console.error(e)},t.displaySuccess=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Submitted!";o.default.success(l(e),t,p)},t.displayFormErrors=function(e){var t=e.errors(),n=[];if(Object.keys(t).forEach((function(e){t[e]&&n.push(t[e])})),0===n.length)return s("The form submission has a problem.",void 0,3e3);var r=n.length>1;return s(["There ".concat(r?"are issues":"is an issue"," with the form:")].concat(n),void 0,3e3)};var r=a(n(5)),o=a(n(1031));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"20000";o.default.error(l(e,t),"We have a problem!",u({},f,{timeOut:n})),t&&console.error(e,t),r.default.isError(e)&&console.error(e)}function l(e,t){if(r.default.isError(e))return"".concat(e.message||e.friendly," <br/>&nbsp;");if(r.default.isError(t))return"".concat(e," - ").concat(t.message," <br/>&nbsp;");if(r.default.isArray(e)){var n=e,o=r.default.size(n);if(0===o)return"Unknown error <br/>&nbsp;";if(1===o)return"".concat(n[0],"<br/>&nbsp;");var a=[];return a.push("<br/>"),a.push("<ul>"),r.default.forEach(n,(function(e){a.push('<li style="margin-left: -20px;">'.concat(e,"</li>"))})),a.push("</ul><br/>&nbsp;"),a.join("")}return r.default.isEmpty(e)?"Unknown error <br/>&nbsp;":"".concat(e," <br/>&nbsp;")}var f={closeButton:!0,debug:!1,newestOnTop:!0,progressBar:!0,positionClass:"toast-top-right",preventDuplicates:!0,timeOut:"20000",extendedTimeOut:"50000"},d={closeButton:!0,debug:!1,newestOnTop:!0,progressBar:!0,positionClass:"toast-top-right",preventDuplicates:!0,timeOut:"20000",extendedTimeOut:"50000"},p={closeButton:!0,debug:!1,newestOnTop:!0,progressBar:!0,positionClass:"toast-top-right",preventDuplicates:!0,timeOut:"3000",extendedTimeOut:"10000"}},355:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderAppContainer=function(e,t){a.default.render(o.default.createElement(i.Provider,t,o.default.createElement(u.BrowserRouter,null,o.default.createElement(e,null))),document.getElementById("root"))},t.renderProgress=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.default.createElement(c.Message.Content,null,o.default.createElement(c.Message.Header,null,"Just one second"),"Great things are now happening, please wait!");a.default.render(o.default.createElement(c.Container,{text:!0,className:"pt4"},o.default.createElement(c.Message,{icon:!0},o.default.createElement(c.Icon,{name:"circle notched",loading:!0}),e)),document.getElementById("root"))},t.renderError=function(e){var t=r.default.get(e,"message","Unknown error");a.default.render(o.default.createElement(c.Container,{text:!0,className:"pt4"},o.default.createElement(c.Message,{negative:!0},o.default.createElement(c.Message.Header,null,"We have a problem"),o.default.createElement("p",null,t),o.default.createElement("p",null,"See if refreshing the browser will resolve your issue"))),document.getElementById("root"))};var r=s(n(5)),o=s(n(0)),a=s(n(113)),i=n(12),u=n(31),c=n(16);function s(e){return e&&e.__esModule?e:{default:e}}},38:function(e,t,n){"use strict";function r(e){var t=e.location;return{pathname:e.pathname,hash:t.hash,state:t.state}}Object.defineProperty(t,"__esModule",{value:!0}),t.createLink=r,t.createLinkWithSearch=function(e){var t=e.location,n=e.pathname,r=e.search;return{pathname:n,search:r||t.search,hash:t.hash,state:t.state}},t.reload=function(){setTimeout((function(){window.location.reload()}),150)},t.gotoFn=function(e){return function(t){var n=r({location:e.props.location,pathname:t});e.props.history.push(n)}.bind(e)}},39:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=c(n(5)),a=c(n(0)),i=n(12),u=n(16);function c(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(c,e);var t,n,r,i=d(c);function c(){var e;s(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).handleRetry=function(){Promise.resolve().then((function(){return e.props.onRetry()})).catch((function(e){}))},e}return t=c,(n=[{key:"render",value:function(){var e=this.props.error||"Hmm... something went wrong",t=o.default.isString(e)?e:o.default.get(e,"message","Hmm... something went wrong"),n=o.default.isFunction(this.props.onRetry),r=this.props.className?this.props.className:"p3";return a.default.createElement("div",{className:"".concat(r)},a.default.createElement(u.Message,{negative:!0,className:"clearfix"},a.default.createElement(u.Message.Header,null,"A problem was encountered"),a.default.createElement("p",null,t),n&&a.default.createElement(u.Button,{floated:"right",basic:!0,color:"red",onClick:this.handleRetry},"Retry")))}}])&&l(t.prototype,n),r&&l(t,r),c}(a.default.Component),y=(0,i.observer)(v);t.default=y},404:function(e,t){},426:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.scEnvironmentsStore=E.create({},e)},t.filterNames=t.ScEnvironmentsStore=void 0;var o,a,i=(o=n(5))&&o.__esModule?o:{default:o},u=n(3),c=n(8),s=n(27),l=n(15),f=n(55),d=n(1613),p=n(1614),m=n(1615);function v(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){v(a,r,o,i,u,"next",e)}function u(e){v(a,r,o,i,u,"throw",e)}i(void 0)}))}}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g={ALL:"all",AVAILABLE:"available",STOPPED:"stopped",PENDING:"pending",ERRORED:"errored",TERMINATED:"terminated"};t.filterNames=g;var b=(h(a={},g.ALL,(function(){return!0})),h(a,g.AVAILABLE,(function(e){return"COMPLETED"===e.status||"TAINTED"===e.status})),h(a,g.STOPPED,(function(e){return"STOPPED"===e.status})),h(a,g.PENDING,(function(e){return"PENDING"===e.status||"TERMINATING"===e.status||"STARTING"===e.status||"STOPPING"===e.status})),h(a,g.ERRORED,(function(e){return"FAILED"===e.status||"TERMINATING_FAILED"===e.status||"STARTING_FAILED"===e.status||"STOPPING_FAILED"===e.status})),h(a,g.TERMINATED,(function(e){return"TERMINATED"===e.status})),a),E=l.BaseStore.named("ScEnvironmentsStore").props({environments:c.types.optional(c.types.map(d.ScEnvironment),{}),environmentStores:c.types.optional(c.types.map(p.ScEnvironmentStore),{}),connectionStores:c.types.optional(c.types.map(m.ScEnvConnectionStore),{}),tickPeriod:3e4}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return y(r.mark((function t(){var n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,f.getScEnvironments)();case 2:n=t.sent,e.runInAction((function(){(0,s.consolidateToMap)(e.environments,n,(function(e,t){e.setScEnvironment(t)}))}));case 4:case"end":return t.stop()}}),t)})))()},addScEnvironment:function(t){var n=t.id,r=e.environments.get(n);r?r.setScEnvironment(t):e.environments.put(t)},createScEnvironment:function(t){return y(r.mark((function n(){var o;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.createScEnvironment)(t);case 2:return o=n.sent,e.addScEnvironment(o),n.abrupt("return",e.getScEnvironment(o.id));case 5:case"end":return n.stop()}}),n)})))()},terminateScEnvironment:function(t){return y(r.mark((function n(){var o;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.deleteScEnvironment)(t);case 2:if(o=e.getScEnvironment(t)){n.next=5;break}return n.abrupt("return");case 5:o.setStatus("TERMINATING");case 6:case"end":return n.stop()}}),n)})))()},startScEnvironment:function(t){return y(r.mark((function n(){var o;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.startScEnvironment)(t);case 2:if(o=e.getScEnvironment(t)){n.next=5;break}return n.abrupt("return");case 5:o.setStatus("STARTING");case 6:case"end":return n.stop()}}),n)})))()},stopScEnvironment:function(t){return y(r.mark((function n(){var o;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.stopScEnvironment)(t);case 2:if(o=e.getScEnvironment(t)){n.next=5;break}return n.abrupt("return");case 5:o.setStatus("STOPPING");case 6:case"end":return n.stop()}}),n)})))()},getScEnvironmentStore:function(t){var n=e.environmentStores.get(t);return n||(e.environmentStores.set(t,p.ScEnvironmentStore.create({envId:t})),n=e.environmentStores.get(t)),n},getScEnvConnectionStore:function(t){var n=e.connectionStores.get(t);return n||(e.connectionStores.set(t,m.ScEnvConnectionStore.create({envId:t})),n=e.connectionStores.get(t)),n},cleanup:function(){e.environments.clear(),e.environmentStores.clear(),e.connectionStores.clear(),t()}}})).views((function(e){return{get empty(){return 0===e.environments.size},get total(){return e.environments.size},get list(){return i.default.orderBy((0,u.values)(e.environments),["createdAt","name"],["desc","asc"])},filtered:function(t){var n=b[t]||function(){return!0},r=i.default.filter((0,u.values)(e.environments),n);return i.default.orderBy(r,["createdAt","name"],["desc","asc"])},getScEnvironment:function(t){return e.environments.get(t)},canChangeState:function(t){var n=e.environments.get(t).outputs,r=!1;return n.forEach((function(e){"Ec2WorkspaceInstanceId"!==e.OutputKey&&"NotebookInstanceName"!==e.OutputKey||(r=!0)})),r},get user(){return(0,c.getEnv)(e).userStore.user}}}));t.ScEnvironmentsStore=E},427:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=b(n(0)),i=b(n(713)),u=n(3),c=n(12),s=n(31),l=n(16),f=b(n(2141)),d=n(2140),p=b(n(49)),m=n(33),v=n(135),y=n(2046),h=b(n(677)),g=b(n(2047));function b(e){return e&&e.__esModule?e:{default:e}}function E(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){E(a,r,o,i,u,"next",e)}function u(e){E(a,r,o,i,u,"throw",e)}i(void 0)}))}}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=0,j=1,I=2,x=3,T=[{key:"user",icon:"user",title:"IAM User",description:"Create a user",active:!0},{key:"credentials",icon:"upload",title:"Credentials",description:"Attach credentials"},{key:"policy",icon:"file alternate outline",title:"IAM Policy",description:"Add permissions"},{key:"encrypt",icon:"user secret",title:"Encrypt",description:"Encrypt credentials"}],N=function(e){return'\n{\n  "Version": "2012-10-17",\n  "Statement": [\n    {\n      "Sid": "ec2",\n      "Effect": "Allow",\n      "Action": "ec2:*",\n      "Resource": "*"\n    },\n    {\n      "Sid": "cloudformation",\n      "Effect": "Allow",\n      "Action": "cloudformation:*",\n      "Resource": "*"\n    },\n    {\n      "Sid": "emr",\n      "Effect": "Allow",\n      "Action": "elasticmapreduce:*",\n      "Resource": "*"\n    },\n    {\n      "Sid": "sagemaker",\n      "Effect": "Allow",\n      "Action": "sagemaker:*",\n      "Resource": "*"\n    },\n    {\n      "Sid": "iamRoleAccess",\n      "Effect": "Allow",\n      "Action": [\n        "iam:GetRole",\n        "iam:CreateRole",\n        "iam:TagRole",\n        "iam:GetRolePolicy",\n        "iam:PutRolePolicy",\n        "iam:DeleteRolePolicy",\n        "iam:DeleteRole",\n        "iam:PassRole"\n      ],\n      "Resource": "arn:aws:iam::'.concat(e,':role/analysis-*"\n    },\n    {\n      "Sid": "iamInstanceProfileAccess",\n      "Effect": "Allow",\n      "Action": [\n        "iam:AddRoleToInstanceProfile",\n        "iam:CreateInstanceProfile",\n        "iam:GetInstanceProfile",\n        "iam:DeleteInstanceProfile",\n        "iam:RemoveRoleFromInstanceProfile"\n      ],\n      "Resource": "arn:aws:iam::').concat(e,':instance-profile/analysis-*"\n    },\n    {\n      "Sid": "iamRoleServicePolicyAccess",\n      "Effect": "Allow",\n      "Action": [\n        "iam:AttachRolePolicy",\n        "iam:DetachRolePolicy"\n      ],\n      "Resource": "arn:aws:iam::').concat(e,':role/analysis-*",\n      "Condition": {\n        "ArnLike": {\n          "iam:PolicyARN": "arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceRole"\n        }\n      }\n    },\n    {\n      "Sid": "iamServiceLinkedRoleCreateAccess",\n      "Effect": "Allow",\n      "Action": [\n        "iam:CreateServiceLinkedRole",\n        "iam:PutRolePolicy"\n      ],\n      "Resource": "arn:aws:iam::*:role/aws-service-role/elasticmapreduce.amazonaws.com*/AWSServiceRoleForEMRCleanup*",\n      "Condition": {\n        "StringLike": {\n          "iam:AWSServiceName": [\n            "elasticmapreduce.amazonaws.com",\n            "elasticmapreduce.amazonaws.com.cn"\n          ]\n        }\n      }\n    },\n    {\n      "Sid": "s3",\n      "Effect": "Allow",\n      "Action": "s3:*",\n      "Resource": "*"\n    },\n    {\n      "Sid": "ssm",\n      "Effect": "Allow",\n      "Action": "ssm:*",\n      "Resource": "*"\n    },\n    {\n      "Sid": "kms",\n      "Effect": "Allow",\n      "Action": "kms:*",\n      "Resource": "*"\n    }\n  ]\n}\n').trim()},_=new Map([["User name","username"],["Password","password"],["Access key ID","accessKeyId"],["Secret access key","secretAccessKey"],["Console login link","console"]]),D=a.default.createElement(l.List,{ordered:!0},a.default.createElement(l.List.Item,null,"Log into the"," ",a.default.createElement("a",{href:"https://console.aws.amazon.com/console/home?region=us-east-1#",target:"_blank",rel:"noopener noreferrer"},"AWS Console")," ","and navigate to"," ",a.default.createElement("a",{href:"https://console.aws.amazon.com/iam/home?region=us-east-1#/users",target:"_blank",rel:"noopener noreferrer"},"IAM Users")),a.default.createElement(l.List.Item,null,"Click 'Add User' and type a new, unique user name"),a.default.createElement(l.List.Item,null,"Under 'Select AWS access type', check 'Programmatic access'"),a.default.createElement(l.List.Item,null,"Click 'Next: Permissions', then 'Next: Tags', then 'Next: Review'"),a.default.createElement(l.List.Item,null,"Click 'Create User'"),a.default.createElement(l.List.Item,null,"On the 'Add User' success page, click 'Download .csv'"),a.default.createElement(l.List.Item,null,"Click 'Close'")),R=a.default.createElement(l.List,{ordered:!0},a.default.createElement(l.List.Item,null,"Enter a PIN which will be used to encrypt your AWS credentials"),a.default.createElement(l.List.Item,null,"Remember this PIN because you will need it in future to launch workspaces")),M=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(s,e);var t,n,o,c=O(s);function s(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=c.call(this,e)).onboardingNext=function(){T[t.onboardingStep].active=!1,T[t.onboardingStep+1].active=!0,t.onboardingStep+=1},t.onboardingPrev=function(){T[t.onboardingStep].active=!1,T[t.onboardingStep-1].active=!0,t.onboardingStep-=1},t.onboardingCredentialsPut=function(){var e=w(r.mark((function e(n,o){var a;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.getUsersStore,e.next=3,t.user.setEncryptedCreds(n,o);case 3:return e.next=5,a.updateUser(t.user);case 5:return e.next=7,a.load();case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t.onboardingSave=function(){var e=t.form.$("pin").value;t.onboardingCredentialsPut(t.credentials,e),t.onboardingClose()},t.onboardingClose=function(){t.resetOnboarding(),t.props.onclose()},t.shouldRenderOnboarding=function(){return t.user.isExternalUser},t.resetOnboarding=function(){T.forEach((function(e){e.active=!1})),T[0].active=!0,t.credentials=void 0,t.credentialsValid=!1,t.copiedPolicy="",t.onboardingStep=0},t.togglePolicy=function(){t.activePolicy=!t.activePolicy},t.testClipboardWrite=w(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){navigator.permissions.query({name:"clipboard-write"}).then((function(t){e("granted"===t.state||"prompt"===t.state)}))})));case 1:case"end":return e.stop()}}),e)}))),t.handleCopyPolicy=function(){navigator.clipboard.writeText(N(t.accountId)).then((function(){(0,u.runInAction)((function(){t.copiedPolicy="copied!"}))}),(function(){(0,u.runInAction)((function(){t.copiedPolicy="copy error!"}))}))},t.handleCredentialsReset=function(){t.credentials=void 0,t.credentialsValid=!1},t.onCredentialsDrop=function(e){var n=new FileReader;n.onabort=function(){console.log("file reading was aborted"),(0,m.displayError)("File reading was aborted.")},n.onerror=function(){console.log("file reading has failed"),(0,m.displayError)("File reading has failed.")},n.onload=function(){var e=n.result,o=t.credentialsCSVtoJSON(e);(0,u.runInAction)((function(){t.credentials=o,t.credentials.region=v.awsRegion})),w(r.mark((function e(){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.default.validateCredentials(o.accessKeyId,o.secretAccessKey);case 3:n=e.sent,(0,u.runInAction)((function(){t.credentialsValid=!0,t.accountId=n.Account})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),(0,m.displayError)("Credential test failed: ".concat(e.t0)),(0,u.runInAction)((function(){t.credentialsValid=!1}));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()},e.forEach((function(e){return n.readAsText(e)}))};var n=t.getUserStore.user;return t.form=(0,y.getExternalUserPinForm)(),(0,u.runInAction)((function(){t.user=n,t.credentials=void 0,t.credentialsValid=!1,t.accountId="",t.activePolicy=!1,t.copiedPolicy="",t.onboardingStep=0,t.onboardingSteps=T.length})),t}return t=s,(n=[{key:"renderOnboardingButtons",value:function(){var e=this.onboardingStep===j&&!this.credentialsValid;return a.default.createElement(a.default.Fragment,null,a.default.createElement(l.Button,{content:"Cancel",className:"mr2",onClick:this.onboardingClose}),this.onboardingStep>0&&a.default.createElement(l.Button,{content:"Prev",icon:"left arrow",labelPosition:"left",color:"blue",onClick:this.onboardingPrev}),this.onboardingStep<this.onboardingSteps-1&&a.default.createElement(l.Button,{content:"Next",icon:"right arrow",labelPosition:"right",color:"blue",disabled:e,onClick:this.onboardingNext}),this.onboardingStep===this.onboardingSteps-1&&a.default.createElement(l.Button,{content:"Save",color:"blue",onClick:this.onboardingSave}))}},{key:"ListOnboardingIAMPolicy",value:function(){return a.default.createElement(l.List,{ordered:!0},a.default.createElement(l.List.Item,null,"From the"," ",a.default.createElement("a",{href:"https://console.aws.amazon.com/iam/home?region=us-east-1#/users",target:"_blank",rel:"noopener noreferrer"},"IAM user list")," ","page, click the name of the new IAM user that you just created"),a.default.createElement(l.List.Item,null,"In the 'Get started with permissions' block, click the 'Add inline policy' button"),a.default.createElement(l.List.Item,null,"On the 'Create Policy' page, click the 'JSON' tab"),a.default.createElement(l.List.Item,null,"Delete the default policy text"),a.default.createElement(l.List.Item,null,"Click to copy a standard IAM policy"," ",a.default.createElement(l.Icon,{name:"copy outline",link:!0,onClick:this.handleCopyPolicy,title:"Copy IAM policy to the clipboard"}),this.copiedPolicy),a.default.createElement(l.List.Item,null,"Paste the copied IAM policy into the IAM console"),a.default.createElement(l.List.Item,null,"Click the 'Review Policy' button"),a.default.createElement(l.List.Item,null,"Supply a name, for example 'compute-launch', and click 'Create Policy'"))}},{key:"renderOnboardingIAMPolicyText",value:function(){var e=this.activePolicy?"hide":"show";return a.default.createElement(l.Accordion,null,a.default.createElement(l.Accordion.Title,{active:this.activePolicy,index:0,onClick:this.togglePolicy},a.default.createElement(l.Icon,{name:"dropdown"}),"Click to ",e," the standard IAM policy"),a.default.createElement(l.Accordion.Content,{active:this.activePolicy},a.default.createElement(f.default,{language:"json",style:d.docco},N(this.accountId))))}},{key:"renderOnboardingIAMCredentials",value:function(){return a.default.createElement(l.Table,{compact:!0},a.default.createElement(l.Table.Header,null,a.default.createElement(l.Table.Row,null,a.default.createElement(l.Table.HeaderCell,null,"Valid"),a.default.createElement(l.Table.HeaderCell,null,"IAM User Name"),a.default.createElement(l.Table.HeaderCell,null,"Access Key ID"),a.default.createElement(l.Table.HeaderCell,null,"Secret Key ID"),a.default.createElement(l.Table.HeaderCell,null,"Reset"))),a.default.createElement(l.Table.Body,null,a.default.createElement(l.Table.Row,null,a.default.createElement(l.Table.Cell,null,this.credentialsValid?a.default.createElement(l.Icon,{name:"check",color:"green"}):a.default.createElement(l.Icon,{name:"delete",color:"red"})),a.default.createElement(l.Table.Cell,null,this.credentials.username),a.default.createElement(l.Table.Cell,null,this.credentials.accessKeyId),a.default.createElement(l.Table.Cell,null,"********************"),a.default.createElement(l.Table.Cell,null,a.default.createElement(l.Button,{basic:!0,size:"mini",icon:"trash alternate outline",color:"red",content:"Reset",title:"Reset attached credentials",onClick:this.handleCredentialsReset})))))}},{key:"credentialsCSVtoJSON",value:function(e){for(var t={},n=e.split(/\r?\n/),r=n[0].split(","),o=1;o<n.length;o++){for(var a=n[o].split(","),i=0;i<r.length;i++)t[_.get(r[i])||r[i]]=a[i];break}return t}},{key:"renderCredentialsDropzone",value:function(){return a.default.createElement(l.Segment,{className:"mt4 center"},a.default.createElement(l.Header,{as:"h4",color:"grey"},"Drag and drop credentials file here"),a.default.createElement(i.default,{onDrop:this.onCredentialsDrop,minSize:0,maxSize:1e3,multiple:!1},(function(e){var t=e.getRootProps,n=e.getInputProps,r=e.rejectedFiles,o=e.isDragActive,i=r.length>0&&r[0].size>1e3;return a.default.createElement("div",t(),a.default.createElement("input",n()),o?a.default.createElement("p",null,"Drop the CSV file here ..."):a.default.createElement("p",null,"Drag and drop a credentials.csv files here, or click to select a file"),a.default.createElement(l.Icon,{name:"cloud upload",size:"huge",color:"grey"}),i&&a.default.createElement("div",{className:"text-danger mt-2"},"File is too large."))})))}},{key:"renderOnboardingIAMUser",value:function(){return a.default.createElement(l.Modal.Content,{image:!0},a.default.createElement(l.Icon,{name:"user",size:"massive"}),a.default.createElement(l.Modal.Description,null,a.default.createElement(l.Header,null,"IAM User"),a.default.createElement("p",null,"Please execute the following steps to create a new IAM User that you will use to supply credentials to the Research Portal so that we can launch workspaces in your AWS account:"),D))}},{key:"renderOnboardingIAMPolicy",value:function(){return a.default.createElement(l.Modal.Content,{image:!0},a.default.createElement(l.Icon,{name:"file alternate outline",size:"massive"}),a.default.createElement(l.Modal.Description,null,a.default.createElement(l.Header,null,"IAM Policy"),a.default.createElement("p",null,"Please execute the following steps to create a new IAM Policy that will provide permissions to the Research Portal so that we can launch workspaces in your AWS account:"),this.ListOnboardingIAMPolicy(),this.renderOnboardingIAMPolicyText()))}},{key:"renderOnboardingCredentials",value:function(){return a.default.createElement(l.Modal.Content,{image:!0},a.default.createElement(l.Icon,{name:"upload",size:"massive"}),a.default.createElement(l.Modal.Description,null,a.default.createElement(l.Header,null,"Credentials"),a.default.createElement("p",null,"Please attach the credentials file that you downloaded earlier. This contains your new IAM User credentials. The default name for this file is credentials.csv but your browser may have saved it under a different name."),this.credentials&&this.renderOnboardingIAMCredentials(),!this.credentials&&this.renderCredentialsDropzone()))}},{key:"renderOnboardingEncrypt",value:function(){var e=this;return a.default.createElement(l.Modal.Content,{image:!0},a.default.createElement(l.Icon,{name:"user secret",size:"massive"}),a.default.createElement(l.Modal.Description,null,a.default.createElement(l.Header,null,"Encrypt"),a.default.createElement("p",null,"Finally, we will locally encrypt your AWS credentials with a PIN and then store the encrypted credentials in the Research Portal. This will allow you to launch research workspaces using just a PIN."),R,a.default.createElement(p.default,{form:this.form},(function(t){return t._processing,t._onSubmit,t._onCancel,a.default.createElement(g.default,{form:e.form})}))))}},{key:"renderOnboardingStep",value:function(e){switch(e){case A:return this.renderOnboardingIAMUser();case j:return this.renderOnboardingCredentials();case I:return this.renderOnboardingIAMPolicy();case x:return this.renderOnboardingEncrypt();default:return"Unexpected step: ".concat(e)}}},{key:"render",value:function(){return a.default.createElement(a.default.Fragment,null,a.default.createElement(l.Modal,{open:!0,onClose:this.onboardingClose,closeIcon:!0},a.default.createElement(l.Modal.Header,null,"Configure AWS Credentials"),a.default.createElement(l.Modal.Content,null,a.default.createElement(l.Step.Group,{size:"tiny",fluid:!0,items:T})),this.renderOnboardingStep(this.onboardingStep),a.default.createElement(l.Modal.Actions,null,this.renderOnboardingButtons())))}},{key:"getUserStore",get:function(){return this.props.userStore}},{key:"getUsersStore",get:function(){return this.props.usersStore}}])&&S(t.prototype,n),o&&S(t,o),s}(a.default.Component);(0,u.decorate)(M,{onboardingNext:u.action,onboardingPrev:u.action,resetOnboarding:u.action,togglePolicy:u.action,handleCopyPolicy:u.action,handleCredentialsReset:u.action,onCredentialsDrop:u.action,onRegionChange:u.action,user:u.observable,credentials:u.observable,credentialsValid:u.observable,activePolicy:u.observable,copiedPolicy:u.observable,onboardingStep:u.observable,onboardingSteps:u.observable});var B=(0,c.inject)("userStore","usersStore")((0,s.withRouter)((0,c.observer)(M)));t.default=B},43:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.configure=function(e){t.config=f=u({},f,{},e)},t.setIdToken=function(e,t){s=e,l=t},t.getDecodedIdToken=function(){return l},t.fetchJson=p,t.httpApiGet=m,t.httpApiPost=v,t.httpApiPut=y,t.httpApiDelete=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.data,r=t.params;return p("".concat(f.apiPath,"/").concat(e),{method:"DELETE",headers:d(s),params:r,body:JSON.stringify(n)})},t.getAuthenticationProviderPublicConfigs=function(){return m("api/authentication/public/provider/configs")},t.getAuthenticationProviderConfigs=function(){return m("api/authentication/provider/configs")},t.updateAuthenticationProviderConfig=function(e){return y("api/authentication/provider/configs",{data:e})},t.forgetIdToken=function(){s=void 0,l=void 0},t.getApiKeys=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.username,n=e.ns;return m("api/api-keys",{params:{username:t,ns:n}})},t.createNewApiKey=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.username,n=e.ns;return v("api/api-keys",{params:{username:t,ns:n}})},t.revokeApiKey=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.username,r=t.ns;return y("api/api-keys/".concat(e,"/revoke"),{params:{username:n,ns:r}})},t.getUser=function(){return m("api/user")},t.addUser=function(e){var t={};e.authenticationProviderId&&(t.authenticationProviderId=e.authenticationProviderId);e.identityProviderName&&(t.identityProviderName=e.identityProviderName);var n=(0,a.removeNulls)(o.default.clone(e));delete n.ns,delete n.createdBy,delete n.updatedBy,n.userType||delete n.userType;return v("api/users",{data:n,params:t})},t.updateUser=function(e){var t=(0,a.removeNulls)(o.default.omit(o.default.clone(e),"uid","authenticationProviderId","identityProviderName","username","ns","createdBy","updatedBy"));t.userType||delete t.userType;return y("api/users/".concat(e.uid),{data:t,params:{}})},t.getUsers=function(){return m("api/users")},t.authenticate=function(e,t,n,r){return p(e,{method:"POST",body:JSON.stringify({username:t,password:n,authenticationProviderId:r})})},t.logout=function(){if(function(){var e=1e3*o.default.get(l,"exp",0);return Date.now()>=e}())return{expired:!0,revoked:!1};return v("api/authentication/logout")},t.config=void 0;var r,o=(r=n(5))&&r.__esModule?r:{default:r},a=n(27);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s,l,f={apiPath:n(135).apiPath,fetchMode:"cors",maxRetryCount:4};t.config=f;var d=function(e){return{Authorization:"".concat(e)}};function p(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!1,c={Accept:"application/json","Content-Type":"application/json"},s="",l=u({method:"GET",cache:"no-cache",mode:f.fetchMode,redirect:"follow",body:s},n,{headers:u({},c,{},n.headers)});"GET"===l.method&&delete l.body;var d=n;if(l.params){var m=o.default.keys(l.params),v=o.default.filter(m,(function(e){return!o.default.isNil(o.default.get(l.params,e))})),y=o.default.map(v,(function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(o.default.get(l.params,e)))})).join("&");e=y?"".concat(e,"?").concat(y):e,d=o.default.omit(n,"params")}return Promise.resolve().then((function(){return fetch(e,l)})).catch((function(t){if(r<f.maxRetryCount){var n=r*r;return n<1&&(n=1),Promise.resolve().then((function(){return console.log("Retrying count = ".concat(r,", Backoff = ").concat(n))})).then((function(){return(0,a.delay)(n)})).then((function(){return p(e,d,r+1)}))}throw(0,a.parseError)(t)})).then((function(e){return i=e.ok,t=e.status,e})).then((function(e){return o.default.isFunction(e.text)?e.text():e})).then((function(n){var i;try{i=o.default.isObject(n)?n:JSON.parse(n)}catch(c){if(t>=400){if(t>=501&&r<f.maxRetryCount){var u=r*r;return u<1&&(u=1),Promise.resolve().then((function(){return console.log("Retrying count = ".concat(r,", Backoff = ").concat(u))})).then((function(){return(0,a.delay)(u)})).then((function(){return p(e,d,r+1)}))}throw(0,a.parseError)({message:n,status:t})}throw(0,a.parseError)(new Error("The server did not return a json response."))}return i})).then((function(e){if(o.default.isBoolean(i)&&!i)throw(0,a.parseError)(u({},e,{status:t}));return e}))}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.params;return p("".concat(f.apiPath,"/").concat(e),{method:"GET",headers:d(s),params:n})}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.data,r=t.params;return p("".concat(f.apiPath,"/").concat(e),{method:"POST",headers:d(s),params:r,body:JSON.stringify(n)})}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.data,r=t.params;return p("".concat(f.apiPath,"/").concat(e),{method:"PUT",headers:d(s),params:r,body:JSON.stringify(n)})}},439:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=f(n(5)),a=f(n(0)),i=n(12),u=n(3),c=n(16),s=f(n(49)),l=f(n(1045));function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(u,e);var t,n,r,i=v(u);function u(){var e;d(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).handleCancel=function(){var t=e.props.onCancel||o.default.noop;return e.getModel().cancel(),t()},e.handleNext=function(t){e.getModel().next(t)},e.handlePrevious=function(t){t.preventDefault(),t.stopPropagation();var n=e.getForm();e.getModel().previous(n)},e.handleClear=function(t){t.preventDefault(),t.stopPropagation();var n=e.getForm();e.getModel().clearSectionConfigs(),n.reset()},e}return t=u,(n=[{key:"getModel",value:function(){return this.props.model}},{key:"getForm",value:function(){return this.getModel().form}},{key:"render",value:function(){var e=this,t=this.getForm(),n=this.getModel(),r=n.hasPrevious,o=(n.inputManifestSection||{}).children||[],i=0===o.length;return a.default.createElement(s.default,{form:t,onCancel:this.handleCancel,onSuccess:this.handleNext},(function(n){var u=n.processing,s=n.errors,f=(n._onSubmit,n.onCancel);return a.default.createElement(a.default.Fragment,null,!i&&a.default.createElement("div",{className:"mt3 clearfix p2"},e.renderSectionTitles(s),a.default.createElement(l.default,{form:t,inputEntries:o,processing:u})),i&&a.default.createElement(c.Segment,{padded:!0,className:"mb3"},"No configuration values are provided"),a.default.createElement("div",{className:"mt0 clearfix"},a.default.createElement(c.Button,{floated:"right",type:"submit",color:"blue",icon:!0,disabled:u,className:"ml2",labelPosition:"right"},"Next",a.default.createElement(c.Icon,{name:"right arrow"})),r&&a.default.createElement(c.Button,{floated:"right",className:"ml2",icon:!0,disabled:u,labelPosition:"left",onClick:e.handlePrevious},"Previous",a.default.createElement(c.Icon,{name:"left arrow"})),a.default.createElement(c.Button,{floated:"right",disabled:u,onClick:e.handleClear},"Clear"),a.default.createElement(c.Button,{floated:"left",disabled:u,onClick:f},"Cancel")))}))}},{key:"renderSectionTitles",value:function(e){var t=this.getModel(),n=t.totalSections,r=t.currentSectionIndex,i=n>1,u=t.sectionsTitles,s=e.length>0;return i?n<3?null:a.default.createElement(c.Step.Group,{size:"mini",fluid:!0},o.default.times(n,(function(e){return a.default.createElement(c.Step,{active:e===r,completed:e<r},s&&e===r?a.default.createElement(c.Icon,{name:"times"}):a.default.createElement(c.Icon,{name:"setting"}),a.default.createElement(c.Step.Content,null,a.default.createElement(c.Step.Title,null,u[e]||"")))}))):null}}])&&p(t.prototype,n),r&&p(t,r),u}(a.default.Component);(0,u.decorate)(g,{handleNext:u.action,handlePrevious:u.action,handleCancel:u.action,handleClear:u.action});var b=(0,i.observer)(g);t.default=b},44:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(5)),o=i(n(0)),a=n(16);function i(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.segmentCount,n=void 0===t?1:t,i=e.className;return o.default.createElement("div",{className:i},r.default.map(r.default.times(n,String),(function(e){return function(e){return o.default.createElement(a.Segment,{key:e,className:"p3 mb2"},o.default.createElement(a.Placeholder,{fluid:!0},o.default.createElement(a.Placeholder.Header,null,o.default.createElement(a.Placeholder.Line,{length:"full"})),o.default.createElement(a.Placeholder.Paragraph,null,o.default.createElement(a.Placeholder.Line,{length:"short"}))),o.default.createElement(a.Divider,{className:"mt3"}),o.default.createElement(a.Placeholder,{fluid:!0},o.default.createElement(a.Placeholder.Line,{length:"full"})))}(e)})))};t.default=u},440:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=d(n(5)),i=d(n(0)),u=n(12),c=n(3),s=n(16),l=n(33),f=d(n(265));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){o=!0,a=c}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=v(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function v(e,t){if(e){if("string"===typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){h(a,r,o,i,u,"next",e)}function u(e){h(a,r,o,i,u,"throw",e)}i(void 0)}))}}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(d,e);var t,n,o,u=w(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=u.call(this,e)).handleCancel=function(){t.processing=!1;var e=t.props.onCancel||a.default.noop;return t.getModel().cancel(),e()},t.handleSave=g(r.mark((function e(){var n,o,i,u,s,f,d,v;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.props.onSave||a.default.noop,o=t.getModel(),i={},u=m(o.configuration.entries());try{for(u.s();!(s=u.n()).done;)f=p(s.value,2),d=f[0],v=f[1],i[d]=v}catch(r){u.e(r)}finally{u.f()}return e.prev=5,t.processing=!0,e.next=9,n(i);case 9:(0,c.runInAction)((function(){t.processing=!1})),o.applyChanges(),o.restart(),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(5),(0,c.runInAction)((function(){t.processing=!1})),(0,l.displayError)(e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,14]])}))),t.handlePrevious=function(e){e.preventDefault(),e.stopPropagation();var n=t.getForm(),r=t.getModel();t.processing=!1,r.previous(n)},(0,c.runInAction)((function(){t.processing=!1})),t}return t=d,(n=[{key:"getModel",value:function(){return this.props.model}},{key:"getForm",value:function(){return this.getModel().form}},{key:"getDimmer",value:function(){var e=this.props.dimmer;return!!a.default.isUndefined(e)||!!e}},{key:"render",value:function(){var e=this.processing,t=this.getDimmer(),n=this.getModel(),r=n.definedConfigList||[],o=0===r.length,a=n.review,u=i.default.createElement("div",{className:"mt3 clearfix"},a&&i.default.createElement(s.Button,{floated:"right",color:"blue",icon:"save",labelPosition:"left",disabled:e||!a||o,className:"ml2",content:"Save",onClick:this.handleSave}),i.default.createElement(s.Button,{floated:"right",icon:!0,disabled:e,labelPosition:"left",onClick:this.handlePrevious},"Previous",i.default.createElement(s.Icon,{name:"left arrow"})),i.default.createElement(s.Button,{floated:"left",disabled:e,onClick:this.handleCancel},"Cancel")),c=i.default.createElement(f.default,{rows:r});return o&&(c="No configuration values are provided"),i.default.createElement(i.default.Fragment,null,a&&i.default.createElement(s.Segment,{padded:!0},t&&i.default.createElement(s.Dimmer,{active:e,inverted:!0},i.default.createElement(s.Loader,{inverted:!0},"Processing")),c),u)}}])&&b(t.prototype,n),o&&b(t,o),d}(i.default.Component);(0,c.decorate)(O,{processing:c.observable,handleSave:c.action,handlePrevious:c.action,handleCancel:c.action});var C=(0,u.observer)(O);t.default=C},443:function(e,t,n){"use strict";n.r(t);var r=n(10),o=n.n(r),a=n(19),i=n(34),u=n(35),c=n(37),s=n(36),l=n(0),f=n.n(l),d=n(3),p=n(12),m=n(149),v=n(172),y=n(2201),h=n(2197),g=n(33),b=n(49),E=n.n(b),w=n(52),S=n.n(w),k=n(74),O=n.n(k),C=n(53);var P=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).handleCreate=function(){var e=Object(a.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.values(),e.prev=1,e.next=4,r.keyPairsStore.createKetPair(n);case 4:a=e.sent,Object(d.runInAction)((function(){r.keyPair=a})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),Object(g.displayError)(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),r.handleCancel=function(){r.keyPair=void 0;var e=r.props.onCancel;if(e)return e()},r.handleDownload=function(){var e=r.keyPair,t=document.createElement("a");t.setAttribute("href","data:application/octet-stream,".concat(encodeURIComponent(e.privateKey))),t.setAttribute("download","".concat(e.name,".pem")),t.click()},Object(d.runInAction)((function(){r.form=Object(C.createForm)({name:{label:"Name",placeholder:"Name for this key",extra:{explain:"Easily identifiable name for this key. The name is used for display purposes.It must be an alpha numeric string between 2 and 100 characters long may contain space, underscore (_) and/or dash (-)."},value:"",rules:["required","min:2","max:100","regex:/^[A-Za-z0-9-_ ]+$/"]},desc:{label:"Description",placeholder:"Describe the purpose of this key, up to 1024 characters long.",value:"",rules:"max:1024|string"}}),r.keyPair=void 0})),r}return Object(u.a)(n,[{key:"render",value:function(){return this.keyPair?this.renderPrivateKey():this.renderForm()}},{key:"renderForm",value:function(){var e=this.form;return f.a.createElement(E.a,{form:e,onCancel:this.handleCancel,onSuccess:this.handleCreate},(function(t){var n=t.processing,r=t.onCancel;return f.a.createElement(f.a.Fragment,null,f.a.createElement(S.a,{field:e.$("name"),className:"mb3"}),f.a.createElement(O.a,{field:e.$("desc")}),f.a.createElement(v.a,{floated:"right",className:"ml2",primary:!0,content:"Create Key",disabled:n,type:"submit"}),f.a.createElement(v.a,{floated:"right",className:"ml2",content:"Cancel",disabled:n,onClick:r}))}))}},{key:"renderPrivateKey",value:function(){return f.a.createElement(f.a.Fragment,null,f.a.createElement(y.a,null,"Private Key"),f.a.createElement(h.a,{warning:!0},f.a.createElement(h.a.Header,null,"Warning!"),f.a.createElement("p",null,"This is your only chance to download the private key. The private key is secret information that should not be shared with others. It should be stored and handled carefully."," ")),f.a.createElement("div",{className:"clearfix"},f.a.createElement(v.a,{floated:"right",className:"ml2",content:"Done",onClick:this.handleCancel}),f.a.createElement(v.a,{floated:"left",primary:!0,className:"mr2",content:"Download",onClick:this.handleDownload})))}},{key:"keyPairsStore",get:function(){return this.props.keyPairsStore}}]),n}(f.a.Component);Object(d.decorate)(P,{form:d.observable,keyPair:d.observable,keyPairsStore:d.computed,handleCreate:d.action,handleCancel:d.action,handleDownload:d.action});t.default=Object(p.inject)("keyPairsStore")(Object(m.o)(Object(p.observer)(P)))},49:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=f(n(5)),i=f(n(0)),u=n(12),c=n(3),s=n(16),l=f(n(6));function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){d(a,r,o,i,u,"next",e)}function u(e){d(a,r,o,i,u,"throw",e)}i(void 0)}))}}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(f,e);var t,n,o,u=y(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=u.call(this,e)).handleFormSubmission=function(){var e=p(r.mark((function e(n){var o,a;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.getOnSuccess(),t.formProcessing=!0,e.prev=2,e.next=5,o(n);case 5:return a=e.sent,(0,c.runInAction)((function(){t.formProcessing=!1})),e.abrupt("return",a);case 10:throw e.prev=10,e.t0=e.catch(2),(0,c.runInAction)((function(){t.formProcessing=!1})),e.t0;case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),t.handleFormErrors=function(){var e=p(r.mark((function e(n){var o,a;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.getOnError(),t.formProcessing=!1,a=t.getFormErrors(),e.abrupt("return",o(n,a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.handleSubmit=function(e){var n=t.getForm();e.preventDefault(),e.stopPropagation(),t.formProcessing=!0;try{return n.onSubmit(e,t.formHooks)}catch(r){throw t.formProcessing=!1,r}},t.handleCancel=function(e){var n=t.getForm(),r=t.getOnCancel();e.preventDefault(),e.stopPropagation(),t.formProcessing=!1,n.reset(),r(n)},t.formHooks={onSuccess:t.handleFormSubmission,onError:t.handleFormErrors},(0,c.runInAction)((function(){t.formProcessing=!1})),t}return t=f,(n=[{key:"getForm",value:function(){return this.props.form}},{key:"getDimmer",value:function(){var e=this.props.dimmer;return!!a.default.isUndefined(e)||!!e}},{key:"getOnCancel",value:function(){return this.props.onCancel||a.default.noop}},{key:"getOnSuccess",value:function(){return this.props.onSuccess||a.default.noop}},{key:"getOnError",value:function(){return this.props.onError||a.default.noop}},{key:"getFormErrors",value:function(){var e=this.getForm().errors()||{},t=[];return function e(n){a.default.isNil(n)||(!a.default.isString(n)||a.default.isEmpty(n)?(a.default.isArray(n)||a.default.isObject(n))&&a.default.forEach(n,(function(t){e(t)})):t.push(n))}(e),t}},{key:"renderErrorPanel",value:function(){var e=this.getFormErrors(),t=e.length;if(0===t)return null;var n="Please Correct The Following Error".concat(1===t?"":"s");return i.default.createElement(s.Message,{className:"mb3 mt0 animated fadeIn",negative:!0},i.default.createElement(s.Message.Header,null,n),i.default.createElement(s.Message.List,null,a.default.map(e,(function(e,t){return i.default.createElement(s.Message.Item,{key:t},function(e){return a.default.isObject(e)?JSON.stringify(e):"".concat(e)}(e))}))))}},{key:"render",value:function(){var e=this.formProcessing,t=a.default.isFunction(this.props.children)?this.props.children:a.default.noop,n=this.props.className,r=this.getDimmer(),o=this.getFormErrors(),u=a.default.isNil(this.props.showErrorPanel)||this.props.showErrorPanel,c=i.default.createElement(i.default.Fragment,null,r&&i.default.createElement(s.Dimmer,{active:e,inverted:!0},i.default.createElement(s.Loader,{inverted:!0},"Processing")),u&&this.renderErrorPanel(),t({processing:e,errors:o,onSubmit:this.handleSubmit,onCancel:this.handleCancel})),f=this.props.renderFormAs;return a.default.isFunction(f)?f(c):i.default.createElement("form",{className:(0,l.default)("ui fluid form",n),onSubmit:this.handleSubmit},c)}}])&&m(t.prototype,n),o&&m(t,o),f}(i.default.Component);(0,c.decorate)(b,{formProcessing:c.observable,handleSubmit:c.action,handleFormSubmission:c.action,handleFormErrors:c.action,handleCancel:c.action});var E=(0,u.observer)(b);t.default=E},52:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=f(n(5)),o=f(n(0)),a=n(12),i=n(16),u=f(n(6)),c=f(n(159)),s=f(n(160)),l=f(n(161));function f(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=(0,a.observer)((function(e){var t=e.field,n=e.fluid,a=void 0===n||n,f=e.disabled,v=void 0!==f&&f,y=e.type,h=void 0===y?"text":y,g=e.className,b=void 0===g?"mb4":g,E=e.autoFocus,w=void 0!==E&&E,S=e.icon,k=e.iconPosition,O=e.showHeader,C=void 0===O||O,P=e.dataTestId,A=void 0===P?"":P,j=t.error,I=void 0===j?"":j,x=!r.default.isEmpty(I),T=t.disabled||v,N=T?"disabled":"",_=x?"error":"",D=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({fluid:a,disabled:T,error:x},r.default.omit(t.bind(),["label"]),{autoFocus:w,type:h,icon:S,iconPosition:k});return o.default.createElement("div",{className:(0,u.default)(b,_,N)},C&&o.default.createElement(c.default,{field:t}),o.default.createElement(s.default,{field:t}),o.default.createElement(i.Input,d({"data-testid":A,className:"field"},D)),o.default.createElement(l.default,{field:t}))}));t.default=v},528:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={appIdToken:"appIdToken"};t.default=r},529:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isForbidden=t.isTokenExpired=t.isNotFound=t.boom=void 0;var r,o=(r=n(5))&&r.__esModule?r:{default:r};var a={error:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(o.default.isString(e)){var r=new Error(e);return r.isBoom=!0,r.code=t,r.friendly=e,r}if(o.default.isError(e))return e.code=t,e.isBoom=!0,e.friendly=n||o.default.startCase(t),e;var a=new Error(JSON.stringify(e));return a.isBoom=!0,a.code=t,a.friendly=n||o.default.startCase(t),a}};t.boom=a,["apiError","notFound","badRequest","tokenExpired","incorrectImplementation","timeout"].forEach((function(e){a[e]=function(t,n){return a.error(t,e,n)}}));t.isNotFound=function(e){return"notFound"===o.default.get(e,"code")};t.isTokenExpired=function(e){return"tokenExpired"===o.default.get(e,"code")};t.isForbidden=function(e){return"forbidden"===o.default.get(e,"code")}},53:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createForm=l,t.createSingleFieldForm=function(e,t,n,o,a){var i=r.default.isArray(t)?r.default.find(t,(function(t){return r.default.keys(t)[0]===e})):t,u=r.default.get(i,e);if(!u)throw new Error("Field not found. Can not create form for field ".concat(e,"."));var c=r.default.assign({},{value:n},u);return l(function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}({},e,c),o,a)},t.formOptions=t.formPlugins=void 0;var r=u(n(5)),o=u(n(391)),a=u(n(296)),i=u(n(393));function u(e){return e&&e.__esModule?e:{default:e}}var c=Object.freeze({dvr:(0,o.default)(a.default)});t.formPlugins=c;var s=Object.freeze({showErrorsOnReset:!1});function l(e,t,n){var r=t||c,o=n||s;return new i.default({fields:e},{plugins:r,options:o})}t.formOptions=s},530:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.authenticationProviderConfigsStore=m.create({},e)},t.fromConfiguration=function(e){var t=a.default.transform(e,(function(e,t,n){e[function(e){var t=a.default.replace(e,/\//g,".");return t=a.default.replace(t,/(\|-)/g,"["),t=a.default.replace(t,/(-\|)/g,"]")}(n)]=t}),{});return(0,c.unFlattenObject)(t,(function(e,t,n){return"type"!==n}))},t.AuthenticationProviderConfigsStore=void 0;var o=n(8),a=f(n(5)),i=n(43),u=n(15),c=n(27),s=f(n(531)),l=f(n(1021));function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){d(a,r,o,i,u,"next",e)}function u(e){d(a,r,o,i,u,"throw",e)}i(void 0)}))}}var m=u.BaseStore.named("AuthenticationProviderConfigsStore").props({authenticationProviderConfigs:o.types.optional(o.types.map(o.types.frozen()),{}),authenticationProviderConfigEditors:o.types.optional(o.types.map(l.default),{})}).actions((function(e){return{doLoad:function(){return p(r.mark((function t(){var n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.getAuthenticationProviderConfigs)();case 2:n=t.sent,e.runInAction((function(){var t={};n.forEach((function(e){t[e.id]=e})),e.authenticationProviderConfigs.replace(t)}));case 4:case"end":return t.stop()}}),t)})))()},getUpdateAuthenticationProviderConfigEditor:function(t){var n=e.authenticationProviderConfigEditors.get(t);if(!n){n=l.default.create({id:t});var r=e.getAuthenticationProviderConfig(t);n.setConfigEditor(e.getConfigEditorForUpdate(r)),e.authenticationProviderConfigEditors.put(n)}return n},getConfigEditorForUpdate:function(e){var t=e.config.type.config.inputManifestForUpdate;if(t){var n=a.default.cloneDeep(t),r=a.default.map(n.sections,(function(e){var t=a.default.filter(e.children,(function(e){return"id"!==e.name}));return e.children=t,e}));n.sections=r;var o=function(e){var t=(0,c.flattenObject)(e,(function(e,t,n){return"type"!==n}));return a.default.transform(t,(function(e,t,n){e[function(e){var t=a.default.replace(e,/\./g,"/");return t=a.default.replace(t,/\[/g,"|-"),t=a.default.replace(t,/]/g,"-|")}(n)]=t}),{})}(e.config);return s.default.create({currentSectionIndex:0,review:!1,inputManifest:n,configuration:o,mode:"edit"})}},updateAuthenticationProvider:function(t){return p(r.mark((function n(){var o;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,i.updateAuthenticationProviderConfig)(t);case 2:o=n.sent,e.runInAction((function(){e.authenticationProviderConfigs.set(o.id,o),e.authenticationProviderConfigEditors.get(o.id).setConfigEditor(e.getConfigEditorForUpdate(o))}));case 4:case"end":return n.stop()}}),n)})))()},getCreateAuthenticationProviderConfigEditor:function(e){}}})).views((function(e){return{get empty(){return 0===e.authenticationProviderConfigs.size},get list(){return(0,c.mapToArray)(e.authenticationProviderConfigs)},getAuthenticationProviderConfig:function(t){return e.authenticationProviderConfigs.get(t)},getAuthenticationProviderConfigByIdpName:function(t){return a.default.find(e.list,(function(e){var n=a.default.get(e,"config.federatedIdentityProviders");return!!a.default.find(n,{name:t})}))}}}));t.AuthenticationProviderConfigsStore=m},531:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(5))&&r.__esModule?r:{default:r},a=n(8),i=n(53),u=n(98);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){o=!0,a=c}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=a.types.model("ConfigurationEditor",{currentSectionIndex:0,review:!1,inputManifest:a.types.maybe(u.InputManifest),configuration:a.types.optional(a.types.map(a.types.union(a.types.null,a.types.undefined,a.types.integer,a.types.number,a.types.boolean,a.types.string)),{}),mode:a.types.optional(a.types.enumeration("Mode",["create","edit"]),"create")}).volatile((function(e){return{originalConfig:void 0,originalSectionConfig:void 0}})).actions((function(){return{runInAction:function(e){return e()}}})).actions((function(e){var t=e.cleanup,n=function(t){var n={},r=t;return void 0===r||(e.inputManifest.getSectionFlattened(r)||[]).forEach((function(t){var r=t.name;e.configuration.has(r)&&(n[r]=o.default.cloneDeep(e.configuration.get(r)))})),n},r=function(){e.originalSectionConfig=n(e.inputManifestSection)};return{afterCreate:function(){e.originalConfig=(0,a.getSnapshot)(e.configuration),r()},cleanup:function(){t()},next:function(t){e.configuration.merge(function(e){return o.default.transform(e,(function(e,t,n){e[n]=o.default.isObject(t)?JSON.stringify(t):t}),{})}(t.values()));var a=!o.default.isEqual(e.originalSectionConfig,n(e.inputManifestSection)),i=function(t){var r=o.default.slice(o.default.get(e.inputManifest,"sections",[]),Math.max(t+1,0)),a=[];return o.default.forEach(r,(function(e){var t=n(e),r=o.default.keys(t)||[];o.default.isEmpty(r)||a.push.apply(a,f(r))})),a}(e.currentSectionIndex),u=e.nextSectionIndex,c=e.currentSectionIndex;-1!==u&&(e.currentSectionIndex=u);var s=e.currentSectionIndex;r(),!e.isEditMode&&a&&o.default.forEach(i,(function(t){e.configuration.delete(t)})),e.review=c===s},previous:function(t){if(e.review)e.review=!1;else{var n=e.previousSectionIndex;-1!==n&&(e.currentSectionIndex=n),r()}},clearConfigs:function(){e.configuration.clear()},clearSectionConfigs:function(){if(e.empty)e.configuration.clear();else{var t=e.inputManifestSection;if(void 0!==t)(e.inputManifest.getSectionFlattened(t)||[]).forEach((function(t){e.configuration.delete(t.name)}))}},applyChanges:function(){e.originalConfig=(0,a.getSnapshot)(e.configuration)},cancel:function(){e.review=!1,e.currentSectionIndex=0,e.originalConfig&&(0,a.applySnapshot)(e.configuration,e.originalConfig),r()},restart:function(){e.cancel()}}})).views((function(e){return{get isEditMode(){return"edit"===e.mode},get inputManifestSection(){if(void 0!==e.inputManifest){var t=e.inputManifest.sections,n=e.currentSectionIndex;if(!(n>e.totalSections)&&!(n>=t.length))return t[n]}},get definedConfigList(){if(void 0===e.inputManifest)return[];var t=e.inputManifest.flattened,n=e.configuration,r=[];return o.default.forEach(t,(function(e){var t=n.get(e.name);o.default.isUndefined(t)&&(t=e.value),o.default.isUndefined(t)||r.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{value:t}))})),r},get merged(){var t=e.inputManifest.flattened,n={};o.default.forEach(t,(function(e){n[e.name]=e.value}));var r,a=function(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=d(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(e.configuration.entries());try{for(a.s();!(r=a.n()).done;){var i=c(r.value,2),u=i[0],s=i[1];n[u]=s}}catch(l){a.e(l)}finally{a.f()}return n},get formFields(){var t=e.currentSectionIndex;if(e.totalSections<t)return[];var n=e.inputManifestSection;return o.default.isUndefined(n)?[]:(0,u.toMobxFormFields)(n.children,e.merged)},get form(){return(0,i.createForm)(e.formFields)},get totalSections(){return void 0===e.inputManifest?0:e.inputManifest.sections.length},get hasNext(){return-1!==e.nextSectionIndex&&!e.review},get hasPrevious(){return-1!==e.previousSectionIndex||e.review},get nextSectionIndex(){if(e.totalSections<e.currentSectionIndex)return-1;if(void 0===e.inputManifest)return-1;for(var t=e.inputManifest.sections,n=e.merged,r=!1,o=e.currentSectionIndex+1;!r&&o<e.totalSections;){var a=t[o];(r=(0,u.isConditionTrue)(a.condition,n))||(o+=1)}return r?o:-1},get previousSectionIndex(){if(0===e.currentSectionIndex)return-1;for(var t=e.inputManifest.sections,n=e.merged,r=!1,o=e.currentSectionIndex-1;!r&&o>=0;){var a=t[o];(r=(0,u.isConditionTrue)(a.condition,n))||(o-=1)}return r?o:-1},get sectionsTitles(){var t=e.inputManifest.sections;return o.default.map(t,(function(e){return e.title}))},get empty(){return void 0===e.inputManifest||e.inputManifest.empty}}}));t.default=m},55:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.addIndex=function(e){return(0,i.httpApiPost)("api/indexes",{data:e})},t.addUsers=function(e){return(0,i.httpApiPost)("api/users/bulk",{data:e})},t.removeAccountInfo=function(e){return(0,i.httpApiDelete)("api/accounts/".concat(e))},t.deleteUser=function(e){return l.apply(this,arguments)},t.getUserRoles=function(){return(0,i.httpApiGet)("api/user-roles")},t.getAwsAccounts=function(){return(0,i.httpApiGet)("api/aws-accounts")},t.getAwsAccount=function(e){return(0,i.httpApiGet)("api/aws-accounts/".concat(e))},t.getAwsAccountBudget=function(e){return(0,i.httpApiGet)("api/budgets/aws-account/".concat(e))},t.createAwsAccountBudget=function(e){return(0,i.httpApiPut)("api/budgets/aws-account",{data:e})},t.updateAwsAccountBudget=function(e){return(0,i.httpApiPost)("api/budgets/aws-account",{data:e})},t.getStudies=function(e){return(0,i.httpApiGet)("api/studies",{params:{category:e}})},t.getStudy=function(e){return(0,i.httpApiGet)("api/studies/".concat(e))},t.createStudy=function(e){return(0,i.httpApiPost)("api/studies",{data:e})},t.listStudyFiles=function(e){return(0,i.httpApiGet)("api/studies/".concat(e,"/files"))},t.getPresignedStudyUploadRequests=function(e,t){Array.isArray(t)&&(t=t.join(","));return(0,i.httpApiGet)("api/studies/".concat(e,"/upload-requests"),{params:{filenames:t}})},t.getStudyPermissions=function(e){return(0,i.httpApiGet)("api/studies/".concat(e,"/permissions"))},t.updateStudyPermissions=function(e,t){return(0,i.httpApiPut)("api/studies/".concat(e,"/permissions"),{data:t})},t.addAwsAccount=function(e){return(0,i.httpApiPost)("api/aws-accounts",{data:e})},t.createAwsAccount=function(e){return(0,i.httpApiPost)("api/aws-accounts/provision",{data:e})},t.getStepTemplates=function(){return f.apply(this,arguments)},t.getEnvironments=function(){return(0,i.httpApiGet)("api/workspaces/built-in")},t.getEnvironment=function(e){return(0,i.httpApiGet)("api/workspaces/built-in/".concat(e))},t.getEnvironmentCost=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,i.httpApiGet)("api/costs?env=".concat(e,"&numberOfDaysInPast=").concat(t,"&groupByService=").concat(n,"&groupByUser=").concat(r))},t.deleteEnvironment=function(e){return(0,i.httpApiDelete)("api/workspaces/built-in/".concat(e))},t.createEnvironment=function(e){return(0,i.httpApiPost)("api/workspaces/built-in",{data:e})},t.updateEnvironment=function(e){return(0,i.httpApiPut)("api/workspaces/built-in",{data:e})},t.stopEnvironment=function(e){return(0,i.httpApiPut)("api/workspaces/built-in/".concat(e,"/stop"))},t.startEnvironment=function(e){return(0,i.httpApiPut)("api/workspaces/built-in/".concat(e,"/start"))},t.getEnvironmentKeypair=function(e){return(0,i.httpApiGet)("api/workspaces/built-in/".concat(e,"/keypair"))},t.getEnvironmentPasswordData=function(e){return(0,i.httpApiGet)("api/workspaces/built-in/".concat(e,"/password"))},t.getEnvironmentUrl=function(e){return(0,i.httpApiGet)("api/workspaces/built-in/".concat(e,"/url"))},t.getEnvironmentSpotPriceHistory=function(e){return(0,i.httpApiGet)("api/workspaces/built-in/pricing/".concat(e))},t.getExternalTemplate=function(e){return(0,i.httpApiGet)("api/template/".concat(e))},t.getAllProjCostGroupByUser=function(e){return(0,i.httpApiGet)("api/costs?proj=ALL&groupByUser=true&numberOfDaysInPast=".concat(e))},t.getIndexes=function(){return(0,i.httpApiGet)("api/indexes")},t.getIndex=function(e){return(0,i.httpApiGet)("api/indexes/".concat(e))},t.getAllProjCostGroupByEnv=function(e){return(0,i.httpApiGet)("api/costs?proj=ALL&groupByEnv=true&numberOfDaysInPast=".concat(e))},t.updateUserApplication=function(e){var t=(0,u.removeNulls)(a.default.omit(a.default.clone(e),"uid","authenticationProviderId","identityProviderName","username","ns","createdBy","updatedBy"));t.userType||delete t.userType;return(0,i.httpApiPut)("api/user",{data:t})},t.getProjects=function(){return(0,i.httpApiGet)("api/projects")},t.getProject=function(e){return(0,i.httpApiGet)("api/projects/".concat(e))},t.addProject=function(e){return(0,i.httpApiPost)("api/projects",{data:e})},t.updateProject=function(e){return(0,i.httpApiPut)("api/projects/".concat(e.id),{data:e})},t.deleteProject=function(e){return(0,i.httpApiDelete)("api/projects/".concat(e))},t.getAccounts=function(){return(0,i.httpApiGet)("api/accounts")},t.getAccount=function(e){return(0,i.httpApiGet)("api/accounts/".concat(e))},t.getComputePlatforms=function(){return(0,i.httpApiGet)("api/compute/platforms")},t.getComputeConfigurations=function(e){return(0,i.httpApiGet)("api/compute/platforms/".concat(e,"/configurations"))},t.getClientIpAddress=function(){return(0,i.httpApiGet)("api/ip")},t.getScEnvironmentCost=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,i.httpApiGet)("api/costs?scEnv=".concat(e,"&numberOfDaysInPast=").concat(t,"&groupByService=").concat(n,"&groupByUser=").concat(r))},t.getScEnvironments=function(){return(0,i.httpApiGet)("api/workspaces/service-catalog/")},t.createScEnvironment=function(e){return(0,i.httpApiPost)("api/workspaces/service-catalog/",{data:e})},t.createScEnvironmentConnectionUrl=function(e,t){return(0,i.httpApiPost)("api/workspaces/service-catalog/".concat(e,"/connections/").concat(t,"/url"))},t.deleteScEnvironment=function(e){return(0,i.httpApiDelete)("api/workspaces/service-catalog/".concat(e))},t.stopScEnvironment=function(e){return(0,i.httpApiPut)("api/workspaces/service-catalog/".concat(e,"/stop"))},t.startScEnvironment=function(e){return(0,i.httpApiPut)("api/workspaces/service-catalog/".concat(e,"/start"))},t.getScEnvironment=function(e){return(0,i.httpApiGet)("api/workspaces/service-catalog/".concat(e))},t.getScEnvironmentConnections=function(e){return(0,i.httpApiGet)("api/workspaces/service-catalog/".concat(e,"/connections/"))},t.sendSshKey=function(e,t,n){return(0,i.httpApiPost)("api/workspaces/service-catalog/".concat(e,"/connections/").concat(t,"/send-ssh-public-key"),{data:{keyPairId:n}})},t.getWindowsRpInfo=function(e,t){return(0,i.httpApiGet)("api/workspaces/service-catalog/".concat(e,"/connections/").concat(t,"/windows-rdp-info"))};var o,a=(o=n(5))&&o.__esModule?o:{default:o},i=n(43),u=n(27);function c(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){c(a,r,o,i,u,"next",e)}function u(e){c(a,r,o,i,u,"throw",e)}i(void 0)}))}}function l(){return(l=s(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.httpApiDelete)("api/users/".concat(t.uid)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=s(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.httpApiGet)("api/step-templates"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},590:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPrincipalObjFromPrincipalStr=function(e){return JSON.parse(e)},t.getPrincipalStrFromPrincipalObj=function(e){var t=e.username,n=e.ns;return JSON.stringify({username:t,ns:n})},t.User=void 0;var r,o=n(8),a=(r=n(5))&&r.__esModule?r:{default:r};var i=o.types.model("User",{uid:"",firstName:o.types.maybeNull(o.types.optional(o.types.string,"")),lastName:o.types.maybeNull(o.types.optional(o.types.string,"")),isAdmin:o.types.optional(o.types.boolean,!1),username:"",ns:o.types.maybeNull(o.types.optional(o.types.string,"")),email:"",userType:"",authenticationProviderId:"",identityProviderName:o.types.maybeNull(o.types.optional(o.types.string,"")),status:"active",rev:0}).views((function(e){return{get displayName(){return"".concat(e.firstName," ").concat(e.lastName)},get longDisplayName(){if(e.unknown)return"".concat(e.username,"??");var t="".concat(e.firstName," ").concat(e.lastName);return e.email?"".concat(t," (").concat(e.email,")"):t},get unknown(){return!e.firstName&&!e.lastName},get isRootUser(){return"root"===a.default.toLower(e.userType)},get isActive(){return"active"===a.default.toLower(e.status)},get isSystem(){return"_system_"===e.id},isSame:function(t){return e.uid===t},isSamePrincipal:function(t){var n=t.username,r=t.ns;return e.username===n&&e.ns===r},get id(){return e.uid},get principal(){return{username:e.username,ns:e.ns}},get principalStr(){return JSON.stringify(e.principal)}}}));t.User=i},591:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.blueDatasets=function(e,t){return[{label:e||"Patients Ages 1 to 5",backgroundColor:"rgba(33, 133, 208,0.2)",borderColor:"rgba(33, 133, 208,1)",borderWidth:1,data:t||[1,8,5,6,3]}]},t.barOptions=void 0;t.barOptions={legend:{display:!1},maintainAspectRatio:!1,scales:{xAxes:[{gridLines:{display:!1}}],yAxes:[{gridLines:{display:!1}}]}}},602:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.getPrincipalObjFromPrincipalStr=function(e){return JSON.parse(e)},t.getPrincipalStrFromPrincipalObj=function(e){var t=e.username,n=e.ns;return JSON.stringify({username:t,ns:n})},t.User=void 0;var o=n(8),a=s(n(5)),i=n(27),u=n(1091),c=s(n(230));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){l(a,r,o,i,u,"next",e)}function u(e){l(a,r,o,i,u,"throw",e)}i(void 0)}))}}var d=o.types.model("User",{uid:"",firstName:o.types.maybeNull(o.types.optional(o.types.string,"")),lastName:o.types.maybeNull(o.types.optional(o.types.string,"")),isAdmin:o.types.optional(o.types.boolean,!1),username:"",ns:o.types.maybeNull(o.types.optional(o.types.string,"")),email:"",userType:"",authenticationProviderId:"",identityProviderName:o.types.maybeNull(o.types.optional(o.types.string,"")),status:"active",rev:0,userRole:"",projectId:o.types.array(o.types.string,[]),isExternalUser:o.types.optional(o.types.boolean,!1),encryptedCreds:o.types.maybeNull(o.types.string),applyReason:""}).actions((function(e){return{runInAction:function(e){return e()},setEncryptedCreds:function(t,n){return f(r.mark((function o(){var a;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.region=t.region||"us-east-1",r.next=3,(0,u.aesGcmEncrypt)(JSON.stringify(t),n);case 3:a=r.sent,i.storage.setItem(c.default.pinToken,n),e.runInAction((function(){e.encryptedCreds=a}));case 6:case"end":return r.stop()}}),o)})))()},clearEncryptedCreds:function(){return f(r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.runInAction((function(){e.encryptedCreds=void 0}));case 1:case"end":return t.stop()}}),t)})))()},setUser:function(t){(0,i.removeNulls)(t),e.firstName=t.firstName||e.firstName||"",e.lastName=t.lastName||e.lastName||"",e.isAdmin=t.isAdmin||e.isAdmin,e.isExternalUser=t.isExternalUser||e.isExternalUser,e.username=t.username||e.username,e.ns=t.ns||e.ns,e.email=t.email||e.email,e.authenticationProviderId=t.authenticationProviderId||e.authenticationProviderId,e.identityProviderName=t.identityProviderName||e.identityProviderName,e.status=t.status||e.status||"active",e.createdBy=t.createdBy||e.createdBy,e.rev=t.rev||e.rev||0,e.userRole=t.userRole||e.userRole,e.projectId=t.projectId||e.projectId||[],e.encryptedCreds=t.encryptedCreds||e.encryptedCreds,e.applyReason=t.applyReason||e.applyReason||""}}})).views((function(e){return{get displayName(){return"".concat(e.firstName," ").concat(e.lastName)},get longDisplayName(){if(e.unknown)return"".concat(e.username,"??");var t="".concat(e.firstName," ").concat(e.lastName);return e.email?"".concat(t," (").concat(e.email,")"):t},get unknown(){return!e.firstName&&!e.lastName},get isRootUser(){return"root"===a.default.toLower(e.userType)},get isActive(){return"active"===a.default.toLower(e.status)},get isInternalGuest(){return"internal-guest"===e.userRole},get isExternalGuest(){return"guest"===e.userRole},get isInternalResearcher(){return"researcher"===e.userRole},get isExternalResearcher(){return"external-researcher"===e.userRole},get isSystem(){return"_system_"===e.id},isSame:function(t){return e.uid===t},isSamePrincipal:function(t){var n=t.username,r=t.ns;return e.username===n&&e.ns===r},get id(){return e.uid},get principal(){return{username:e.username,ns:e.ns}},get principalStr(){return JSON.stringify(e.principal)},get hasProjects(){return!a.default.isEmpty(e.projectId)},get hasCredentials(){return e.isExternalResearcher&&!a.default.isEmpty(e.encryptedCreds)&&"N/A"!==e.encryptedCreds},unencryptedCreds:function(t){return f(r.mark((function n(){var o;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.t0=JSON,n.next=4,(0,u.aesGcmDecrypt)(e.encryptedCreds,t);case 4:return n.t1=n.sent,o=n.t0.parse.call(n.t0,n.t1),i.storage.setItem(c.default.pinToken,t),n.abrupt("return",o);case 10:throw n.prev=10,n.t2=n.catch(0),new Error("Invalid PIN. Please try again");case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))()},get capabilities(){var t=e.isActive,n=e.isExternalUser,r=e.isExternalGuest,o=e.isInternalGuest;return{canCreateStudy:t&&!n&&!o,canCreateWorkspace:t&&!r&&!o,canSelectStudy:t&&!r&&!o,canViewDashboard:t&&!n&&!o}}}}));t.User=d},603:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(8),o=r.types.model("Budget",{budgetLimit:"",startDate:"",endDate:"",thresholds:r.types.array(r.types.number),notificationEmail:""}).actions((function(e){return{setBudget:function(t){e.budgetLimit=t.budgetLimit,e.startDate=t.startDate,e.endDate=t.endDate,e.thresholds=t.thresholds,e.notificationEmail=t.notificationEmail}}})).views((function(e){return{}}));t.default=o},604:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){i.uiEventBus.listenTo("environmentDeleted",{id:"Environment",listener:function(){var e=m(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.markAsTerminating();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),i.uiEventBus.listenTo("environmentStopping",{id:"Environment",listener:function(){var e=m(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.markAsStopping();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),i.uiEventBus.listenTo("environmentStarting",{id:"Environment",listener:function(){var e=m(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.markAsStarting();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})},t.Environment=void 0;var o=d(n(5)),a=n(8),i=n(64),u=n(27),c=n(1101),s=n(55),l=d(n(1102)),f=d(n(230));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){p(a,r,o,i,u,"next",e)}function u(e){p(a,r,o,i,u,"throw",e)}i(void 0)}))}}var v=a.types.model({amount:a.types.number,unit:a.types.string}),y=a.types.model({startDate:a.types.string,cost:a.types.map(v)}),h=a.types.model("Environment",{id:a.types.identifier,rev:a.types.maybe(a.types.number),description:"",instanceInfo:a.types.optional(c.InstanceInfo,{}),name:"",status:"",indexId:"",projectId:"",createdAt:"",createdBy:"",updatedAt:"",updatedBy:"",costs:a.types.optional(a.types.array(y),[]),fetchingUrl:a.types.optional(a.types.boolean,!1),error:a.types.maybeNull(a.types.string),isExternal:a.types.optional(a.types.boolean,!1),stackId:a.types.maybeNull(a.types.string),sharedWithUsers:a.types.optional(a.types.array(a.types.string),[])}).actions((function(e){return{setEnvironment:function(t){var n=e.fetchingUrl;(0,a.applySnapshot)(e,t),e.fetchingUrl=n},getEnvironmentUrl:function(t){return m(r.mark((function n(){var a,i;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.isExternal){n.next=10;break}if(o.default.isEmpty(u.storage.getItem(f.default.pinToken))){n.next=7;break}return n.next=4,t.unencryptedCreds(u.storage.getItem(f.default.pinToken));case 4:return a=n.sent,i=new l.default(a.accessKeyId,a.secretAccessKey,a.region),n.abrupt("return",i.getPresignedNotebookInstanceUrl(e.instanceInfo.NotebookInstanceName));case 7:throw new Error("No PIN to decrypt User credientials");case 10:return e.setFetchingUrl(!0),n.abrupt("return",(0,s.getEnvironmentUrl)(e.id));case 12:case"end":return n.stop()}}),n)})))()},setFetchingUrl:function(t){e.fetchingUrl=t},markAsTerminating:function(){e.status="TERMINATING"},markAsStopping:function(){e.status="STOPPING"},markAsStarting:function(){e.status="STARTING"},getKeyPair:function(){return m(r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,s.getEnvironmentKeypair)(e.id,"".concat(e.id,".pem")));case 1:case"end":return t.stop()}}),t)})))()},getWindowsPassword:function(){return m(r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.all([e.getKeyPair(),(0,s.getEnvironmentPasswordData)(e.id)]));case 1:case"end":return t.stop()}}),t)})))()}}})).views((function(e){return{get isTerminated(){return o.default.includes(["TERMINATING","TERMINATED","TERMINATING_FAILED"],this.status)},get isCompleted(){return o.default.includes(["COMPLETED"],this.status)},get isStopped(){return o.default.includes(["STOPPED"],this.status)},get isPending(){return o.default.includes(["PENDING"],this.status)},get isError(){return o.default.includes(["FAILED"],this.status)}}}));t.Environment=h},61:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=p(n(5)),a=p(n(0)),i=n(3),u=n(12),c=n(16),s=p(n(6)),l=p(n(159)),f=p(n(160)),d=p(n(161));function p(e){return e&&e.__esModule?e:{default:e}}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=a.default.createElement("i",{style:{color:"red"}},"Custom Value: "),k=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(p,e);var t,n,r,u=b(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=u.call(this,e)).onAddItem=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.optionsInState=o.default.concat({text:n.value,value:n.value},t.optionsInState)},(0,i.runInAction)((function(){t.optionsInState=[]})),t}return t=p,(n=[{key:"render",value:function(){var e=this.props,t=e.field,n=e.selection,r=e.fluid,i=e.disabled,u=e.clearable,p=e.multiple,y=e.search,h=e.allowAdditions,g=e.additionLabel,b=e.className,E=e.options,w=void 0===E?[]:E,k=e.onChange,O=e.dataTestId,C=t.id,P=t.value,A=t.sync,j=t.placeholder,I=t.error,x=void 0===I?"":I,T=!o.default.isEmpty(x),N=t.extra||{};N.options=N.options||[];var _=o.default.uniq([].concat(v(this.optionsInState),v(N.options),v(w))),D=t.disabled||i?"disabled":"",R=T?"error":"",M=function(e,t,n){var r=N&&N[e],a=o.default.isNil(t)?r:t;return o.default.isNil(a)&&(a=n),a},B={id:C,value:P,onAddItem:this.onAddItem,onChange:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};A(n.value),t.validate({showErrors:!0}),k&&k(n.value,t)},placeholder:j,selection:M("selection",n,!1),clearable:M("clearable",u,!1),multiple:M("multiple",p,!1),search:M("search",y,!1),fluid:M("fluid",r,!1),allowAdditions:M("allowAdditions",h,!1),disabled:M("disabled",i,!1),additionLabel:M("additionLabel",g,S),error:T};return a.default.createElement("div",{className:(0,s.default)(M("className",b,"mb4"),R,D)},a.default.createElement(l.default,{field:t}),a.default.createElement(f.default,{field:t}),a.default.createElement(c.Dropdown,m({"data-testid":O,className:"field",options:_},B)),a.default.createElement(d.default,{field:t}))}}])&&h(t.prototype,n),r&&h(t,r),p}(a.default.Component);(0,i.decorate)(k,{optionsInState:i.observable,onAddItem:i.action});var O=(0,u.observer)(k);t.default=O},627:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.environmentConfigurationsStore=d.create({},e)},t.EnvironmentConfigurationsStore=void 0;var o,a=(o=n(5))&&o.__esModule?o:{default:o},i=n(8),u=n(15),c=n(27),s=n(1170);function l(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){l(a,r,o,i,u,"next",e)}function u(e){l(a,r,o,i,u,"throw",e)}i(void 0)}))}}var d=u.BaseStore.named("EnvironmentConfigurationsStore").props({configurations:i.types.map(s.EnvironmentConfiguration),heartbeatInterval:-1}).actions((function(e){return{doLoad:function(){return f(r.mark((function t(){var n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:n=t.sent,e.runInAction((function(){(0,c.consolidateToMap)(e.configurations,n,(function(e,t){e.setEnvironmentConfiguration(t)}))}));case 4:case"end":return t.stop()}}),t)})))()}}})).views((function(e){return{get empty(){return 0===e.configurations.size},get total(){return e.configurations.size},get list(){var t=[];return e.configurations.forEach((function(e){return t.push(e)})),a.default.sortBy(t,["id"])},getConfiguration:function(t){return e.configurations.get(t)}}}));function p(){return m.apply(this,arguments)}function m(){return(m=f(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.EnvironmentConfigurationsStore=d},64:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.sessionStore=p,e.uiEventBus=d},t.uiEventBus=t.sessionStore=void 0;var o,a=(o=n(5))&&o.__esModule?o:{default:o};function i(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var d=new(function(){function e(){s(this,e),this.listenersMap={}}return f(e,[{key:"listenTo",value:function(e,t){var n=t.id,r=t.listener,o=this.listenersMap[e]||[];o.push({id:n,listener:r}),this.listenersMap[e]=o}},{key:"fireEvent",value:function(){var e,t=(e=r.mark((function e(t,n){var o,u,c,s,l,f,d,p;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=a.default.keys(this.listenersMap),u=i(o),e.prev=2,u.s();case 4:if((c=u.n()).done){e.next=27;break}if(s=c.value,!a.default.startsWith(s,t)){e.next=25;break}l=this.listenersMap[s],f=i(l),e.prev=9,f.s();case 11:if((d=f.n()).done){e.next=17;break}return p=d.value,e.next=15,p.listener(n,{entry:p,channel:t});case 15:e.next=11;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(9),f.e(e.t0);case 22:return e.prev=22,f.f(),e.finish(22);case 25:e.next=4;break;case 27:e.next=32;break;case 29:e.prev=29,e.t1=e.catch(2),u.e(e.t1);case 32:return e.prev=32,u.f(),e.finish(32);case 35:case"end":return e.stop()}}),e,this,[[2,29,32,35],[9,19,22,25]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){c(a,r,o,i,u,"next",e)}function u(e){c(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}()}]),e}());t.uiEventBus=d;var p=new(function(){function e(){s(this,e),this.map=new Map}return f(e,[{key:"cleanup",value:function(){this.map.clear()}},{key:"removeStartsWith",value:function(e){var t,n=i(this.map.keys());try{for(n.s();!(t=n.n()).done;){var r=t.value;a.default.startsWith(r,e)&&this.map.delete(r)}}catch(o){n.e(o)}finally{n.f()}}},{key:"get",value:function(e){return this.map.get(e)}},{key:"set",value:function(e,t){this.map.set(e,t)}}]),e}());t.sessionStore=p},676:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.getEstimatedCost=void 0;var o,a=(o=n(5))&&o.__esModule?o:{default:o},i=n(627);function u(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}var c=function(){var e,t=(e=r.mark((function e(t,n){var o,u,c,s,l,f,d,p;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.EnvironmentConfigurationsStore.create(),e.next=3,o.load();case 3:for(u=o.list,c=a.default.find(u,(function(e){return"emr"===t.instanceInfo.type?t.instanceInfo.config.spotBidPrice?e.type===t.instanceInfo.type&&e.size===t.instanceInfo.size&&e.label.includes("Spot"):e.type===t.instanceInfo.type&&e.size===t.instanceInfo.size&&e.label.includes("On Demand"):e.type===t.instanceInfo.type&&e.size===t.instanceInfo.size})),(s={})[c.type]={amount:c.totalPrice,unit:"USD"},l=[],f=n;f>0;f--)d=new Date(Date.now()-24*f*60*60*1e3).toISOString().split("T")[0],p={startDate:d,cost:s},l.push(p);return e.abrupt("return",l);case 10:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){u(a,r,o,i,c,"next",e)}function c(e){u(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();t.getEstimatedCost=c},677:function(e,t,n){"use strict";var r=n(10);function o(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function u(e){o(i,r,a,u,c,"next",e)}function c(e){o(i,r,a,u,c,"throw",e)}u(void 0)}))}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=n(5),s=n(1260),l=["CREATE_FAILED","ROLLBACK_FAILED","DELETE_FAILED","UPDATE_ROLLBACK_FAILED","ROLLBACK_COMPLETE","UPDATE_ROLLBACK_COMPLETE"],f=["CREATE_COMPLETE","DELETE_COMPLETE","UPDATE_COMPLETE"],d=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"us-east-1";i(this,e),this.cfn=t?new s.CloudFormation({accessKeyId:t,secretAccessKey:n,region:r,sslEnabled:!0}):new s.CloudFormation({sslEnabled:!0})}var t,n,o;return t=e,n=[{key:"isDone",value:function(e){return l.includes(e)||f.includes(e)}},{key:"describeStack",value:function(){var e=a(r.mark((function e(t){var n,o,a,i,u,s,f;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={StackName:t},e.prev=1,e.next=4,this.cfn.describeStacks(n).promise();case 4:return o=e.sent,a=c.get(o,"Stacks[0]"),i=c.get(a,"StackStatus","Unknown"),u=c.get(a,"StackStatusReason","Unknown"),s=c.get(a,"Outputs",[]),f=c.map(s,(function(e){return{key:e.OutputKey,value:e.OutputValue,description:e.Description,exportName:e.ExportName}})),e.abrupt("return",{status:i,statusReason:u,isDone:this.isDone(i),isFailed:l.includes(i),outputs:f});case 13:throw e.prev=13,e.t0=e.catch(1),new Error("".concat(e.t0.code,": ").concat(e.t0.message));case 16:case"end":return e.stop()}}),e,this,[[1,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"createStack",value:function(){var e=a(r.mark((function e(t,n,o){var a,i,u=arguments;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>3&&void 0!==u[3]?u[3]:"",i={StackName:t,Parameters:n,Capabilities:["CAPABILITY_IAM","CAPABILITY_NAMED_IAM"],TemplateURL:o,Tags:[{Key:"Description",Value:a}]},e.abrupt("return",this.cfn.createStack(i).promise());case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"deleteStack",value:function(){var e=a(r.mark((function e(t){var n,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={StackName:t},e.next=3,this.cfn.deleteStack(n).promise();case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],o=[{key:"validateCredentials",value:function(){var e=a(r.mark((function e(t,n){var o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new s.STS({accessKeyId:t,secretAccessKey:n,sslEnabled:!0}),e.abrupt("return",o.getCallerIdentity().promise());case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],n&&u(t.prototype,n),o&&u(t,o),e}();t.default=d},68:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=(o=n(5))&&o.__esModule?o:{default:o},i=n(3),u=n(15),c=n(27);function s(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];l(this,e);var n=[];a.default.forEach(t,(function(e){a.default.isEmpty(e)||a.default.isNil(e)||n.push(e)})),this.stores=n}var t,n,o;return t=e,(n=[{key:"load",value:function(){var e,t=(e=r.mark((function e(){var t,n,o,i=arguments;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i.length>0&&void 0!==i[0]?i[0]:{},n=t.forceLoad,o=void 0!==n&&n,a.default.forEach(this.stores,(function(e){!o&&(0,u.isStoreReady)(e)||(0,c.swallowError)(e.load())}));case 2:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){s(a,r,o,i,u,"next",e)}function u(e){s(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}()},{key:"ready",get:function(){var e=!0;return a.default.forEach(this.stores,(function(t){e=e&&(0,u.isStoreReady)(t)})),e}},{key:"loading",get:function(){var e=!1;return a.default.forEach(this.stores,(function(t){if((0,u.isStoreLoading)(t))return e=!0,!1})),e}},{key:"hasError",get:function(){return!!this.error}},{key:"error",get:function(){var e;return a.default.forEach(this.stores,(function(t){if((0,u.isStoreError)(t))return e=t.error,!1})),e}}])&&f(t.prototype,n),o&&f(t,o),e}();(0,i.decorate)(d,{stores:i.observable,ready:i.computed,loading:i.computed,hasError:i.computed,error:i.computed});var p=d;t.default=p},682:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAddProjectFormFields=function(){return o},t.getAddProjectForm=function(){return(0,r.createForm)(o)};var r=n(91),o={id:{label:"Project Name",placeholder:"Type name for this project",rules:"required|string|between:1,300"},indexId:{label:"Index ID",rules:"required|string"},description:{label:"Description",placeholder:"Type description for this project",rules:"string|between:1,3000"},projectAdmins:{label:"Project Admins",placeholder:"Users who automatically have full control of workspaces associated with this project",explain:" ",rules:"array"}}},683:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.blueDatasets=function(e,t){return[{label:e||"Label",backgroundColor:"rgba(33, 133, 208,0.2)",borderColor:"rgba(33, 133, 208,1)",borderWidth:1,data:t||[1,8,5,6,3]}]},t.barOptions=void 0;t.barOptions={legend:{display:!1},maintainAspectRatio:!1,scales:{xAxes:[{gridLines:{display:!1}}],yAxes:[{gridLines:{display:!1}}]}}},684:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(0))&&r.__esModule?r:{default:r},a=n(12),i=n(16);var u=(0,a.observer)((function(e){var t,n=e.currentStep,r=void 0===n?{}:n,a=e.envTypeImmutable,u=void 0!==a&&a;switch(r.step){case"selectComputePlatform":case"selectEnvType":t=1;break;case"selectComputeConfiguration":case"selectEnvConfig":t=2;break;default:t=0}return o.default.createElement(i.Step.Group,{widths:3},o.default.createElement(i.Step,{active:0===t,disabled:t<0},o.default.createElement(i.Icon,{name:"search",color:"blue"}),o.default.createElement(i.Step.Content,null,o.default.createElement(i.Step.Title,null,"Find & Select Studies"),o.default.createElement(i.Step.Description,null,"Select the desired studies"))),!u&&o.default.createElement(i.Step,{active:1===t,disabled:t<1},o.default.createElement(i.Icon,{name:"server"}),o.default.createElement(i.Step.Content,null,o.default.createElement(i.Step.Title,null,"Select Compute"),o.default.createElement(i.Step.Description,null,"Select a compute platform"))),o.default.createElement(i.Step,{active:2===t,disabled:t<2},o.default.createElement(i.Icon,{name:"hdd outline"}),o.default.createElement(i.Step.Content,null,o.default.createElement(i.Step.Title,null,"Create Workspace"),o.default.createElement(i.Step.Description,null,"Create the workspace"))))}));t.default=u},685:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CurrentStep=void 0;var r=n(8).types.model("CurrentStep",{step:""}).actions((function(e){return{setStep:function(t){e.step=t}}}));t.CurrentStep=r},686:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=y(n(0)),i=n(3),u=n(12),c=n(16),s=n(15),l=n(27),f=y(n(44)),d=y(n(39)),p=y(n(427)),m=y(n(2048)),v=y(n(2049));function y(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){h(a,r,o,i,u,"next",e)}function u(e){h(a,r,o,i,u,"throw",e)}i(void 0)}))}}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(y,e);var t,n,o,u=w(y);function y(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),(t=u.call(this,e)).setOnboarding=function(e){t.onboardingOpen=e},t.handleConfigureCredentials=function(e){e.preventDefault(),e.stopPropagation(),t.setOnboarding(!0)},t.handleSelectComputePlatform=function(){var e=g(r.mark((function e(n){var o,a,u;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.selectedPlatformId=n,o=t.computePlatformsStore){e.next=4;break}return e.abrupt("return");case 4:return a=o.getComputePlatformStore(n),e.next=7,a.load();case 7:return u=t.clientInformationStore,e.prev=8,e.next=11,u.load();case 11:e.next=15;break;case 13:e.prev=13,e.t0=e.catch(8);case 15:window.scrollTo(0,0),(0,i.runInAction)((function(){t.currentStep.setStep("selectComputeConfiguration")}));case 17:case"end":return e.stop()}}),e,null,[[8,13]])})));return function(t){return e.apply(this,arguments)}}(),t.handlePrevious=function(){"selectComputePlatform"!==t.currentStep.step?t.currentStep.setStep("selectComputePlatform"):t.props.onPrevious()},t.handleCompleted=function(){var e=g(r.mark((function e(n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.props.onCompleted(n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(0,i.runInAction)((function(){t.selectedPlatformId=void 0,t.onboardingOpen=!1})),t}return t=y,(n=[{key:"componentDidMount",value:function(){window.scrollTo(0,0),(0,l.swallowError)(this.computePlatformsStore.load())}},{key:"render",value:function(){var e=this,t=this.computePlatformsStore,n=null;return n=(0,s.isStoreError)(t)?this.renderLoadingError():(0,s.isStoreLoading)(t)?a.default.createElement(f.default,{className:"mt2"}):(0,s.isStoreEmpty)(t)?this.renderEmpty():this.renderContent(),a.default.createElement(a.default.Fragment,null,n," ",this.onboardingOpen&&a.default.createElement(p.default,{onclose:function(){return e.setOnboarding(!1)}}))}},{key:"renderContent",value:function(){var e=this.currentStep.step,t=this.selectedPlatformId,n=this.studyIds,r=this.userStore.user,o=r.hasProjects,i=r.isExternalResearcher,u=r.capabilities.canCreateWorkspace,c=r.hasCredentials,s=null;return u?i||o?i&&!c?this.renderMissingCredentials():("selectComputePlatform"===e?s=a.default.createElement(m.default,{onPrevious:this.handlePrevious,onNext:this.handleSelectComputePlatform}):"selectComputeConfiguration"===e&&(s=a.default.createElement(v.default,{platformId:t,studyIds:n,onPrevious:this.handlePrevious,onCompleted:this.handleCompleted})),s):this.renderMissingProjects():this.renderEmpty()}},{key:"renderLoadingError",value:function(){var e=this.computePlatformsStore;return a.default.createElement(a.default.Fragment,null,a.default.createElement(d.default,{error:e.error,className:"p0 mt2 mb3"}),this.renderButtons())}},{key:"renderEmpty",value:function(){return a.default.createElement(a.default.Fragment,null,a.default.createElement(c.Segment,{placeholder:!0,className:"mt2"},a.default.createElement(c.Header,{icon:!0,className:"color-grey"},a.default.createElement(c.Icon,{name:"server"}),"No compute platform",a.default.createElement(c.Header.Subheader,null,"There are no compute platform to choose from. Your role might be restricted. Please contact your administrator."))),this.renderButtons())}},{key:"renderMissingProjects",value:function(){return a.default.createElement(a.default.Fragment,null,a.default.createElement(c.Segment,{placeholder:!0,className:"mt2"},a.default.createElement(c.Header,{icon:!0,className:"color-grey"},a.default.createElement(c.Icon,{name:"lock"}),"Missing association with projects",a.default.createElement(c.Header.Subheader,null,"You currently do not have permissions to use any projects for the workspace. please contact your administrator."))),this.renderButtons())}},{key:"renderMissingCredentials",value:function(){return a.default.createElement(a.default.Fragment,null,a.default.createElement(c.Segment,{placeholder:!0,className:"mt2"},a.default.createElement(c.Header,{icon:!0,className:"color-grey"},a.default.createElement(c.Icon,{name:"key"}),"No AWS credentials",a.default.createElement(c.Header.Subheader,null,"To manage research workspaces, click Configure AWS Credentials.")),a.default.createElement("div",null,a.default.createElement(c.Button,{color:"orange",size:"medium",basic:!0,onClick:this.handleConfigureCredentials,style:{maxWidth:"100%"}},"Configure AWS Credentials"))),this.renderButtons())}},{key:"renderButtons",value:function(){return a.default.createElement("div",{className:"mt3"},a.default.createElement(c.Button,{floated:"right",icon:"right arrow",labelPosition:"right",className:"ml2",primary:!0,content:"Next",disabled:!0}),a.default.createElement(c.Button,{floated:"right",icon:"left arrow",labelPosition:"left",className:"ml2",content:"Previous",onClick:this.handlePrevious}))}},{key:"userStore",get:function(){return this.props.userStore}},{key:"computePlatformsStore",get:function(){return this.props.computePlatformsStore}},{key:"clientInformationStore",get:function(){return this.props.clientInformationStore}},{key:"currentStep",get:function(){return this.props.currentStep}},{key:"studyIds",get:function(){return this.props.studyIds}}])&&b(t.prototype,n),o&&b(t,o),y}(a.default.Component);(0,i.decorate)(O,{handleSelectComputePlatform:i.action,handlePrevious:i.action,handleCompleted:i.action,setOnboarding:i.action,studyIds:i.computed,userStore:i.computed,computePlatformsStore:i.computed,clientInformationStore:i.computed,currentStep:i.computed,selectedPlatformId:i.observable,onboardingOpen:i.observable});var C=(0,u.inject)("userStore","computePlatformsStore","clientInformationStore")((0,u.observer)(O));t.default=C},698:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=m(n(5)),a=m(n(0)),i=n(3),u=n(12),c=n(16),s=m(n(6)),l=m(n(159)),f=m(n(160)),d=m(n(161)),p=n(27);function m(e){return e&&e.__esModule?e:{default:e}}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(u,e);var t,n,r,i=b(u);function u(){var e;y(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).handleSelectConfigurationId=function(t){e.formField.sync(t),e.formField.resetValidation()},e}return t=u,(n=[{key:"render",value:function(){var e=this.formField,t=e.error,n=void 0===t?"":t,r=!o.default.isEmpty(n),i=e.disabled?"disabled":"",u=r?"error":"";return a.default.createElement("div",{className:(0,s.default)("mb4",u,i)},a.default.createElement(l.default,{field:e}),a.default.createElement(f.default,{field:e}),a.default.createElement(d.default,{field:e,className:"mb1"}),this.renderCards())}},{key:"renderCards",value:function(){var e=this,t=this.formField.disabled,n=this.configurations,r=function(t){return t.id===e.configurationId};return a.default.createElement(c.Card.Group,{stackable:!0,itemsPerRow:3,className:"mt1"},o.default.map(n,(function(n){return a.default.createElement(c.Card,v({key:n.id,className:(0,s.default)("mb3",{"cursor-pointer":!t})},function(n){var o={};return r(n)&&(o.color="blue"),t||(o.onClick=function(){return e.handleSelectConfigurationId(n.id)}),o}(n)),a.default.createElement(c.Card.Content,null,a.default.createElement(c.Card.Header,null,a.default.createElement(c.Radio,{className:"mr2",checked:r(n),disabled:t}),n.title,a.default.createElement(c.Divider,null)),a.default.createElement(c.Card.Description,null,a.default.createElement("div",{className:"pr1 pl1 pb1"},a.default.createElement("div",{dangerouslySetInnerHTML:{__html:n.descHtml}})))),a.default.createElement(c.Card.Content,{extra:!0},e.renderTableInfo(n)))})))}},{key:"renderTableInfo",value:function(e){var t;return a.default.createElement(c.Table,{basic:"very",size:"small"},a.default.createElement(c.Table.Body,null,o.default.map(e.displayProps).map((function(e,t){return a.default.createElement(c.Table.Row,{key:t,textAlign:"center"},a.default.createElement(c.Table.Cell,null,e.key),a.default.createElement(c.Table.Cell,null,e.value))})),a.default.createElement(c.Table.Row,{textAlign:"center"},a.default.createElement(c.Table.Cell,null,(t=e,"spot"===o.default.get(t,"priceInfo.type")?"Maximum price per day":"Price per day"),a.default.createElement("div",{className:"color-grey fs-9"},function(e){return o.default.get(e,"priceInfo.region")}(e))),a.default.createElement(c.Table.Cell,{verticalAlign:"top"},function(e){var t=e.pricePerDay;return o.default.isUndefined(t)||o.default.isString(t)&&o.default.isEmpty(t)?"N/A":"$".concat((0,p.nicePrice)(t))}(e)))))}},{key:"configurations",get:function(){return this.props.configurations}},{key:"configurationId",get:function(){return this.formField.value}},{key:"formField",get:function(){return this.props.formField}}])&&h(t.prototype,n),r&&h(t,r),u}(a.default.Component);(0,i.decorate)(S,{configurations:i.computed,configurationId:i.computed,formField:i.computed,handleSelectConfigurationId:i.action});var k=(0,u.inject)()((0,u.observer)(S));t.default=k},699:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=b(n(0)),i=n(3),u=n(12),c=n(31),s=n(16),l=n(15),f=n(27),d=b(n(44)),p=b(n(39)),m=b(n(68)),v=n(38),y=b(n(427)),h=b(n(2054)),g=b(n(2055));function b(e){return e&&e.__esModule?e:{default:e}}function E(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){E(a,r,o,i,u,"next",e)}function u(e){E(a,r,o,i,u,"throw",e)}i(void 0)}))}}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(c,e);var t,n,o,u=O(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=u.call(this,e)).setOnboarding=function(e){t.onboardingOpen=e},t.handleConfigureCredentials=function(e){e.preventDefault(),e.stopPropagation(),t.setOnboarding(!0)},t.handleSelectEnvType=function(){var e=w(r.mark((function e(n){var o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.selectedTypeId=n,t.envTypesStore){e.next=4;break}return e.abrupt("return");case 4:return o=t.envTypesStore.getEnvTypeConfigsStore(n),e.next=7,o.load();case 7:window.scrollTo(0,0),(0,i.runInAction)((function(){t.currentStep.setStep("selectEnvConfig")}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.handlePrevious=function(){"selectEnvType"===t.currentStep.step||t.props.envTypeImmutable?t.props.onPrevious():t.currentStep.setStep("selectEnvType")},t.handleCompleted=function(){var e=w(r.mark((function e(n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.props.onCompleted(n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(0,i.runInAction)((function(){t.stores=new m.default([t.envTypesStore,t.clientInformationStore]),t.selectedTypeId=e.envTypeId})),t}return t=c,(n=[{key:"componentDidMount",value:function(){window.scrollTo(0,0),(0,f.swallowError)(this.stores.load())}},{key:"goto",value:function(e){(0,v.gotoFn)(this)(e)}},{key:"render",value:function(){var e=this,t=this.envTypesStore,n=null;return n=(0,l.isStoreError)(t)?this.renderLoadingError():(0,l.isStoreLoading)(t)?a.default.createElement(d.default,{className:"mt2"}):(0,l.isStoreEmpty)(t)?this.renderEmpty():this.renderContent(),a.default.createElement(a.default.Fragment,null,n," ",this.onboardingOpen&&a.default.createElement(y.default,{onclose:function(){return e.setOnboarding(!1)}}))}},{key:"renderContent",value:function(){var e=this.currentStep.step,t=this.selectedTypeId,n=this.studyIds,r=this.userStore.user,o=r.hasProjects,i=r.isExternalResearcher,u=r.capabilities.canCreateWorkspace,c=r.hasCredentials,s=null;return u?i||o?i&&!c?this.renderMissingCredentials():("selectEnvType"===e?s=a.default.createElement(h.default,{onPrevious:this.handlePrevious,onNext:this.handleSelectEnvType}):"selectEnvConfig"===e&&(s=a.default.createElement(g.default,{envTypeId:t,studyIds:n,onPrevious:this.handlePrevious,onCompleted:this.handleCompleted})),s):this.renderMissingProjects():this.renderEmpty()}},{key:"renderLoadingError",value:function(){var e=this.envTypesStore;return a.default.createElement(a.default.Fragment,null,a.default.createElement(p.default,{error:e.error,className:"p0 mt2 mb3"}),this.renderButtons())}},{key:"renderEmpty",value:function(){return a.default.createElement(a.default.Fragment,null,a.default.createElement(s.Segment,{placeholder:!0,className:"mt2"},a.default.createElement(s.Header,{icon:!0,className:"color-grey"},a.default.createElement(s.Icon,{name:"server"}),"No workspace types",a.default.createElement(s.Header.Subheader,null,"There are no workspace types to choose from. Your role might be restricted. Please contact your administrator."))),this.renderButtons())}},{key:"renderMissingProjects",value:function(){return a.default.createElement(a.default.Fragment,null,a.default.createElement(s.Segment,{placeholder:!0,className:"mt2"},a.default.createElement(s.Header,{icon:!0,className:"color-grey"},a.default.createElement(s.Icon,{name:"lock"}),"Missing association with projects",a.default.createElement(s.Header.Subheader,null,"You currently do not have permissions to use any projects for the workspace. please contact your administrator."))),this.renderButtons())}},{key:"renderMissingCredentials",value:function(){return a.default.createElement(a.default.Fragment,null,a.default.createElement(s.Segment,{placeholder:!0,className:"mt2"},a.default.createElement(s.Header,{icon:!0,className:"color-grey"},a.default.createElement(s.Icon,{name:"key"}),"No AWS credentials",a.default.createElement(s.Header.Subheader,null,"To manage research workspaces, click Configure AWS Credentials.")),a.default.createElement("div",null,a.default.createElement(s.Button,{color:"orange",size:"medium",basic:!0,onClick:this.handleConfigureCredentials,style:{maxWidth:"100%"}},"Configure AWS Credentials"))),this.renderButtons())}},{key:"renderButtons",value:function(){return a.default.createElement("div",{className:"mt3"},a.default.createElement(s.Button,{floated:"right",icon:"right arrow",labelPosition:"right",className:"ml2",primary:!0,content:"Next",disabled:!0}),a.default.createElement(s.Button,{floated:"right",icon:"left arrow",labelPosition:"left",className:"ml2",content:"Previous",onClick:this.handlePrevious}))}},{key:"userStore",get:function(){return this.props.userStore}},{key:"envTypesStore",get:function(){return this.props.envTypesStore}},{key:"clientInformationStore",get:function(){return this.props.clientInformationStore}},{key:"currentStep",get:function(){return this.props.currentStep}},{key:"studyIds",get:function(){return this.props.studyIds}}])&&S(t.prototype,n),o&&S(t,o),c}(a.default.Component);(0,i.decorate)(A,{handleSelectEnvType:i.action,handlePrevious:i.action,handleCompleted:i.action,setOnboarding:i.action,studyIds:i.computed,userStore:i.computed,envTypesStore:i.computed,clientInformationStore:i.computed,currentStep:i.computed,selectedTypeId:i.observable,onboardingOpen:i.observable});var j=(0,u.inject)("userStore","envTypesStore","clientInformationStore")((0,c.withRouter)((0,u.observer)(A)));t.default=j},700:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=(o=n(0))&&o.__esModule?o:{default:o},i=n(16),u=n(12);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,r,o=f(u);function u(){return c(this,u),o.apply(this,arguments)}return t=u,(n=[{key:"getEnvironment",value:function(){return this.props.environment}},{key:"render",value:function(){var e=this.getEnvironment().status;return"COMPLETED"===e?a.default.createElement(i.Label,{basic:!0,size:"mini",color:"green"},"Ready"):"TERMINATED"===e?a.default.createElement(i.Label,{basic:!0,size:"mini",color:"red"},"Terminated"):"FAILED"===e||e.endsWith("FAILED")?a.default.createElement(i.Label,{basic:!0,size:"mini",color:"red"},"Error"):"TERMINATING_FAILED"===e?a.default.createElement(i.Label,{basic:!0,size:"mini",color:"red"},"Failed to terminate"):"TERMINATING"===e?a.default.createElement("div",null,a.default.createElement(i.Label,{basic:!0,size:"mini"},"Terminating",a.default.createElement(i.Icon,{loading:!0,name:"spinner",size:"large",color:"red",className:"ml1 mr1"}))):"STOPPING"===e?a.default.createElement("div",null,a.default.createElement(i.Label,{basic:!0,size:"mini"},"Stopping",a.default.createElement(i.Icon,{loading:!0,name:"spinner",size:"large",color:"red",className:"ml1 mr1"}))):"STOPPED"===e?a.default.createElement(i.Label,{basic:!0,size:"mini",color:"orange"},"Stopped"):"STARTING"===e?a.default.createElement(i.Label,{basic:!0,size:"mini"},"Starting",a.default.createElement(i.Icon,{loading:!0,name:"spinner",size:"large",color:"yellow",className:"ml1 mr1"})):"PENDING"===e?a.default.createElement(i.Label,{basic:!0,size:"mini"},"Pending",a.default.createElement(i.Icon,{loading:!0,name:"spinner",size:"large",color:"yellow",className:"ml1 mr1"})):a.default.createElement(i.Label,{basic:!0,size:"mini"},"Unknown State",a.default.createElement(i.Icon,{loading:!0,name:"spinner",size:"large",color:"red",className:"ml1 mr1"}))}}])&&s(t.prototype,n),r&&s(t,r),u}(a.default.Component),v=(0,u.observer)(m);t.default=v},701:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n(0))&&a.__esModule?a:{default:a},u=n(12),c=n(3);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function f(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){f(a,r,o,i,u,"next",e)}function u(e){f(a,r,o,i,u,"throw",e)}i(void 0)}))}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(u,e);var t,n,o,a=y(u);function u(){var e;p(this,u);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).getUrl=function(){var t=d(r.mark((function t(n){var o,a;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getEnvironmentUrl(e.user);case 2:return o=t.sent,a=o.AuthorizedUrl,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleConnectClick=function(){var t=d(r.mark((function t(n){var o,a,i;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),n.stopPropagation(),o=window.open("about:blank","_blank"),a=e.props.environment,t.next=6,e.getUrl(a);case 6:i=t.sent,o.location=i,a.setFetchingUrl(!1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return t=u,(n=[{key:"render",value:function(){var e=this.props,t=e.as,n=(e.userStore,e.user,e.environment,l(e,["as","userStore","user","environment"]));return i.default.createElement(t,s({onClick:this.handleConnectClick},n))}},{key:"user",get:function(){return this.props.user||this.props.userStore.user}}])&&m(t.prototype,n),o&&m(t,o),u}(i.default.Component);(0,c.decorate)(b,{user:c.computed,handleConnectClick:c.action,getUrl:c.action});var E=(0,u.inject)("userStore")((0,u.observer)(b));t.default=E},702:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=p(n(0)),i=n(3),u=n(12),c=n(31),s=n(16),l=n(38),f=n(33),d=p(n(2073));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){m(a,r,o,i,u,"next",e)}function u(e){m(a,r,o,i,u,"throw",e)}i(void 0)}))}}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(c,e);var t,n,o,u=g(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=u.call(this,e)).handleViewDetail=function(){(0,l.gotoFn)(E(t))("/workspaces/id/".concat(t.environment.id))},t.handleTerminate=v(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.handleAction(v(r.mark((function e(){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.envsStore,e.next=3,n.terminateScEnvironment(t.environment.id);case 3:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)}))),t.handleStop=v(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.handleAction(v(r.mark((function e(){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.envsStore,e.next=3,n.stopScEnvironment(t.environment.id);case 3:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)}))),t.handleStart=v(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.handleAction(v(r.mark((function e(){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.envsStore,e.next=3,n.startScEnvironment(t.environment.id);case 3:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)}))),t.handleAction=function(){var e=v(r.mark((function e(n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.processing=!0,e.prev=1,e.next=4,n();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),(0,f.displayError)(e.t0);case 9:return e.prev=9,(0,i.runInAction)((function(){t.processing=!1})),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])})));return function(t){return e.apply(this,arguments)}}(),t.handleToggle=function(){t.connectionsButtonActive=!t.connectionsButtonActive},(0,i.runInAction)((function(){t.processing=!1,t.connectionsButtonActive=!1})),t}return t=c,(n=[{key:"canChangeState",value:function(){return this.envsStore.canChangeState(this.environment.id)}},{key:"render",value:function(){var e=this.environment,t=e.state,n=this.processing,r=this.props.showDetailButton,o=this.connectionsButtonActive,i=t.canConnect,u=t.canStart&&this.canChangeState(),c=t.canStop&&this.canChangeState();return a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"clearfix",style:{minHeight:"42px"}},t.canTerminate&&a.default.createElement(s.Modal,{trigger:a.default.createElement(s.Button,{"data-testid":"sc-env-terminate",floated:"right",basic:!0,color:"red",size:"mini",className:"mt1 mb1",loading:n},"Terminate"),header:"Are you sure?",content:"This action can not be reverted.",actions:["Cancel",{key:"terminate",content:"Terminate",negative:!0,onClick:this.handleTerminate}],size:"mini"}),u&&a.default.createElement(s.Button,{"data-testid":"sc-env-start",floated:"right",basic:!0,color:"green",size:"mini",className:"mt1 mb1 ml2",onClick:this.handleStart,loading:n},"Start"),c&&a.default.createElement(s.Button,{"data-testid":"sc-env-stop",floated:"right",basic:!0,color:"green",size:"mini",className:"mt1 mb1 ml2",onClick:this.handleStop,loading:n},"Stop"),i&&a.default.createElement(s.Button,{floated:"left",basic:!0,size:"mini",className:"mt1 mb1",toggle:!0,active:o,onClick:this.handleToggle},"Connections"),r&&a.default.createElement(s.Button,{floated:"left",basic:!0,size:"mini",className:"mt1 mb1 ml2",onClick:this.handleViewDetail},"View Detail")),i&&o&&a.default.createElement(d.default,{scEnvironment:e}))}},{key:"environment",get:function(){return this.props.scEnvironment}},{key:"envsStore",get:function(){return this.props.scEnvironmentsStore}}])&&y(t.prototype,n),o&&y(t,o),c}(a.default.Component);(0,i.decorate)(S,{envsStore:i.computed,environment:i.computed,processing:i.observable,connectionsButtonActive:i.observable,handleViewDetail:i.action,handleAction:i.action,handleToggle:i.action});var k=(0,u.inject)("scEnvironmentsStore")((0,c.withRouter)((0,u.observer)(S)));t.default=k},703:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(0)),o=n(12),a=s(n(6)),i=n(345),u=n(16),c=n(33);function s(e){return e&&e.__esModule?e:{default:e}}var l=(0,o.observer)((function(e){var t=e.text,n=void 0===t?"":t,o=e.className,s=void 0===o?"ml2 mt1":o,l=e.message,f=void 0===l?"Copied to clipboard":l,d=e.size,p=e.name,m={name:void 0===p?"copy outline":p};return d&&(m.size=d),r.default.createElement(u.Popup,{content:"Copy",trigger:r.default.createElement(i.CopyToClipboard,{className:(0,a.default)(s),text:n,style:{cursor:"pointer"},onCopy:function(){return(0,c.displaySuccess)(f,"Done")}},r.default.createElement(u.Icon,m))})}));t.default=l},704:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=d(n(5)),a=d(n(0)),i=n(3),u=n(12),c=n(31),s=n(16),l=n(15),f=n(27);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(u,e);var t,n,r,i=y(u);function u(){return p(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"componentDidMount",value:function(){var e=this.getEnvCostStore();(0,l.isStoreReady)(e)||(0,l.isStoreError)(e)||(0,f.swallowError)(e.load())}},{key:"getEnvCostStore",value:function(){var e=this.costsStore,t=this.envId;return e.getScEnvironmentCostStore(t)}},{key:"render",value:function(){var e=this.envCost,t=o.default.isUndefined(e),n=!t&&!o.default.isEmpty(e.error),r=t||n?0:e.previousDayCost;return t?a.default.createElement(s.Placeholder,null,a.default.createElement(s.Placeholder.Line,{length:"full"}),a.default.createElement(s.Placeholder.Line,{length:"full"})):a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"center breakout"},a.default.createElement(s.Statistic,{color:n?"red":"black",size:"mini"},a.default.createElement(s.Statistic.Value,null,n?"N/A":"$".concat((0,f.nicePrice)(r))),a.default.createElement(s.Statistic.Label,null,"Yesterday's Cost"))),n&&this.renderErrorPopup(e.error))}},{key:"renderErrorPopup",value:function(e){return a.default.createElement("div",{className:"mt2 center"},a.default.createElement(s.Popup,{trigger:a.default.createElement(s.Label,{size:"mini",basic:!0,color:"red"},"Show Error"),basic:!0},a.default.createElement("div",{className:"color-red"},a.default.createElement("p",null,"An error occurred while retrieving the cost information."),a.default.createElement("p",null,"If this workspace is provisioned in a new account, verify with your administer that the cost explorer feature is enabled for the account."),a.default.createElement("p",null,"The system returned this error message:"),a.default.createElement("p",null,e))))}},{key:"costsStore",get:function(){return this.props.scEnvironmentCostsStore}},{key:"envId",get:function(){return this.props.envId}},{key:"envCost",get:function(){var e=this.envId;return this.costsStore.getScEnvironmentCost(e)}}])&&m(t.prototype,n),r&&m(t,r),u}(a.default.Component);(0,i.decorate)(b,{costsStore:i.computed,envId:i.computed});var E=(0,u.inject)("scEnvironmentCostsStore")((0,c.withRouter)((0,u.observer)(b)));t.default=E},705:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.envMgmtRoleName=void 0;t.envMgmtRoleName="e2etest-va-swb-EnvMgmt"},706:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createWizard=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return u.create({steps:e,currentIdx:t})},t.Wizard=t.default=void 0;var r,o=(r=n(5))&&r.__esModule?r:{default:r},a=n(8);var i=a.types.model("Step",{key:a.types.string,title:a.types.string,desc:a.types.optional(a.types.string,""),isComplete:!1}).actions((function(e){return{setComplete:function(t){e.isComplete=t}}})),u=a.types.model("Wizard",{steps:a.types.array(i),currentIdx:0}).actions((function(e){return{next:function(){e.hasNext&&(e.currentIdx+=1)},previous:function(){e.hasPrevious&&(e.currentIdx-=1)},goTo:function(t){var n=o.default.findIndex(e.steps,{key:t});n>=0&&(e.currentIdx=n)}}})).views((function(e){return{get currentStep(){return e.steps[e.currentIdx]},get hasNext(){return e.currentIdx<e.steps.length-1},get hasPrevious(){return e.currentIdx>0},isStepActive:function(t){return o.default.findIndex(e.steps,{key:t})===e.currentIdx}}}));t.Wizard=u;var c=u;t.default=c},707:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=k(n(5)),i=k(n(0)),u=n(12),c=n(3),s=n(16),l=k(n(68)),f=n(27),d=k(n(39)),p=k(n(44)),m=n(15),v=n(706),y=n(33),h=n(64),g=n(2112),b=k(n(2113)),E=k(n(2114)),w=k(n(2115)),S=k(n(2117));function k(e){return e&&e.__esModule?e:{default:e}}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=N(e);if(t){var o=N(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return T(this,n)}}function T(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=[{key:"basic_information",title:"Basic Information",desc:"Enter basic information",isComplete:!1,stepComponent:b.default},{key:"access_control",title:"Access Control",desc:"Define who can access",isComplete:!1,stepComponent:E.default},{key:"input_params",title:"Input Parameters",desc:"Provide AWS CloudFormation Inputs",isComplete:!1,stepComponent:w.default},{key:"tags",title:"Tags",desc:"Specify Resource Tags",isComplete:!1,stepComponent:S.default}];function D(){h.sessionStore.removeStartsWith("EnvTypeConfigEditor-TempStore")}var R=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(b,e);var t,n,o,h=x(b);function b(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),(t=h.call(this,e)).renderTitle=function(){var e=t.envTypeConfig,n=t.isEditAction();return i.default.createElement("div",{className:"mb3"},i.default.createElement(s.Header,{as:"h3",className:"color-grey mt1 mb0"},i.default.createElement(s.Icon,{name:"settings",className:"align-top"}),i.default.createElement(s.Header.Content,{className:"left-align"},n?"Edit":"Add"," Configuration"),n&&i.default.createElement(s.Header.Subheader,{className:"mt2"},e.name)))},t.renderContent=function(){var e=t.isEditAction();return i.default.createElement(i.default.Fragment,null,e?t.renderStepTabs():i.default.createElement(i.default.Fragment,null,t.renderStepProgress(),t.renderCurrentStep()))},t.renderStepTabs=function(){var e=a.default.map(t.wizardModel.steps,(function(e){return{menuItem:e.title,render:function(){return i.default.createElement(u.Observer,null,(function(){return t.renderEnvTypeConfigStep(e.key)}))}}}));return i.default.createElement(s.Tab,{className:"mt3",menu:{secondary:!0,pointing:!0},renderActiveOnly:!0,panes:e})},t.renderStepProgress=function(){return i.default.createElement(s.Step.Group,{ordered:!0,className:"container"},a.default.map(t.wizardModel.steps,(function(e){var n={key:e.key,completed:e.isComplete,active:t.wizardModel.isStepActive(e.key)};return i.default.createElement(s.Step,n,i.default.createElement(s.Step.Content,null,i.default.createElement(s.Step.Title,null,e.title),i.default.createElement(s.Step.Description,null,e.desc)))})))},t.renderCurrentStep=function(){return t.renderEnvTypeConfigStep(t.wizardModel.currentStep.key)},t.handlePreviousClick=function(){t.wizardModel.previous()},t.handleFormSubmission=function(){var e,n=(e=r.mark((function e(n){var o,i,u,c,s,l,f,d,p,m,v,h,g,b,E,w,S,k,O;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.envTypeConfig,i=t.isEditAction(),u=n.values(),c=u.id,s=u.name,l=u.desc,f=u.estimatedCostInfo,d=u.allowRoleIds,p=u.denyRoleIds,m=u.params,v=u.tags,i&&(h=o.params,g=o.tags),b=a.default.isEmpty(m)?h:JSON.parse(m),E=JSON.parse(v||"[]")||[],w=function(e){return{key:e.key||e.name,value:e.value}},S=a.default.isEmpty(v)?g:a.default.map(E,w),k=C({},o||{},{id:c,name:s,desc:l,estimatedCostInfo:f,allowRoleIds:d||[],denyRoleIds:p||[],params:b,tags:S}),e.prev=9,i||!t.wizardModel.hasNext){e.next=12;break}return e.abrupt("return",t.wizardModel.next());case 12:if(!i){e.next=19;break}return e.next=15,t.envTypeConfigsStore.updateEnvTypeConfig(k);case 15:O=e.sent,(0,y.displaySuccess)("Successfully updated ".concat(k.name," configuration")),e.next=22;break;case 19:return e.next=21,t.envTypeConfigsStore.createEnvTypeConfig(k);case 21:O=e.sent;case 22:return D(),t.props.onEnvTypeConfigSaveComplete(O),e.abrupt("return",O);case 27:e.prev=27,e.t0=e.catch(9),(0,y.displayError)(e.t0);case 30:return e.abrupt("return",void 0);case 31:case"end":return e.stop()}}),e,null,[[9,27]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){A(a,r,o,i,u,"next",e)}function u(e){A(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}(),(0,c.runInAction)((function(){t.stores=new l.default([t.envTypeConfigsStore,t.userRolesStore]),t.form=(0,g.getEnvTypeConfigForm)(e.envTypeConfig),t.wizardModel=(0,v.createWizard)(a.default.map(_,(function(e){return a.default.omit(e,"stepComponent")})))})),t}return t=b,(n=[{key:"componentDidMount",value:function(){(0,f.swallowError)(this.stores.load())}},{key:"render",value:function(){var e=this.stores,t=null;return t=e.hasError?i.default.createElement(d.default,{error:e.error,className:"p0 mb3"}):(0,m.isStoreLoading)(e)?i.default.createElement(p.default,null):(0,m.isStoreReady)(e)?this.renderContent():null,i.default.createElement("div",{className:"ml3 mt3 mr3 mb4"},this.renderTitle(),t)}},{key:"renderEnvTypeConfigStep",value:function(e){var t=this,n=a.default.find(_,{key:e}),r=a.default.get(n,"stepComponent");return i.default.createElement(r,{form:this.form,wizardModel:this.wizardModel,onCancel:function(){D(),t.props.onCancel()},onSubmit:this.handleFormSubmission,envTypeConfig:this.envTypeConfig,envType:this.envType,envTypeConfigsStore:this.envTypeConfigsStore,onPrevious:this.handlePreviousClick,wizardTempStoreKeyPrefix:"EnvTypeConfigEditor-TempStore",action:this.getAction()})}},{key:"isEditAction",value:function(){return"edit"===this.getAction()}},{key:"getAction",value:function(){return this.props.action}},{key:"envTypeConfigsStore",get:function(){return this.props.envTypeConfigsStore}},{key:"userRolesStore",get:function(){return this.props.userRolesStore}},{key:"envType",get:function(){return this.props.envType}},{key:"envTypeConfig",get:function(){return this.props.envTypeConfig}}])&&j(t.prototype,n),o&&j(t,o),b}(i.default.Component);(0,c.decorate)(R,{userRolesStore:c.computed,envTypeConfigsStore:c.computed,envTypeConfig:c.computed,envType:c.computed,handleFormSubmission:c.action,stores:c.observable});var M=(0,u.inject)("userRolesStore")((0,u.observer)(R));t.default=M},708:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnvTypeCandidate=t.default=void 0;var r=n(8),o=r.types.model("Product",{productId:"",name:""}),a=r.types.model("ProvisioningArtifact",{id:"",name:r.types.maybeNull(r.types.optional(r.types.string,"")),description:r.types.maybeNull(r.types.optional(r.types.string,"")),type:"",createdTime:"",active:!1,guidance:""}),i=r.types.model("ParamConstraint",{AllowedValues:r.types.optional(r.types.array(r.types.optional(r.types.string,"")),[])}),u=r.types.model("CfnParam",{ParameterKey:"",ParameterType:"",IsNoEcho:!1,Description:r.types.maybeNull(r.types.optional(r.types.string,"")),ParameterConstraints:r.types.optional(i,{})}),c=r.types.model("EnvTypeCandidate",{id:r.types.identifier,name:"",desc:r.types.maybeNull(r.types.optional(r.types.string,"")),isLatest:!1,product:r.types.optional(o,{}),provisioningArtifact:r.types.optional(a,{}),params:r.types.optional(r.types.array(u),[])}).actions((function(e){return{setEnvTypeCandidate:function(t){(0,r.applySnapshot)(e,t)}}})).views((function(e){return{get descHtml(){return(0,r.getEnv)(e).showdown.convert(e.desc)}}}));t.EnvTypeCandidate=c;var s=c;t.default=s},739:function(e,t,n){"use strict";var r=n(10);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(3);n(963);var i,u=n(967),c=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!==typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(970)),s=(i=n(971))&&i.__esModule?i:{default:i};function l(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function f(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}var d=function(e){var t=e.renderAppContainer,n=e.renderError,o=e.renderProgress,i=e.pluginRegistry;c.unregister(),(0,a.configure)({enforceActions:"always"});var l,d=(0,u.initializeAppContext)(i);o(),(l=r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.appRunner.run();case 3:t(s.default,d),e.next=11;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),n(e.t0);try{d.cleaner.cleanup()}catch(r){console.log(r)}case 11:case"end":return e.stop()}}),e,null,[[0,6]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var o=l.apply(e,t);function a(e){f(o,n,r,a,i,"next",e)}function i(e){f(o,n,r,a,i,"throw",e)}a(void 0)}))})()};t.default=d},74:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=f(n(5)),o=f(n(0)),a=n(12),i=n(16),u=f(n(6)),c=f(n(159)),s=f(n(160)),l=f(n(161));function f(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=(0,a.observer)((function(e){var t=e.field,n=e.disabled,a=void 0!==n&&n,f=e.className,v=void 0===f?"mb4":f,y=e.rows,h=void 0===y?5:y,g=e.dataTestId,b=void 0===g?"":g,E=t.error,w=void 0===E?"":E,S=!r.default.isEmpty(w),k=t.disabled||a,O=k?"disabled":"",C=S?"error":"",P=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({disabled:k,rows:h},r.default.omit(t.bind(),["label"]));return o.default.createElement("div",{className:(0,u.default)(v,C,O)},o.default.createElement(c.default,{field:t}),o.default.createElement(s.default,{field:t}),o.default.createElement(i.TextArea,d({"data-testid":b,className:"field"},P)),o.default.createElement(l.default,{field:t}))}));t.default=v},740:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=S(n(973)),a=S(n(974)),i=S(n(975)),u=S(n(64)),c=S(n(976)),s=S(n(978)),l=S(n(982)),f=S(n(530)),d=S(n(1022)),p=S(n(1024)),m=S(n(1025)),v=S(n(1026)),y=E(n(1027)),h=E(n(1028)),g=E(n(1029)),b=E(n(1030));function E(e){return e&&e.__esModule?e:{default:e}}function w(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return w=function(){return e},e}function S(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=w();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}var k={registerAppContextItems:function(e){o.registerContextItems(e),a.registerContextItems(e),i.registerContextItems(e),u.registerContextItems(e),c.registerContextItems(e),s.registerContextItems(e),l.registerContextItems(e),f.registerContextItems(e),d.registerContextItems(e),p.registerContextItems(e),m.registerContextItems(e),v.registerContextItems(e),e.assets.images.faviconIcon=y.default,e.assets.images.faviconImage=h.default,e.assets.images.loginImage=g.default,e.assets.images.logoImage=b.default},postRegisterAppContextItems:function(e){}};t.default=k},741:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=(o=n(5))&&o.__esModule?o:{default:o},i=n(43),u=n(33);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){f(a,r,o,i,u,"next",e)}function u(e){f(a,r,o,i,u,"throw",e)}i(void 0)}))}}function p(){return(p=d(r.mark((function e(t,n){var o,a,u,c,l,f;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.authentication,a=n.authenticationProviderPublicConfigsStore,u=n.pluginRegistry,e.next=3,a.load();case 3:return e.next=5,o.getIdTokenInfo();case 5:if(c=e.sent,t.tokenInfo=s({},t.tokenInfo,{},c),l=c.idToken,f=c.decodedIdToken,"notExpired"!==c.status){e.next=16;break}return(0,i.setIdToken)(l,f),o.saveIdToken(l),o.setSelectedAuthenticationProviderId(f.iss),e.next=14,u.runPlugins("authentication","loginDetected");case 14:e.next=18;break;case 16:return e.next=18,u.runPlugins("authentication","logoutDetected");case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=d(r.mark((function e(t,n){var o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("notExpired"===a.default.get(t,"tokenInfo.status")){e.next=3;break}return e.abrupt("return");case 3:return o=n.userStore,e.next=6,o.load();case 6:o.user.isRootUser&&(0,u.displayWarning)("You have logged in as root user. Logging in as root user is discouraged.");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v={init:function(e,t){return p.apply(this,arguments)},postInit:function(e,t){return m.apply(this,arguments)}};t.default=v},742:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(43);function a(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function u(e){a(i,r,o,u,c,"next",e)}function c(e){a(i,r,o,u,c,"throw",e)}u(void 0)}))}}function u(){return(u=i(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=i(r.mark((function e(){var t,n=arguments;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]?n[0]:{},t.explicitLogin;case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return(s=i(r.mark((function e(){var t,n=arguments;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},t.autoLogout,e.next=3,(0,o.logout)();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=i(r.mark((function e(){var t,n=arguments;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]?n[0]:{},t.explicitLogout,t.autoLogout;case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f={loginInitiated:function(){return u.apply(this,arguments)},loginDetected:function(){return c.apply(this,arguments)},logoutInitiated:function(){return s.apply(this,arguments)},logoutDetected:function(){return l.apply(this,arguments)}};t.default=f},743:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(1034)),o=a(n(1038));function a(e){return e&&e.__esModule?e:{default:e}}var i={getAppComponent:function(e){return e.location,e.appContext,r.default},getAutoLogoutComponent:function(e){return e.location,e.appContext,o.default}};t.default=i},744:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(5))&&r.__esModule?r:{default:r};function a(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u={registerMenuItems:function(e,t){t.location;var n=t.appContext,r=o.default.get(n,"userStore.user.isAdmin");return new Map([].concat(a(e),[["/dashboard",{title:"Dashboard",icon:"dashboard",shouldShow:!0}],["/authentication-providers",{title:"Auth",icon:"user secret",shouldShow:r}],["/users",{title:"Users",icon:"users",shouldShow:r}]]))}};t.default=u},745:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=f(n(5)),o=f(n(1040)),a=f(n(1043)),i=f(n(1044)),u=f(n(1047)),c=f(n(1049)),s=f(n(1051)),l=f(n(85));function f(e){return e&&e.__esModule?e:{default:e}}function d(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m={registerRoutes:function(e,t){return t.location,t.appContext,new Map([].concat(d(e),[["/authentication-providers/add",(0,l.default)(a.default)],["/authentication-providers/:authenticationProviderConfigId/edit",(0,l.default)(i.default)],["/authentication-providers",(0,l.default)(u.default)],["/users/add",(0,l.default)(c.default)],["/users",(0,l.default)(s.default)],["/dashboard",(0,l.default)(o.default)]]))},getDefaultRouteLocation:function(e){var t=e.location,n=e.appContext.userStore;return{pathname:r.default.get(n,"user.isRootUser")?"/users":"/dashboard",search:t.search,hash:t.hash,state:t.state}}};t.default=m},750:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAC7gAAAAyCAYAAADMOZY9AAALTUlEQVR4Xu3aEVeEURiF0ZmVRVEWZVE0FmVRFkVZlEVDWZRFURZlURYNZUNZFGXhbZ1fcS7s7w+8Z+374bMcY+wsfAQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAoCywHGPsljc4T4AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIEFgnc9zgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIG2QAL3/fYI9wkQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAQAL3AwwECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQKAtkMD9sD3CfQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkMD9CAMBAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIEGgLJHA/bo9wnwABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIJHBfYSBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAm2BBO4n7RHuEyBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgACBBO6nGAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAQFsggftZe4T7BAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEAggfs5BgIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAg0BZI4H7RHuE+AQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBBI4H6JgQABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQItAUSuF+1R7hPgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQSuF9jIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECbYEE7jftEe4TIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEE7rcYCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIBAWyCB+7o9wn0CBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJDA/Q4DAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBBoCyRwv2+PcJ8AAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECCRwf8BAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgTaAgncH9sj3CdAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgncnzAQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIG2QAL35/YI9wkQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAQAL3FwwECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQKAtkMD9tT3CfQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkMD9DQMBAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIEGgLJHB/b49wnwABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIJHD/wECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBNoCCdw37RHuEyBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgACBBO6fGAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAQFsggfu2PcJ9AgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQwP0LAwECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQaAskcP9uj3CfAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgkcP/BQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIE2gIJ3H/bI9wnQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIJ3P8wECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgACBtkAC99Ee4T4BAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIEBC4+wcIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAYAoBgfsUz2AEAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECAjc/QMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgMIWAwH2KZzCCAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBATu/gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQmEJA4D7FMxhBgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgJ3/wABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQITCEgcJ/iGYwgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAYG7f4AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIEphAQuE/xDEYQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwD8uL7OdGFnBBwAAAABJRU5ErkJggg=="},751:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=O(n(1089)),a=O(n(1090)),i=O(n(1092)),u=O(n(1093)),c=O(n(1096)),s=O(n(1099)),l=O(n(604)),f=O(n(627)),d=O(n(1171)),p=O(n(1591)),m=O(n(1595)),v=O(n(1597)),y=O(n(1600)),h=O(n(1601)),g=O(n(1607)),b=O(n(1609)),E=O(n(426)),w=O(n(1616)),S=n(188);function k(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return k=function(){return e},e}function O(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=k();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}var C={registerAppContextItems:function(e){o.registerContextItems(e),a.registerContextItems(e),i.registerContextItems(e),u.registerContextItems(e),c.registerContextItems(e),s.registerContextItems(e),l.registerContextItems(e),f.registerContextItems(e),d.registerContextItems(e),p.registerContextItems(e),m.registerContextItems(e),v.registerContextItems(e),y.registerContextItems(e),h.registerContextItems(e),g.registerContextItems(e),b.registerContextItems(e),E.registerContextItems(e),w.registerContextItems(e),console.log("enableBuiltInWorkspaces",S.enableBuiltInWorkspaces),e.showEnvTypeManagement=!S.enableBuiltInWorkspaces},postRegisterAppContextItems:function(e){}};t.default=C},752:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=(o=n(5))&&o.__esModule?o:{default:o};function i(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){i(a,r,o,u,c,"next",e)}function c(e){i(a,r,o,u,c,"throw",e)}u(void 0)}))}}function c(){return(c=u(r.mark((function e(t,n){var o,i,u,c,s,l;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("notExpired"===a.default.get(t,"tokenInfo.status")){e.next=3;break}return e.abrupt("return");case 3:if(o=n.userStore,i=n.usersStore,u=n.awsAccountsStore,c=n.userRolesStore,s=n.indexesStore,l=n.projectsStore,"active"!==o.user.status){e.next=7;break}return e.next=7,Promise.all([i.load(),u.load(),c.load(),s.load(),l.load()]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var s={postInit:function(e,t){return c.apply(this,arguments)}};t.default=s},753:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(1619))&&r.__esModule?r:{default:r};var a={getAppComponent:function(e){e.location;var t=e.appContext.app||{};if(t.userAuthenticated&&!t.userRegistered)return o.default}};t.default=a},754:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(5))&&r.__esModule?r:{default:r};function a(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u={registerMenuItems:function(e,t){t.location;var n=t.appContext,r=o.default.get(n,"userStore.user.isAdmin"),i=o.default.get(n,"userStore.user.capabilities.canCreateWorkspace"),u=o.default.get(n,"userStore.user.capabilities.canViewDashboard");return new Map([].concat(a(o.default.filter(a(e),(function(e){return!("/dashboard"===e[0]&&!u)}))),[["/accounts",{title:"Accounts",icon:"sitemap",shouldShow:r}],["/studies",{title:"Studies",icon:"book",shouldShow:!0}],["/workspaces",{title:"Workspaces",icon:"server",shouldShow:i}]]))}};t.default=u},755:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=E(n(5)),o=E(n(85)),a=E(n(1624)),i=E(n(1629)),u=E(n(1634)),c=E(n(1639)),s=E(n(1641)),l=E(n(1643)),f=E(n(1657)),d=E(n(2059)),p=E(n(2084)),m=E(n(2089)),v=E(n(2091)),y=E(n(2093)),h=E(n(2095)),g=E(n(2097)),b=E(n(2098));function E(e){return e&&e.__esModule?e:{default:e}}function w(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k={registerRoutes:function(e,t){return t.location,t.appContext,e.delete("/users/add"),e.delete("/users"),new Map([].concat(w(e),[["/users/add/local",(0,o.default)(b.default)],["/users/add",(0,o.default)(u.default)],["/users",(0,o.default)(a.default)],["/indexes/add",(0,o.default)(c.default)],["/aws-accounts/add",(0,o.default)(m.default)],["/aws-accounts/create",(0,o.default)(v.default)],["/aws-accounts/budget/:id",(0,o.default)(y.default)],["/accounts",(0,o.default)(i.default)],["/dashboard",(0,o.default)(s.default)],["/studies/setup-workspace/type/:envTypeId",(0,o.default)(f.default)],["/studies/setup-workspace",(0,o.default)(f.default)],["/studies/workspace-type/:envTypeId",(0,o.default)(l.default)],["/studies",(0,o.default)(l.default)],["/workspaces/create/type/:envTypeId",(0,o.default)(h.default)],["/workspaces/create",(0,o.default)(h.default)],["/workspaces/id/:instanceId",(0,o.default)(p.default)],["/workspaces",(0,o.default)(d.default)],["/projects/add",(0,o.default)(g.default)]]))},getDefaultRouteLocation:function(e){var t=e.location,n=e.appContext.userStore,o="/dashboard",a=r.default.get(n,"user.isRootUser"),i=r.default.get(n,"user.isExternalResearcher"),u=r.default.get(n,"user.isInternalGuest"),c=r.default.get(n,"user.isExternalGuest");return a?o="/users":i?o="/workspaces":(u||c)&&(o="/studies"),{pathname:o,search:t.search,hash:t.hash,state:t.state}}};t.default=k},765:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),o=a(n(2100));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c={getEnvTypeCardMetaActions:function(e,t){return[].concat(i(e||[]),[r.default.createElement(o.default,{key:t.id,envType:t})])}};t.default=c},766:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(5)),o=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c={registerMenuItems:function(e,t){t.location;var n=t.appContext,a=r.default.get(n,"userStore.user.isAdmin"),u=r.default.get(n,"showEnvTypeManagement",!0);return new Map([].concat(i(e),[["/workspace-types-management",{title:o.default.createElement(o.default.Fragment,null,"Workspace",o.default.createElement("br",null),"Types"),icon:"computer",shouldShow:a&&u}]]))}};t.default=c},767:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(85)),o=u(n(5)),a=u(n(2102)),i=u(n(2107));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l={registerRoutes:function(e,t){t.location;var n=t.appContext;return o.default.get(n,"showEnvTypeManagement",!0)?new Map([].concat(c(e),[["/workspace-types-management/:action/:id",(0,r.default)(i.default)],["/workspace-types-management",(0,r.default)(a.default)]])):e}};t.default=l},768:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=u(n(2122)),a=u(n(2128));function i(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}var c={registerAppContextItems:function(e){o.registerContextItems(e),a.registerContextItems(e)},postRegisterAppContextItems:function(e){}};t.default=c},769:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n(0)),a=n(12),i=n(3),u=n(31),c=s(n(6));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t,n,r,a=p(i);function i(){return l(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.uid,t=this.userDisplayName;return t.isSystem({uid:e})?"":o.default.createElement("span",{className:(0,c.default)(this.props.className)},"by ",t.getDisplayName({uid:e}))}},{key:"uid",get:function(){return this.props.uid}},{key:"userDisplayName",get:function(){return this.props.userDisplayName}}])&&f(t.prototype,n),r&&f(t,r),i}(o.default.Component);(0,i.decorate)(y,{});var h=(0,a.inject)("userDisplayName")((0,u.withRouter)((0,a.observer)(y)));t.default=h},792:function(e,t,n){e.exports=n(2139)},85:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=u(n(0)),a=n(12),i=u(n(1035));function u(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(i,e);var t,n,r,a=m(i);function i(){return f(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"renderLogin",value:function(){return this.props.loginComp}},{key:"renderAuthenticated",value:function(){var e=this.props.Comp,t=this.getWrappedCompProps({authenticated:!0});return o.default.createElement(e,t)}},{key:"render",value:function(){return this.props.app.userAuthenticated?this.renderAuthenticated():this.renderLogin()}},{key:"getWrappedCompProps",value:function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.props,{},e);return delete t.Comp,delete t.loginComp,t}}])&&d(t.prototype,n),r&&d(t,r),i}(o.default.Component),g=(0,a.inject)("app","assets")((0,a.observer)(h));var b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{loginComp:o.default.createElement(i.default,null)},n=t.loginComp;return function(t){return o.default.createElement(g,c({Comp:e,loginComp:n},t))}};t.default=b},91:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.createForm=function(e,t,n){var r=t||m,o=n||v;return new i.default({fields:e},{plugins:r,options:o})},t.createSingleFieldForm=t.formOptions=t.formPlugins=void 0;var o=l(n(391)),a=l(n(296)),i=l(n(393)),u=l(n(1621)),c=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(53));function s(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p={cidr:{validatorFn:function(e){var t=(0,u.default)(e);return 4===t||6===t},message:"The :attribute is not in the CIDR format."}},m=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},c.formPlugins,{dvr:(0,o.default)({package:a.default,extend:function(e){var t=e.validator;Object.keys(p).forEach((function(e){return t.register(e,p[e].validatorFn,p[e].message)}))}})});t.formPlugins=m;var v=c.formOptions;t.formOptions=v;var y=c.createSingleFieldForm;t.createSingleFieldForm=y},967:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeAppContext=t.appContext=void 0;var r,o=(r=n(5))&&r.__esModule?r:{default:r},a=n(3),i=n(968);var u=(0,a.observable)({});t.appContext=u;t.initializeAppContext=function(e){var t=new i.PluginRegistry(e),n={disposers:{},intervalIds:{},pluginRegistry:t,assets:{images:{}}},r=t.getPluginsWithMethod("app-context-items","registerAppContextItems");o.default.forEach(r,(function(e){e.registerAppContextItems(n)}));var a=t.getPluginsWithMethod("app-context-items","postRegisterAppContextItems");return o.default.forEach(a,(function(e){e.postRegisterAppContextItems(n)})),Object.assign(u,n),n}},968:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.PluginRegistry=void 0;var o,a=(o=n(5))&&o.__esModule?o:{default:o},i=n(27);function u(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.registry=t}var t,n,o;return t=e,(n=[{key:"getPlugins",value:function(e){return this.registry.getPlugins(e)}},{key:"getPluginsWithMethod",value:function(e,t){var n=this.registry.getPlugins(e);return a.default.filter(n,(function(e){return a.default.isFunction(e[t])}))}},{key:"runPlugins",value:function(){var e,t=(e=r.mark((function e(t,n){var o,a,u,c,s=arguments;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=s.length,a=new Array(o>2?o-2:0),u=2;u<o;u++)a[u-2]=s[u];return c=this.getPluginsWithMethod(t,n),e.abrupt("return",(0,i.processSequentially)(c,(function(e){return e[n].apply(e,a)})));case 3:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){s(a,r,o,i,u,"next",e)}function u(e){s(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}()},{key:"visitPlugins",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.payload,o=void 0===r?{}:r,a=n.continueOnError,i=void 0!==a&&a,c=n.pluginInvokerFn,s=void 0===c?function(e,t,n){for(var r=arguments.length,o=new Array(r>3?r-3:0),a=3;a<r;a++)o[a-3]=arguments[a];return t[n].apply(t,[e].concat(o))}:c,l=this.getPluginsWithMethod(e,t),f=o,d=arguments.length,p=new Array(d>3?d-3:0),m=3;m<d;m++)p[m-3]=arguments[m];var v,y=u(l);try{for(y.s();!(v=y.n()).done;){var h=v.value;try{f=s.apply(void 0,[f,h,t].concat(p))}catch(g){if(!i)throw g}}}catch(g){y.e(g)}finally{y.f()}return f}}])&&l(t.prototype,n),o&&l(t,o),e}();t.PluginRegistry=f},970:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");r?(!function(e,t){fetch(e).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):o(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):o(t,e)}))}},t.unregister=function(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))};var r=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function o(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}},971:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=(o=n(5))&&o.__esModule?o:{default:o},u=n(31),c=n(12),s=n(8),l=n(16),f=n(135);function d(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(u,e);var t,n,r,o=y(u);function u(){return p(this,u),o.apply(this,arguments)}return t=u,(n=[{key:"componentDidMount",value:function(){document.title=f.branding.page.title,document.querySelector("link[rel='shortcut icon']").href=this.props.assets.images.faviconIcon,document.querySelector("link[rel='icon']").href=this.props.assets.images.faviconImage}},{key:"render",value:function(){var e=this.props,t=e.location,n=e.pluginRegistry,r=e.app,o=i.default.reverse(n.getPluginsWithMethod("app-component","getAppComponent")||[]),u=this.renderError();i.default.forEach(o,(function(e){var n=e.getAppComponent({location:t,appContext:(0,s.getEnv)(r)});if(!i.default.isUndefined(n))return u=n,!1})),o=i.default.reverse(n.getPluginsWithMethod("app-component","getAutoLogoutComponent")||[]);var c=function(){return a.default.createElement(a.default.Fragment,null)};return i.default.forEach(o,(function(e){var n=e.getAutoLogoutComponent({location:t,appContext:(0,s.getEnv)(r)});if(!i.default.isUndefined(n))return c=n,!1})),a.default.createElement(a.default.Fragment,null,a.default.createElement(c,null),a.default.createElement(u,null))}},{key:"renderError",value:function(){return a.default.createElement(l.Container,null,a.default.createElement(l.Message,{negative:!0,className:"clearfix mt4"},a.default.createElement(l.Message.Header,null,"A problem was encountered"),a.default.createElement("p",null,"No plugins provided the App react component!")))}}])&&m(t.prototype,n),r&&m(t,r),u}(a.Component),E=(0,c.inject)("pluginRegistry","app","assets")((0,u.withRouter)((0,c.observer)(b)));t.default=E},973:function(e,t,n){"use strict";var r=n(10);function o(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){c=!0,i=e},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.appRunner=new c(e)},t.AppRunner=void 0;var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.appContext=t}var t,n,a;return t=e,(n=[{key:"run",value:function(){var e,t=(e=r.mark((function e(){var t,n,a,i,u,c,s,l,f,d,p,m;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.appContext,n=t.pluginRegistry,a=n.getPluginsWithMethod("initialization","init"),i={},u=o(a),e.prev=5,u.s();case 7:if((c=u.n()).done){e.next=13;break}return s=c.value,e.next=11,s.init(i,t);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),u.e(e.t0);case 18:return e.prev=18,u.f(),e.finish(18);case 21:if(!i.externalRedirectUrl){e.next=24;break}return window.location=i.externalRedirectUrl,e.abrupt("return");case 24:l=n.getPluginsWithMethod("initialization","postInit"),f=o(l),e.prev=26,f.s();case 28:if((d=f.n()).done){e.next=34;break}return p=d.value,e.next=32,p.postInit(i,t);case 32:e.next=28;break;case 34:e.next=39;break;case 36:e.prev=36,e.t1=e.catch(26),f.e(e.t1);case 39:return e.prev=39,f.f(),e.finish(39);case 42:if(!i.externalRedirectUrl){e.next=45;break}return window.location=i.externalRedirectUrl,e.abrupt("return");case 45:return m=t.app,e.next=48,m.init(i);case 48:case"end":return e.stop()}}),e,this,[[5,15,18,21],[26,36,39,42]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){i(a,r,o,u,c,"next",e)}function c(e){i(a,r,o,u,c,"throw",e)}u(void 0)}))});return function(){return t.apply(this,arguments)}}()}])&&u(t.prototype,n),a&&u(t,a),e}();t.AppRunner=c},974:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.app=u.create({},e)},t.App=void 0;var o,a=(o=n(5))&&o.__esModule?o:{default:o};function i(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}var u=n(8).types.model("BaseApp",{userAuthenticated:!1}).actions((function(){return{runInAction:function(e){return e()}}})).actions((function(e){return{init:function(){var t,n=(t=r.mark((function t(n){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"notExpired"===a.default.get(n,"tokenInfo.status")&&e.setUserAuthenticated(!0);case 2:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function u(e){i(a,r,o,u,c,"next",e)}function c(e){i(a,r,o,u,c,"throw",e)}u(void 0)}))});return function(e){return n.apply(this,arguments)}}(),setUserAuthenticated:function(t){e.userAuthenticated=t},cleanup:function(){e.setUserAuthenticated(!1)}}}));t.App=u},975:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.cleaner=new c(e)},t.Cleaner=void 0;var r,o=(r=n(5))&&r.__esModule?r:{default:r},a=n(3),i=n(43);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.appContext=t}var t,n,r;return t=e,(n=[{key:"cleanup",value:function(){var e=this,t=this.appContext,n=t.disposers,r=t.intervalIds,u=o.default.keys(n);o.default.forEach(u,(function(e){var t=n[e];o.default.isFunction(t)&&t(),delete n[e]})),u=o.default.keys(r),o.default.forEach(u,(function(e){var t=r[e];o.default.isNil(t)||clearInterval(t),delete r[e]})),(0,a.runInAction)((function(){(0,i.forgetIdToken)(),o.default.forEach(e.appContext,(function(t){t!==e&&o.default.isFunction(t.cleanup)&&t.cleanup()}))}))}}])&&u(t.prototype,n),r&&u(t,r),e}();t.Cleaner=c},976:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.showdown=new f(e)},t.Showdown=void 0;var r=a(n(5)),o=a(n(977));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s={h1:"ui large header clearfix",h2:"ui medium header clearfix",ul:"ui list undo-line-height",li:"ui item undo-line-height",p:"ui undo-line-height clearfix",img:"ui left floated image clearfix mb2 mr2"},l=Object.keys(s).map((function(e){return{type:"output",regex:new RegExp("<".concat(e,"(.*)>"),"g"),replace:"<".concat(e,' class="').concat(s[e],'" $1>')}})),f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.appContext=t,this.converter=new o.default.Converter({extensions:i(l)}),this.converter.setFlavor("vanilla"),this.converter.setOption("parseImgDimensions",!0)}var t,n,a;return t=e,(n=[{key:"convert",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="".concat(e,"\n\n");return r.default.forEach(t,(function(e,t){n="".concat(n,"[").concat(t,"]: ").concat(e,"\n")})),this.converter.makeHtml(n)}}])&&c(t.prototype,n),a&&c(t,a),e}();t.Showdown=f},978:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.userApiKeysStore=s.create({},e)},t.UserApiKeysStore=void 0;var o,a=n(8),i=n(15),u=(o=n(980))&&o.__esModule?o:{default:o};function c(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}var s=i.BaseStore.named("UserApiKeysStore").props({userApiKeysStores:a.types.optional(a.types.map(u.default),{})}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return(t=r.mark((function t(){var n,o,c;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=(0,a.getEnv)(e).userStore,(0,i.isStoreReady)(n)){t.next=4;break}return t.next=4,n.load();case 4:if(o=n.user,c=u.default.create({uid:o.uid}),(0,i.isStoreReady)(c)){t.next=9;break}return t.next=9,c.load();case 9:e.runInAction((function(){e.userApiKeysStores.put(c)}));case 10:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){c(a,r,o,i,u,"next",e)}function u(e){c(a,r,o,i,u,"throw",e)}i(void 0)}))})();var t},getApiKeysStore:function(t){var n=e.userApiKeysStores.get(t);return n||(e.userApiKeysStores.put(u.default.create({uid:t})),n=e.userApiKeysStores.get(t)),n},getCurrentUserApiKeysStore:function(){var t=(0,a.getEnv)(e).userStore.user;return e.getApiKeysStore(t.id)},cleanup:function(){e.user=void 0,t()}}})).views((function(e){return{get empty(){return 0===e.userApiKeysStores.size}}}));t.UserApiKeysStore=s},979:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toErr=t.Err=void 0;var r=n(8),o=n(27),a=r.types.model("Err",{message:"",code:"",requestId:""});t.Err=a;t.toErr=function(e){var t=(0,o.parseError)(e);return a.create({message:t.message||"",code:t.code||"",requestId:t.toErr||""})}},98:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInteractive=f,t.toMobxFormFieldProps=p,t.isConditionTrue=d,t.toMobxFormFields=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=[];if(0===t.length)return r;var a=t.slice();for(;a.length>0;){var u=a.shift(),c=u.name;if(f(u)&&d(u.condition,n)){var s=n[c],l=p(u,s);r.push(l);var m=u.children;if(o.default.isObject(m)){var v=e(m,n);v.length>0&&r.push.apply(r,i(v))}}}return r},t.applyMarkdown=function(e){var t=e.inputManifest,n=e.showdown,r=e.assets,i=void 0===r?{}:r,u=o.default.cloneDeep((0,a.getSnapshot)(t));return u.sections=function e(t){return o.default.isNil(t)?t:o.default.isArray(t)?o.default.map(t,(function(t){return e(t)})):o.default.isObject(t)?(Object.keys(t).forEach((function(r){if("desc"===r){var a=t[r];o.default.isNil(a)||(t.desc=n.convert(a,i))}else t[r]=e(t[r])})),t):t}(u.sections),u},t.visit=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},r=[];if(0===t.length)return r;var a=t.slice();for(;a.length>0;){var i=a.shift();r.push(n(i));var u=i.children;if(o.default.isObject(u)){var c=e(u,n);c.length>0&&c.forEach((function(e){r.push(n(e))}))}}return r},t.InputManifest=void 0;var r,o=(r=n(5))&&r.__esModule?r:{default:r},a=n(8);function i(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=a.types.model("InputManifest",{sections:a.types.optional(a.types.array(a.types.frozen()),[])}).actions((function(e){return{}})).views((function(e){return{get flattened(){return o.default.flatten(o.default.map(e.sections,(function(e){return m(e.children)})))},get names(){return o.default.map(e.flattened,(function(e){return e.name}))},get empty(){return 0===e.flattened.length},getSectionFlattened:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.default.flatten(m(e.children))}}}));function f(e){return!o.default.isUndefined(e)&&(o.default.isNil(e.nonInteractive)||!1===e.nonInteractive)}function d(e,t){return!!o.default.isEmpty(e)||"true"===o.default.template(e)(t)}function p(e,t){if(!f(e))return{};var n={},r=function(e,t){o.default.isUndefined(t)||(n[e]=t)},a=e.name,i=e.title,u=e.placeholder,l=e.rules,d=e.extra,p=void 0===d?{}:d,m=e.desc,v=e.disabled,y=e.options,h=e.yesLabel,g=e.noLabel;return r("name",a),r("value",o.default.isUndefined(t)?e.default:t),r("label",i),r("placeholder",u),r("rules",l),r("default",o.default.isUndefined(e.default)?t:e.default),r("extra",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o.default.cloneDeep(p),{explain:m,options:y,yesLabel:h,noLabel:g})),r("disabled",v),n}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];if(0===e.length)return t;for(var n=e.slice();n.length>0;){var r=n.shift();f(r)&&t.push(r);var a=r.children;if(o.default.isObject(a)){var i=m(a);i.length>0&&i.forEach((function(e){t.push(e)}))}}return t}t.InputManifest=l},980:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=n(8),i=n(43),u=n(15),c=(o=n(981))&&o.__esModule?o:{default:o};function s(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){s(a,r,o,i,u,"next",e)}function u(e){s(a,r,o,i,u,"throw",e)}i(void 0)}))}}var f=u.BaseStore.named("ApiKeysStore").props({uid:a.types.identifier,apiKeys:a.types.optional(a.types.map(c.default),{})}).actions((function(e){var t=e.cleanup;return{doLoad:function(){return l(r.mark((function t(){var n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.getApiKeys)(!e.isStoreForCurrentUser()&&{uid:e.uid});case 2:n=t.sent,e.runInAction((function(){var t={};n.forEach((function(e){var n=c.default.create(e);t[n.id]=n})),e.apiKeys.replace(t)}));case 4:case"end":return t.stop()}}),t)})))()},createNewApiKey:function(){return l(r.mark((function t(){var n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.createNewApiKey)(!e.isStoreForCurrentUser()&&{uid:e.uid});case 2:n=t.sent,e.runInAction((function(){e.apiKeys.put(c.default.create(n))}));case 4:case"end":return t.stop()}}),t)})))()},revokeApiKey:function(t){return l(r.mark((function n(){var o;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,i.revokeApiKey)(t,!e.isStoreForCurrentUser()&&{uid:e.uid});case 2:o=n.sent,e.runInAction((function(){e.apiKeys.put(c.default.create(o))}));case 4:case"end":return n.stop()}}),n)})))()},cleanup:function(){e.user=void 0,t()}}})).views((function(e){return{get empty(){return 0===e.apiKeys.size},get list(){var t=[];return e.apiKeys.forEach((function(e){return t.push(e)})),t},isStoreForCurrentUser:function(){return(0,a.getEnv)(e).userStore.user.uid===e.uid}}}));t.default=f},981:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=n(8),a=(r=n(5))&&r.__esModule?r:{default:r};var i=o.types.model("ApiKey",{id:o.types.identifier,uid:"",updatedAt:"",status:"",createdAt:"",expiryTime:0,key:o.types.optional(o.types.string,"")}).views((function(e){return{get effectiveStatus(){return"active"!==e.status?e.status:e.expiryTime>0&&a.default.now()>e.expiryTime?"expired":e.status},get isActive(){return"active"===e.effectiveStatus},get isRevoked(){return"revoked"===e.effectiveStatus}}}));t.default=i},982:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextItems=function(e){e.authentication=v.create({},e)},t.Authentication=void 0;var o=f(n(5)),a=n(8),i=f(n(983)),u=n(27),c=n(43),s=f(n(528)),l=n(529);function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){d(a,r,o,i,u,"next",e)}function u(e){d(a,r,o,i,u,"throw",e)}i(void 0)}))}}function m(){var e=(0,u.removeFragmentParams)(document.location,["id_token","access_token","token_type","expires_in"]);window.history.replaceState({},document.title,e)}var v=a.types.model("Authentication",{processing:!1,selectedAuthenticationProviderId:""}).actions((function(e){return{runInAction:function(e){return e()},cleanup:function(){e.selectedAuthenticationProvider&&e.selectedAuthenticationProvider.cleanup(),e.clearTokens()},clearTokens:function(){o.default.forEach(s.default,(function(e){return u.storage.removeItem(e)}))},setSelectedAuthenticationProviderId:function(t){e.selectedAuthenticationProviderId=t},getIdToken:function(){return p(r.mark((function e(){var t,n,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=(0,u.getFragmentParam)(document.location,"id_token"))&&m(),n=u.storage.getItem(s.default.appIdToken),o=t||n,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})))()},getIdTokenInfo:function(){return p(r.mark((function t(){var n,a,u,c;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getIdToken();case 2:if(n=t.sent,a="notFound",n)try{u=(0,i.default)(n),c=1e3*o.default.get(u,"exp",0),a=Date.now()>=c?"expired":"notExpired"}catch(r){a="corrupted"}return t.abrupt("return",{idToken:n,decodedIdToken:u,status:a});case 6:case"end":return t.stop()}}),t)})))()},saveIdToken:function(e){return p(r.mark((function t(){var n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:u.storage.setItem(s.default.appIdToken,e),n=e&&(0,i.default)(e),(0,c.setIdToken)(e,n);case 3:case"end":return t.stop()}}),t)})))()},login:function(t){return p(r.mark((function n(){var i,u,c,s,f;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.username,u=t.password,!e.shouldCollectUserNamePassword){n.next=15;break}return n.next=4,e.selectedAuthenticationProvider.login({username:i,password:u,authenticationProviderId:e.selectedAuthenticationProviderId});case 4:if(c=n.sent,s=(c||{}).idToken,!o.default.isEmpty(s)){n.next=8;break}throw l.boom.incorrectImplementation("There is a problem with the implementation of the server side code. The id token is not returned.");case 8:return n.next=10,e.saveIdToken(s);case 10:return f=(0,a.getEnv)(e).appRunner,n.next=13,f.run();case 13:n.next=17;break;case 15:return n.next=17,e.selectedAuthenticationProvider.login();case 17:case"end":return n.stop()}}),n)})))()},logout:function(){var t=arguments;return p(r.mark((function n(){var o,a,i;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=t.length>0&&void 0!==t[0]?t[0]:{},a=o.autoLogout,i=void 0!==a&&a,e.cleanup(),n.abrupt("return",e.selectedAuthenticationProvider.logout({autoLogout:i}));case 3:case"end":return n.stop()}}),n)})))()}}})).views((function(e){return{get isCognitoUserPool(){return"cognito_user_pool"===e.selectedAuthenticationProvider.type},get selectedAuthenticationProvider(){return(0,a.getEnv)(e).authenticationProviderPublicConfigsStore.toAuthenticationProviderFromId(e.selectedAuthenticationProviderId)},get shouldCollectUserNamePassword(){var t=e.selectedAuthenticationProvider;return t&&"submit"===t.credentialHandlingType}}}));t.Authentication=v},989:function(e,t,n){var r={"./ar":534,"./ar.js":534,"./az":535,"./az.js":535,"./be":536,"./be.js":536,"./bg":537,"./bg.js":537,"./bs":538,"./bs.js":538,"./ca":539,"./ca.js":539,"./cs":540,"./cs.js":540,"./cy":541,"./cy.js":541,"./da":542,"./da.js":542,"./de":543,"./de.js":543,"./el":544,"./el.js":544,"./en":392,"./en.js":392,"./es":545,"./es.js":545,"./et":546,"./et.js":546,"./eu":547,"./eu.js":547,"./fa":548,"./fa.js":548,"./fi":549,"./fi.js":549,"./fr":550,"./fr.js":550,"./hr":551,"./hr.js":551,"./hu":552,"./hu.js":552,"./id":553,"./id.js":553,"./it":554,"./it.js":554,"./ja":555,"./ja.js":555,"./ka":556,"./ka.js":556,"./ko":557,"./ko.js":557,"./lt":558,"./lt.js":558,"./lv":559,"./lv.js":559,"./mk":560,"./mk.js":560,"./mn":561,"./mn.js":561,"./ms":562,"./ms.js":562,"./nb_NO":563,"./nb_NO.js":563,"./nl":564,"./nl.js":564,"./pl":565,"./pl.js":565,"./pt":566,"./pt.js":566,"./pt_BR":567,"./pt_BR.js":567,"./ro":568,"./ro.js":568,"./ru":569,"./ru.js":569,"./se":570,"./se.js":570,"./sl":571,"./sl.js":571,"./sq":572,"./sq.js":572,"./sr":573,"./sr.js":573,"./sv":574,"./sv.js":574,"./tr":575,"./tr.js":575,"./ua":576,"./ua.js":576,"./uk":577,"./uk.js":577,"./vi":578,"./vi.js":578,"./zh":579,"./zh.js":579,"./zh_TW":580,"./zh_TW.js":580};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=989}},[[792,1,2]]]);
//# sourceMappingURL=main.4775adaf.chunk.js.map